{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Github Profile","text":""},{"location":"#self-intro","title":"Self intro","text":"<ul> <li>automotive software engineer @BOSCH</li> <li>maker/PCB/Soldering</li> <li>vim/cli lover \ud83e\udd70</li> <li>Zig fan</li> </ul>"},{"location":"#tech-stack","title":"Tech-stack","text":""},{"location":"#github-status","title":"Github-status","text":""},{"location":"#wakatime-status","title":"Wakatime-status","text":""},{"location":"blog/","title":"Blog","text":""},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/","title":"100 [sw][fpga][xilinx][petalinux] customizing PYNQ","text":""},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#repositories","title":"Repositories","text":"<ul> <li>https://github.com/konosubakonoakua/PYNQ-IMPCAS-ZU9</li> <li>https://github.com/konosubakonoakua/PYNQ-ANTMINER-T9</li> </ul>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#how-tos","title":"How-Tos","text":""},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#how-to-setup-env","title":"How to setup env","text":"<pre><code>source /tools/Xilinx/Vitis/2024.1/settings64.sh\nsource /tools/Petalinux/2024.1/settings.sh\n</code></pre>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#how-to-umount-iamges-before-building-again","title":"How to Umount iamges before building again","text":"<pre><code>cd PYNQ/sdbuild/\nmake unmount  # Unmount without deleting\nmake delete   # Unmount and delete failed images\nmake clean    # Remove all build artifacts and staged images\n</code></pre>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#how-to-customize-bsp","title":"How to customize BSP","text":"#### Kernel  <pre><code>meta-user/recipes-kernel/linux/linux-xlnx/\n</code></pre> #### Device-tree <pre><code>meta-user/recipes-bsp/device-tree/files/system-user.dtsi\n</code></pre> #### Boot files <pre><code>meta-user/recipes-bsp/fsbl/\n</code></pre>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#how-to-create-your-packages","title":"How to create your packages","text":"#### Package Structure  - **Makefile**: Defines `PACKAGE_BUILD_${PACKAGE_NAME}` targets - **pre.sh**: Script run before chroot (file staging) - **qemu.sh**: Script run inside chroot (installation) - **post.sh**: Script run after chroot (cleanup)  <pre><code># Example package directory structure\npackages/\n\u2514\u2500\u2500 my_board_package/\n    \u251c\u2500\u2500 Makefile\n    \u251c\u2500\u2500 pre.sh\n    \u251c\u2500\u2500 qemu.sh\n    \u2514\u2500\u2500 post.sh\n</code></pre> #### Referencing Custom Packages Add custom packages to the spec file: <pre><code>STAGE4_PACKAGES_${BOARD} := pynq my_board_package\n</code></pre>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#how-to-use-prebuilt-artifacts","title":"How to use prebuilt artifacts","text":"<p>Download them here: https://www.pynq.io/boards.html <pre><code># For rebuilding all SD cards, both arm and aarch64 root filesystems\n# may be required depending on boards being targetted.\ncp pynq_rootfs.&lt;arm|aarch64&gt;.tar.gz &lt;PYNQ repository&gt;/sdbuild/prebuilt/pynq_rootfs.&lt;arm|aarch64&gt;.tar.gz\ncp pynq-&lt;version&gt;.tar.gz            &lt;PYNQ repository&gt;/sdbuild/prebuilt/pynq_sdist.tar.gz\n</code></pre></p>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#how-to-disable-fpga-manager","title":"How to disable FPGA Manager","text":"<p>In <code>&lt;BORAD&gt;.spec</code>: <pre><code>FPGA_MANAGER_${BOARD} := 1\n</code></pre></p>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#how-to-change-hostname","title":"How to change hostname","text":"<ul> <li><code>/boot/boot.py</code> <pre><code># Example boot.py modifications accessible at /boot/boot.py\nimport os\n\n# Set hostname\nos.system('hostnamectl set-hostname my-custom-board')\n</code></pre></li> <li><code>pynq_hostname.sh</code></li> </ul>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#how-to-understand-xsas-in-petalinux_bsphardware_project-and-base","title":"How to understand XSAs in <code>petalinux_bsp/hardware_project/</code> and <code>base/</code>","text":"Aspect hardware_project/\u00a0XSA base/\u00a0XSA Purpose BSP generation for boot files Runtime overlay for PYNQ applications Usage Creates Petalinux BSP with\u00a0<code>petalinux-config --get-hw-description</code> in\u00a0<code>create_bsp.sh:35-36</code> Loaded by PYNQ Overlay class using\u00a0<code>RuntimeMetadataParser</code> in\u00a0<code>embedded_device.py:268-275</code> Build Stage Stage 1-2: Creates boot environment Stage 4: Installed as overlay package Content Complete hardware platform (PS + PL) PL design with PYNQ IP interfaces <pre><code>hardware_project/design.xsa  \u2192  BSP Creation  \u2192  Boot Files  \nbase/base.xsa               \u2192  PYNQ Package  \u2192  Runtime Overlay  \n</code></pre>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#how-to-add-base-overlay","title":"How to add base overlay","text":"<pre><code>Pynq-IMPCAS-ZU9/base/\n\u251c\u2500\u2500 base.bit\n\u251c\u2500\u2500 base.hwh\n\u251c\u2500\u2500 base.py\n\u251c\u2500\u2500 base.xsa\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 Makefile\n\u2514\u2500\u2500 notebooks\n    \u2514\u2500\u2500 overlay_axigpio.ipynb\n</code></pre> <ul> <li>You must notice that there's a <code>__init__.py</code> in <code>base/</code>.</li> <li><code>notebooks/*</code> will be copied to <code>/home/xilinx/jupyter_notebooks/base/</code>.</li> <li>There are 4 mandatory files: <code>base.bit</code>, <code>base.hwh</code>, <code>base.py</code> and <code>__init__.py</code>.</li> </ul>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#how-to-create-a-new-hardware-design-for-pynq","title":"How to create a new hardware design for pynq","text":"<ul> <li>https://discuss.pynq.io/t/tutorial-creating-a-hardware-design-for-pynq/145</li> </ul>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#comments","title":"Comments","text":""},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#konosubakonoakua-2025-12-29t060317z","title":"konosubakonoakua \u00b7 2025-12-29T06:03:17Z","text":""},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#issues","title":"Issues","text":""},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#system-userdtsi","title":"system-user.dtsi","text":"<p>Put into <code>~/PYNQ/boards/impcas_zu9/petalinux_bsp/meta-user/recipes-bsp/device-tree/files/system-user.dtsi</code></p> <pre><code>/include/ \"system-conf.dtsi\"\n/ {\n\n    chosen {\n        bootargs = \"earlycon console=ttyPS0,115200 root=/dev/mmcblk0p2 ro rootwait clk_ignore_unused uio_pdrv_genirq.of_id=generic-uio\";\n        stdout-path = \"serial0:115200n8\";\n    };\n\n    fclk0: fclk0 {\n        status = \"okay\";\n        compatible = \"xlnx,fclk\";\n        clock-names = \"fclk0\";\n        clocks = &lt;&amp;zynqmp_clk PL0_REF&gt;;\n    };\n\n};\n\n&amp;sdhci1 {\n    no-1-8-v; // 1.8V to 3.3V level shifter (i.e. using LVCMOS18, but sd connector is driven by 3.3V)\n    disable-wp;\n    disable-cd;\n};\n\n&amp;gem3 {\n    phy-handle = &lt;&amp;phyc&gt;;\n    phyc: phy@c {\n        reg = &lt;0xc&gt;;\n        ti,rx-internal-delay = &lt;0x8&gt;;\n        ti,tx-internal-delay = &lt;0xa&gt;;\n        ti,fifo-depth = &lt;0x1&gt;;\n        ti,dp83867-rxctrl-strap-quirk;\n    };\n    /* Cleanup from RevA */\n    // /delete-node/ phy@21;\n};\n</code></pre>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#dhcp","title":"DHCP","text":""},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#modulenotfounderror-no-module-named-pynqoverlaysbase","title":"ModuleNotFoundError: No module named 'pynq.overlays.base'","text":"<p>There's no <code>base.py</code> in your board folder.</p> <pre><code>import pynq\nimport pynq.lib\nfrom pynq.lib.logictools import TraceAnalyzer\n\n\nclass BaseOverlay(pynq.Overlay):\n    \"\"\"Custom base overlay for your board\"\"\"\n\n    def __init__(self, bitfile, **kwargs):\n        super().__init__(bitfile, **kwargs)\n        if self.is_loaded():\n            # Configure GPIO\n            self._configure_gpio()\n\n            # Configure IOPs\n            self._configure_iops()\n\n            # Configure subsystems\n            self._configure_subsystems()\n\n    def _configure_gpio(self):\n        # Map GPIO channels and set directions\n        pass\n\n    def _configure_iops(self):\n        # Set up MicroBlaze processors\n        pass\n\n    def _configure_subsystems(self):\n        # Initialize audio, video, trace analyzers\n        pass\n</code></pre>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#hostname","title":"Hostname","text":"<pre><code>sudo pynq_hostname.sh &lt;new_hostname&gt;\nsudo shutdown -r now\n</code></pre>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#konosubakonoakua-2025-12-29t085723z","title":"konosubakonoakua \u00b7 2025-12-29T08:57:23Z","text":""},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#references","title":"References","text":""},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#makefile-targets-reference","title":"Makefile Targets Reference","text":"Target Description make Build complete SD card images for all boards make BOARDS= Build image for specific board make BOARDDIR= Build from external board repository make boot_files Generate only boot files (BOOT.BIN, image.ub) make bsp Generate Petalinux BSP package make sysroot Generate SDK sysroot for cross-compilation make clean Remove all build artifacts make unmount Unmount any mounted images make delete Unmount and delete failed images"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#environment-variables","title":"Environment Variables","text":"Variable Purpose Default BOARDDIR External board repository path /boards/ BOARDS Space-separated list of boards to build All boards in BOARDDIR REBUILD_PYNQ_ROOTFS Force rebuild of base rootfs False REBUILD_PYNQ_SDIST Force rebuild of PYNQ source distribution False PYNQ_SDIST Path to prebuilt PYNQ sdist tarball prebuilt/pynq_sdist.tar.gz PYNQ_ROOTFS Path to prebuilt rootfs tarball prebuilt/pynq_rootfs..tar.gz PYNQ_UBUNTU_REPO Ubuntu package repository URL https://ports.ubuntu.com"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#official-tutorial","title":"official tutorial","text":"<ul> <li>https://deepwiki.com/Xilinx/PYNQ/9.3-adding-board-support</li> <li>https://www.pynq.io/boards.html</li> </ul>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#3rd-tutorials","title":"3rd tutorials","text":"<ul> <li>https://github.com/kangyuzhe666/zynq7010-pynq-2.5</li> <li>https://blog.csdn.net/BUBUBUBUBUBUBUB/article/details/139840329</li> <li>https://zhutmost.com/post/pynq-compile</li> <li>https://blog.csdn.net/qq_41873311/article/details/124284037</li> <li>https://github.com/WangHaoZhe/PYNQ-Tutorial</li> <li>https://www.dspsandbox.org/building-pynq-for-cora-z7-07z/</li> <li>https://discuss.pynq.io/t/build-pynq-2-4-sd-card-image-for-zedboard-v2018-3/2702</li> <li>https://gist.github.com/PeterOgden/9a5054a06408d2bd711d6de563281930</li> <li>http://www.hellofpga.com/index.php/2023/08/18/pynq_part1/</li> <li>http://www.hellofpga.com/index.php/2023/08/19/pynq_vivado</li> <li>http://www.hellofpga.com/index.php/2023/08/21/pynq_img</li> </ul>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#konosubakonoakua-2025-12-30t051533z","title":"konosubakonoakua \u00b7 2025-12-30T05:15:33Z","text":""},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#issues_1","title":"Issues","text":""},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#error-module-plnx_vars-has-no-attribute-copydir","title":"[ERROR] module 'plnx_vars' has no attribute 'CopyDir'","text":"<ul> <li>It's a petalinux tftpboot bug in 2024.1 version</li> </ul> <pre><code>sudo rm -rf /tftpboot\n</code></pre>"},{"location":"notes/posts/100%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%5Bpetalinux%5D%20customizing%20PYNQ/#kernel-panic-not-syncing-vfs-unable-to-mount-root-fs-on-unknown-block17910","title":"Kernel Panic - not syncing: VFS: Unable to mount root fs on unknown-block(179,10)","text":"<ul> <li>Case 1: device-tree sd-card node problem</li> <li>Add patch</li> <li>Case 2: damaged rootfs partition on sd-card</li> <li>Reduce block size, e.g. <code>bs=1M</code></li> </ul>"},{"location":"notes/posts/101%23%5Bhw%5D%5Bvga%5D%5Bdvi%5D%20video%20display%20dummies/","title":"101 [hw][vga][dvi] video display dummies","text":""},{"location":"notes/posts/101%23%5Bhw%5D%5Bvga%5D%5Bdvi%5D%20video%20display%20dummies/#75-ohm-resistor-any-resistor-between-50-and-150-ohms-is-okay","title":"75 Ohm Resistor (Any resistor between 50 and 150 ohms is okay)","text":"<p>[!TIP] simulating load on one signal, without soldering, or any extra hardware. I simply insert the resistor \u201475 \u03a9 is the ideal spec\u2014 in the DVI output port to make contact between C1-C5 (analog red - analog ground), or C2-C5 (green - ground), or C3-C5 (blue - ground).</p> <p> </p>"},{"location":"notes/posts/101%23%5Bhw%5D%5Bvga%5D%5Bdvi%5D%20video%20display%20dummies/#not-working-with-rgb-connect-with-75-ohm-but-need-also-field-row-sync","title":"not working with rgb connect with 75 Ohm, but need also field &amp; row sync.","text":"<p>[!NOTE] Not working with external video card, but ok with internal video card.</p> <p> </p>"},{"location":"notes/posts/101%23%5Bhw%5D%5Bvga%5D%5Bdvi%5D%20video%20display%20dummies/#comments","title":"Comments","text":""},{"location":"notes/posts/101%23%5Bhw%5D%5Bvga%5D%5Bdvi%5D%20video%20display%20dummies/#konosubakonoakua-2024-09-29t100117z","title":"konosubakonoakua \u00b7 2024-09-29T10:01:17Z","text":""},{"location":"notes/posts/101%23%5Bhw%5D%5Bvga%5D%5Bdvi%5D%20video%20display%20dummies/#references","title":"References","text":"<ul> <li>https://blog.zorinaq.com/the-5-second-vga-dummy-plug/</li> </ul>"},{"location":"notes/posts/102%23%5Bsw%5D%5Blinux%5D%5Bubuntu%5D%20remote%20desktop%20on%20ubuntu/","title":"102 [sw][linux][ubuntu] remote desktop on ubuntu","text":""},{"location":"notes/posts/102%23%5Bsw%5D%5Blinux%5D%5Bubuntu%5D%20remote%20desktop%20on%20ubuntu/#turn-on-sharing","title":"Turn on Sharing","text":""},{"location":"notes/posts/102%23%5Bsw%5D%5Blinux%5D%5Bubuntu%5D%20remote%20desktop%20on%20ubuntu/#allow-locked-remote-desktop","title":"Allow Locked Remote Desktop","text":"<p>[!IMPORTANT] If you skip this step, you cannot use rdp without login..., It's a dead loop. Also, this plugin don't work until you login, In another word, can't reboot then login via rdp. If you want to use rdp after boot, I recommend that login via <code>RustDesktop</code>, then use RDP. Or just use RustDesktop.</p> <pre><code>sudo apt install gnome-shell-extension-manager\n</code></pre>"},{"location":"notes/posts/102%23%5Bsw%5D%5Blinux%5D%5Bubuntu%5D%20remote%20desktop%20on%20ubuntu/#comments","title":"Comments","text":""},{"location":"notes/posts/102%23%5Bsw%5D%5Blinux%5D%5Bubuntu%5D%20remote%20desktop%20on%20ubuntu/#konosubakonoakua-2024-09-30t052016z","title":"konosubakonoakua \u00b7 2024-09-30T05:20:16Z","text":""},{"location":"notes/posts/102%23%5Bsw%5D%5Blinux%5D%5Bubuntu%5D%20remote%20desktop%20on%20ubuntu/#references","title":"references","text":"<ul> <li>https://cn.linux-console.net/?p=8673</li> <li>https://losst.pro/en/how-to-enable-remote-desktop-in-ubuntu-22-04-23-10</li> </ul>"},{"location":"notes/posts/103%23%5Bsw%5D%5Bvm%5D%5Blinux%5D%20virtualbox%20shared%20folder%20on%20windows/","title":"103 [sw][vm][linux] virtualbox shared folder on windows","text":""},{"location":"notes/posts/103%23%5Bsw%5D%5Bvm%5D%5Blinux%5D%20virtualbox%20shared%20folder%20on%20windows/#setup-shared-folder-on-host","title":"Setup shared folder on host","text":""},{"location":"notes/posts/103%23%5Bsw%5D%5Bvm%5D%5Blinux%5D%20virtualbox%20shared%20folder%20on%20windows/#add-user-to-vboxsf-group","title":"Add user to <code>vboxsf</code> group","text":"<pre><code>sudo usermod -aG vboxsf $(whoami)\nnewgrp vboxsf\n</code></pre>"},{"location":"notes/posts/103%23%5Bsw%5D%5Bvm%5D%5Blinux%5D%20virtualbox%20shared%20folder%20on%20windows/#reboot","title":"reboot","text":""},{"location":"notes/posts/103%23%5Bsw%5D%5Bvm%5D%5Blinux%5D%20virtualbox%20shared%20folder%20on%20windows/#comments","title":"Comments","text":""},{"location":"notes/posts/103%23%5Bsw%5D%5Bvm%5D%5Blinux%5D%20virtualbox%20shared%20folder%20on%20windows/#konosubakonoakua-2024-10-04t185905z","title":"konosubakonoakua \u00b7 2024-10-04T18:59:05Z","text":""},{"location":"notes/posts/103%23%5Bsw%5D%5Bvm%5D%5Blinux%5D%20virtualbox%20shared%20folder%20on%20windows/#vmware","title":"vmware","text":"<p>[!TIP] In case you also need to kown how to do it in vmware. https://github.com/konosubakonoakua/blog/issues/106#issuecomment-2394337749</p>"},{"location":"notes/posts/104%23%5Bsw%5D%5Bhw%5D%5Bvisa%5D%5Binstrument%5D%20learn%20Test-and-Measurement-Protocols/","title":"104 [sw][hw][visa][instrument] learn Test-and-Measurement-Protocols","text":""},{"location":"notes/posts/104%23%5Bsw%5D%5Bhw%5D%5Bvisa%5D%5Binstrument%5D%20learn%20Test-and-Measurement-Protocols/#references","title":"References","text":"<ul> <li>Making-Sense-of-Test-and-Measurement-Protocols</li> <li>lxistandard.org</li> <li>vxi spec</li> </ul>"},{"location":"notes/posts/104%23%5Bsw%5D%5Bhw%5D%5Bvisa%5D%5Binstrument%5D%20learn%20Test-and-Measurement-Protocols/#comments","title":"Comments","text":""},{"location":"notes/posts/104%23%5Bsw%5D%5Bhw%5D%5Bvisa%5D%5Binstrument%5D%20learn%20Test-and-Measurement-Protocols/#konosubakonoakua-2025-11-10t023349z","title":"konosubakonoakua \u00b7 2025-11-10T02:33:49Z","text":"<ul> <li>https://goughlui.com/2021/05/15/tutorial-understanding-the-scpi-status-model-with-pyvisa-examples/</li> </ul>"},{"location":"notes/posts/105%23%5Bhw%5D%5Bfpga%5D%20digilent%20jtag%20driver%20setup%20on%20windows/","title":"105 [hw][fpga] digilent jtag driver setup on windows","text":""},{"location":"notes/posts/105%23%5Bhw%5D%5Bfpga%5D%20digilent%20jtag%20driver%20setup%20on%20windows/#usb-no-response-after-cable-plug-in","title":"USB no response after cable plug in","text":"<ul> <li>change to another usb port (back port on mother board is the best if PC)</li> </ul>"},{"location":"notes/posts/105%23%5Bhw%5D%5Bfpga%5D%20digilent%20jtag%20driver%20setup%20on%20windows/#normal-driver-status","title":"normal driver status","text":"<p>[!CAUTION] The Description is <code>USB Serial Converter</code> &amp; name is <code>Digilent USB Device</code> It's different name from linux version which is <code>Digilent Jtag ...</code></p>"},{"location":"notes/posts/105%23%5Bhw%5D%5Bfpga%5D%20digilent%20jtag%20driver%20setup%20on%20windows/#reinstall-digilent-jtag-driver","title":"Reinstall digilent jtag driver","text":"<pre><code>C:\\Xilinx\\Vivado\\2024.1\\data\\xicom\\cable_drivers\\nt64\\digilent\\install_digilent.exe\n</code></pre>"},{"location":"notes/posts/105%23%5Bhw%5D%5Bfpga%5D%20digilent%20jtag%20driver%20setup%20on%20windows/#comments","title":"Comments","text":""},{"location":"notes/posts/105%23%5Bhw%5D%5Bfpga%5D%20digilent%20jtag%20driver%20setup%20on%20windows/#konosubakonoakua-2024-09-30t200049z","title":"konosubakonoakua \u00b7 2024-09-30T20:00:49Z","text":""},{"location":"notes/posts/105%23%5Bhw%5D%5Bfpga%5D%20digilent%20jtag%20driver%20setup%20on%20windows/#virtual-box","title":"Virtual Box","text":"<p> If you have driver that not working on windows, neither will work on vbox. You will encounter attachment errors when trying to attach usb to vbox.</p>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/","title":"106 [sw][virtual machine] vmware install on windows","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#download-link-need-broadcom-account","title":"download link (need broadcom account)","text":"<ul> <li>https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware%20Workstation%20Pro&amp;freeDownloads=true</li> </ul>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#another-download-link-without-vm-tool","title":"another download link (without vm tool)","text":"<ul> <li>https://softwareupdate.vmware.com/cds/vmw-desktop/ws/</li> </ul>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#get-vm-tools-automatically","title":"get vm-tools automatically","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#comments","title":"Comments","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#konosubakonoakua-2024-10-04t153348z","title":"konosubakonoakua \u00b7 2024-10-04T15:33:48Z","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#ubuntu22-freezes-or-has-black-screen-after-inactivity","title":"ubuntu22 freezes or has black screen after inactivity","text":"<p>[!CAUTION] Don't use vmware 17.6.0 version with linux kernel 6.8 Freeze confirmed also on 17.5.2</p>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#broadcom-community-threads","title":"broadcom community threads","text":"<ul> <li>vm-freezes-after-inactivity</li> <li>solution (maybe)</li> </ul>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#try-to-disable-3d-acceleration-idk-whether-it-works","title":"Try to disable 3d acceleration. (IDK whether it works)","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#konosubakonoakua-2024-10-04t182744z","title":"konosubakonoakua \u00b7 2024-10-04T18:27:44Z","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#vmware-shared-folder-on-windows","title":"vmware shared folder on windows","text":"<ul> <li>offcial guide</li> <li> <p>Setting-&gt;shared folder-&gt;new-&gt;properties-&gt;fill name&amp;path-&gt;ok      ![image](../assets/106/1.png)     </p> </li> <li> <p>Linux Side:   <pre><code>sudo mkdir -p /mnt/winshared\nsudo chown rf:rf /mnt/winshared\n/usr/bin/vmhgfs-fuse .host:/ /mnt/winshared -o subtype=vmhgfs-fuse\n</code></pre></p> </li> <li>In case that you want to use systemd: https://github.com/konosubakonoakua/blog/issues/117#issue-2607557649</li> </ul>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#konosubakonoakua-2024-10-04t204602z","title":"konosubakonoakua \u00b7 2024-10-04T20:46:02Z","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#disk-optimization","title":"Disk Optimization","text":"<ul> <li>Fragment cleanup &amp; Compact (on host, not helpful)</li> <li> <p>both need extras disk space on host, be careful  </p> </li> <li> <p>disk shrink (on guest, helpful)   <pre><code>sudo vmware-toolbox-cmd disk shrink /\n</code></pre>     ![image](../assets/106/2.png)    </p> </li> <li> <p>References</p> </li> <li>https://www.cnblogs.com/fensnote/p/13436463.html</li> </ul>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#konosubakonoakua-2024-10-05t124149z","title":"konosubakonoakua \u00b7 2024-10-05T12:41:49Z","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#clipboard-not-synced-when-connected-via-rdp","title":"clipboard not synced when connected via RDP","text":"<p>https://github.com/vmware/open-vm-tools/issues/740</p>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#konosubakonoakua-2024-10-08t083224z","title":"konosubakonoakua \u00b7 2024-10-08T08:32:24Z","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#turn-off-hyper-v-if-getting-sluggish","title":"Turn off Hyper-V if getting sluggish","text":"<p>virtualization-apps-not-work-with-hyper-v <pre><code>bcdedit /set hypervisorlaunchtype off\n</code></pre> or <pre><code>Disable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V-Hypervisor\n</code></pre> then reboot.</p>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#konosubakonoakua-2024-10-25t082315z","title":"konosubakonoakua \u00b7 2024-10-25T08:23:15Z","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#vmware-workstation-cannot-connect-to-the-virtual-machine","title":"VMware Workstation cannot connect to the virtual machine","text":"<p>[!CAUTION] VMware Workstation cannot connect to the virtual machine. Make sure you have rights to run the program, access all directories the program uses, and access all directories for temporary files.</p>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#the-system-cannot-find-the-file-specified","title":"The system cannot find the file specified.","text":"<p>[!CAUTION] Failed to connect pipe to virtual machine: The system cannot find the file specified.</p>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#solutions","title":"Solutions","text":"<ul> <li>run vmware as admin</li> <li>install common vcredist   <pre><code>winget install Microsoft.VCRedist.2015+.x86\nwinget install Microsoft.VCRedist.2015+.x64\n</code></pre></li> </ul>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#the-vmx-process-exited-prematurely","title":"The VMX process exited prematurely","text":"<p>[!CAUTION]  The VMX process exited prematurely</p>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#solutions_1","title":"Solutions","text":"<ul> <li>run <code>vmware-vmx.exe</code> manually to find out the real error</li> <li>missing <code>RESAMPLEDMO.DLL</code>, download them here: resampledmo.dll.zip</li> </ul>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#konosubakonoakua-2024-10-31t025634z","title":"konosubakonoakua \u00b7 2024-10-31T02:56:34Z","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#optimization-for-performance","title":"optimization for performance","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#fit-all-virtual-machine-memory-into-reserved-host-ram","title":"Fit all virtual machine memory into reserved host RAM","text":"<ul> <li> <p><code>Edit</code>-&gt;<code>Preferences</code>-&gt;<code>Memory</code>-&gt;<code>Fit all virtual machine memory into reserved host RAM</code> <p></p>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#disable-memory-page-trimming-input-grabbed","title":"Disable memory page trimming &amp; Input grabbed","text":"<li> <p><code>Virtual Machine Settings</code>-&gt;<code>Options</code>-&gt;<code>Advanced</code>-&gt;<code>Process priorites</code>-&gt;<code>Input grabbed:</code>-&gt;<code>High</code></p> </li> <li> <p><code>Virtual Machine Settings</code>-&gt;<code>Options</code>-&gt;<code>Advanced</code>-&gt;<code>Process priorites</code>-&gt;<code>Input ungrabbed:</code>-&gt;<code>Low</code></p> </li> <li> <p><code>Virtual Machine Settings</code>-&gt;<code>Options</code>-&gt;<code>Advanced</code>-&gt;<code>Settings</code>-&gt;<code>Dsiable memory page trimming</code></p> <p></p> </li>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#konosubakonoakua-2024-10-31t030127z","title":"konosubakonoakua \u00b7 2024-10-31T03:01:27Z","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#vmware-networking","title":"Vmware Networking","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#bridged-mode-vm-has-its-own-ip","title":"Bridged mode (vm has its own IP)","text":"<ol> <li> <p><code>Edit</code>-&gt;<code>Virtual Network Editor</code> <p></p> <li> <p><code>VMnet Information</code>-&gt;<code>Bridged(connect VMs directly to the external network)</code>-&gt;<code>Bridged to:</code>-&gt;<code>Intel(R) Ethernet Controller (3) I225-V</code> <p></p>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#mdns-not-working","title":"mdns not working","text":"- check if vm select `bridged mode`   ![Image](../assets/106/3.png)"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#konosubakonoakua-2025-05-14t105217z","title":"konosubakonoakua \u00b7 2025-05-14T10:52:17Z","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#damaged-file-system-restore-eg-powerloss","title":"damaged file system restore (e.g. powerloss)","text":"![Image](../assets/106/4.png)   <ul> <li>fsck   <pre><code>fsck -y /dev/sda1\n</code></pre></li> </ul>"},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#konosubakonoakua-2026-01-17t145339z","title":"konosubakonoakua \u00b7 2026-01-17T14:53:39Z","text":""},{"location":"notes/posts/106%23%5Bsw%5D%5Bvirtual%20machine%5D%20vmware%20install%20on%20windows/#virtualbox-export-to-vmware","title":"Virtualbox export to VMware","text":"<ul> <li>In Host OS   <pre><code>VBoxManage clonehd \"PYNQ3.1.vdi\" \"PYNQ3_1.vmdk\" --format VMDK\n</code></pre></li> <li>In guest OS   <pre><code>sudo systemctl disable vboxadd-service\nsudo systemctl disable vboxadd\nsudo /opt/VBoxGuestAdditions-*/uninstall.sh\n</code></pre></li> </ul>"},{"location":"notes/posts/107%23%5Bsw%5D%5Bxilinx%5D%20matlab%20version%20for%20vivado%20model%20system%20generator/","title":"107 [sw][xilinx] matlab version for vivado model system generator","text":""},{"location":"notes/posts/107%23%5Bsw%5D%5Bxilinx%5D%20matlab%20version%20for%20vivado%20model%20system%20generator/#matlab-for-hdl","title":"matlab for HDL","text":""},{"location":"notes/posts/107%23%5Bsw%5D%5Bxilinx%5D%20matlab%20version%20for%20vivado%20model%20system%20generator/#vivado-20191","title":"vivado 2019.1","text":"<p>[!IMPORTANT] <code>R2016a/b</code> or <code>R2017a/b</code> supported for vivado 2019.1</p> <p></p>"},{"location":"notes/posts/107%23%5Bsw%5D%5Bxilinx%5D%20matlab%20version%20for%20vivado%20model%20system%20generator/#vivado-20241","title":"vivado 2024.1","text":"<p>[!IMPORTANT] <code>R2022a(Update 6 or later)</code>, <code>R2022b(Update 6 or later)</code>, <code>R2023a</code>, <code>R2023b</code> for vivado 2024.1</p> <p></p>"},{"location":"notes/posts/107%23%5Bsw%5D%5Bxilinx%5D%20matlab%20version%20for%20vivado%20model%20system%20generator/#comments","title":"Comments","text":""},{"location":"notes/posts/107%23%5Bsw%5D%5Bxilinx%5D%20matlab%20version%20for%20vivado%20model%20system%20generator/#konosubakonoakua-2024-10-04t043421z","title":"konosubakonoakua \u00b7 2024-10-04T04:34:21Z","text":""},{"location":"notes/posts/107%23%5Bsw%5D%5Bxilinx%5D%20matlab%20version%20for%20vivado%20model%20system%20generator/#troubleshoot","title":"Troubleshoot","text":""},{"location":"notes/posts/107%23%5Bsw%5D%5Bxilinx%5D%20matlab%20version%20for%20vivado%20model%20system%20generator/#an-operation-is-in-progress-when-quit-matlab","title":"An operation is in progress when quit matlab","text":"<p>The matlab is searching for license, pass its path via command line in the desktop shortcut. <pre><code>\"C:\\Program Files\\MATLAB\\R2018a\\bin\\matlab.exe\" -c \"C:\\Program Files\\MATLAB\\R2018a\\licenses\\license_standalone.lic\"\n</code></pre></p>"},{"location":"notes/posts/107%23%5Bsw%5D%5Bxilinx%5D%20matlab%20version%20for%20vivado%20model%20system%20generator/#konosubakonoakua-2025-05-29t072821z","title":"konosubakonoakua \u00b7 2025-05-29T07:28:21Z","text":"<ul> <li>Which versions of Vivado are supported with which release of HDL Coder?</li> <li>\u6dfb\u52a0\u7248\u672cmatlab\u652f\u6301</li> </ul>"},{"location":"notes/posts/108%23%5Bsw%5D%5Blinux%5D%20ubuntu22%20setup/","title":"108 [sw][linux] ubuntu22 setup","text":""},{"location":"notes/posts/108%23%5Bsw%5D%5Blinux%5D%20ubuntu22%20setup/#can-not-update-snap-store","title":"can not update snap store","text":"<p>Please update manually. <pre><code>sudo killall snap-store\nsudo snap refresh snap-store\n</code></pre></p>"},{"location":"notes/posts/108%23%5Bsw%5D%5Blinux%5D%20ubuntu22%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/108%23%5Bsw%5D%5Blinux%5D%20ubuntu22%20setup/#konosubakonoakua-2024-10-04t152506z","title":"konosubakonoakua \u00b7 2024-10-04T15:25:06Z","text":""},{"location":"notes/posts/108%23%5Bsw%5D%5Blinux%5D%20ubuntu22%20setup/#microsoft-edge-install","title":"Microsoft edge install","text":"<p>All linux version edges are listed here <pre><code>sudo apt install &lt;your edge deb file path&gt;\n</code></pre></p>"},{"location":"notes/posts/108%23%5Bsw%5D%5Blinux%5D%20ubuntu22%20setup/#konosubakonoakua-2024-10-19t011555z","title":"konosubakonoakua \u00b7 2024-10-19T01:15:55Z","text":""},{"location":"notes/posts/108%23%5Bsw%5D%5Blinux%5D%20ubuntu22%20setup/#nodejs-install","title":"nodejs install","text":""},{"location":"notes/posts/108%23%5Bsw%5D%5Blinux%5D%20ubuntu22%20setup/#use-nvm","title":"use <code>nvm</code>","text":"<p><pre><code>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash\n</code></pre> Install nodejs 18 version <pre><code>nvm install 18\nnvm use 18\n</code></pre></p>"},{"location":"notes/posts/109%23%5Bsw%5D%5Bhw%5D%5Bpcb%5D%5Bkicad%5D%20kicad%20memos/","title":"109 [sw][hw][pcb][kicad] kicad memos","text":""},{"location":"notes/posts/109%23%5Bsw%5D%5Bhw%5D%5Bpcb%5D%5Bkicad%5D%20kicad%20memos/#pcb-editor","title":"PCB Editor","text":""},{"location":"notes/posts/109%23%5Bsw%5D%5Bhw%5D%5Bpcb%5D%5Bkicad%5D%20kicad%20memos/#set-origin-point","title":"set origin point","text":"<p>Set Edge cuts corner as origin point. (like what we do in altium)</p>   ![image](../assets/109/1.png) ![image](../assets/109/2.png)"},{"location":"notes/posts/110%23%5Bsw%5D%5Bepics%5D%20phoebus%20%26%20epics%20ca%20tool/","title":"110 [sw][epics] phoebus &amp; epics ca tool","text":""},{"location":"notes/posts/110%23%5Bsw%5D%5Bepics%5D%20phoebus%20%26%20epics%20ca%20tool/#download","title":"download","text":"<ul> <li>v4.7.3</li> </ul>"},{"location":"notes/posts/110%23%5Bsw%5D%5Bepics%5D%20phoebus%20%26%20epics%20ca%20tool/#comments","title":"Comments","text":""},{"location":"notes/posts/110%23%5Bsw%5D%5Bepics%5D%20phoebus%20%26%20epics%20ca%20tool/#konosubakonoakua-2024-10-04t185110z","title":"konosubakonoakua \u00b7 2024-10-04T18:51:10Z","text":""},{"location":"notes/posts/110%23%5Bsw%5D%5Bepics%5D%20phoebus%20%26%20epics%20ca%20tool/#install","title":"install","text":""},{"location":"notes/posts/110%23%5Bsw%5D%5Bepics%5D%20phoebus%20%26%20epics%20ca%20tool/#linux","title":"linux","text":"<p><pre><code>sudo apt install default-jdk\n</code></pre> <pre><code>sudo mkdir -p /epics\nsudo chown rf:rf /epics\ntar ~/Downloads/Phoebus-4.7.3-linux.tar.gz -C /epics\nmv /epics/product-4.7.3 /epics/phoebus\nchmod +x /epics/phoebus/phoebus.sh /epics/phoebus/phoebus.desktop\nsed -i \"s#Exec.*#Exec=/epics/phoebus/phoebus.sh#\" /epics/phoebus/phoebus.desktop\nln -s /epics/phoebus/phoebus.desktop ~/.local/share/applications/phoebus.desktop\n</code></pre></p>"},{"location":"notes/posts/110%23%5Bsw%5D%5Bepics%5D%20phoebus%20%26%20epics%20ca%20tool/#windows","title":"windows","text":"<p>save as <code>install.ps1</code>, run it. <pre><code>$url = \"https://epics.anl.gov/download/distributions/CA-3.15.6-windows-x64.zip\"\n$zipFile = \"$env:TEMP\\CA-3.15.6-windows-x64.zip\"\n$extractPath = \"$env:LOCALAPPDATA\\CA-3.15.6-windows-x64\"\n$maxRetries = 3\n$retryDelay = 5\n\nfunction Download-File {\n    param (\n        [string]$url,\n        [string]$outputFile\n    )\n    $retryCount = 0\n    while ($retryCount -lt $maxRetries) {\n        try {\n            Write-Host \"Downloading... Retry $($retryCount + 1) / $maxRetries\"\n            Invoke-WebRequest -Uri $url -OutFile $outputFile\n            if (Test-Path $outputFile) {\n                return $true\n            }\n        } catch {\n            Write-Host \"Download failed: $_\"\n        }\n        $retryCount++\n        if ($retryCount -lt $maxRetries) {\n            Write-Host \"Retry after $retryDelay sec...\"\n            Start-Sleep -Seconds $retryDelay\n        }\n    }\n    return $false\n}\n\nif (-Not (Download-File -url $url -outputFile $zipFile)) {\n    Write-Host \"Download failed. Please cheack network and URL.\"\n    exit 1\n}\n\nWrite-Host \"Unzip...\"\nExpand-Archive -Path $zipFile -DestinationPath $extractPath -Force\n\nif (-Not (Test-Path $extractPath)) {\n    Write-Host \"Unzip failed, must have Expand-Archive installed.\"\n    exit 1\n}\n\nWrite-Host \"Setup PATH...\"\n$newPath = \"$env:PATH;$extractPath\\bin;$extractPath\\home\\phoebus\\ANJ\\win32\\bin\\\"\n[System.Environment]::SetEnvironmentVariable(\"PATH\", $newPath, [System.EnvironmentVariableTarget]::User)\n\nWrite-Host \"Cleaning up...\"\nRemove-Item $zipFile\n\nWrite-Host \"Done :)\"\n</code></pre></p>"},{"location":"notes/posts/110%23%5Bsw%5D%5Bepics%5D%20phoebus%20%26%20epics%20ca%20tool/#konosubakonoakua-2024-10-04t185140z","title":"konosubakonoakua \u00b7 2024-10-04T18:51:40Z","text":""},{"location":"notes/posts/110%23%5Bsw%5D%5Bepics%5D%20phoebus%20%26%20epics%20ca%20tool/#import-config","title":"import config","text":""},{"location":"notes/posts/111%23%5Bsw%5D%5Bscoop%5D%5Bwindows%5D%20scoop%20usage/","title":"111 [sw][scoop][windows] scoop usage","text":"<p>scoop</p>"},{"location":"notes/posts/111%23%5Bsw%5D%5Bscoop%5D%5Bwindows%5D%20scoop%20usage/#comments","title":"Comments","text":""},{"location":"notes/posts/111%23%5Bsw%5D%5Bscoop%5D%5Bwindows%5D%20scoop%20usage/#konosubakonoakua-2024-10-08t082041z","title":"konosubakonoakua \u00b7 2024-10-08T08:20:41Z","text":""},{"location":"notes/posts/111%23%5Bsw%5D%5Bscoop%5D%5Bwindows%5D%20scoop%20usage/#install-scoop-itself","title":"Install scoop itself","text":"<pre><code>Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser\nInvoke-RestMethod -Uri https://get.scoop.sh | Invoke-Expression\n</code></pre>"},{"location":"notes/posts/111%23%5Bsw%5D%5Bscoop%5D%5Bwindows%5D%20scoop%20usage/#install-git7ziparia2-base-packages","title":"Install git/7zip/aria2/... base packages","text":"<pre><code>scoop install sudo\nscoop install 7zip git\nscoop install openssh aria2 curl grep sed less touch\nscoop config aria2-warning-enabled false\n</code></pre>"},{"location":"notes/posts/111%23%5Bsw%5D%5Bscoop%5D%5Bwindows%5D%20scoop%20usage/#add-buckets","title":"Add buckets","text":"<pre><code>scoop bucket known\nscoop bucket add extras\nscoop bucket add versions\n# ...\n</code></pre>"},{"location":"notes/posts/111%23%5Bsw%5D%5Bscoop%5D%5Bwindows%5D%20scoop%20usage/#search-for-package","title":"search for package","text":"<pre><code>scoop search &lt;keyword&gt;\nscoop install ...\n</code></pre>"},{"location":"notes/posts/111%23%5Bsw%5D%5Bscoop%5D%5Bwindows%5D%20scoop%20usage/#clean-up-all","title":"clean up all","text":"<pre><code>scoop cache rm -a &amp;&amp; scoop cleanup *\n</code></pre>"},{"location":"notes/posts/112%23%5Bsw%5D%5Bwindows%5D%20change%20locale%20to%20solve%20chinese%20app%20display%20issue/","title":"112 [sw][windows] change locale to solve chinese app display issue","text":"<p>[!TIP] 1. Win+i to open Setting 2. <code>Setting</code>-&gt;<code>language&amp;region</code>-&gt;<code>Administrative language setting</code>-&gt;<code>Region</code>-&gt;<code>Change system locale</code>-&gt;<code>Region Setting</code> 3. Select <code>Chinese (Simplified, China)</code> 4. Check <code>Beta: Use Unicode UTF-8 for worldwide language support</code></p>   ![image](../assets/112/1.png)"},{"location":"notes/posts/113%23%5Bhw%5D%5Bzynq%5D%5Bfpga%5D%5Bxilinx%5D%20pinout%20definitions/","title":"113 [hw][zynq][fpga][xilinx] pinout definitions","text":"<ul> <li>https://www.xilinx.com/support/package-pinout-files.html</li> <li>https://www.xilinx.com/support/package-pinout-files/spartan-6-pkgs.html</li> <li>https://www.xilinx.com/support/package-pinout-files/zynq7000-pkgs.html</li> <li>https://www.xilinx.com/support/package-pinout-files/zynq-ultrascale-plus-pkgs.html</li> </ul>"},{"location":"notes/posts/114%23%5Bhw%5D%5Breverse%20engineering%5D%20automotive%20camera%20pcb%20board%20reverse%20engineering%20--%20mpsoc%20jtag%20%26%20boot%20mode/","title":"114 [hw][reverse engineering] automotive camera pcb board reverse engineering -- mpsoc jtag &amp; boot mode","text":"![image](../assets/114/1.png)"},{"location":"notes/posts/114%23%5Bhw%5D%5Breverse%20engineering%5D%20automotive%20camera%20pcb%20board%20reverse%20engineering%20--%20mpsoc%20jtag%20%26%20boot%20mode/#comments","title":"Comments","text":""},{"location":"notes/posts/114%23%5Bhw%5D%5Breverse%20engineering%5D%20automotive%20camera%20pcb%20board%20reverse%20engineering%20--%20mpsoc%20jtag%20%26%20boot%20mode/#konosubakonoakua-2024-10-11t074910z","title":"konosubakonoakua \u00b7 2024-10-11T07:49:10Z","text":""},{"location":"notes/posts/114%23%5Bhw%5D%5Breverse%20engineering%5D%20automotive%20camera%20pcb%20board%20reverse%20engineering%20--%20mpsoc%20jtag%20%26%20boot%20mode/#power-supply","title":"power supply","text":"![image](../assets/114/2.png)"},{"location":"notes/posts/115%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20xilinx%20fpga%20architecure%20%28inside%29/","title":"115 [hw][fpga][xilinx] xilinx fpga architecure (inside)","text":""},{"location":"notes/posts/115%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20xilinx%20fpga%20architecure%20%28inside%29/#_1","title":"?","text":""},{"location":"notes/posts/115%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20xilinx%20fpga%20architecure%20%28inside%29/#comments","title":"Comments","text":""},{"location":"notes/posts/115%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20xilinx%20fpga%20architecure%20%28inside%29/#konosubakonoakua-2024-10-17t085007z","title":"konosubakonoakua \u00b7 2024-10-17T08:50:07Z","text":""},{"location":"notes/posts/115%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20xilinx%20fpga%20architecure%20%28inside%29/#appendix","title":"appendix","text":""},{"location":"notes/posts/115%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20xilinx%20fpga%20architecure%20%28inside%29/#openfpga-explained","title":"openfpga explained","text":""},{"location":"notes/posts/116%23%5Bsw%5D%5Bepics%5D%20epics%20installation/","title":"116 [sw][epics] epics installation","text":"Epics Base   ## Epics Base Dependencies <pre><code>sudo apt install build-essential libreadline-dev perl tcl tk\n</code></pre> Make Directories <pre><code>sudo mkdir -p /epics\nsudo chown $USER:$USER /epics\nln -s /epics $HOME/EPICS\ncd /epics\n</code></pre>  Clone Repo <pre><code>wget https://epics-controls.org/download/base/base-7.0.8.1.tar.gz\ntar -xvf base-7.0.8.1.tar.gz\ncd base-7.0.8.1\n</code></pre> Or, <pre><code>git clone --recursive -b 7.0 https://git.launchpad.net/epics-base base-7.0\ncd base-7.0\n</code></pre> Or, <pre><code># my fork\ngit clone --recursive -b 7.0 https://github.com/konosubakonoakua/epics-base base-7.0\ncd base-7.0\n</code></pre> Make <pre><code>make -j8\n</code></pre> If failed, and need to rebuild <pre><code>make distclean\ngit reset --hard\ngit clean -fd\n</code></pre> If need to checkout to another tag: <pre><code># after checkout\nmake distclean\ngit reset --hard\ngit clean -fd\nrm -rf .ci\nrm -rf ./modules\ngit submodule update --init --recursive\n</code></pre> Setup Env (Optional) <pre><code>cat &gt;&gt; ~/.bashrc &lt;&lt; 'EOF'\n\nexport EPICS_BASE=/epics/3.15/base\nexport EPICS_HOST_ARCH=$(${EPICS_BASE}/startup/EpicsHostArch)\nexport PATH=${EPICS_BASE}/bin/${EPICS_HOST_ARCH}:$PATH\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:${EPICS_BASE}/lib/${EPICS_HOST_ARCH}\n\nEOF\n</code></pre> Test <pre><code>which softIoc\nsoftIoc\n</code></pre> Test softIoc app <pre><code>mkdir -p $HOME/EPICS/iocs/testIoc\ncd $HOME/EPICS/iocs/testIoc\nmakeBaseApp.pl -t example testIoc\nmakeBaseApp.pl -i -t example testIoc\nmake\ncd iocBoot/ioctestIoc\nchmod +x ./st.cmd\n./st.cmd\n</code></pre>   ---  ## Comments  ### konosubakonoakua \u00b7 2024-10-23T03:20:50Z    Download synApps   ### Download synApps &gt; Consider using `assemble_synApps.sh`  First check the latest version: https://github.com/EPICS-synApps/support/releases/latest For now, it's `R6-3` <pre><code>export _SYNAPPS_VERSION=R6-3\nexport _SYNAPPS_FILENAME=synApps_6_3\nexport _SYNAPPS=/epics/$_SYNAPPS_FILENAME\ncd ~/Downloads\nwget https://github.com/EPICS-synApps/support/releases/download/$_SYNAPPS_VERSION/$_SYNAPPS_FILENAME.tar.gz\nif [ $? -eq 0 ]; then\n  tar -xzf $_SYNAPPS_FILENAME.tar.gz -C /epics/\n  rm $_SYNAPPS_FILENAME.tar.gz\n  cd /epics\nfi\n</code></pre> #### Copy desired modules <pre><code>export _EPICS_VERSION=3.15\nexport _EPICS_BASE=/epics/$_EPICS_VERSION/base\nexport _EPICS_SUPPORT=/epics/$_EPICS_VERSION/support\nmkdir -p $_EPICS_SUPPORT\ncd $_EPICS_SUPPORT\ncp -r $_SYNAPPS/support/StreamDevice* .\ncp -r $_SYNAPPS/support/asyn* .\ncp -r $_SYNAPPS/support/calc* .\ncp -r $_SYNAPPS/support/sscan* .\ncp -r $_SYNAPPS/support/sequencer-mirror* .\n</code></pre>  ### Modify support modules (not tested yet) <pre><code>cd $_EPICS_SUPPORT\nexport REPO_SEQUENCER_MIRROR=$(find $_EPICS_SUPPORT -maxdepth 1 -type d -name \"*sequencer-mirror*\" -exec basename {} \\;)\nexport REPO_SSCAN=$(find $_EPICS_SUPPORT -maxdepth 1 -type d -name \"*sscan*\" -exec basename {} \\;)\nexport REPO_CALC=$(find $_EPICS_SUPPORT -maxdepth 1 -type d -name \"*calc*\" -exec basename {} \\;)\nexport REPO_ASYN=$(find $_EPICS_SUPPORT -maxdepth 1 -type d -name \"*asyn*\" -exec basename {} \\;)\nexport REPO_STREAMDEVICE=$(find $_EPICS_SUPPORT -maxdepth 1 -type d -name \"*StreamDevice*\" -exec basename {} \\;)\n</code></pre>  #### StreamDevice <pre><code>tee &gt; ${_EPICS_SUPPORT}/${REPO_STREAMDEVICE}/configure/RELEASE.local &lt;&lt; EOF\nSUPPORT=${_EPICS_SUPPORT}\nASYN=\\$(SUPPORT)/${REPO_ASYN}\nCALC=\\$(SUPPORT)/${REPO_CALC}\nPCRE=\nEPICS_BASE=${_EPICS_BASE}\nEOF\n</code></pre> <pre><code>rm -f ${_EPICS_SUPPORT}/${REPO_STREAMDEVICE}/GNUmakefile\n</code></pre>  #### Asyn  <pre><code>tee &gt; ${_EPICS_SUPPORT}/${REPO_ASYN}/configure/RELEASE.local &lt;&lt; EOF\nSUPPORT=${_EPICS_SUPPORT}\nSNCSEQ=\\$(SUPPORT)/${REPO_SEQUENCER_MIRROR}\nCALC=\\$(SUPPORT)/${REPO_CALC}\nSSCAN=\\$(SUPPORT)/${REPO_SSCAN}\nEPICS_BASE=${_EPICS_BASE}\nEOF\n</code></pre> <pre><code>tee &gt; ${_EPICS_SUPPORT}/${REPO_ASYN}/configure/CONFIG_SITE.local &lt;&lt; EOF\nTIRPC=YES\nEOF\n</code></pre> If TIRPC compilation failed, refer to https://github.com/konosubakonoakua/blog/issues/92#issuecomment-2471131689 for multiarch package.  #### CALC  <pre><code>tee &gt; ${_EPICS_SUPPORT}/${REPO_CALC}/configure/RELEASE.local &lt;&lt; EOF\nSUPPORT=${_EPICS_SUPPORT}\nSSCAN=\\$(SUPPORT)/${REPO_SSCAN}\nSNCSEQ=\\$(SUPPORT)/${REPO_SEQUENCER_MIRROR}\nCALC=\\$(SUPPORT)/${REPO_CALC}\nEPICS_BASE=${_EPICS_BASE}\nEOF\n</code></pre>  #### SSCAN  <pre><code>tee &gt; ${_EPICS_SUPPORT}/${REPO_SSCAN}/configure/RELEASE.local &lt;&lt; EOF\nSUPPORT=${_EPICS_SUPPORT}\nSNCSEQ=\\$(SUPPORT)/${REPO_SEQUENCER_MIRROR}\nEPICS_BASE=${_EPICS_BASE}\nEOF\n</code></pre>  #### SEQUENCER_MIRROR  <pre><code>tee &gt; ${_EPICS_SUPPORT}/${REPO_SEQUENCER_MIRROR}/configure/RELEASE.local &lt;&lt; EOF\nEPICS_BASE=${_EPICS_BASE}\nEOF\n</code></pre>  ### Compilation order (EPICS_BASE must have been compiled) <pre><code>cd ${_EPICS_SUPPORT}/${REPO_SEQUENCER_MIRROR} &amp;&amp; make distclean &amp;&amp; make -j4\n</code></pre> <pre><code>cd ${_EPICS_SUPPORT}/${REPO_SSCAN} &amp;&amp; make distclean &amp;&amp; make -j4\n</code></pre> <pre><code>cd ${_EPICS_SUPPORT}/${REPO_CALC} &amp;&amp; make distclean &amp;&amp; make -j4\n</code></pre> <pre><code>cd ${_EPICS_SUPPORT}/${REPO_ASYN} &amp;&amp; make distclean &amp;&amp; make -j4\n</code></pre> <pre><code>cd ${_EPICS_SUPPORT}/${REPO_STREAMDEVICE} &amp;&amp; make distclean &amp;&amp; make -j4\n</code></pre>  If you only want to try Asyn &amp; StreamDevice   ## Asyn Make dir <pre><code>cd ${EPICS_BASE}\nmkdir -p support\ncd support\n</code></pre> Clone <pre><code>git clone https://github.com/epics-modules/asyn.git\ncd asyn/configure\n</code></pre> Modify Use these command for dry-run, only checking <pre><code>sed -n \"s|EPICS_BASE=.*|EPICS_BASE=${EPICS_BASE}|p\" RELEASE\nsed -n \"s|SUPPORT=.*|SUPPORT=${EPICS_BASE}/support|p\" RELEASE\nsed -n \"s|# TIRPC=YES|TIRPC=YES|p\" CONFIG_SITE\n</code></pre> Really modify <pre><code>sed -i \"s|EPICS_BASE=.*|EPICS_BASE=${EPICS_BASE}|\" RELEASE\nsed -i \"s|SUPPORT=.*|SUPPORT=${EPICS_BASE}/support|\" RELEASE\nsed -i \"s|# TIRPC=YES|TIRPC=YES|\" CONFIG_SITE\n</code></pre> Make it <pre><code>make -j8\n</code></pre>  ## StreamDevice Make dir <pre><code>mkdir -p ${EPICS_BASE}/support\n</code></pre> Clone <pre><code>cd ${EPICS_BASE}/support\ngit clone https://github.com/paulscherrerinstitute/StreamDevice.git\ncd StreamDevice/\nrm GNUmakefile\n</code></pre> Modify Use these command for dry-run, only checking <pre><code>sed -n \"s|EPICS_BASE=.*|EPICS_BASE=${EPICS_BASE}|p\" RELEASE\nsed -n \"s|ASYN=.*|ASYN=\\$(SUPPORT)/asyn|p\" RELEASE\nsed -n \"/CALC=.*/s|^|# |p\" RELEASE\nsed -n \"/PCRE=.*/s|^|# |p\" RELEASE\n</code></pre> Really modify We don't have CALC &amp; PCRE support installed now, so disable them. <pre><code>sed -i \"s|EPICS_BASE=.*|EPICS_BASE=${EPICS_BASE}|\" RELEASE\nsed -i \"s|ASYN=.*|ASYN=\\$(SUPPORT)/asyn|\" RELEASE\nsed -i \"/CALC=.*/s|^|# |\" RELEASE\nsed -i \"/PCRE=.*/s|^|# |\" RELEASE\n</code></pre> Make it <pre><code>make -j8\n</code></pre> If we want to use CALC, then I recommend installing synApps.    ### konosubakonoakua \u00b7 2024-10-28T06:19:37Z    cross compile   ## cross-compile ### Install compiler for `zynq cortex-a9` #### ~arm-linux-gnueabi~ (ld-linux.so.3 not found!!) <pre><code>sudo apt install gcc-arm-linux-gnueabi g++-arm-linux-gnueabi binutils-arm-linux-gnueabi\n</code></pre> #### arm-linux-gnueabihf (ok, but need matched GBLIC version on target &amp; host) <pre><code>sudo apt install gcc-arm-linux-gnueabihf g++-arm-linux-gnueabihf binutils-arm-linux-gnueabihf\n</code></pre> #### arm-linux-gnueabihf (Xilinx SDK provided, totally ok) <pre><code>ls /tools/Xilinx/SDK/2019.1/gnu/aarch32/lin/gcc-arm-linux-gnueabi\n</code></pre> #### aarch64-linux-gnu <pre><code>sudo apt install  gcc-aarch64-linux-gnu g++-aarch64-linux-gnu binutils-aarch64-linux-gnu\n</code></pre> ### Install `qemu-user-static` (for running arm executables) <pre><code>sudo apt install qemu-user-static qemu-user\n</code></pre> ### Install dependencies <pre><code>export EPICS_TOOLS_ARM_PKGS=/epics/tools/arm/pkgs\nmkdir -p $EPICS_TOOLS_ARM_PKGS\n</code></pre> #### ~Install `readline`~ <pre><code>cd $EPICS_TOOLS_ARM_PKGS\nwget https://mirrors.ustc.edu.cn/gnu/readline/readline-8.2.tar.gz\ntar -xvf readline-8.2.tar.gz\ncd $EPICS_TOOLS_ARM_PKGS/readline-8.2\n</code></pre> <pre><code>export _EPICS_TARGET_ARCH=arm-linux-gnueabihf\nCC=${_EPICS_TARGET_ARCH}-gcc ./configure --host=${_EPICS_TARGET_ARCH} --prefix=/usr/${_EPICS_TARGET_ARCH}\nmake -j4\nsudo make install\n</code></pre> #### ~Install `ncurses`~ <pre><code>cd $EPICS_TOOLS_ARM_PKGS\nwget https://mirrors.ustc.edu.cn/gnu/ncurses/ncurses-6.5.tar.gz\ntar -xvf ncurses-6.5.tar.gz\ncd $EPICS_TOOLS_ARM_PKGS/ncurses-6.5\n</code></pre> <pre><code>export _EPICS_TARGET_ARCH=arm-linux-gnueabihf\n# NOTE: Beginning with ncurses 6.5 option `--enable-widec` is enabled by default; Older versions disable it by default.\nCC=${_EPICS_TARGET_ARCH}-gcc ./configure --host=${_EPICS_TARGET_ARCH} --prefix=/usr/${_EPICS_TARGET_ARCH} --with-normal --with-shared --with-strip-program=${_EPICS_TARGET_ARCH}-strip  --disable-widec --without-tests --enable-pc-files --with-pkg-config --with-pkg-config-libdir=libdir\nmake -j4\nsudo make install\n</code></pre> use armhf package instead, details [here](https://github.com/konosubakonoakua/blog/issues/92#issuecomment-2471131689). <pre><code>sudo dpkg --add-architecture i386\nsudo dpkg --add-architecture armhf\nsudo dpkg --add-architecture arm64\nsudo dpkg --print-foreign-architectures\nsudo apt install -y --no-install-recommends libc6:armhf libstdc++6:armhf libreadline-dev:armhf libncurses-dev:armhf\n</code></pre> ### Compile epics-base #### Modify compiler &amp; libraries options <pre><code>export EPICS_BASE=/epics/3.15/base\nexport EPICS_BASE=/epics/7/base\ncd $EPICS_BASE\n</code></pre> ##### Use patches <pre><code>git apply &lt;&lt; 'EOF'\ndiff --git a/configure/os/CONFIG_SITE.linux-x86.linux-arm b/configure/os/CONFIG_SITE.linux-x86.linux-arm\nindex 231c54bb8..b257582b1 100644\n--- a/configure/os/CONFIG_SITE.linux-x86.linux-arm\n+++ b/configure/os/CONFIG_SITE.linux-x86.linux-arm\n@@ -4,12 +4,14 @@\n #-------------------------------------------------------\n\n # Set GNU crosscompiler target name\n-GNU_TARGET = arm-xilinx-linux-gnueabi\n+GNU_TARGET = arm-linux-gnueabihf\n\n # Set GNU tools install path\n # Examples are installations at the APS:\n+#GNU_DIR = /usr\n+GNU_DIR = /tools/Xilinx/SDK/2019.1/gnu/aarch32/lin/gcc-arm-linux-gnueabi\n #GNU_DIR = /usr/local/vw/zynq-2011.09\n-GNU_DIR = /usr/local/vw/zynq-2016.1/gnu/arm/lin\n+#GNU_DIR = /usr/local/vw/zynq-2016.1/gnu/arm/lin\n #GNU_DIR = /usr/local/Xilinx/SDK/2016.3/gnu/arm/lin\n #GNU_DIR = /APSshare/XilinxSDK/2015.4/gnu/arm/lin\n\n\nEOF\n</code></pre>  ##### create `CONFIG_SITE.local` <pre><code>echo \"CROSS_COMPILER_TARGET_ARCHS=linux-arm\" &gt; $EPICS_BASE/configure/CONFIG_SITE.local\n</code></pre> #### build <pre><code>make rebuild -j8\n</code></pre> #### run softIoc <pre><code>/epics/7.0/bin/linux-arm/softIoc\n</code></pre>  ## cross-compile softIoc 1. first, epics base has been compiled 2. export epics base path, do distclean, then make     <pre><code>EPICS_BASE=/epics/3.15/base &amp;&amp; make distclean &amp;&amp; make -j4\n</code></pre>   ### konosubakonoakua \u00b7 2024-10-31T09:50:12Z  ## Multiple Soft IOCs on one host (same subnet) &gt; [!TIP] &gt;  automatically create/delete an iptables rule that replaces the destination address of all incoming CA UDP traffic on each interface with the broadcast address of that interface. &gt;  &gt; Drop/link the following script into /etc/network/if-up.d/ and /etc/network/if-down.d/. If your system does not have the ip command, consider updating it (or install package iproute2 from backports). &gt; &gt; [channel-access-reach-multiple-soft-iocs-linux](https://epics-controls.org/resources-and-support/documents/howto-documents/channel-access-reach-multiple-soft-iocs-linux/)  <pre><code>#!/bin/sh -e\n# Called when an interface goes up / down\n\n# Author: Ralph Lange &lt;Ralph.Lange@gmx.de&gt;\n\n# Make any incoming Channel Access name resolution queries go to the broadcast address\n# (to hit all IOCs on this host)\n\n# Change this if you run CA on a non-standard port\nPORT=5064\n\n[ \"$METHOD\" != \"none\" ] || exit 0\n[ \"$IFACE\" != \"lo\" ] || exit 0\n\nline=`ip addr show $IFACE`\naddr=`echo $line | grep -Po 'inet \\K[\\d.]+'`\nbcast=`echo $line | grep -Po 'brd \\K[\\d.]+'`\n[ -z \"$addr\" -o -z \"$bcast\" ] &amp;&amp; return 1\n\nif [ \"$MODE\" = \"start\" ]\nthen\n    iptables -t nat -A PREROUTING -d $addr -p udp --dport $PORT -j DNAT --to-destination $bcast\nelif [ \"$MODE\" = \"stop\" ]\nthen\n    iptables -t nat -D PREROUTING -d $addr -p udp --dport $PORT -j DNAT --to-destination $bcast\nfi\n\nexit 0\n</code></pre>  &gt; [!CAUTION] &gt; Note: This will not work for clients on the same host. (Adding that feature makes things a lot more complicated, and I like things to be simple.) &gt;  &gt; If you need connections between IOCs on one host, I would suggest adding the broadcast address of the loopback interface (usually 127.255.255.255) to each IOC\u2019s EPICS_CA_ADDR_LIST setting.  <pre><code>export EPICS_CA_ADDR_LIST=127.255.255.255\nexport EPICS_PVA_ADDR_LIST=127.0.0.1\nexport EPICS_CA_AUTO_ADDR_LIST=no\nexport EPICS_PVA_AUTO_ADDR_LIST=no\n</code></pre> ## Multiple IOCs on the same computer but on a different subnet &gt; [!TIP] &gt; Refer to:  &gt; - [configure-ca](https://docs.epics-controls.org/en/latest/sys-admin/configure-ca.html) &gt; - [EPICS_networking](https://wiki-ext.aps.anl.gov/blc/index.php?title=EPICS_networking)   ### konosubakonoakua \u00b7 2024-11-01T07:44:44Z  ## References - [epics-controls/installation-linux](https://docs.epics-controls.org/en/latest/getting-started/installation-linux.html) - [limfx epics install manual](https://www.limfx.pro/readarticle/3088/epicsan-zhuang-yu-shi-yong-shou-ce-) - [kira-96 EPICS IOC CROSS COMPILE](https://kira-96.github.io/posts/%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91epics%E5%92%8Cioc/) - [StreamDevice/setup](https://paulscherrerinstitute.github.io/StreamDevice/setup.html) - [best-practice-guidelines](https://epics-controls.org/resources-and-support/documents/howto-documents/best-practice-guidelines) - [gnu ftp mirros](https://www.gnu.org/prep/ftp.html#asia) - [rpi_epics](https://cmd-response.readthedocs.io/en/latest/epics/rpi_epics.html)  ### konosubakonoakua \u00b7 2024-11-27T13:52:21Z   ## [phoebusgen](https://github.com/als-epics/phoebusgen) <pre><code>uv pip install phoebusgen\n</code></pre>   ### konosubakonoakua \u00b7 2024-12-12T04:58:08Z  ## trouble shooting If you copy epics runtime files to SBC, errors may occur like these: - `error while loading shared libraries: libdbRecStd.so.3.23.0: cannot open shared object file: No such file or directory`   This is because you haven't set `LD_LIBRARY_PATH` correctly:    `export LD_LIBRARY_PATH=/epics/3.15/iocs/ioc-beamloss-7015/lib/linux-arm:/epics/3.15/base/lib/linux-arm:$LD_LIBRARY`   <pre><code>Dynamic section at offset 0x9f00 contains 28 entries:\n  Tag        Type                         Name/Value\n 0x00000001 (NEEDED)                     Shared library: [libdbCore.so]\n 0x00000001 (NEEDED)                     Shared library: [libCom.so]\n 0x00000001 (NEEDED)                     Shared library: [libc.so.6]\n 0x00000001 (NEEDED)                     Shared library: [ld-linux-armhf.so.3]\n 0x0000001d (RUNPATH)                    Library runpath: [/epics/3.15/iocs/ioc-beamloss-7015/lib/linux-arm:/epics/3.15/base/lib/linux-arm]\n</code></pre> - `symbol lookup error: ./base/bin/linux-arm/softIoc: undefined symbol: pvar_int_logClientDebug`   This is because you haven't copy the runtime files to correct path, the symbol path is hard-coded into binaries. - GLIBC issue   <pre><code>root@beamloss7015:~# /epics/3.15/iocs/ioc-beamloss-7015/bin/linux-arm/beamloss\n/epics/3.15/iocs/ioc-beamloss-7015/bin/linux-arm/beamloss: /lib/libc.so.6: version `GLIBC_2.34' not found (required by /epics/3.15/iocs/ioc-beamloss-7015/bin/linux-arm/beamloss)\n/epics/3.15/iocs/ioc-beamloss-7015/bin/linux-arm/beamloss: /lib/libc.so.6: version `GLIBC_2.34' not found (required by /epics/3.15/iocs/ioc-beamloss-7015/lib/linux-arm/libbeamlossSupport.so)\n</code></pre>   This is because the cross-compiler use glibc 2.34 while the target only have glibc 2.28 (petalinux 2019.1), and higher version cannot run on lower one.   Use this cmd to check glibc version of executables.   <pre><code>nm bin/linux-arm/softIoc | grep GLIBC_\n</code></pre>   Got:   <pre><code>base on \ue0a0 HEAD (3be67ac) [$!+] took 32s                                                                                                                               \n\u276f nm bin/linux-arm/softIoc | grep GLIBC_                                                                                                                              \n         U abort@@GLIBC_2.4                                                                                                                                           \n         U getenv@@GLIBC_2.4                                                                                                                                          \n         U __libc_start_main@@GLIBC_2.34                                                                                                                               \n         U printf@@GLIBC_2.4                                                                                                                                          \n         U puts@@GLIBC_2.4                                                                                                                                            \n         U strcmp@@GLIBC_2.4                                                                                                                                          \n         U strrchr@@GLIBC_2.4 \n</code></pre>   You need to use cross-compiler provided by Xilinx SDK:   <pre><code>GNU_DIR = /tools/Xilinx/SDK/2019.1/gnu/aarch32/lin/gcc-arm-linux-gnueabi\n</code></pre>  ### konosubakonoakua \u00b7 2025-01-23T03:56:52Z  ## Prebuilt Refer to #136"},{"location":"notes/posts/117%23%5Bsw%5D%5Blinux%5D%20systemd%20autostart%20user%20script%20after%20reboot%20%28without%20root%29/","title":"117 [sw][linux] systemd autostart user script after reboot (without root)","text":"<pre><code>mkdir -p $HOME/.config/systemd/user/\ncat &gt; $HOME/.config/systemd/user/vmhgfs-fuse.service &lt;&lt; EOF\n[Unit]\nDescription=VMware Hgfs Shared Folder Service\nRequires=vmhgfs-fuse.service\nAfter=vmhgfs-fuse.service\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nWorkingDirectory=/home/$USER\nExecStart=vmhgfs-fuse .host:/ /mnt/winshared/ -o subtype=vmhgfs-fuse\nExecStop=umount /mnt/winshared\nTimeoutStartSec=0\n\n[Install]\nWantedBy=multi-user.target\nEOF\n</code></pre> <pre><code>systemctl --user start vmhgfs-fuse.service\nsystemctl --user enable vmhgfs-fuse.service\n</code></pre>"},{"location":"notes/posts/118%23%5Bsw%5D%5Bpython%5D%5Buv%5D%5Bvenv%5D%20setup%20venvs%20for%20python%20using%20uv/","title":"118 [sw][python][uv][venv] setup venvs for python using uv","text":""},{"location":"notes/posts/118%23%5Bsw%5D%5Bpython%5D%5Buv%5D%5Bvenv%5D%20setup%20venvs%20for%20python%20using%20uv/#windows","title":"windows","text":"<p>Install scoop <pre><code>Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser\nInvoke-RestMethod -Uri https://get.scoop.sh | Invoke-Expression\n</code></pre></p> <p>Install uv <pre><code>scoop install uv\n</code></pre></p> <p>In case that you don't want to use scoop: <pre><code>powershell -ExecutionPolicy ByPass -c \"irm https://astral.sh/uv/install.ps1 | iex\"\n</code></pre> Or <pre><code>winget install --id=astral-sh.uv -e\n</code></pre></p> <p>Auto-completion <pre><code>Add-Content -Path $PROFILE -Value '(&amp; uv generate-shell-completion powershell) | Out-String | Invoke-Expression'\nAdd-Content -Path $PROFILE -Value '(&amp; uvx --generate-shell-completion powershell) | Out-String | Invoke-Expression'\n. $PROFILE\n</code></pre></p> <p>Mirror Config files <pre><code>New-Item -Path \"$env:APPDATA\\uv\" -ItemType Directory -Force; Set-Content -Path \"$env:APPDATA\\uv\\uv.toml\" -Value @\"\nindex-url = \"https://mirrors.bfsu.edu.cn/pypi/web/simple\"\n\"@\n</code></pre></p> <p>Make dir <pre><code>mkdir $env:USERPROFILE\\.virtualenvs\ncd $env:USERPROFILE\\.virtualenvs\n</code></pre></p> <p>Create venv <pre><code>uv venv --seed -p 3.12 -n instr --preview\n</code></pre></p> <p>Activate <pre><code>. $env:USERPROFILE\\.virtualenvs\\instr\\Scripts\\activate.ps1\n</code></pre></p>"},{"location":"notes/posts/118%23%5Bsw%5D%5Bpython%5D%5Buv%5D%5Bvenv%5D%20setup%20venvs%20for%20python%20using%20uv/#comments","title":"Comments","text":""},{"location":"notes/posts/118%23%5Bsw%5D%5Bpython%5D%5Buv%5D%5Bvenv%5D%20setup%20venvs%20for%20python%20using%20uv/#konosubakonoakua-2024-10-23t082403z","title":"konosubakonoakua \u00b7 2024-10-23T08:24:03Z","text":""},{"location":"notes/posts/118%23%5Bsw%5D%5Bpython%5D%5Buv%5D%5Bvenv%5D%20setup%20venvs%20for%20python%20using%20uv/#linux","title":"linux","text":"<p>Install uv <pre><code>curl -LsSf https://astral.sh/uv/install.sh | sh\n</code></pre> SHELL autocompletion <pre><code>echo 'eval \"$(uv --generate-shell-completion bash)\"' &gt;&gt; ~/.bashrc\necho 'eval \"$(uvx --generate-shell-completion bash)\"' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre> Mirror Config files <pre><code>cat &gt; ~/.config/uv/uv.toml &lt;&lt; 'EOF'\nindex-url = \"https://mirrors.bfsu.edu.cn/pypi/web/simple\"\nEOF\n</code></pre> Make dir <pre><code>mkdir ~/.virtualenvs\ncd .virtualenvs\n</code></pre> Create venv <pre><code>uv venv --seed -p 3.12 -n instr --preview\n</code></pre> Activate <pre><code>source ~/.virtualenvs/instr/bin/activate\n</code></pre></p>"},{"location":"notes/posts/119%23%5Bsw%5D%5Bwindows%5D%20listary%20settings/","title":"119 [sw][windows] listary settings","text":""},{"location":"notes/posts/119%23%5Bsw%5D%5Bwindows%5D%20listary%20settings/#queries","title":"queries","text":"<ul> <li>http://www.bing.com/search?q={query}</li> <li>http://www.baidu.com/s?wd={query}</li> <li>https://docs.amd.com/search/all?query={query}&amp;content-lang=en-US</li> <li>https://github.com/search?q={query}+&amp;type=repositories</li> <li>https://so.csdn.net/so/search?&amp;q={query}</li> </ul>"},{"location":"notes/posts/120%23%5Bsw%5D%5Blinux%5D%20awsome%20oneliners/","title":"120 [sw][linux] awsome oneliners","text":""},{"location":"notes/posts/120%23%5Bsw%5D%5Blinux%5D%20awsome%20oneliners/#git","title":"git","text":"<ul> <li>make clean and clean files on all sub-folders (depth 1)   <pre><code>find . -maxdepth 1 -type d -not -name \".\" -exec sh -c '[ -d \"{}/.git\" ] &amp;&amp; echo \"Processing directory: {}\"; (cd {} &amp;&amp; make distclean &amp;&amp; git clean -fd)' \\;\n</code></pre></li> </ul>"},{"location":"notes/posts/121%23%5Bsw%5D%5Bwindows%5D%20windows%2011%20optimization/","title":"121 [sw][windows] windows 11 optimization","text":""},{"location":"notes/posts/121%23%5Bsw%5D%5Bwindows%5D%20windows%2011%20optimization/#disable-auto-restart-when-updates-are-installed","title":"Disable auto-restart when updates are installed","text":""},{"location":"notes/posts/121%23%5Bsw%5D%5Bwindows%5D%20windows%2011%20optimization/#dism","title":"Dism++","text":"screenshots   ![dism++](../assets/121/1.png)"},{"location":"notes/posts/121%23%5Bsw%5D%5Bwindows%5D%20windows%2011%20optimization/#local-group-policy-editor","title":"Local Group Policy Editor","text":"screenshots   ![Local Group Policy Editor](../assets/121/2.png)  ![No auto-restart with logged on users for scheduled automatic updates installations](../assets/121/3.png)  ![configure automatic updates](../assets/121/4.png)"},{"location":"notes/posts/121%23%5Bsw%5D%5Bwindows%5D%20windows%2011%20optimization/#comments","title":"Comments","text":""},{"location":"notes/posts/121%23%5Bsw%5D%5Bwindows%5D%20windows%2011%20optimization/#konosubakonoakua-2025-05-14t113359z","title":"konosubakonoakua \u00b7 2025-05-14T11:33:59Z","text":""},{"location":"notes/posts/121%23%5Bsw%5D%5Bwindows%5D%20windows%2011%20optimization/#restore-health","title":"restore health","text":"<pre><code>dism /online /Cleanup-image /Restorehealth\n</code></pre>"},{"location":"notes/posts/122%23%5Bhw%5D%5Bmotherboard%5D%20ROG%20B550-i%20Gaming%20Setup/","title":"122 [hw][motherboard] ROG B550-i Gaming Setup","text":""},{"location":"notes/posts/122%23%5Bhw%5D%5Bmotherboard%5D%20ROG%20B550-i%20Gaming%20Setup/#bios-clear","title":"BIOS CLEAR","text":"![PixPin_2024-11-25_19-16-10](../assets/122/1.png) ![PixPin_2024-11-25_19-16-14](../assets/122/2.png)"},{"location":"notes/posts/122%23%5Bhw%5D%5Bmotherboard%5D%20ROG%20B550-i%20Gaming%20Setup/#comments","title":"Comments","text":""},{"location":"notes/posts/122%23%5Bhw%5D%5Bmotherboard%5D%20ROG%20B550-i%20Gaming%20Setup/#konosubakonoakua-2024-12-06t024721z","title":"konosubakonoakua \u00b7 2024-12-06T02:47:21Z","text":""},{"location":"notes/posts/122%23%5Bhw%5D%5Bmotherboard%5D%20ROG%20B550-i%20Gaming%20Setup/#front-panel-usb-ports-are-the-root-cause-of-bluescreens-which-i-encountered","title":"front-panel USB ports are the root cause of bluescreens which I encountered","text":"<p>My PC has been working flawlessly for a long time. But bluescreens occur frequently now. After a few days, I finally found the root cause: front-panel USB. I suspect that the USB cable or USB port ESD chip is damaged, But I don't have spare time for the checking. For now, I just rear USB port with a USB HUB attached. Stay away from electrostatic\uff01\uff01\uff01</p>"},{"location":"notes/posts/123%23%5Bsw%5D%5Blinux%5D%20ssh%20config/","title":"123 [sw][linux] ssh config","text":""},{"location":"notes/posts/123%23%5Bsw%5D%5Blinux%5D%20ssh%20config/#keep-alive","title":"keep alive","text":"<p>On Client Side: linux <pre><code>cat &gt;&gt; ~/.ssh/config &lt;&lt; 'EOF'\nHost *\n    TCPKeepAlive yes\n    ServerAliveInterval 60\n    ServerAliveCountMax 3\nEOF\n</code></pre> windows <pre><code>$configContent = @\"\n\nHost *\n    TCPKeepAlive yes\n    ServerAliveInterval 60\n    ServerAliveCountMax 3\n\"@\nAdd-Content -Path \"$env:USERPROFILE\\.ssh\\config\" -Value $configContent\n</code></pre> Or on Server Side: <pre><code>sudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak\nsudo sed -i \\\n  -e '/^#TCPKeepAlive/c\\TCPKeepAlive yes' \\\n  -e '/^#ClientAliveInterval/c\\ClientAliveInterval 60' \\\n  -e '/^#ClientAliveCountMax/c\\ClientAliveCountMax 3' \\\n  /etc/ssh/sshd_config\n</code></pre></p>"},{"location":"notes/posts/123%23%5Bsw%5D%5Blinux%5D%20ssh%20config/#comments","title":"Comments","text":""},{"location":"notes/posts/123%23%5Bsw%5D%5Blinux%5D%20ssh%20config/#konosubakonoakua-2024-12-12t011826z","title":"konosubakonoakua \u00b7 2024-12-12T01:18:26Z","text":""},{"location":"notes/posts/123%23%5Bsw%5D%5Blinux%5D%20ssh%20config/#trouble-shoot","title":"Trouble shoot","text":"<p>Unable to negotiate with 192.168.137.222 port 22: no matching host key type found. Their offer: ssh-rsa</p> <p>Solution: <pre><code>ssh -oHostKeyAlgorithms=+ssh-rsa root@192.168.137.222\n</code></pre></p>"},{"location":"notes/posts/123%23%5Bsw%5D%5Blinux%5D%20ssh%20config/#konosubakonoakua-2025-04-02t021758z","title":"konosubakonoakua \u00b7 2025-04-02T02:17:58Z","text":""},{"location":"notes/posts/123%23%5Bsw%5D%5Blinux%5D%20ssh%20config/#allow-root","title":"allow root","text":"<pre><code>sudo sed -i 's/^#\\?PermitRootLogin.*/PermitRootLogin yes/' /etc/ssh/sshd_config\nsudo sed -i 's/^#\\?PasswordAuthentication.*/PasswordAuthentication yes/' /etc/ssh/sshd_config\n</code></pre>"},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/","title":"124 [blog] works in IMPCAS","text":""},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#beam-loss-monitor-v10","title":"Beam Loss Monitor (v1.0)","text":"<p>Contributions: - test bench setup - automatic test program (python) - post-data processing (python) - softioc program (C++)</p> <ul> <li> <p>Test bench for beam loss monitor      ![image](../assets/124/1.png)      ![image](../assets/124/2.png)    </p> </li> <li> <p>6ch waveform retrieve (keysight oscilloscope control, qt5+python+qcodes)      ![image](../assets/124/3.png)    </p> </li> <li> <p>frequency sweeping (tek function generator control, qt5+python+qcodes)      ![11392eb0482cb9bd9d33113fb6f7b12](../assets/124/4.png)    </p> </li> <li> <p>softioc (running on zynq7015, C++ version)      - publish PVs (counts, interlock, ADC raw data...)   - calibration (ADC readout)   - autosave (save key parameters)    </p> </li> <li> <p>diagrams showcase (jupyter notebook)      ![image](../assets/124/5.png)   ![image](../assets/124/6.png)   ![image](../assets/124/7.png)     </p> </li> </ul>"},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#comments","title":"Comments","text":""},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#konosubakonoakua-2024-12-02t100412z","title":"konosubakonoakua \u00b7 2024-12-02T10:04:12Z","text":""},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#cfc-test-equipment-128ch","title":"cfc test equipment (128ch)","text":"<p>we need an equipment for 128 Channel Charge Integrator which can route our current (pA) signal to it  one by one.</p>   ![image](../assets/124/8.png)   <p>Contributions: - test equipment develop   - fpga program (verilog)   - softioc program (python)   - hardware design (designed with kicad, manufactured by JLC PCB) - keithley current source control (python) - automatic test program (jupyter notbook) - data processing (python data retrieve, diagram plotting)</p> <ul> <li>test equipment</li> <li> <p>first version (not my hardware design but I developed its FPGA program. There're so many HW bugs, even relays are all flipped, fixed by hand...\ud83d\ude44)      <p> </p> <p>   - second version (basically the same with first version with HW issues fixed but still inconvenient, can only switch channels in order)</p> <p></p> <li> <p>third version (use raspberry pi SBC with a 128ch io-expander hat, python+softioc inside, easy to use, fully designed by myself)      <p> </p> <p> - keithley current source control (softioc based on pcaspy with phoebus opi)</p>     ![image](../assets/124/16.png)     <ul> <li>diagrams showcase (jupyter notebook)      ![image](../assets/124/17.png)   ![image](../assets/124/18.png)   ![image](../assets/124/19.png)     </li> </ul>"},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#konosubakonoakua-2024-12-02t131021z","title":"konosubakonoakua \u00b7 2024-12-02T13:10:21Z","text":""},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#machine-protect","title":"machine protect","text":"<p>Contributions: - data processing (python data retrieve, parsing binary data with pandas then render to csv file)</p>"},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#magnet-test","title":"Magnet Test","text":"<p>Contributions: - data processing (python data retrieve, render to html)</p>   ![image](../assets/124/20.png)"},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#konosubakonoakua-2024-12-02t181341z","title":"konosubakonoakua \u00b7 2024-12-02T18:13:41Z","text":""},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#non-linear-fitting-tool-based-on-scipy-sympy-jupyterlab-beaucage-model","title":"non-linear fitting tool (based on scipy &amp; sympy &amp; jupyterlab, beaucage model)","text":"![image](../assets/124/21.png) ![recording](../assets/124/22.gif)"},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#konosubakonoakua-2024-12-19t003910z","title":"konosubakonoakua \u00b7 2024-12-19T00:39:10Z","text":""},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#hardware-development","title":"Hardware Development","text":""},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#zynq7020-core-board","title":"Zynq7020 Core Board","text":"screenshots   ![top](https://github.com/user-attachments/assets/de350671-9043-4a9b-b9fe-817ccbea7607) ![bottom](../assets/124/24.png)"},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#tf-card-connector","title":"TF Card Connector","text":"screenshots   ![top](../assets/124/25.png) ![bottom](../assets/124/26.png)"},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#konosubakonoakua-2024-12-19t044734z","title":"konosubakonoakua \u00b7 2024-12-19T04:47:34Z","text":""},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#tools","title":"Tools","text":""},{"location":"notes/posts/124%23%5Bblog%5D%20works%20in%20IMPCAS/#fpga-downloader","title":"FPGA downloader","text":"<p>A python program which can be running on raspberry pi or PC. Engineers handle over FPGA flash files (*.mcs) to non-programmers via U-disk, then they can attach JTAG to raspberry pi to perform FPGA flash downloading independently which saves the time of engineers.</p>  screenshot   ![openFPGALoader](../assets/124/27.png)"},{"location":"notes/posts/125%23%5Bsw%5D%5Bpy%5D%5Blinux%5D%5Bi2c%5D%20python%20%26%20i2c%20%5BWIP%5D/","title":"125 [sw][py][linux][i2c] python &amp; i2c [WIP]","text":"<ul> <li>https://github.com/nickoala/sensor/tree/master</li> </ul>"},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/","title":"126 [sw][epics] epics notes","text":""},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#epics","title":"epics","text":"![image](../assets/126/1.png) ![image](../assets/126/2.png) ![image](../assets/126/3.png)"},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#comments","title":"Comments","text":""},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#konosubakonoakua-2024-12-02t125929z","title":"konosubakonoakua \u00b7 2024-12-02T12:59:29Z","text":""},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#epics-database","title":"epics database","text":"![image](../assets/126/4.png) ![image](../assets/126/5.png) ![image](https://github.com/user-attachments/assets/35e083f5-f44b-4d58-94bd-d15807e34256) ![image](../assets/126/7.png) ![image](../assets/126/8.png) ![image](../assets/126/9.png) ![image](../assets/126/10.png) ![image](../assets/126/11.png) ![image](../assets/126/12.png) ![image](../assets/126/13.png) ![image](../assets/126/14.png) ![image](../assets/126/15.png) ![image](../assets/126/16.png) ![image](../assets/126/17.png) ![image](../assets/126/18.png) ![image](../assets/126/19.png) ![image](../assets/126/20.png) ![image](../assets/126/21.png) ![image](../assets/126/22.png) ![image](../assets/126/23.png) ![image](../assets/126/24.png) ![image](../assets/126/25.png) ![image](../assets/126/26.png) ![image](../assets/126/27.png) ![image](../assets/126/28.png) ![image](../assets/126/29.png) ![image](../assets/126/30.png) ![image](../assets/126/31.png) ![image](../assets/126/32.png) ![image](../assets/126/33.png) ![image](../assets/126/34.png) ![image](../assets/126/35.png) ![image](../assets/126/36.png) ![image](../assets/126/37.png) ![image](../assets/126/38.png) ![image](../assets/126/39.png) ![image](../assets/126/40.png) ![image](../assets/126/41.png) ![image](../assets/126/42.png) ![image](../assets/126/43.png) ![image](../assets/126/44.png) ![image](../assets/126/45.png) ![image](../assets/126/46.png)"},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#konosubakonoakua-2024-12-02t132728z","title":"konosubakonoakua \u00b7 2024-12-02T13:27:28Z","text":""},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#opi","title":"OPI","text":"![image](../assets/126/47.png) ![image](../assets/126/48.png) ![image](../assets/126/49.png) ![image](../assets/126/50.png) ![image](../assets/126/51.png) ![image](../assets/126/52.png) ![image](../assets/126/53.png) ![image](../assets/126/54.png) ![image](../assets/126/55.png) ![image](../assets/126/56.png) ![image](../assets/126/57.png) ![image](../assets/126/58.png) ![image](../assets/126/59.png) ![image](../assets/126/60.png) ![image](../assets/126/61.png) ![image](../assets/126/62.png) ![image](../assets/126/63.png) ![image](../assets/126/64.png) ![image](../assets/126/65.png) ![image](../assets/126/66.png) ![image](../assets/126/67.png) ![image](../assets/126/68.png) ![image](../assets/126/69.png) ![image](../assets/126/70.png) ![image](../assets/126/71.png) ![image](../assets/126/72.png) ![image](../assets/126/73.png) ![image](../assets/126/74.png) ![image](../assets/126/75.png) ![image](../assets/126/76.png) ![image](../assets/126/77.png) ![image](../assets/126/78.png) ![image](../assets/126/79.png) ![image](../assets/126/80.png) ![image](../assets/126/81.png) ![image](../assets/126/82.png) ![image](../assets/126/83.png) ![image](../assets/126/84.png) ![image](../assets/126/85.png) ![image](../assets/126/86.png) ![image](../assets/126/87.png) ![image](../assets/126/88.png) ![image](../assets/126/89.png) ![image](../assets/126/90.png) ![image](../assets/126/91.png) ![image](../assets/126/92.png) ![image](../assets/126/93.png)"},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#konosubakonoakua-2024-12-02t134838z","title":"konosubakonoakua \u00b7 2024-12-02T13:48:38Z","text":""},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#ioc","title":"IOC","text":"![image](../assets/126/94.png) ![image](../assets/126/95.png) ![image](../assets/126/96.png) ![image](../assets/126/97.png) ![image](../assets/126/98.png) ![image](../assets/126/99.png) ![image](../assets/126/100.png) ![image](../assets/126/101.png) ![image](../assets/126/102.png) ![image](../assets/126/103.png) ![image](../assets/126/104.png) ![image](../assets/126/105.png)"},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#stream-device","title":"stream device","text":"![image](../assets/126/106.png) ![image](../assets/126/107.png) ![image](../assets/126/108.png) ![image](../assets/126/109.png) ![image](../assets/126/110.png) ![image](../assets/126/111.png) ![image](../assets/126/112.png) ![image](../assets/126/113.png) ![image](../assets/126/114.png) ![image](../assets/126/115.png) ![image](../assets/126/116.png) ![image](../assets/126/117.png) ![image](../assets/126/118.png) ![image](../assets/126/119.png) ![image](../assets/126/120.png) ![image](../assets/126/121.png)"},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#autosave","title":"autosave","text":"![image](../assets/126/122.png) ![image](../assets/126/123.png) ![image](../assets/126/124.png) ![image](../assets/126/125.png) ![image](../assets/126/126.png) ![image](../assets/126/127.png)"},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#konosubakonoakua-2024-12-02t144657z","title":"konosubakonoakua \u00b7 2024-12-02T14:46:57Z","text":""},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#channel-access","title":"Channel Access","text":"![image](../assets/126/128.png) ![image](../assets/126/129.png) ![image](../assets/126/130.png) ![image](../assets/126/131.png) ![image](../assets/126/132.png) ![image](../assets/126/133.png) ![image](../assets/126/134.png) ![image](../assets/126/135.png) ![image](../assets/126/136.png) ![image](../assets/126/137.png) ![image](../assets/126/138.png) ![image](../assets/126/139.png) ![image](../assets/126/140.png) ![image](../assets/126/141.png) ![image](../assets/126/142.png) ![image](../assets/126/143.png) ![image](../assets/126/144.png) ![image](../assets/126/145.png) ![image](../assets/126/146.png) ![image](../assets/126/147.png) ![image](../assets/126/148.png) ![image](../assets/126/149.png) ![image](../assets/126/150.png) ![image](../assets/126/151.png) ![image](../assets/126/152.png) ![image](../assets/126/153.png) ![image](../assets/126/154.png) ![image](../assets/126/155.png) ![image](../assets/126/156.png) ![image](../assets/126/157.png) ![image](../assets/126/158.png) ![image](../assets/126/159.png) ![image](../assets/126/160.png) ![image](../assets/126/161.png) ![image](../assets/126/162.png) ![image](../assets/126/163.png) ![image](../assets/126/164.png) ![image](../assets/126/165.png) ![image](../assets/126/166.png) ![image](../assets/126/167.png) ![image](../assets/126/168.png) ![image](../assets/126/169.png) ![image](../assets/126/170.png) ![image](../assets/126/171.png) ![image](../assets/126/172.png) ![image](../assets/126/173.png) ![image](../assets/126/174.png) ![image](../assets/126/175.png) ![image](../assets/126/176.png) ![image](../assets/126/177.png) ![image](../assets/126/178.png) ![image](../assets/126/179.png) ![image](../assets/126/180.png)"},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#konosubakonoakua-2024-12-02t145528z","title":"konosubakonoakua \u00b7 2024-12-02T14:55:28Z","text":""},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#epics-automation","title":"EPICS Automation","text":"![image](../assets/126/181.png) ![image](../assets/126/182.png) ![image](../assets/126/183.png) ![image](../assets/126/184.png) ![image](../assets/126/185.png) ![image](../assets/126/186.png) ![image](../assets/126/187.png) ![image](../assets/126/188.png) ![image](../assets/126/189.png) ![image](../assets/126/190.png) ![image](../assets/126/191.png) ![image](../assets/126/192.png) ![image](../assets/126/193.png) ![image](../assets/126/194.png) ![image](../assets/126/195.png) ![image](../assets/126/196.png) ![image](../assets/126/197.png) ![image](../assets/126/198.png) ![image](../assets/126/199.png) ![image](../assets/126/200.png) ![image](../assets/126/201.png) ![image](../assets/126/202.png) ![image](../assets/126/203.png) ![image](../assets/126/204.png) ![image](../assets/126/205.png) ![image](../assets/126/206.png) ![image](../assets/126/207.png) ![image](../assets/126/208.png) ![image](../assets/126/209.png)"},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#konosubakonoakua-2024-12-02t150508z","title":"konosubakonoakua \u00b7 2024-12-02T15:05:08Z","text":""},{"location":"notes/posts/126%23%5Bsw%5D%5Bepics%5D%20epics%20notes/#aera-detector","title":"Aera Detector","text":"![image](../assets/126/210.png) ![image](../assets/126/211.png) ![image](../assets/126/212.png)"},{"location":"notes/posts/127%23%5Bhw%5D%20instrument%20intro/","title":"127 [hw] instrument intro","text":""},{"location":"notes/posts/127%23%5Bhw%5D%20instrument%20intro/#signal-generator","title":"signal generator","text":"<ul> <li>https://mall.rigol.com/content-info.html?article_id=113</li> </ul>"},{"location":"notes/posts/128%23%5Bsw%5D%5Bvim%5D%20neovim%20lazyvim%20setup/","title":"128 [sw][vim] neovim lazyvim setup","text":""},{"location":"notes/posts/128%23%5Bsw%5D%5Bvim%5D%20neovim%20lazyvim%20setup/#treesitter-parser-error","title":"treesitter parser error","text":"<p>Remove <code>&lt;parser&gt;.so</code> in <code>neovim-treesitter/parser</code> folder, then reinstall.</p>"},{"location":"notes/posts/129%23%5Bsw%5D%5Bhw%5D%5Bzynq%5D%20Reserved%20Memory%20Access/","title":"129 [sw][hw][zynq] Reserved Memory Access","text":"<ul> <li>https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18841683/Linux+Reserved+Memory</li> <li>https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18842412/Accessing+BRAM+In+Linux</li> </ul>"},{"location":"notes/posts/130%23%5Bsw%5D%5Bhw%5D%20custom%20rootfs%20for%20zynq7000/","title":"130 [sw][hw] custom rootfs for zynq7000","text":""},{"location":"notes/posts/130%23%5Bsw%5D%5Bhw%5D%20custom%20rootfs%20for%20zynq7000/#rootfs-from-eewiki","title":"rootfs from eewiki","text":"<ul> <li>https://rcn-ee.com/rootfs/eewiki/minfs/</li> <li>https://forum.digikey.com/t/debian-getting-started-with-the-zynq-7000/14380</li> </ul>"},{"location":"notes/posts/130%23%5Bsw%5D%5Bhw%5D%20custom%20rootfs%20for%20zynq7000/#comments","title":"Comments","text":""},{"location":"notes/posts/130%23%5Bsw%5D%5Bhw%5D%20custom%20rootfs%20for%20zynq7000/#konosubakonoakua-2025-03-31t022406z","title":"konosubakonoakua \u00b7 2025-03-31T02:24:06Z","text":""},{"location":"notes/posts/130%23%5Bsw%5D%5Bhw%5D%20custom%20rootfs%20for%20zynq7000/#root-passwd-reset-etcshadow","title":"root passwd reset (<code>/etc/shadow</code>)","text":"<p><pre><code>openssl passwd -1 \"your-password-here\"\n</code></pre> copy generated password to <code>/etc/shadow</code>: <pre><code># cat /etc/shadow\nroot:&lt;your password&gt;:10933:0:99999:7:::\n</code></pre></p>"},{"location":"notes/posts/130%23%5Bsw%5D%5Bhw%5D%20custom%20rootfs%20for%20zynq7000/#konosubakonoakua-2025-03-31t031039z","title":"konosubakonoakua \u00b7 2025-03-31T03:10:39Z","text":"<p>https://github.com/Xilinx/PYNQ/tree/master/sdbuild/scripts</p>"},{"location":"notes/posts/130%23%5Bsw%5D%5Bhw%5D%20custom%20rootfs%20for%20zynq7000/#konosubakonoakua-2025-03-31t032813z","title":"konosubakonoakua \u00b7 2025-03-31T03:28:13Z","text":""},{"location":"notes/posts/130%23%5Bsw%5D%5Bhw%5D%20custom%20rootfs%20for%20zynq7000/#deps","title":"deps","text":""},{"location":"notes/posts/130%23%5Bsw%5D%5Bhw%5D%20custom%20rootfs%20for%20zynq7000/#debootstrap","title":"debootstrap","text":"<p><pre><code>sudo apt install qemu-user-static debootstrap binfmt-support\n</code></pre> if debootstrap version is too low: <pre><code>git clone https://salsa.debian.org/installer-team/debootstrap.git\ncd debootstrap\nsudo make install\n</code></pre> Or download form ftp site: https://ftp.debian.org/debian/pool/main/d/debootstrap/ <pre><code>wget https://ftp.debian.org/debian/pool/main/d/debootstrap/debootstrap_1.0.140_all.deb\n</code></pre></p>"},{"location":"notes/posts/130%23%5Bsw%5D%5Bhw%5D%20custom%20rootfs%20for%20zynq7000/#konosubakonoakua-2025-03-31t034756z","title":"konosubakonoakua \u00b7 2025-03-31T03:47:56Z","text":""},{"location":"notes/posts/130%23%5Bsw%5D%5Bhw%5D%20custom%20rootfs%20for%20zynq7000/#references","title":"References","text":"- https://github.com/ikwzm/ZynqMP-FPGA-Debian12/blob/v7.0.0/doc/build/debian12-rootfs.md - https://github.com/PyHDI/zynq-linux - https://wiki.debian.org/InstallingDebianOn/Xilinx/ZC702/wheezy - https://forum.digikey.com/t/debian-getting-started-with-the-zynq-7000/14380 - https://blog.night-shade.org.uk/2013/12/building-a-pure-debian-armhf-rootfs/ - https://www.slideshare.net/shtaxxx/debian-linux-on-zynq-setup-flow-vivado-20154 - https://fpgacpu.wordpress.com/2013/05/24/yet-another-guide-to-running-linaro-ubuntu-desktop-on-xilinx-zynq-on-the-zedboard/ - http://lucasbrasilino.com/posts/Custom-debian-for-zynq-ultrascale+-mpsoc-platform/ - https://www.ashtonjohnson.com/2019/10/ubuntu-nfs-rootfs-on-zynq-using.html - https://doc.embedfire.com/linux/stm32mp1/quick_start_guide/zh/latest/quick_start/board_startup/board_startup.html - https://akhileshmoghe.github.io/_post/linux/debian_minimal_rootfs - https://cdimage.ubuntu.com/ubuntu-base/releases/ - https://doc.embedfire.com/linux/rk356x/build_and_deploy/zh/latest/building_image/ubuntu_rootfs/ubuntu_rootfs.html - https://github.com/armbian/cache/releases/tag/0122"},{"location":"notes/posts/130%23%5Bsw%5D%5Bhw%5D%20custom%20rootfs%20for%20zynq7000/#konosubakonoakua-2025-03-31t064433z","title":"konosubakonoakua \u00b7 2025-03-31T06:44:33Z","text":""},{"location":"notes/posts/130%23%5Bsw%5D%5Bhw%5D%20custom%20rootfs%20for%20zynq7000/#scripts","title":"Scripts","text":"<p>https://gist.github.com/konosubakonoakua/855ce64c961be1b31252fbe778116090</p>"},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/","title":"131 [sw][linux][raspi][ioc] Orange Pi Zero setup","text":""},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#image","title":"image","text":"- [armbian](https://www.armbian.com/orange-pi-zero/)  <pre><code>scoop install rufus\n</code></pre>"},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#apt-mirrors","title":"apt mirrors","text":"<pre><code>sudo cp -f /etc/apt/sources.list /etc/apt/sources.list.bak\nsudo tee /etc/apt/sources.list &lt;&lt; 'EOF'\ndeb https://mirrors.bfsu.edu.cn/debian/ bookworm main contrib non-free non-free-firmware\ndeb https://mirrors.bfsu.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware\ndeb https://mirrors.bfsu.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmware\ndeb https://security.debian.org/debian-security bookworm-security main contrib non-free non-free-firmware\n\n# deb-src https://mirrors.bfsu.edu.cn/debian/ bookworm main contrib non-free non-free-firmware\n# deb-src https://mirrors.bfsu.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware\n# deb-src https://mirrors.bfsu.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmware\n# deb-src https://security.debian.org/debian-security bookworm-security main contrib non-free non-free-firmware\nEOF\n\nsed -i.bak 's#http://beta.armbian.com#https://mirrors.bfsu.edu.cn/armbian#g' /etc/apt/sources.list.d/armbian.list\n#sed -i.bak 's#http://apt.armbian.com#https://mirrors.bfsu.edu.cn/armbian#g' /etc/apt/sources.list.d/armbian.list\n\nsudo apt update &amp;&amp; sudo apt upgrade\n</code></pre>"},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#samba-tftp","title":"samba &amp; tftp","text":"[raspi docs samba](https://www.raspberrypi.com/documentation/computers/remote-access.html#samba-smbcifs) <pre><code>sudo apt update\nsudo apt install samba samba-common-bin smbclient cifs-utils\n</code></pre> <pre><code>cd ~\nmkdir shared\nchmod 0740 shared\nsudo smbpasswd -a opi\n</code></pre> <pre><code>sudo tee -a /etc/samba/smb.conf &lt;&lt; 'EOF'\n[shared]\n    path = /home/rpi/shared\n    writable = yes\n    browsable = yes\n    public = yes\n    create mask = 0777\n    max connections = 10\nEOF\nsudo sed -i '/map to guest = bad user/s/^/# /' /etc/samba/smb.conf\n</code></pre> <pre><code>sudo systemctl restart smbd\n</code></pre> <pre><code># trouble shoot\nrm -rf /var/log/samba/log.smbd\nsudo rm -rf /var/lib/samba/registry.tdb\n</code></pre>  [Test setup (TFTP)](https://www.raspberrypi.com/documentation/computers/remote-access.html#test-setup)"},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#networking","title":"Networking","text":"<pre><code># only for minimal images\nsudo tee /etc/netplan/20-static-ip.yaml &lt;&lt; EOF\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    eth0:\n      addresses:\n      - 192.168.137.201/24\n      routes:\n      - to: default\n        via: 192.168.137.1\n      nameservers:\n       addresses:\n         - 114.114.114.114\n         - 8.8.8.8\nEOF\n</code></pre> <pre><code>sudo chmod 600 /etc/netplan/*.yaml\nsudo netplan try\nsudo netplan apply\n</code></pre>"},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#install-fzfzellijzoxide","title":"Install fzf/zellij/zoxide","text":"Download them from windows side - [fzf](https://github.com/junegunn/fzf/releases)  Or just use samba on windows side."},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#python","title":"python","text":"- install pkgs   <pre><code>sudo apt install python3-dev python3-pip python3-venv\n</code></pre> - add pypi mirrors   <pre><code># pip config set global.index-url https://mirrors.bfsu.edu.cn/pypi/web/simple\npip config set global.index-url https://www.piwheels.org/simple\n</code></pre> - create venvs   <pre><code>mkdir -p ~/.virtualenvs\ncd ~/.virtualenvs\npython3 -m venv epics\nsource ~/.virtualenvs/epics/bin/activate\n</code></pre> - failed to build wheels, then use piwheels   <pre><code>pip3 install numpy -i https://www.piwheels.org/simple\n</code></pre> - numpy failed to import, cannot find openblas   <pre><code>sudo apt install libopenblas-dev\n</code></pre>"},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#konosubakonoakua-2024-12-24t115454z","title":"konosubakonoakua \u00b7 2024-12-24T11:54:54Z","text":""},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#epics-on-orange-pi-zero","title":"epics on orange pi zero","text":"<pre><code>sudo apt -y install git net-tools build-essential re2c libnet-dev libpcap-dev libusb-1.0-0-dev\n</code></pre> - https://epics.anl.gov/download/base/index.php  <pre><code>mkdir $HOME/EPICS\ncd $HOME/EPICS\nwget https://epics.anl.gov/download/base/base-7.0.8.1.tar.gz\ntar xf base-7.0.8.1.tar.gz &amp;&amp; ln -s base-7.0.8.1 epics-base\ncd epics-base\nmake -j2\n~/EPICS/bin/linux-arm/softIoc\n</code></pre> &gt; [!IMPORTANT] &gt; You need to set `PYEPICS_LIBCA` to load the correct `libca.so` on rpi &gt; Refer to: [pyepics issue 238](https://github.com/pyepics/pyepics/issues/238) <pre><code>cat &gt;&gt; ~/.bashrc &lt;&lt; 'EOF'\n\nexport EPICS_BASE=$HOME/EPICS/epics-base\nexport EPICS_HOST_ARCH=linu-arm\nexport PYEPICS_LIBCA=$HOME/EPICS/epics-base/lib/linux-arm/libca.so\n\nEOF\n</code></pre> #### pythonsoftioc on raspi <pre><code># because it will install 7.0.7.99.0.2 which will not work with latest softioc\nuv pip install epicscorelibs==7.0.7.99.1.1\nuv pip install softioc\n</code></pre> Then try with [this test](https://diamondlightsource.github.io/pythonSoftIOC/master/tutorials/creating-an-ioc.html).  #### pcaspy on raspi <pre><code>sudo apt install -y swig\n</code></pre> <pre><code>mkdir ~/EPICS/support\ncd ~/EPICS/support\nwget https://github.com/epics-modules/pcas/archive/refs/tags/v4.13.3.tar.gz\nmv v4.13.3.tar.gz pcas-4.13.13.tar.gz\ntar xvzf pcas-4.13.3.tar.gz &amp;&amp; rm pcas-4.13.3.tar.gz\ncd ./pcas-4.13.3\n</code></pre> <pre><code>cat &gt; configure/RELEASE.local &lt;&lt; EOF\nEPICS_BASE = ${EPICS_BASE}\nEOF\n</code></pre> <pre><code>make -j4\n</code></pre> <pre><code>cat &gt;&gt; ~/.bashrc &lt;&lt; EOF\nexport PCAS=~/EPICS/support/pcas-4.13.3\nEOF\n</code></pre> <pre><code>source ~/.bashrc\n</code></pre> <pre><code>uv pip install pcaspy\n</code></pre> If encountered with: `ImportError: libca.so.4.14.3: cannot open shared object file: No such file or directory`, Check version first:  <pre><code>caget -V\n</code></pre> <pre><code>ldd ~/.virtualenvs/opi/lib/python3.11/site-packages/pcaspy/_cas.cpython-311-armhf-linux-gnu.so\n</code></pre> If epics version not matched with pcas build, then use `ln -s` to make softlinks for shared libs.  <pre><code>cd $EPICS_BASE/lib/linux-arm/\nln -s libca.so.4.14.4 libca.so.4.14.3\nln -s libCom.so.3.23.1 libCom.so.3.23.0\n</code></pre>"},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#konosubakonoakua-2024-12-24t142146z","title":"konosubakonoakua \u00b7 2024-12-24T14:21:46Z","text":""},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#swapfile","title":"swapfile","text":"<pre><code>## add\nsudo fallocate -l 1G /swapfile\nsudo chmod 600 /swapfile\nsudo mkswap /swapfile\nsudo swapon /swapfile\n</code></pre> <pre><code>## remove\nsudo swapoff /swapfile\nsudo rm /swapfile\n</code></pre>"},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#konosubakonoakua-2024-12-24t150602z","title":"konosubakonoakua \u00b7 2024-12-24T15:06:02Z","text":""},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#autostart","title":"autostart","text":""},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#rc-local","title":"rc-local","text":"<pre><code>#!/bin/sh -e\n#\n# rc.local\n#\n# This script is executed at the end of each multiuser runlevel.\n# Make sure that the script will \"exit 0\" on success or any other\n# value on error.\n#\n# In order to enable or disable this script just change the execution\n# bits.\n#\n# By default this script does nothing.\n\n# Print the IP address\n_IP=$(hostname -I) || true\nif [ \"$_IP\" ]; then\n  printf \"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;IP address is %s\\n\" \"$_IP\"\nfi\n\n### add your commands here ###\n\n# keep this line\nexit 0\n</code></pre>"},{"location":"notes/posts/131%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Orange%20Pi%20Zero%20setup/#systemd","title":"systemd","text":"- Example    <pre><code>sudo tee /etc/systemd/system/ioc-instr-cs-keithley-6221.service &lt;&lt; EOF\n[Unit]\nDescription=softioc for keithley current source 6221\nAfter=network.target\nStartLimitIntervalSec=60\nStartLimitBurst=5\n\n[Service]\nExecStart=/home/opi/shared/iocs/ioc-instr-cs-keithley-6221/pve/softioc_keithley6221.sh\nWorkingDirectory=/home/opi/shared/iocs/ioc-instr-cs-keithley-6221/pve/\nStandardOutput=inherit\nStandardError=inherit\nRestart=always\nUser=opi\n\n[Install]\nWantedBy=multi-user.target\nEOF\n</code></pre> - Enable &amp; Start   <pre><code>sudo systemctl enable ioc-instr-cs-keithley-6221.service\nsudo systemctl start ioc-instr-cs-keithley-6221.service\n</code></pre> - Logging   <pre><code>journalctl -u ioc-instr-cs-keithley-6221.service -f\n</code></pre> - Restart   <pre><code>sudo systemctl reset-failed ioc-instr-cs-keithley-6221.service\nsudo systemctl restart ioc-instr-cs-keithley-6221.service\n</code></pre> - Reload   <pre><code>sudo systemctl daemon-reload\n</code></pre>"},{"location":"notes/posts/132%23%5Bhw%5D%20jtag%20trouble%20shoot/","title":"132 [hw] jtag trouble shoot","text":"<ul> <li>DONE pin cannot pull up   <code>ERROR: [Labtools 27-3165] End of startup status: LOW</code></li> <li>connect VREF to 3v3</li> </ul>"},{"location":"notes/posts/132%23%5Bhw%5D%20jtag%20trouble%20shoot/#comments","title":"Comments","text":""},{"location":"notes/posts/132%23%5Bhw%5D%20jtag%20trouble%20shoot/#konosubakonoakua-2025-01-09t170845z","title":"konosubakonoakua \u00b7 2025-01-09T17:08:45Z","text":""},{"location":"notes/posts/132%23%5Bhw%5D%20jtag%20trouble%20shoot/#vivado-20242-program_ftdi-not-found","title":"vivado 2024.2 <code>program_ftdi</code> not found","text":"<p>do not use the desktop shortcut to start viavado, use terminal. <pre><code>WARNING: [Common 17-259] Unknown Tcl command 'program_ftdi' sending command to the OS shell for execution. It is recommended to use 'exec' to send the command to the OS shell.\ninvalid command name \"program_ftdi\"\n</code></pre> <pre><code>source /tools/Xilinx/Vivado/2024.2/settings64.sh &amp;&amp; vivado\n</code></pre> Then refer to https://adaptivesupport.amd.com/s/article/000037237?language=en_US Download ftdieeprom.tcl.gz Then replace it in vivado scripts folder - program_ftdi <pre><code>program_ftdi -write -f FT2232H -s 0000001 -v \"@RF\" -b \"custom\" -d \"FT2232H JTAG Cable :D\"\n</code></pre> In case vivado cannot detect the device: <pre><code>sudo rmmod ftdi_sio &amp;&amp; sudo rmmod usbserial\n</code></pre></p>"},{"location":"notes/posts/132%23%5Bhw%5D%20jtag%20trouble%20shoot/#konosubakonoakua-2025-01-09t172538z","title":"konosubakonoakua \u00b7 2025-01-09T17:25:38Z","text":""},{"location":"notes/posts/132%23%5Bhw%5D%20jtag%20trouble%20shoot/#jtag-cable-programmed-by-program_ftdi-cannot-be-detected-by-vivado-20191","title":"JTAG cable programmed by <code>program_ftdi</code> cannot be detected by vivado 2019.1","text":"<p>Maybe because udev rule files not okay. <pre><code>sudo cp /tools/Xilinx/Vivado/2019.1/data/xicom/cable_drivers/lin64/install_script/install_drivers/52-xilinx-ftdi-usb.rules /etc/udev/rules.d/\n</code></pre> Or <pre><code>sudo /tools/Xilinx/Vivado/2019.1/data/xicom/cable_drivers/lin64/install_script/install_drivers/install_drivers\n</code></pre></p>"},{"location":"notes/posts/132%23%5Bhw%5D%20jtag%20trouble%20shoot/#konosubakonoakua-2025-01-12t121016z","title":"konosubakonoakua \u00b7 2025-01-12T12:10:16Z","text":""},{"location":"notes/posts/132%23%5Bhw%5D%20jtag%20trouble%20shoot/#references","title":"references","text":"<ul> <li>https://etherealwake.com/2024/06/xilinx-ftdi-jtag/</li> </ul>"},{"location":"notes/posts/132%23%5Bhw%5D%20jtag%20trouble%20shoot/#konosubakonoakua-2025-02-28t101813z","title":"konosubakonoakua \u00b7 2025-02-28T10:18:13Z","text":""},{"location":"notes/posts/132%23%5Bhw%5D%20jtag%20trouble%20shoot/#vivado-jtag-flash-download-failed-ftdi_read_data-failed-usb-bulk-read-failed","title":"vivado jtag flash download failed: <code>ftdi_read_data failed: usb bulk read failed</code>","text":"<ul> <li>error-in-launching-program-from-sdk-20182</li> <li>try another ftdi jtag debugger</li> <li>confirm powersupply</li> <li>installed wrong ftdi driver</li> <li>try to inspect component, e.g. 12MHz crystal (MUST satisfy +-30ppm)</li> </ul>"},{"location":"notes/posts/133%23%5Bhw%5D%20open%20source%20altium%20footprint%20libraries/","title":"133 [hw] open source altium footprint libraries","text":"<ul> <li>https://github.com/issus/altium-library</li> <li>https://github.com/boringhex-top/OpenECADLib</li> <li>https://github.com/SMotlaq/altium-library</li> </ul>"},{"location":"notes/posts/134%23%5Bepics%5D%20setup%20epics%20on%20radxa%20zero%203e%20with%20dietpi%20installed/","title":"134 [epics] setup epics on radxa zero 3e with dietpi installed","text":""},{"location":"notes/posts/134%23%5Bepics%5D%20setup%20epics%20on%20radxa%20zero%203e%20with%20dietpi%20installed/#epoll-issue-dietpi","title":"epoll issue (dietpi)","text":"<p>After I installed softioc, encounterd: <pre><code>libevent Warn: epoll_wait: Function not implemented\n2025-01-20T14:12:52.354942535 CRIT pvxs.loop Exit loop worker: -1 for 0xffffa8000c70\n</code></pre> must add <code>EVENT_NOEPOLL=1</code> before your command or just insert the code below <pre><code>import os\nos.environ['EVENT_NOEPOLL'] = '1'\n</code></pre> I have raised an issue in pvxs: https://github.com/epics-base/pvxs/issues/96</p>"},{"location":"notes/posts/134%23%5Bepics%5D%20setup%20epics%20on%20radxa%20zero%203e%20with%20dietpi%20installed/#comments","title":"Comments","text":""},{"location":"notes/posts/134%23%5Bepics%5D%20setup%20epics%20on%20radxa%20zero%203e%20with%20dietpi%20installed/#konosubakonoakua-2025-01-20t163425z","title":"konosubakonoakua \u00b7 2025-01-20T16:34:25Z","text":""},{"location":"notes/posts/134%23%5Bepics%5D%20setup%20epics%20on%20radxa%20zero%203e%20with%20dietpi%20installed/#i2c-issue","title":"i2c issue","text":"<p>i2c3 on Pin 3/5 is not enabled by default. BTW 0x22 is occupied by PD delivery chip</p> <p>We need to use additional device tree overlays here(radxa-overlays action artifacts) Or just use the file I have uploaded: linux-rk356x.zip</p> <p>Then <pre><code>cp ~/shared/rk3568-i2c3-m0.dtbo /boot/dtb-5.10.160-legacy-rk35xx/rockchip/\n</code></pre> Then modify <code>/boot/dietpiEnv.txt</code> <pre><code>overlay_path=rockchip\noverlay_prefix=rk3568\noverlays=i2c3-m0\nuser_overlays=\n</code></pre></p>"},{"location":"notes/posts/135%23%5Bepics%5D%20raspberry%20pi%20zero%202w%20setup/","title":"135 [epics] raspberry pi zero 2w setup","text":""},{"location":"notes/posts/135%23%5Bepics%5D%20raspberry%20pi%20zero%202w%20setup/#image-download","title":"image download","text":"<p>raspberry-pi-os-64-bit</p>"},{"location":"notes/posts/135%23%5Bepics%5D%20raspberry%20pi%20zero%202w%20setup/#enable-uart-in-configtxt","title":"ENABLE UART in <code>config.txt</code>","text":"<p>pinout here UART-TX-GPIO14 UART-RX-GPIO15</p> <p>Add <code>enable_uart=1</code> in <code>config.txt</code>. Refer to here</p>"},{"location":"notes/posts/135%23%5Bepics%5D%20raspberry%20pi%20zero%202w%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/135%23%5Bepics%5D%20raspberry%20pi%20zero%202w%20setup/#konosubakonoakua-2025-02-10t065320z","title":"konosubakonoakua \u00b7 2025-02-10T06:53:20Z","text":""},{"location":"notes/posts/135%23%5Bepics%5D%20raspberry%20pi%20zero%202w%20setup/#pcaspy","title":"pcaspy","text":"<pre><code>export PIP_NO_USE_PEER_RETRIES=1 # if mem &lt; 1G\nuv pip install pvxslibs epicsdbbuilder pyyaml cothread\nuv pip install softioc --no-deps\n</code></pre>"},{"location":"notes/posts/136%23%5Bepics%5D%20epics%20prebuilt/","title":"136 [epics] epics prebuilt","text":""},{"location":"notes/posts/136%23%5Bepics%5D%20epics%20prebuilt/#epics-prebuilt","title":"EPICS prebuilt","text":""},{"location":"notes/posts/136%23%5Bepics%5D%20epics%20prebuilt/#aarch64","title":"aarch64","text":"<ul> <li>3.15.9 (runtime, only header &amp; lib files, linux-arm as target, cross-compiled)</li> <li> <p>7.0.8 (runtime, only header &amp; lib files, cross-compiled)</p> </li> <li> <p>3.15.9 (full, native)</p> </li> <li>7.0.8.1 (full, native)</li> </ul>"},{"location":"notes/posts/136%23%5Bepics%5D%20epics%20prebuilt/#armhf","title":"armhf","text":"<ul> <li>3.15.9 (runtime, only header &amp; lib files, cross-compiled)</li> <li> <p>7.0.8 (runtime, only header &amp; lib files, cross-compiled)</p> </li> <li> <p>3.15.9 (full, native)</p> </li> <li>7.0.8 (full, native)</li> </ul>"},{"location":"notes/posts/136%23%5Bepics%5D%20epics%20prebuilt/#x86-64","title":"x86-64","text":"<ul> <li><sub>7.0.8.1</sub></li> </ul>"},{"location":"notes/posts/136%23%5Bepics%5D%20epics%20prebuilt/#comments","title":"Comments","text":""},{"location":"notes/posts/136%23%5Bepics%5D%20epics%20prebuilt/#konosubakonoakua-2025-02-08t070423z","title":"konosubakonoakua \u00b7 2025-02-08T07:04:23Z","text":"<p>Refer to: https://github.com/konosubakonoakua/epics-prebuilt/releases/tag/prebuilt</p>"},{"location":"notes/posts/136%23%5Bepics%5D%20epics%20prebuilt/#konosubakonoakua-2026-01-04t080635z","title":"konosubakonoakua \u00b7 2026-01-04T08:06:35Z","text":"<ul> <li>https://epicsdeb.bnl.gov/debian/#:~:text=This%20repository%20contains%20installable%20software%20packages%20in%20the,can%20be%20found%20in%20epicsdeb%20project%20on%20GitHub.</li> <li>https://ubuntu.pkgs.org/24.04/ubuntu-universe-amd64/epics-dev_7.0.7+dfsg1-5_amd64.deb.html</li> <li>https://github.com/konosubakonoakua/epics-base-deb</li> </ul>"},{"location":"notes/posts/137%23%5Bepics%5D%5Bpy%5D%20pythonsoftioc/","title":"137 [epics][py] pythonsoftioc","text":""},{"location":"notes/posts/137%23%5Bepics%5D%5Bpy%5D%20pythonsoftioc/#systemd-issue","title":"systemd issue","text":"<p>when using systemd to manage pythonsoftioc programs, DO NOT USE <code>interactive_ioc()</code>.</p>"},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/","title":"138 [fpga] vivado issues","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#axi-bram-controller-depth-not-matched-with-block-memory-generator-20191-20242","title":"AXI BRAM Controller depth not matched with Block Memory Generator (2019.1, 2024.2)","text":"![AXI BRAM Controller depth not matched with Block Memory Generator](../assets/138/1.png)  &gt; ERROR: [IP_Flow 19-3478] Validation failed for parameter 'Disable Collision Warnings(Disable_Collision_Warnings)' with value 'false' for BD Cell 'axi_bram_ctrl_0_bram'. User configuration exceeds BRAM count in the selected device  Solution:  &gt; Set `Block Memory Generator` as `Stand Alone` Mode, then set `Write/Read Width` &amp; `Write Depth` manually, finally, set `Mode` back to `BRAM Controller`.  &gt; Sometimes, instead directly setting width to 512, setting to 128/256 first, then back to 512 may work.  I asked on AMD forum: https://adaptivesupport.amd.com/s/question/0D54U000092F4C1SAK/vivado-20191-axi-bram-controller-data-width-not-propagated-to-block-memory-generator?language=en_US  They give me a workaround: <pre><code>Set BRAM Controller DW = 32 &amp; Address Range = 4k\nValidate bd\nSet BRAM Controller DW = 512 &amp; Address Range = 256k\nValidate bd --&gt; no more validation errors\n</code></pre> If still no okay, remove block mem then add again.  Again, if you are using a True dual-port BRAM, you maybe encounter still the propagation issue. For example, you use bram controller to control portA, then you want to control port B using custom rtl codes, you will fail on validation because the unmatched issue again. Here, I found a new workaround to solve issue with the port B. We need to create a new bram controller connected to port B, then set all parameters using method above. After we pass the validation, remove the new bram controller form port B, connect our own RTL codes to port B, try validating, wish your success.  https://www.bilibili.com/video/BV1oTPvefEEZ/  ### A new workaround (manually set config `Write_Width_A` parameter) - manually set `Write_Width_A` for `blk_mem_gen`, save, valid.   ![Image](../assets/138/2.png) - make external BRAM_PORTB, set MEM_WIDTH manually, save, valid ![Image](../assets/138/3.png)"},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#comments","title":"Comments","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#konosubakonoakua-2025-02-25t080334z","title":"konosubakonoakua \u00b7 2025-02-25T08:03:34Z","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#clocking-wizard-external-pin-freq-not-matched-with-clk_in1","title":"Clocking Wizard external pin freq not matched with clk_in1","text":"<ul> <li>you must set the external pin freq when making clk_in1 external      ![Image](../assets/138/4.png)    </li> </ul>"},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#konosubakonoakua-2025-02-25t080643z","title":"konosubakonoakua \u00b7 2025-02-25T08:06:43Z","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#cound-not-find-external-pin-port-of-clocking-wizard-in-schematic","title":"Cound not find external pin port of Clocking Wizard in Schematic","text":"<ul> <li>Maybe because the <code>design_1_wrapper</code> does not contain the port for clocking wizard, Try to remove it then recreate one.</li> </ul>"},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#konosubakonoakua-2025-02-28t101133z","title":"konosubakonoakua \u00b7 2025-02-28T10:11:33Z","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#could-not-generate-x4-spi-mcs-file","title":"Could not generate <code>x4</code> spi mcs file","text":"- [Vivado\u751f\u6210X1\u6216X4\u4f4d\u5bbdmcs\u6587\u4ef6\u5e76\u56fa\u5316\u5230flash](https://blog.csdn.net/m0_66578894/article/details/145341631)   <pre><code>set_property CFGBVS VCCO [current_design]\n\u8bbe\u7f6e FPGA \u914d\u7f6e\u5f15\u811a\u7684\u53c2\u8003\u7535\u538b\u6e90\u4e3a VCCO\uff0c\u786e\u4fdd\u4e0e\u5916\u90e8\u5668\u4ef6\u7684\u7535\u5e73\u517c\u5bb9\u3002\n\nset_property CONFIG_VOLTAGE 3.3 [current_design]\n\u8bbe\u7f6e FPGA \u914d\u7f6e\u63a5\u53e3\u7684\u5de5\u4f5c\u7535\u538b\u4e3a 3.3V\uff0c\u9700\u4e0e\u5916\u90e8\u8bbe\u5907\uff08\u5982 SPI Flash\uff09\u7684\u5de5\u4f5c\u7535\u538b\u5339\u914d\u3002\n\nset_property BITSTREAM.GENERAL.COMPRESS true [current_design]\n\u542f\u7528\u6bd4\u7279\u6d41\u538b\u7f29\uff0c\u51cf\u5c0f\u6bd4\u7279\u6d41\u6587\u4ef6\u5927\u5c0f\uff0c\u52a0\u5feb\u914d\u7f6e\u901f\u5ea6\u3002\n\nset_property BITSTREAM.CONFIG.CONFIGRATE 50 [current_design]\n\u8bbe\u7f6e\u914d\u7f6e\u65f6\u949f\u9891\u7387\u4e3a 50 MHz\uff0c\u9700\u4e0e\u914d\u7f6e\u5668\u4ef6\u7684\u65f6\u949f\u901f\u7387\u80fd\u529b\u76f8\u5339\u914d\u3002\n\nset_property BITSTREAM.CONFIG.SPI_BUSWIDTH 4 [current_design]\n\u8bbe\u7f6e SPI \u914d\u7f6e\u6a21\u5f0f\u4e3a Quad SPI\uff08\u56db\u7ebf\u6a21\u5f0f\uff09\uff0c\u4ee5\u63d0\u9ad8\u6bd4\u7279\u6d41\u4f20\u8f93\u901f\u5ea6\u3002\n\nset_property BITSTREAM.CONFIG.SPI_FALL_EDGE yes [current_design]\n\u6307\u5b9a SPI \u65f6\u949f\u5728\u4e0b\u964d\u6cbf\u91c7\u6837\u6570\u636e\u3002\u9700\u8981\u4e0e\u5916\u90e8 SPI Flash \u7684\u5de5\u4f5c\u6a21\u5f0f\u5339\u914d\u3002\n</code></pre>"},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#konosubakonoakua-2025-03-10t023046z","title":"konosubakonoakua \u00b7 2025-03-10T02:30:46Z","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#error-labtools-27-3165-end-of-startup-status-low","title":"ERROR: [Labtools 27-3165] End of startup status: LOW","text":"<ul> <li>check powersupply</li> <li>check VREF connection (not sure)</li> <li>check bootmode (jtag mode)</li> <li>check done pin (if with led attached)</li> <li>how-to-connect-done-signal-to-cpld<ul> <li>Red LED has a lower voltage drop, use blue or green LEDs instead.</li> <li>Remove LED</li> </ul> </li> <li>FPGA configuration process successfully completes (DONE PIN)</li> </ul>"},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#konosubakonoakua-2025-03-13t014024z","title":"konosubakonoakua \u00b7 2025-03-13T01:40:24Z","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#opt-31-67-problem-a-lut2-cell-in-the-design-is-missing-a-connection-on-input-pin-i1","title":"[Opt 31-67] Problem: A LUT2 cell in the design is missing a connection on input pin I1","text":"<ul> <li>https://adaptivesupport.amd.com/s/article/72980?language=en_US</li> <li>open Elaborated Design</li> <li><code>select_objects [get_cells {your LUT cell name}]</code></li> <li><code>F4</code> or <code>schematic</code></li> <li><code>Expand Cone &gt; To Leaf Cells.</code></li> <li>Trace through as many hierarchies as needed to find where it is disconnected (n/c).</li> <li>goto source</li> <li>Check your IP core internal outputs, does them really output something?</li> <li>e.g. I have forget to assign reg content to port</li> <li>Check your <code>Block Design</code>, do you really connect the signal?</li> <li>e.g. I have forget to connect global <code>rst</code> signal to modules</li> </ul>"},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#konosubakonoakua-2025-03-18t095937z","title":"konosubakonoakua \u00b7 2025-03-18T09:59:37Z","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#axi-dma-stuck-at-xaxidma_busy-due-to-wrong-block-design-smc-connection","title":"AXI DMA stuck at <code>XAxiDma_Busy</code> due to wrong block design SMC connection","text":"<p>If you connect AXI DMA wrongly, you will get wrong address range, the correct connection &amp; range are showing below.</p>   ![Image](../assets/138/5.png)  ![Image](../assets/138/6.png)"},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#konosubakonoakua-2025-03-20t092834z","title":"konosubakonoakua \u00b7 2025-03-20T09:28:34Z","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#vivado-speed-comparison-on-winlinux","title":"vivado speed comparison on win/linux","text":"- https://www.bilibili.com/video/BV14EfnYtEzS  ![Image](../assets/138/7.png)"},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#konosubakonoakua-2025-03-31t070258z","title":"konosubakonoakua \u00b7 2025-03-31T07:02:58Z","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#labtools-27-3303-incorrect-bitstream-assigned-to-device-bitstream-was-generated-for-part-xcvu37p-fsvh2892-1-e-target-device-with-idcode-revision-0-is-compatible-with-es1-revision-bitstreams","title":"[Labtools 27-3303] Incorrect bitstream assigned to device. Bitstream was generated for part xcvu37p-fsvh2892-1-e, target device (with IDCODE revision 0) is compatible with es1 revision bitstreams","text":"<pre><code>set_param xicom.use_bitstream_version_check false\n</code></pre>"},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#konosubakonoakua-2025-04-01t070225z","title":"konosubakonoakua \u00b7 2025-04-01T07:02:25Z","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#system-memory-recommendations","title":"System Memory Recommendations","text":"<p>https://www.amd.com/en/products/software/adaptive-socs-and-fpgas/vivado/vivado-buy.html#tabs-413944f675-item-9598720e6a-tab</p> <p>my settings: 6 threads, 20GB for zynqMP</p>"},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#konosubakonoakua-2025-04-14t011351z","title":"konosubakonoakua \u00b7 2025-04-14T01:13:51Z","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#language-server-crashes-very-often","title":"language server crashes very often","text":"<ul> <li>Vivado hangs due to sigasi cache utilizing significant space</li> <li>don't use <code>sigasi</code></li> <li>or try to use another cache path: <code>Settings -&gt; Tool Settings -&gt; Text Editor -&gt; Syntax Checking -&gt; Cache Settings</code></li> </ul>"},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#konosubakonoakua-2025-04-14t011444z","title":"konosubakonoakua \u00b7 2025-04-14T01:14:44Z","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#55854-vivado-what-can-i-do-to-resolve-a-vivado-crash-exception-or-abnormal-program-termination","title":"55854 - Vivado - What can I do to resolve a Vivado crash, exception, or abnormal program termination?","text":"<ul> <li>https://adaptivesupport.amd.com/s/article/55854</li> </ul>"},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#konosubakonoakua-2025-05-22t051833z","title":"konosubakonoakua \u00b7 2025-05-22T05:18:33Z","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#switch-vivado-version","title":"switch vivado version","text":"<ul> <li>by registry: https://github.com/konosubakonoakua/vivtool/tree/main/switcher</li> <li>by dynamic switcher: </li> <li>by <code>.bat</code> scripts</li> </ul>"},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#konosubakonoakua-2025-05-30t093813z","title":"konosubakonoakua \u00b7 2025-05-30T09:38:13Z","text":""},{"location":"notes/posts/138%23%5Bfpga%5D%20vivado%20issues/#move-vivado-from-c-to-d","title":"~move vivado from <code>C:</code> to <code>D:</code>~","text":"<p>maybe break the disk optimization performed by vivado installer (shouldn't turn disk optim on)</p> <pre><code>robocopy C:\\Xilinx\\ D:\\tools\\Xilinx /E /MT:32 /COPYALL /DCOPY:DAT /SECFIX /TIMFIX /LOG:xilinx_copy.log /NP\n</code></pre> <pre><code>rmdir /s /q C:\\Xilinx\n</code></pre> <pre><code>mklink /j &lt;target&gt; &lt;source&gt;\n</code></pre> <pre><code>scoop bucket add ssyinternals\nscoop install junction\n</code></pre> <pre><code>junction -d &lt;j_link_path&gt;\n</code></pre>   ### konosubakonoakua \u00b7 2025-06-13T09:57:38Z  ## X_INTERFACE_INFO ### bram   bram x_interface_info vhdl  <pre><code>entity save_data_brm_ctr is\n  port (\n    clk       : in    std_logic;\n    reset_n   : in    std_logic;\n    read_done : in    std_logic_vector(31 downto 0);\n\n    interlock      : in    std_logic;\n    adc_valid      : in    std_logic;\n    wr_en          : out   std_logic_vector(0 downto 0);\n    bram_addr      : out   std_logic_vector(31 downto 0);\n    lock_bram_addr : out   std_logic_vector(12 downto 0);\n    en             : out   std_logic;\n    led            : out   std_logic;\n--    dout          : in    std_logic_vector(511 downto 0);\n--    din           : out   std_logic_vector(511 downto 0);\n    write_done     : out   std_logic\n  );\n\n\n\nend entity save_data_brm_ctr;\n\narchitecture behavioral of save_data_brm_ctr is\n\n    ATTRIBUTE X_INTERFACE_INFO : STRING;\n    ATTRIBUTE X_INTERFACE_PARAMETER : STRING;\n\n    ATTRIBUTE X_INTERFACE_INFO of en: SIGNAL is \"xilinx.com:interface:bram:1.0 BRAM_PORT EN\";\n--    ATTRIBUTE X_INTERFACE_INFO of dout: SIGNAL is \"xilinx.com:interface:bram:1.0 BRAM_PORT  DOUT\";\n--    ATTRIBUTE X_INTERFACE_INFO of din: SIGNAL is \"xilinx.com:interface:bram:1.0 BRAM_PORT  DIN\";\n    ATTRIBUTE X_INTERFACE_INFO of wr_en: SIGNAL is \"xilinx.com:interface:bram:1.0 BRAM_PORT  WE\";\n    ATTRIBUTE X_INTERFACE_INFO of bram_addr: SIGNAL is \"xilinx.com:interface:bram:1.0 BRAM_PORT  ADDR\";\n    ATTRIBUTE X_INTERFACE_INFO of adc_valid: SIGNAL is \"xilinx.com:interface:bram:1.0 BRAM_PORT  CLK\";\n    ATTRIBUTE X_INTERFACE_INFO of reset_n: SIGNAL is \"xilinx.com:interface:bram:1.0 BRAM_PORT  RST\";\n\n    attribute X_INTERFACE_PARAMETER of en   : signal is \"MASTER_TYPE BRAM_CTRL, MEM_WIDTH 512\";\n--    attribute X_INTERFACE_PARAMETER of dout   : signal is \"MASTER_TYPE BRAM_CTRL, MEM_WIDTH 512\";\n--    attribute X_INTERFACE_PARAMETER of din   : signal is \"MASTER_TYPE BRAM_CTRL, MEM_WIDTH 512\";\n    attribute X_INTERFACE_PARAMETER of wr_en   : signal is \"MASTER_TYPE BRAM_CTRL, MEM_WIDTH 512\";\n    attribute X_INTERFACE_PARAMETER of bram_addr   : signal is \"MASTER_TYPE BRAM_CTRL, MEM_WIDTH 512\";\n    attribute X_INTERFACE_PARAMETER of adc_valid   : signal is \"MASTER_TYPE BRAM_CTRL, MEM_WIDTH 512\";\n    attribute X_INTERFACE_PARAMETER of reset_n   : signal is \"MASTER_TYPE BRAM_CTRL, MEM_WIDTH 512\";\n</code></pre> - https://www.taterli.com/10000 - https://www.adiuvoengineering.com/post/microzed-chronicles-ip-integrator-hdl - https://github.com/C2A2-at-Florida-Atlantic-University/OFDM_UnderwaterModem/blob/dbd5887aa4570af5d3e09f8144b55719e5a5feb6/Xilinx/Vivado/modules/rtl/adc_raw_sample_save.vhd    ### konosubakonoakua \u00b7 2025-06-16T01:34:25Z  ## apply ps preset by tcl  <pre><code>proc apply_ps_presets { cell presetFile } {\n    source $presetFile\n    set presets [apply_preset 0]\n    foreach {k v} $presets {\n        if { ![info exists preset_list] } {\n            set preset_list [dict create $k $v]\n        } else {\n            dict set preset_list $k $v\n        }\n    }\n\n    set_property -dict $preset_list $cell \n}\n\nproc create_ps { parentCell cellName } {\n    global script_folder\n    # Add Zynq processing system\n    set ps_cell [ create_bd_cell -type ip -vlnv xilinx.com:ip:processing_system7 $cellName ]\n    apply_ps_presets $ps_cell $script_folder/BlackBoard_ps_presets.tcl\n    apply_bd_automation -rule xilinx.com:bd_rule:processing_system7 -config {make_external \"FIXED_IO, DDR\" Master \"Disable\" Slave \"Disable\" } $ps_cell \n}\n\n# Create processing system\ncreate_ps $parentCell \"processing_system7_0\"\n</code></pre>  ps config file content  <pre><code>proc getPresetInfo {} {\n  return [dict create name {zu9-v3} description {zu9-v3}  vlnv xilinx.com:ip:zynq_ultra_ps_e:3.3 display_name {zu9-v3} ]\n}\n\nproc validate_preset {IPINST} { return true }\n\n\nproc apply_preset {IPINST} {\n  return [dict create \\\n    CONFIG.PSU_VALUE_SILVERSION {3}  \\\n    CONFIG.PSU__USE__DDR_INTF_REQUESTED {0}  \\\n    CONFIG.PSU__EN_AXI_STATUS_PORTS {0}  \\\n]}\n</code></pre>    ### konosubakonoakua \u00b7 2025-06-16T01:34:35Z  ## project management - https://wiki.trenz-electronic.de/pages/viewpage.action.dir/pageId=3925279"},{"location":"notes/posts/139%23%5Bfpga%5D%5Bdma%5D%5Baxi%5D%20xilinx%20axi%20dma%20uio/","title":"139 [fpga][dma][axi] xilinx axi dma uio","text":"<ul> <li>blog</li> <li>csdn<ul> <li>AXI DMA \u65f6\u5e8f\u5206\u6790</li> <li>ZYNQ Linux \u5e94\u7528\u5c42 \u5229\u7528 AXI DMA \u8fdb\u884c\u6570\u636e\u4f20\u8f93</li> <li>Linux AXI-DMA \u9a71\u52a8\u5f00\u53d1\u7b14\u8bb0</li> <li>\u3010FPGA\u5f00\u53d1\u3011AXI DMA\u624b\u518c\u9605\u8bfb\u3001\u4eff\u771f\u6ce2\u5f62\u5206\u6790</li> </ul> </li> <li>hackster<ul> <li>hackster/introduction-to-using-axi-dma-in-embedded-linux-5264ec</li> <li>hackster/ransfer-data-between-hdl-and-embedded-c-in-fpga-using-dma</li> </ul> </li> <li>fpgadeveloper<ul> <li>fpgadeveloper/creating-a-custom-axi-streaming-ip-in-vivado</li> <li>fpgadeveloper/using-axi-dma-in-vivado-reloaded</li> </ul> </li> <li>dorapocket<ul> <li>dorapocket/zynq\u5b66\u4e60\u7b14\u8bb0-axi-dmascatter-gather\u6a21\u5f0f/</li> <li>dorapocket/zynq\u5b66\u4e60\u7b14\u8bb0-axi-dma\u7b80\u4ecb\u548c\u793a\u4f8b/</li> </ul> </li> <li>kernel</li> <li>kernel/DMA-API-HOWTO.txt</li> <li>kernel/DMA-API.txt</li> <li>Xilinx</li> <li>Xilinx Wiki/Linux DMA From User Space prototype</li> <li>Xilinx Wiki/Linux+Soft+DMA+Driver</li> <li>Xilinx Wiki/Linux DMA From User Space 2.0</li> <li>xilinx software-prototypes/linux user space dma</li> <li>xilinx pg021_axi_dma/Direct-Register-Mode-Simple-DMA</li> <li> xilinx forum/57550 - Example Designs - Designing with the AXI DMA core</li> <li>avnet</li> <li>avnet/gitlab/user-space-mappable-dma-buffer<ul> <li>avnet/gitlab/Understanding Linux Provided UIO Kernel Drivers</li> </ul> </li> <li>avnet/gitlab/testing-uio-with-interrupt-on-zynq-ultrascale</li> <li>github repos</li> <li>k0nze/zedboard_axi4_master_burst_example</li> <li>k0nze/ultrazed_acp_example</li> <li>https://github.com/mcli244/my_axidma/blob/master/Xlinx%E7%9A%84AXIDMA%E5%9C%A8Linux%E4%B8%8A%E7%9A%84%E4%BD%BF%E7%94%A8.md</li> <li>github drivers</li> <li>ikwzm/udmabuf</li> <li>bperez77/xilinx_axidma</li> </ul>"},{"location":"notes/posts/139%23%5Bfpga%5D%5Bdma%5D%5Baxi%5D%20xilinx%20axi%20dma%20uio/#comments","title":"Comments","text":""},{"location":"notes/posts/139%23%5Bfpga%5D%5Bdma%5D%5Baxi%5D%20xilinx%20axi%20dma%20uio/#konosubakonoakua-2025-05-06t022103z","title":"konosubakonoakua \u00b7 2025-05-06T02:21:03Z","text":"<ul> <li>https://github.com/qualcomm-qrb-ros/lib_mem_dmabuf</li> <li>https://github.com/dspsandbox/FPGA-Notes-for-Scientists/wiki/DMA-transfer</li> <li>http://pavel-demin.github.io/red-pitaya-notes/dma/</li> <li>https://forum.digilent.com/topic/22978-axi-dma-help-on-cora-z7-10/</li> </ul>"},{"location":"notes/posts/140%23%5Bfpga%5D%5Baxi%5D%20AXI%20bus/","title":"140 [fpga][axi] AXI bus","text":"<ul> <li>vhdlwhiz</li> <li>vhdlwhiz/how-the-axi-style-ready-valid-handshake-works</li> <li>wikipeidia/axibus</li> <li>zipcpu</li> <li>axi-story</li> <li>easyaxilite</li> <li>realdigital</li> <li>realdigital Project 3 The AXI4 Bus</li> <li>zhihu</li> <li>\u6df1\u5165 AXI4 \u603b\u7ebf\uff08B\uff09\u9644\u5f55\u00b7\u4e00\u6b21\u4ece\u3007\u5f00\u59cb\u7684 AXI \u603b\u7ebf\u5165\u95e8\u7814\u8ba8</li> <li>\u6df1\u5165 AXI4\u603b\u7ebf\uff08E3\uff09\u5b9e\u6218\uff1a\u5236\u4f5c\u4e00\u4e2a AXI \u63a5\u53e3 IP</li> <li>hackster</li> <li>hackster cospan axi projects</li> <li>taterli</li> <li>taterli tutorial/simple axi lite bram</li> <li>taterli tutorial/datamover</li> </ul>"},{"location":"notes/posts/140%23%5Bfpga%5D%5Baxi%5D%20AXI%20bus/#comments","title":"Comments","text":""},{"location":"notes/posts/140%23%5Bfpga%5D%5Baxi%5D%20AXI%20bus/#konosubakonoakua-2025-10-27t103653z","title":"konosubakonoakua \u00b7 2025-10-27T10:36:53Z","text":""},{"location":"notes/posts/140%23%5Bfpga%5D%5Baxi%5D%20AXI%20bus/#axi-lite-overview","title":"AXI-lite Overview","text":""},{"location":"notes/posts/140%23%5Bfpga%5D%5Baxi%5D%20AXI%20bus/#axi-lite-channel-signals","title":"AXI-Lite Channel Signals","text":""},{"location":"notes/posts/140%23%5Bfpga%5D%5Baxi%5D%20AXI%20bus/#axi-lite-timing-diagrams","title":"AXI-Lite Timing Diagrams","text":""},{"location":"notes/posts/140%23%5Bfpga%5D%5Baxi%5D%20AXI%20bus/#axi-channel-signals","title":"AXI Channel Signals","text":""},{"location":"notes/posts/141%23%5Bfpga%5D%5Buart%5D%20xilinx%20zynq%20uartlite%20setup/","title":"141 [fpga][uart] xilinx zynq uartlite setup","text":"<ul> <li>https://www.cnblogs.com/xlicool/p/16816250.html</li> </ul>"},{"location":"notes/posts/142%23%5Bfpga%5D%5Bxilinx%5D%20fifo/","title":"142 [fpga][xilinx] fifo","text":"<ul> <li>https://zhuanlan.zhihu.com/p/47884776</li> </ul>"},{"location":"notes/posts/143%23%5Bfpga%5D%5Bcache%5D%20cache%20intro/","title":"143 [fpga][cache] cache intro","text":"<ul> <li>https://zhuanlan.zhihu.com/cpu-cache</li> </ul>"},{"location":"notes/posts/144%23%5Bfpga%5D%5Bxilinx%5D%5Bip%5D%20datamover/","title":"144 [fpga][xilinx][ip] datamover","text":"<ul> <li>https://zhuanlan.zhihu.com/p/82129170</li> <li>https://zhuanlan.zhihu.com/p/82509188</li> <li>https://zhuanlan.zhihu.com/p/82606098</li> <li>https://www.lzrnote.cn/2022/05/09/%e5%8d%8a%e5%b0%8f%e6%97%b6%e9%80%9f%e9%80%9azynq-pl%e7%ab%af%e5%8f%91%e9%80%81%e6%95%b0%e6%8d%ae%e5%88%b0ps-ddr/</li> </ul>"},{"location":"notes/posts/145%23%5Bfpga%5D%5Bddr%5D%20ddr%20dram/","title":"145 [fpga][ddr] ddr dram","text":"<ul> <li>https://digitalasic.design/category/ddr/ddr-%e5%ad%a6%e4%b9%a0%e6%97%b6%e9%97%b4/</li> </ul>"},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/","title":"146 [fpga] fpga readings","text":""},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#138","title":"138","text":""},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#-httpsgithubcomlastweekfpga_readings","title":"- https://github.com/lastweek/fpga_readings","text":""},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#comments","title":"Comments","text":""},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#konosubakonoakua-2025-02-21t090729z","title":"konosubakonoakua \u00b7 2025-02-21T09:07:29Z","text":""},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#courses","title":"courses","text":"<ul> <li>ECE 699 Software/Hardware Codesign Spring 2016</li> <li>ECE 6775 High-Level Digital Design Automation Fall 2024</li> <li>MIT Introductory Digital Systems laboratory</li> <li>18-643 Course Schedule, Fall 2017 (Not Most Recent) </li> <li>https://eclipse.umbc.edu/robucci/cmpe415/</li> <li>https://eclipse.umbc.edu/robucci/cmpeRSD/</li> </ul>"},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#konosubakonoakua-2025-02-21t091842z","title":"konosubakonoakua \u00b7 2025-02-21T09:18:42Z","text":""},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#tutorials","title":"Tutorials","text":"<ul> <li>https://zipcpu.com/topics.html</li> <li>https://www.realdigital.org/</li> <li>https://nandland.com/fpga-101/</li> <li>https://www.fpga4fun.com/</li> <li>http://www.hellofpga.com/</li> <li>https://soc.ustc.edu.cn/Digital/2024/lab0/intro/</li> <li>https://github.com/BrunoLevy/learn-fpga</li> <li>https://blog.abbey1.org.uk/index.php/technology/fpga/</li> <li>https://byu-cpe.github.io/ComputingBootCamp/tutorials/xilinx_deep_dive/</li> <li>Official</li> <li>https://xilinx.github.io/xup_embedded_system_design_flow/</li> <li>https://xilinx.github.io/xup_fpga_vivado_flow/</li> <li>https://github.com/Xilinx/axi-packaging-and-linux-driver</li> <li>https://github.com/Xilinx/axi_1wire_host-design</li> <li>AMD workshops</li> <li>https://www.amd.com/en/corporate/university-program/workshops.html</li> <li>Alinx</li> <li>https://ax7015b-20231-v101.readthedocs.io/zh-cn/latest/index.html</li> <li>https://ax7020-20231-v101.readthedocs.io/zh-cn/latest/</li> <li>https://ax7z100b-20231-v101.readthedocs.io/zh-cn/latest/index.html</li> <li></li> <li>Digilent</li> <li>https://digilent.com/reference/learn/programmable-logic/tutorials/start</li> <li>RedPitaya</li> <li>http://pavel-demin.github.io/red-pitaya-notes/</li> <li>https://learn.redpitaya.com/</li> <li>https://redpitaya-knowledge-base.readthedocs.io/en/latest/learn_fpga/fpga_learn.html#learn-fpga</li> <li>https://content.redpitaya.com/blog</li> <li>https://redpitaya.com/rtd-iframe/?iframe=https://redpitaya.readthedocs.io/en/latest/quickStart/needs.html</li> <li>others</li> <li>https://github.com/dspsandbox/FPGA-Notes-for-Scientists</li> </ul>"},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#konosubakonoakua-2025-02-24t070933z","title":"konosubakonoakua \u00b7 2025-02-24T07:09:33Z","text":""},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#verilog","title":"Verilog","text":"<ul> <li>https://asic-world.com/verilog/verilog_one_day.html</li> <li>https://www.runoob.com/w3cnote/verilog-tutorial.html</li> <li>cmpeRSD discussion01_verilog</li> </ul>"},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#konosubakonoakua-2025-02-26t020951z","title":"konosubakonoakua \u00b7 2025-02-26T02:09:51Z","text":""},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#simulator","title":"simulator","text":"<ul> <li>https://verilator.org/guide/latest/</li> <li>https://gtkwave.github.io/gtkwave/</li> </ul>"},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#konosubakonoakua-2025-02-26t154503z","title":"konosubakonoakua \u00b7 2025-02-26T15:45:03Z","text":""},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#misc","title":"misc","text":"<ul> <li>https://beaglewire.github.io/</li> <li>xillybus: An FPGA IP core for easy DMA over PCIe with Windows and Linux</li> </ul>"},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#konosubakonoakua-2025-03-05t072302z","title":"konosubakonoakua \u00b7 2025-03-05T07:23:02Z","text":""},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#blogs","title":"blogs","text":"<ul> <li>Experimenting with Metastability and Multiple Clocks on FPGAs</li> <li>adiuvo microzed chornicles</li> <li>https://github.com/pavel-demin/red-pitaya-notes</li> <li>https://www.wlanxww.com/posts/zynqmp-system/</li> <li>https://blog.songshiyu.cn/archives/fpgakai-fa-ya-wen-tai-gai-shu</li> </ul>"},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#konosubakonoakua-2025-03-05t072647z","title":"konosubakonoakua \u00b7 2025-03-05T07:26:47Z","text":""},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#videos","title":"videos","text":"<ul> <li>metastability</li> <li>How does a flip flop work, what is metastability and why does it have setup &amp; hold time?</li> <li>Metastability and Synchronizers</li> <li>FPGA #22 - Clock Domains, Metastability, and Synchronizers</li> <li>reset</li> <li>Which to use , Asynchronous reset or synchronous reset ? Resets Explained || Reset synchronizer!!</li> <li>verilog</li> <li>28 - Verilog Behavioral Modeling Coding Guidelines</li> <li>axi</li> <li>what is axi</li> <li>How the AXI-style ready/valid handshake works</li> <li>bilibili alltowine dma ddr3 axi ps pl</li> <li>misc</li> <li>bilibili helowen</li> </ul>"},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#konosubakonoakua-2025-05-07t091830z","title":"konosubakonoakua \u00b7 2025-05-07T09:18:30Z","text":"<p>https://tknopp.github.io/RedPitayaDAQServer/dev/index.html</p>"},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#konosubakonoakua-2025-05-13t083559z","title":"konosubakonoakua \u00b7 2025-05-13T08:35:59Z","text":"<p>I/O timing constraints for FPGA/ASIC #4: Source-synchronous output (article, 2025) I/O timing constraints for FPGA/ASIC #3: Sink-synchronous input (article, 2025) I/O timing constraints for FPGA/ASIC #2: System-synchronous input (article, 2025) I/O timing constraints for FPGA/ASIC #1: Source-synchronous input (article, 2025) The many ways to mess up ready/valid handshaking (article, 2024) Reliable FPGA CDC constraints #5: Asynchronous FIFO (article, 2024) Why is CDC so hard? Presentation at CERN (conference talk, 2024) Simulate FPGA design with Vivado simulation libraries (video tutorial, 2024) Reliable FPGA CDC constraints #4: Build tool settings (article, 2024) Reliable FPGA CDC constraints #3: Pulses (article, 2024) Reliable FPGA CDC constraints #2: Counters and FIFOs (article, 2024) Reliable FPGA CDC constraints #1: The simple single-bit level CDC (article, 2024) Real-time stereoscopic object tracking on FPGA using neural networks (master thesis, 2014)</p>"},{"location":"notes/posts/146%23%5Bfpga%5D%20fpga%20readings/#konosubakonoakua-2025-06-06t092106z","title":"konosubakonoakua \u00b7 2025-06-06T09:21:06Z","text":"<p>philipabbey fpga blog</p>"},{"location":"notes/posts/147%23%5Bfpga%5D%5Bxilinx%5D%20bram/","title":"147 [fpga][xilinx] bram","text":"<ul> <li>66103 - Block Memory Generator v12.0 : Width and Depth paramenter settings when BMG IP core is used in \u201cBRAM controller\u201d mode with IP Integrator flow</li> <li>bram width issue</li> <li>Accessing+BRAM+In+Linux</li> </ul>"},{"location":"notes/posts/148%23%5Bfpga%5D%20protocols/","title":"148 [fpga] protocols","text":"<ul> <li>https://www.youtube.com/@Rohde-Schwarz</li> </ul>"},{"location":"notes/posts/149%23%5Bfpga%5D%20vivado%20%26%20git/","title":"149 [fpga] vivado &amp; git","text":"<ul> <li>https://www.fpgadeveloper.com/2014/08/version-control-for-vivado-projects.html/</li> <li>https://grittyengineer.com/creating-vivado-ip-the-smart-tcl-way/</li> <li>https://xillybus.com/tutorials/vivado-version-control-packaging</li> </ul>"},{"location":"notes/posts/150%23%5Bproxy%5D%20win%20%26%20linux%20proxy%20setting/","title":"150 [proxy] win &amp; linux proxy setting","text":"<pre><code>function proxy {\n    param(\n        [string]$Action = \"toggle\",\n        [string]$IP = \"127.0.0.1\",\n        [string]$Port = \"7897\"\n    )\n\n    $ProxyServer = \"http://$IP`:$Port\"\n\n    # Colors for better UX\n    $Green = \"Green\"\n    $Red = \"Red\" \n    $Yellow = \"Yellow\"\n    $Cyan = \"Cyan\"\n\n    # Check current status\n    $CurrentProxy = $env:HTTP_PROXY ?? $env:http_proxy\n    $IsEnabled = $CurrentProxy -eq $ProxyServer\n\n    switch ($Action.ToLower()) {\n        \"on\" { \n            if ($IsEnabled) { \n                Write-Host \"Proxy already enabled: $ProxyServer\" -ForegroundColor $Green\n                return \n            }\n            $env:HTTP_PROXY = $ProxyServer\n            $env:HTTPS_PROXY = $ProxyServer\n            $env:http_proxy = $ProxyServer\n            $env:https_proxy = $ProxyServer\n            Write-Host \"Proxy enabled: $ProxyServer\" -ForegroundColor $Green\n        }\n\n        \"off\" { \n            if (-not $IsEnabled) { \n                Write-Host \"Proxy already disabled\" -ForegroundColor $Green\n                return \n            }\n            Remove-Item Env:HTTP_PROXY -ErrorAction SilentlyContinue\n            Remove-Item Env:HTTPS_PROXY -ErrorAction SilentlyContinue\n            Remove-Item Env:http_proxy -ErrorAction SilentlyContinue\n            Remove-Item Env:https_proxy -ErrorAction SilentlyContinue\n            Write-Host \"Proxy disabled\" -ForegroundColor $Red\n        }\n\n        \"status\" {\n            Write-Host \"Proxy Status:\" -ForegroundColor $Cyan\n            Write-Host \"  HTTP_PROXY:  $($env:HTTP_PROXY ?? 'Not set')\"\n            Write-Host \"  HTTPS_PROXY: $($env:HTTPS_PROXY ?? 'Not set')\"\n\n            # Test connectivity if proxy is enabled\n            if ($IsEnabled) {\n                Write-Host \"  Testing connection to Google...\" -ForegroundColor $Yellow\n                try {\n                    $test = Invoke-WebRequest -Uri \"https://www.google.com\" -TimeoutSec 5 -UseBasicParsing\n                    Write-Host \"  Connection test: SUCCESS\" -ForegroundColor $Green\n                } catch {\n                    Write-Host \"  Connection test: FAILED\" -ForegroundColor $Red\n                }\n            } else {\n                Write-Host \"  Status: DISABLED\" -ForegroundColor $Red\n            }\n        }\n\n        \"toggle\" {\n            if ($IsEnabled) {\n                proxy -Action off\n            } else {\n                proxy -Action on -IP $IP -Port $Port\n            }\n        }\n\n        default {\n            Write-Host \"Unknown action: $Action\" -ForegroundColor $Red\n            Write-Host \"Valid actions: on, off, status, toggle\" -ForegroundColor $Yellow\n        }\n    }\n}\n\n# Create alias for convenience\nSet-Alias -Name pxy -Value proxy\n</code></pre>"},{"location":"notes/posts/150%23%5Bproxy%5D%20win%20%26%20linux%20proxy%20setting/#comments","title":"Comments","text":""},{"location":"notes/posts/150%23%5Bproxy%5D%20win%20%26%20linux%20proxy%20setting/#konosubakonoakua-2025-12-15t043219z","title":"konosubakonoakua \u00b7 2025-12-15T04:32:19Z","text":"<pre><code>proxy() {\n  local action=\"${1:-status}\"\n  local ip=\"${2:-127.0.0.1}\"\n  local port=\"${3:-7897}\"\n\n  local proxy_url=\"http://$ip:$port\"\n\n  case \"$action\" in\n  on | enable)\n    echo \"Enabling proxy: $proxy_url\"\n    export http_proxy=\"$proxy_url\"\n    export https_proxy=\"$proxy_url\"\n    export HTTP_PROXY=\"$proxy_url\"\n    export HTTPS_PROXY=\"$proxy_url\"\n    echo \"\u2705 Proxy enabled: $proxy_url\"\n    ;;\n\n  off | disable)\n    echo \"Disabling proxy...\"\n    unset http_proxy https_proxy HTTP_PROXY HTTPS_PROXY\n    echo \"\u2705 Proxy disabled\"\n    ;;\n\n  toggle)\n    if [ -n \"$http_proxy\" ]; then\n      proxy off\n    else\n      proxy on \"$ip\" \"$port\"\n    fi\n    ;;\n\n  status)\n    echo \"=== Proxy Environment Variables ===\"\n    if [ -n \"$http_proxy\" ]; then\n      echo \"Current Proxy: $http_proxy\"\n    else\n      echo \"Current Proxy: Not set\"\n    fi\n\n    echo -e \"\\n=== Testing Google Connectivity ===\"\n    local timeout=2\n\n    echo -n \"Testing https://www.google.com ... \"\n    if curl -s --connect-timeout \"$timeout\" \"https://www.google.com\" &gt;/dev/null 2&gt;&amp;1; then\n      echo \"\u2705 SUCCESS\"\n      echo \"Network connectivity is working correctly!\"\n    else\n      echo \"\u274c FAILED\"\n      if [ -n \"$http_proxy\" ]; then\n        echo \"Proxy may not be working properly.\"\n      else\n        echo \"No proxy is set or there's a connection issue.\"\n      fi\n    fi\n    ;;\n\n  *)\n    echo \"Usage: proxy {on|off|toggle|status} [ip] [port]\"\n    echo \"Examples:\"\n    echo \"  proxy on                        # Enable with default 127.0.0.1:7897\"\n    echo \"  proxy on 192.168.138.254 7897   # Enable with custom IP:port\"\n    echo \"  proxy off                       # Disable proxy\"\n    echo \"  proxy toggle                    # Toggle proxy state\"\n    echo \"  proxy status                    # Show status and test connectivity\"\n    return 1\n    ;;\n  esac\n}\n</code></pre>"},{"location":"notes/posts/151%23%5Bfpga%5D%20petalinux%20fpga%20manager/","title":"151 [fpga] petalinux fpga manager","text":"<ul> <li>Solution+ZynqMP+PL+Programming</li> <li>Solution+Zynq+PL+Programming+With+FPGA+Manager</li> <li>U-Boot+FPGA+Driver</li> <li>FPGA-Manager-Configuration-and-Usage-for-Zynq-7000-Devices-and-Zynq-UltraScale-MPSoC</li> <li>programming-the-pl-at-runtime-with-petalinux-72a820</li> <li>\u57fa\u4e8eFPGA Manager\u7684Zynq PL\u7a0b\u5e8f\u5199\u5165\u65b9\u6848</li> </ul>"},{"location":"notes/posts/151%23%5Bfpga%5D%20petalinux%20fpga%20manager/#comments","title":"Comments","text":""},{"location":"notes/posts/151%23%5Bfpga%5D%20petalinux%20fpga%20manager/#konosubakonoakua-2025-02-26t132338z","title":"konosubakonoakua \u00b7 2025-02-26T13:23:38Z","text":""},{"location":"notes/posts/151%23%5Bfpga%5D%20petalinux%20fpga%20manager/#pldtbo-overlay","title":"pl.dtbo overlay","text":"<ul> <li>kria-apps-docs/dtsi_dtbo_generation</li> <li>meta-xilinx-tools README.fpgamanager.dtg.dfx.md</li> <li>ug1144-petalinux-tools-reference-guide/DTG-Settings</li> </ul>"},{"location":"notes/posts/151%23%5Bfpga%5D%20petalinux%20fpga%20manager/#konosubakonoakua-2025-02-26t134658z","title":"konosubakonoakua \u00b7 2025-02-26T13:46:58Z","text":""},{"location":"notes/posts/151%23%5Bfpga%5D%20petalinux%20fpga%20manager/#scripts","title":"scripts","text":"<ul> <li>generate bit wrapper bin file   <pre><code>source /tools/Xilinx/Vivado/2019.1/settings64.sh\ncd petalinux/images/linux\n\ntee design_1_wrapper.bit.bif &lt;&lt; EOF\nall:\n{\n  ../../../project/project.runs/impl_1/design_1_wrapper.bit\n}\nEOF\n\necho \"all: { ../../../project/project.runs/impl_1/design_1_wrapper.bit }\" design_1_wrapper.bit.bif\n\nbootgen -image design_1_wrapper.bit.bif -arch zynq -o ./design_1_wrapper.bit.bin -w\n</code></pre></li> <li>flash bin to fpga   <pre><code>BITSTREAM_NAME=design_1_wrapper.bit.bin\ncp /root/shared/$BITSTREAM_NAME /lib/firmware\necho 0 &gt; /sys/class/fpga_manager/fpga0/flags\necho $BITSTREAM_NAME &gt; /sys/class/fpga_manager/fpga0/firmware\n</code></pre></li> </ul>"},{"location":"notes/posts/151%23%5Bfpga%5D%20petalinux%20fpga%20manager/#konosubakonoakua-2025-02-26t151008z","title":"konosubakonoakua \u00b7 2025-02-26T15:10:08Z","text":""},{"location":"notes/posts/151%23%5Bfpga%5D%20petalinux%20fpga%20manager/#issues","title":"issues","text":"<ul> <li>cannot download fpga via system interface   <pre><code>\u276f echo $BITSTREAM_NAME &gt; /sys/class/fpga_manager/fpga0/firmware\nfpga_manager fpga0: reading flags 0\nfpga_manager fpga0: writing design_1_wrapper.bit.bin to Xilinx Zynq FPGA Manager\nfpga_manager fpga0: Error after writing image data to FPGA\n-bash: echo: write error: Connection timed out\n</code></pre></li> <li>0001-fix-zynq-pr.patch</li> <li>zynqmp_fix.patch</li> </ul>"},{"location":"notes/posts/151%23%5Bfpga%5D%20petalinux%20fpga%20manager/#konosubakonoakua-2025-02-26t155948z","title":"konosubakonoakua \u00b7 2025-02-26T15:59:48Z","text":""},{"location":"notes/posts/151%23%5Bfpga%5D%20petalinux%20fpga%20manager/#fpgautil","title":"fpgautil","text":"<ul> <li>https://github.com/Xilinx/meta-xilinx/blob/master/meta-xilinx-core/recipes-bsp/fpga-manager-script/files/fpgautil.c</li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/","title":"152 [fpga] petalinux issues","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#product-update-release-notes-and-known-issues-knowledge","title":"Product Update Release Notes and Known Issues # Knowledge","text":"<ul> <li>000037095 - PetaLinux 2024.2 - Product Update Release Notes and Known Issues</li> <li>76526 - PetaLinux 2021.1 - Product Update Release Notes and Known Issues</li> <li>72293 - PetaLinux 2019.1 - Product Update Release Notes and Known Issues</li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#comments","title":"Comments","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-02-26t093226z","title":"konosubakonoakua \u00b7 2025-02-26T09:32:26Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#vfs-cannot-open-root-device-mmcblk1p2-or-unknown-block17926","title":"<code>VFS: Cannot open root device \"mmcblk1p2\" or unknown-block(179,26)</code>","text":"<ul> <li>wrong fs type <p>selected <code>INITRAMFS</code> but have no rootfs file found. use another type, e.g. <code>INITRD</code>, or copy the rootfs file to SD.   Or device tree set wrong bootargs, check it at <code>components/plnx_workspace/device-tree/device-tree/system-conf.dtsi</code></p> </li> <li>sdcard level-shifter/write protect issue (fixed by dt)</li> <li>sd1-sd-20-partition-table-detected-by-uboot-but-not-by-linux-kernel <pre><code>&amp;sdhci1 {\n    no-1-8-v; // 1.8V to 3.3V level shifter (i.e. using LVCMOS18, but sd connector is driven by 3.3V)\n    disable-wp;\n    disable-cd;\n};\n</code></pre></li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-02-26t093353z","title":"konosubakonoakua \u00b7 2025-02-26T09:33:53Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#petalinux-20191-fpga-manager-causes-build-error","title":"petalinux 2019.1 fpga manager causes build error","text":"<ul> <li>petalinux-20191-fpga-manager-causes-build-error</li> </ul> <p>do not check <code>fpga manager</code> in <code>petalinux-config</code></p>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-02-26t095650z","title":"konosubakonoakua \u00b7 2025-02-26T09:56:50Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#petalinux-20191-device-tree-system-confidtsi-does-not-update-automatically-after-re-config","title":"petalinux 2019.1 device-tree (system-confi.dtsi) does not update automatically after re-config","text":"<p>Delete the device-tree at <code>components/plnx_workspace/device-tree/device-tree</code>, then <code>petalinux-build</code></p>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-02-26t102656z","title":"konosubakonoakua \u00b7 2025-02-26T10:26:56Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#messed-up-building","title":"messed up building","text":"<p>try  <pre><code>petalinux-build -x mrproper\n</code></pre></p>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-02-26t124501z","title":"konosubakonoakua \u00b7 2025-02-26T12:45:01Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#petalinux-booting-hangs-at-loop-module-loaded","title":"petalinux booting hangs at <code>loop: module loaded</code>","text":"<ul> <li>zcu208-petalinux-20222-boot-hangs-at-loop-module-loaded <p>Maybe because I didn't check <code>include bitstream</code> when exporting hardware.  If so, try to enable <code>petalinux-config --&gt; DTG Settings --&gt; Remove PL from devicetree</code> It's better to include bitstream?</p> </li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-03-14t082203z","title":"konosubakonoakua \u00b7 2025-03-14T08:22:03Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#fpga-manager-sysfs-write-error-connection-timed-out","title":"fpga manager sysfs write error: Connection timed out","text":"<ul> <li>you may have a broken <code>.bin</code> file, check if you use the following command to generate bin files.   <pre><code>bootgen -image $(BIF_FILE_PATH) -arch zynq -process_bitstream bin -w -o $(BIT2BIN_FILE)\n</code></pre></li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-03-19t000942z","title":"konosubakonoakua \u00b7 2025-03-19T00:09:42Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#trenz-petalinux-issues","title":"trenz petalinux issues","text":"<ul> <li>https://wiki.trenz-electronic.de/display/PD/Petalinux+Troubleshoot</li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-03-19t001304z","title":"konosubakonoakua \u00b7 2025-03-19T00:13:04Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#petalinux-can-bootup-but-no-uart-output","title":"petalinux can bootup but no uart output","text":"<ul> <li>check pin assignment on zynq block design, it's easy to mis-click to another assignment.</li> <li>mio configurations here: <code>project-spec/hw-description/ps7_init.html</code></li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-03-19t004454z","title":"konosubakonoakua \u00b7 2025-03-19T00:44:54Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#petalinux-create-cant-find-librdi_commonxillicso","title":"petalinux-create can't find <code>librdi_commonxillic.so</code>","text":"<p>try (I'm not sure, this error has no bad effect for me): <pre><code>sudo echo \"/opt/Xilinx/petalinux/tools/lib\" &gt; /etc/ld.so.conf.d/petalinux.so.conf\nsudo ldconfig\n</code></pre></p>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-03-19t011737z","title":"konosubakonoakua \u00b7 2025-03-19T01:17:37Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#error-you-are-not-inside-a-petalinux-project-please-specify-a-petalinux-project","title":"ERROR: You are not inside a PetaLinux project. Please specify a PetaLinux project!","text":"<ul> <li>refer to here</li> <li>you need to keep <code>.petalinux/metadata</code></li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-03-20t065303z","title":"konosubakonoakua \u00b7 2025-03-20T06:53:03Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#pthread-not-found","title":"pthread not found","text":"<ul> <li>add ldflags to bb file   <pre><code>LDFLAGS += \"-pthread\"\n</code></pre></li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-03-20t065356z","title":"konosubakonoakua \u00b7 2025-03-20T06:53:56Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#need-to-import-header-from-another-location","title":"need to import header from another location","text":"<ul> <li>add CFLAGS to bb   <pre><code>CFLAGS += \" -I${TOPDIR}/../project-spec/meta-user/recipes-modules/dma-proxy/files/\"\n</code></pre></li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-03-20t065516z","title":"konosubakonoakua \u00b7 2025-03-20T06:55:16Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#petalinux-app-compile-failed","title":"petalinux app compile failed","text":"<ul> <li>try to clean first   <pre><code>petalinux-build -c app -x clean\npetalinux-build -c app\n</code></pre></li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-03-20t071133z","title":"konosubakonoakua \u00b7 2025-03-20T07:11:33Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#petalinux-yacto-howto","title":"petalinux yacto howto","text":"<ul> <li>https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18842475/PetaLinux+Yocto+Tips</li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-03-20t091423z","title":"konosubakonoakua \u00b7 2025-03-20T09:14:23Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#petalinux-increase-cma-size-default-16","title":"petalinux increase CMA size (default 16)","text":"<ul> <li>000034737 - PetaLinux 2022.1: How to increase the CMA size in the Linux kernel and its impacts</li> <li>in kernel menuconfig, serach <code>CMA_SIZE_MBYTES</code></li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-04-14t011214z","title":"konosubakonoakua \u00b7 2025-04-14T01:12:14Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#buildmiscconfigkconfig223-cant-open-file-buildmiscconfigkconfigsyshw","title":"build/misc/config/Kconfig:223: can't open file \"build/misc/config/Kconfig.syshw\"","text":"<ul> <li>It's because you moved or renamed project, causing path inconsistency</li> <li>fixed by modifying  <code>&lt;your-project-path&gt;build/misc/config/Kconfig.syshw</code> in <code>build/misc/config/Kconfig.part</code>.</li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-04-14t013730z","title":"konosubakonoakua \u00b7 2025-04-14T01:37:30Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#petalinux-2021-sstate-cache-issues","title":"petalinux 2021 sstate cache issues","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#20211-petalinux-package-do_fetch-task-executes-even-though-premirrors-set-to-downloads-path-for-offline-builds","title":"2021.1 PetaLinux: Package do_fetch task executes even though PREMIRRORS set to downloads path for offline builds","text":"https://adaptivesupport.amd.com/s/article/2021-1-PetaLinux?language=en_US - Unset `CONFIG_PRE_MIRROR_URL` in `/project-spec/configs/config` - $ `cat project-spec/meta-user/conf/petalinuxbsp.conf`   <pre><code>#User Configuration\n\n#OE_TERMINAL = \"tmux\"\n\nIMAGE_BOOT_FILES_zynqmp = \"BOOT.BIN boot.scr Image ramdisk.cpio.gz.u-boot\"\n\n# Workaround solution for offline builds.\nINHERIT += \"own-mirrors\"\nSOURCE_MIRROR_URL = \"file:///home/wtsemb/plnx-workspace/2021.1/downloads\"\nPREMIRRORS_append = \"\"\nSSTATE_MIRRORS = \"\"\nDL_DIR = \"/home/wtsemb/plnx-workspace/2021.1/plnx-downloads\"\n</code></pre> - delete `build/conf/site.conf`   <pre><code>$ petalinux-build -x mrproper\n$ petalinux-config --silentconfig\n$ rm -rf build/conf/site.conf\n$ petalinux-build\n</code></pre>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#20212-and-2022x-yoctopetalinux-build-throws-errors-when-premirrors-is-set-to-downloads-path-for-offline-builds","title":"2021.2 and 2022.x Yocto/PetaLinux: Build throws errors when PREMIRRORS is set to downloads path for offline builds","text":"<p>https://adaptivesupport.amd.com/s/article/000033124?language=en_US</p>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#my-solution","title":"my solution","text":"- mkdir:  (only usefule when download from web??? IDK!)   <pre><code>mkdir -p /impcas/cache/petalinux/sstate/downloads\nmkdir -p /impcas/cache/petalinux/sstate/aarch64\nmkdir -p /impcas/cache/petalinux/sstate/arm\n</code></pre> - in `petalinuxbsp.conf`: (only usefule when download from web??? IDK!)   <pre><code>DL_DIR = \"/impcas/cache/petalinux/sstate/downloads\"\nSSTATE_DIR = \"/impcas/cache/petalinux/2021.1/sstate/aarch64\"\n</code></pre> - in`pealinuxbsp.conf` (not tried yet)   <pre><code>PREMIRRORS_prepend = \" \\\ngit://.*/.* file:///mnt/petalinux/sstate/2021.1/downloads \\n \\\ngitsm://.*/.* file:///mnt/petalinux/sstate/2021.1/downloads \\n \\\nftp://.*/.* file:///mnt/petalinux/sstate/2021.1/downloads \\n \\\nhttp://.*/.* file:///mnt/petalinux/sstate/2021.1/downloads \\n \\\nhttps://.*/.* file:///mnt/petalinux/sstate/2021.1/downloads \\n\"\n</code></pre> - in menuconfig, DON NOT set `BB_NO_NETWORK`   <pre><code>#\n# Add pre-mirror url \n#\nCONFIG_PRE_MIRROR_URL=\"file:///mnt/petalinux/sstate/2021.1/downloads\"\n\n#\n# Local sstate feeds settings\n#\nCONFIG_YOCTO_LOCAL_SSTATE_FEEDS_URL=\"/mnt/petalinux/sstate/2021.1/aarch64\"\n# CONFIG_YOCTO_NETWORK_SSTATE_FEEDS is not set\n# CONFIG_YOCTO_BB_NO_NETWORK is not set\n# CONFIG_YOCTO_BUILDTOOLS_EXTENDED is not set\n</code></pre> - mount cifs to `/mnt/petalinux/sstate`   <pre><code>sudo mount -t cifs //rf-pc-shiro.local/D/tools/petalinux/sstate /mnt/petalinux/sstate -o username=RF-PC-SHIRO\n</code></pre> ### refs - [PetaLinuxYoctoTips-How to reduce build time using SSTATECACHE](https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18842475/PetaLinux+Yocto+Tips#PetaLinuxYoctoTips-HowtoreducebuildtimeusingSSTATECACHE) - [ug1144-petalinux-tools-reference-guide/Shared-State-Cache](https://docs.amd.com/r/en-US/ug1144-petalinux-tools-reference-guide/Shared-State-Cache)"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-04-22t090847z","title":"konosubakonoakua \u00b7 2025-04-22T09:08:47Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#how-to-not-build-rootfs-in-case-user-has-their-own","title":"how to not build rootfs in case user has their own","text":"<ul> <li>https://adaptivesupport.amd.com/s/question/0D52E00006hpjHlSAI/petalinux-without-rootfs?language=en_US</li> <li>remove image fs types   <pre><code>tee -a project-spec/meta-user/conf/petalinuxbsp.conf &lt;&lt; 'EOF'\nIMAGE_FSTYPES_remove = \" tar.gz cpio cpio.gz.u-boot\"\nEOF\n</code></pre></li> <li>disable ramfs in kernel   <pre><code>General setup  ---&gt;   [ ] Initial RAM filesystem and RAM disk (initramfs/initrd) support \n</code></pre></li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-05-09t070237z","title":"konosubakonoakua \u00b7 2025-05-09T07:02:37Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#do_assembel_fitimage-failed-extend_recipe_sysrootd","title":"<code>do_assembel_fitimage</code> failed, <code>extend_recipe_sysroot(d)</code>","text":"<ul> <li>sysroot softlink damaged <pre><code>petalinux-build -x distclean\nrm -rf build/tmp\npetalinux-build --force\n</code></pre></li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-05-14t030914z","title":"konosubakonoakua \u00b7 2025-05-14T03:09:14Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#error-theres-no-dev-on-rootfs","title":"<code>Error: There's no '/dev' on rootfs</code>","text":"<ul> <li>https://adaptivesupport.amd.com/s/question/0D52E00006hprw1SAA/error-theres-no-dev-on-rootfs</li> <li>set <code>petalinux-config -&gt; Image packaging configuration -&gt; ( petalinux-image-minimal ) INITRAMFS/INITRD</code></li> </ul>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-10-17t131827z","title":"konosubakonoakua \u00b7 2025-10-17T13:18:27Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#device-tree-not-updated","title":"device tree not updated","text":"<p>Copy <code>system-user.dtsi</code> to <code>petalinux_project\\components\\plnx_workspace\\device-tree\\</code> <pre><code>petalinux-build -c device-tree -x cleansstate\npetalinux-build -c device-dree\n</code></pre></p>"},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#konosubakonoakua-2025-10-17t132321z","title":"konosubakonoakua \u00b7 2025-10-17T13:23:21Z","text":""},{"location":"notes/posts/152%23%5Bfpga%5D%20petalinux%20issues/#unknown-command-booti-when-booting-petalinux-u-boot-stage","title":"<code>Unknown command booti</code> when booting petalinux (u-boot stage)","text":"- [zedboard-unknown-command-booti-petalinux](https://adaptivesupport.amd.com/s/question/0D52E00006hpjY0SAI/zedboard-unknown-command-booti-petalinux?language=en_US) - https://adaptivesupport.amd.com/s/question/0D52E00006hphFiSAI/migrating-from-petalinux-20174-to-20181-extra-hoops-to-jump-through?language=zh_CN    &gt; After  run `petalinux-config -c u-boot`   &gt; `vim project-spec/meta-user/recipes-bsp/u-boot/files/platform-top.h`   &gt; Add the following code to bottom.   &gt; Run `petalinux-build -c u-boot` or `petalinux-build` rebuild uboot or rebuild all project   &gt; Package images finally: `petalinux-package --boot --fsbl --u-boot --force`    <pre><code>/* Due to a bug where having u-boot load dtb from SD card causes the boot\n * command to default to using booti instead of bootm on Zynq, the defult build\n * fails to boot. This boot command override is a temporary workaround.\n*/\n #ifdef CONFIG_BOOTCOMMAND\n #undef CONFIG_BOOTCOMMAND\n #define CONFIG_BOOTCOMMAND   \"run uenvboot; run cp_kernel2ram &amp;&amp; run cp_dtb2ram &amp;&amp; bootm ${netstart} - ${dtbnetstart}\"\n #endif\n</code></pre>"},{"location":"notes/posts/153%23%5Bfpga%5D%5Bzynq%5D%20petalinux%20devmem/","title":"153 [fpga][zynq] petalinux devmem","text":"<ul> <li>how-to-enable-devmem-utility-in-petalinux</li> <li>very-low-level-access-with-peek-and-poke.html</li> <li>devmem: another-very-low-access-method-with.html</li> <li>\u5f9e\u4e00\u958b\u59cb\u7684 Xilinx SoC \u958b\u767c\uff0cPetaLinux \u4f7f\u7528\uff08\u4e09\uff09</li> <li>how-to-design-and-access-a-memory-mapped-device-part-one</li> </ul>"},{"location":"notes/posts/153%23%5Bfpga%5D%5Bzynq%5D%20petalinux%20devmem/#comments","title":"Comments","text":""},{"location":"notes/posts/153%23%5Bfpga%5D%5Bzynq%5D%20petalinux%20devmem/#konosubakonoakua-2025-02-27t073204z","title":"konosubakonoakua \u00b7 2025-02-27T07:32:04Z","text":"<ul> <li>list all PL side devices <pre><code>ls /sys/firmware/devicetree/base/amba_pl\n</code></pre></li> </ul>"},{"location":"notes/posts/154%23%5Bfpga%5D%5Bzynq%5D%5Byacto%5D%20petalinux%20meta-xilinx/","title":"154 [fpga][zynq][yacto] petalinux meta-xilinx","text":"<ul> <li>https://github.com/Xilinx/meta-xilinx/tree/master</li> </ul>"},{"location":"notes/posts/155%23%5Blinux%5D%20embedded%20linux%20tips/","title":"155 [linux] embedded linux tips","text":""},{"location":"notes/posts/155%23%5Blinux%5D%20embedded%20linux%20tips/#send-bytes-to-tty-device-using-bash","title":"Send bytes to tty device using bash","text":"<pre><code>stty -F /dev/ttyPS1\nstty -F /dev/ttyPS1 115200 cs8 -cstopb -parenb\nprintf '\\xA5' | hexdump -C\n\nprintf '\\xA5' | cat &gt; /dev/ttyPS1\n</code></pre>"},{"location":"notes/posts/156%23%5Bfpga%5D%20manchester%20encoding/","title":"156 [fpga] manchester encoding","text":""},{"location":"notes/posts/156%23%5Bfpga%5D%20manchester%20encoding/#readings","title":"readings","text":""},{"location":"notes/posts/156%23%5Bfpga%5D%20manchester%20encoding/#-httpswwwgeeksforgeeksorgmanchester-encoding-in-computer-network","title":"- https://www.geeksforgeeks.org/manchester-encoding-in-computer-network/","text":""},{"location":"notes/posts/157%23%5Bpython%5D%20async/","title":"157 [python] async","text":"<ul> <li>https://fastapi.tiangolo.com/async/#in-a-hurry</li> </ul>"},{"location":"notes/posts/158%23%5Bepics%5D%20epics%20ioc%20example%20notes/","title":"158 [epics] epics ioc example notes","text":"<p>\u5728 EPICS \u4e2d\uff0c<code>registrar(helloRegister)</code> \u548c <code>function(myAsubProcess)</code> \u662f\u4e24\u79cd\u4e0d\u540c\u7684\u673a\u5236\uff0c\u5206\u522b\u7528\u4e8e\u4e0d\u540c\u7684\u76ee\u7684\u3002\u4ee5\u4e0b\u662f\u5b83\u4eec\u7684\u533a\u522b\u548c\u5404\u81ea\u7684\u4f5c\u7528\uff1a</p>   ---  ### 1. **`registrar(helloRegister)`**  #### **\u4f5c\u7528** - **\u6ce8\u518c\u5668\u51fd\u6570**\uff1a`registrar(helloRegister)` \u7528\u4e8e\u58f0\u660e\u4e00\u4e2a\u6ce8\u518c\u5668\u51fd\u6570 `helloRegister`\uff0c\u8be5\u51fd\u6570\u5728 IOC \u542f\u52a8\u65f6\u88ab\u81ea\u52a8\u8c03\u7528\u3002 - **\u529f\u80fd**\uff1a\u901a\u5e38\u7528\u4e8e\u6ce8\u518c\u81ea\u5b9a\u4e49\u547d\u4ee4\u3001\u8bbe\u5907\u652f\u6301\u6216\u5176\u4ed6\u9700\u8981\u5728 IOC \u542f\u52a8\u65f6\u521d\u59cb\u5316\u7684\u529f\u80fd\u3002 - **\u4f7f\u7528\u573a\u666f**\uff1a\u4f8b\u5982\uff0c\u6ce8\u518c\u4e00\u4e2a\u81ea\u5b9a\u4e49\u547d\u4ee4\u5230 `iocsh`\uff0c\u6216\u8005\u6ce8\u518c\u8bbe\u5907\u652f\u6301\u6a21\u5757\u3002  #### **\u793a\u4f8b** <pre><code>static void helloRegister(void) {\n    iocshRegister(&amp;helloFuncDef, helloCallFunc);\n}\nepicsExportRegistrar(helloRegister);\n</code></pre> \u5728 `.dbd` \u6587\u4ef6\u4e2d\u58f0\u660e\uff1a <pre><code>registrar(helloRegister)\n</code></pre>  #### **\u7279\u70b9** - \u5728 IOC \u542f\u52a8\u65f6\u81ea\u52a8\u8c03\u7528\u3002 - \u7528\u4e8e\u4e00\u6b21\u6027\u521d\u59cb\u5316\u5de5\u4f5c\uff08\u5982\u6ce8\u518c\u547d\u4ee4\u3001\u8bbe\u5907\u652f\u6301\u7b49\uff09\u3002 - \u4e0e IOC \u7684\u542f\u52a8\u8fc7\u7a0b\u7d27\u5bc6\u76f8\u5173\u3002  ---  ### 2. **`function(myAsubProcess)`**  #### **\u4f5c\u7528** - **\u51fd\u6570\u6ce8\u518c**\uff1a`function(myAsubProcess)` \u7528\u4e8e\u6ce8\u518c\u4e00\u4e2a\u51fd\u6570\uff08\u5982 `myAsubProcess`\uff09\uff0c\u4f7f\u5176\u53ef\u4ee5\u5728\u6570\u636e\u5e93\u8bb0\u5f55\u4e2d\u88ab\u8c03\u7528\u3002 - **\u529f\u80fd**\uff1a\u901a\u5e38\u7528\u4e8e\u5b9a\u4e49\u8bb0\u5f55\u7684\u5904\u7406\u903b\u8f91\uff0c\u4f8b\u5982 `aSubRecord` \u7684\u5904\u7406\u51fd\u6570\u3002 - **\u4f7f\u7528\u573a\u666f**\uff1a\u4f8b\u5982\uff0c\u4e3a `aSubRecord` \u8bb0\u5f55\u5b9a\u4e49\u4e00\u4e2a\u5904\u7406\u51fd\u6570\u3002  #### **\u793a\u4f8b** <pre><code>static long myAsubProcess(aSubRecord *precord) {\n    // \u5904\u7406\u903b\u8f91\n    return 0;\n}\n\nstruct {\n    long number;\n    DEVSUPFUN report;\n    DEVSUPFUN init;\n    DEVSUPFUN init_record;\n    DEVSUPFUN get_ioint_info;\n    DEVSUPFUN process;\n} devAsubMyDeviceSupport = {\n    5, NULL, NULL, NULL, NULL, myAsubProcess\n};\n\nepicsExportAddress(dset, devAsubMyDeviceSupport);\n</code></pre> \u5728 `.dbd` \u6587\u4ef6\u4e2d\u58f0\u660e\uff1a <pre><code>function(myAsubProcess)\n</code></pre>  #### **\u7279\u70b9** - \u5728\u6570\u636e\u5e93\u8bb0\u5f55\u4e2d\u901a\u8fc7 `field(PROC, \"myAsubProcess\")` \u8c03\u7528\u3002 - \u7528\u4e8e\u5b9a\u4e49\u8bb0\u5f55\u7684\u5904\u7406\u903b\u8f91\u3002 - \u4e0e\u6570\u636e\u5e93\u8bb0\u5f55\u7684\u5904\u7406\u8fc7\u7a0b\u7d27\u5bc6\u76f8\u5173\u3002  ---  ### 3. **\u4e3b\u8981\u533a\u522b**  | **\u7279\u6027**                | **`registrar(helloRegister)`**                     | **`function(myAsubProcess)`**                  | |-------------------------|---------------------------------------------------|-----------------------------------------------| | **\u7528\u9014**                | \u6ce8\u518c\u81ea\u5b9a\u4e49\u547d\u4ee4\u3001\u8bbe\u5907\u652f\u6301\u7b49\u521d\u59cb\u5316\u5de5\u4f5c\u3002             | \u5b9a\u4e49\u8bb0\u5f55\u7684\u5904\u7406\u903b\u8f91\u3002                          | | **\u8c03\u7528\u65f6\u673a**            | IOC \u542f\u52a8\u65f6\u81ea\u52a8\u8c03\u7528\u3002                              | \u5728\u8bb0\u5f55\u5904\u7406\u65f6\u8c03\u7528\uff08\u5982 `aSubRecord` \u7684\u5904\u7406\uff09\u3002   | | **\u5173\u8054\u5bf9\u8c61**            | IOC \u542f\u52a8\u8fc7\u7a0b\u3002                                    | \u6570\u636e\u5e93\u8bb0\u5f55\u3002                                  | | **\u793a\u4f8b**                | \u6ce8\u518c\u4e00\u4e2a\u81ea\u5b9a\u4e49\u547d\u4ee4\u5230 `iocsh`\u3002                    | \u4e3a `aSubRecord` \u8bb0\u5f55\u5b9a\u4e49\u5904\u7406\u51fd\u6570\u3002            | | **\u58f0\u660e\u65b9\u5f0f**            | \u5728 `.dbd` \u6587\u4ef6\u4e2d\u4f7f\u7528 `registrar(helloRegister)`\u3002 | \u5728 `.dbd` \u6587\u4ef6\u4e2d\u4f7f\u7528 `function(myAsubProcess)`\u3002 |  ---  ### 4. **\u603b\u7ed3** - **`registrar(helloRegister)`**\uff1a   - \u7528\u4e8e\u5728 IOC \u542f\u52a8\u65f6\u6ce8\u518c\u81ea\u5b9a\u4e49\u547d\u4ee4\u3001\u8bbe\u5907\u652f\u6301\u7b49\u521d\u59cb\u5316\u5de5\u4f5c\u3002   - \u4e0e IOC \u7684\u542f\u52a8\u8fc7\u7a0b\u76f8\u5173\u3002 - **`function(myAsubProcess)`**\uff1a   - \u7528\u4e8e\u5b9a\u4e49\u6570\u636e\u5e93\u8bb0\u5f55\u7684\u5904\u7406\u903b\u8f91\u3002   - \u4e0e\u6570\u636e\u5e93\u8bb0\u5f55\u7684\u5904\u7406\u8fc7\u7a0b\u76f8\u5173\u3002  \u8fd9\u4e24\u79cd\u673a\u5236\u5728 EPICS \u4e2d\u5206\u522b\u7528\u4e8e\u4e0d\u540c\u7684\u573a\u666f\uff0c`registrar` \u7528\u4e8e\u521d\u59cb\u5316\u5de5\u4f5c\uff0c\u800c `function` \u7528\u4e8e\u8bb0\u5f55\u5904\u7406\u903b\u8f91\u3002"},{"location":"notes/posts/158%23%5Bepics%5D%20epics%20ioc%20example%20notes/#comments","title":"Comments","text":""},{"location":"notes/posts/158%23%5Bepics%5D%20epics%20ioc%20example%20notes/#konosubakonoakua-2025-03-03t032908z","title":"konosubakonoakua \u00b7 2025-03-03T03:29:08Z","text":"<p>\u8fd9\u662f\u4e00\u4e2a EPICS \u7684 \u66ff\u6362\u6587\u4ef6\uff08Substitutions File\uff09\uff0c\u901a\u5e38\u4ee5 <code>.substitutions</code> \u6216 <code>.template</code> \u4e3a\u6269\u5c55\u540d\u3002\u5b83\u7684\u4f5c\u7528\u662f\u4e3a\u6570\u636e\u5e93\u6587\u4ef6\uff08<code>.db</code> \u6587\u4ef6\uff09\u4e2d\u7684\u53d8\u91cf\u63d0\u4f9b\u5177\u4f53\u7684\u503c\uff0c\u4ece\u800c\u751f\u6210\u591a\u4e2a\u5b9e\u4f8b\u5316\u7684\u6570\u636e\u5e93\u8bb0\u5f55\u3002\u4ee5\u4e0b\u662f\u5bf9\u8fd9\u6bb5\u4ee3\u7801\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p>    ---  ### 1. **\u6587\u4ef6\u7ed3\u6784** \u66ff\u6362\u6587\u4ef6\u7531\u591a\u4e2a `file` \u5757\u7ec4\u6210\uff0c\u6bcf\u4e2a `file` \u5757\u6307\u5b9a\u4e00\u4e2a\u6570\u636e\u5e93\u6587\u4ef6\uff0c\u5e76\u4e3a\u5176\u53d8\u91cf\u63d0\u4f9b\u5177\u4f53\u7684\u503c\u3002  ---  ### 2. **`file` \u5757\u89e3\u6790**  #### **`file \"db/circle.db\"`** <pre><code>file \"db/circle.db\" {\n    { user = \"root\" }\n}\n</code></pre> - **\u4f5c\u7528**\uff1a\u4e3a\u6570\u636e\u5e93\u6587\u4ef6 `db/circle.db` \u63d0\u4f9b\u66ff\u6362\u503c\u3002 - **\u66ff\u6362\u5185\u5bb9**\uff1a   - \u5c06\u6570\u636e\u5e93\u6587\u4ef6\u4e2d\u7684 `$(user)` \u66ff\u6362\u4e3a `\"root\"`\u3002 - **\u7ed3\u679c**\uff1a\u751f\u6210\u4e00\u4e2a\u5b9e\u4f8b\u5316\u7684\u6570\u636e\u5e93\u6587\u4ef6\uff0c\u5176\u4e2d\u6240\u6709 `$(user)` \u88ab\u66ff\u6362\u4e3a `\"root\"`\u3002  ---  #### **`file \"db/dbExample1.db\"`** <pre><code>file \"db/dbExample1.db\" {\n    { user = \"root\" }\n}\n</code></pre> - **\u4f5c\u7528**\uff1a\u4e3a\u6570\u636e\u5e93\u6587\u4ef6 `db/dbExample1.db` \u63d0\u4f9b\u66ff\u6362\u503c\u3002 - **\u66ff\u6362\u5185\u5bb9**\uff1a   - \u5c06\u6570\u636e\u5e93\u6587\u4ef6\u4e2d\u7684 `$(user)` \u66ff\u6362\u4e3a `\"root\"`\u3002 - **\u7ed3\u679c**\uff1a\u751f\u6210\u4e00\u4e2a\u5b9e\u4f8b\u5316\u7684\u6570\u636e\u5e93\u6587\u4ef6\uff0c\u5176\u4e2d\u6240\u6709 `$(user)` \u88ab\u66ff\u6362\u4e3a `\"root\"`\u3002  ---  #### **`file db/dbExample2.db`** <pre><code>file db/dbExample2.db {\n    pattern { user, no, scan }\n        { \"root\", 1, \"1 second\" }\n        { \"root\", 2, \"2 second\" }\n        { \"root\", 3, \"5 second\" }\n}\n</code></pre> - **\u4f5c\u7528**\uff1a\u4e3a\u6570\u636e\u5e93\u6587\u4ef6 `db/dbExample2.db` \u63d0\u4f9b\u591a\u7ec4\u66ff\u6362\u503c\u3002 - **\u66ff\u6362\u5185\u5bb9**\uff1a   - \u4f7f\u7528 `pattern` \u5173\u952e\u5b57\u5b9a\u4e49\u591a\u7ec4\u66ff\u6362\u503c\u3002   - \u6bcf\u7ec4\u66ff\u6362\u503c\u5bf9\u5e94\u6570\u636e\u5e93\u6587\u4ef6\u4e2d\u7684\u53d8\u91cf `$(user)`\u3001`$(no)` \u548c `$(scan)`\u3002 - **\u7ed3\u679c**\uff1a\u751f\u6210 **\u591a\u4e2a\u5b9e\u4f8b\u5316\u7684\u6570\u636e\u5e93\u6587\u4ef6**\uff0c\u6bcf\u7ec4\u66ff\u6362\u503c\u5bf9\u5e94\u4e00\u4e2a\u5b9e\u4f8b\u3002\u4f8b\u5982\uff1a   - \u7b2c\u4e00\u7ec4\uff1a`$(user) = \"root\"`\uff0c`$(no) = 1`\uff0c`$(scan) = \"1 second\"`\u3002   - \u7b2c\u4e8c\u7ec4\uff1a`$(user) = \"root\"`\uff0c`$(no) = 2`\uff0c`$(scan) = \"2 second\"`\u3002   - \u7b2c\u4e09\u7ec4\uff1a`$(user) = \"root\"`\uff0c`$(no) = 3`\uff0c`$(scan) = \"5 second\"`\u3002  ---  ### 3. **\u6570\u636e\u5e93\u6587\u4ef6\u4e2d\u7684\u53d8\u91cf** \u5728\u6570\u636e\u5e93\u6587\u4ef6\uff08\u5982 `db/circle.db`\u3001`db/dbExample1.db`\u3001`db/dbExample2.db`\uff09\u4e2d\uff0c\u901a\u5e38\u4f1a\u4f7f\u7528 `$(variable)` \u7684\u5f62\u5f0f\u5b9a\u4e49\u53d8\u91cf\u3002\u4f8b\u5982\uff1a <pre><code>record(ai, \"$(user):temperature$(no)\") {\n    field(DESC, \"Temperature Sensor $(no)\")\n    field(SCAN, \"$(scan)\")\n}\n</code></pre> \u66ff\u6362\u6587\u4ef6\u4f1a\u5c06\u8fd9\u4e9b\u53d8\u91cf\u66ff\u6362\u4e3a\u5177\u4f53\u7684\u503c\u3002  ---  ### 4. **\u751f\u6210\u7684\u5b9e\u4f8b\u5316\u6570\u636e\u5e93\u6587\u4ef6** \u66ff\u6362\u6587\u4ef6\u4f1a\u751f\u6210\u591a\u4e2a\u5b9e\u4f8b\u5316\u7684\u6570\u636e\u5e93\u6587\u4ef6\uff0c\u6bcf\u4e2a\u6587\u4ef6\u4e2d\u7684\u53d8\u91cf\u88ab\u66ff\u6362\u4e3a\u5177\u4f53\u7684\u503c\u3002\u4f8b\u5982\uff1a - \u5bf9\u4e8e `db/dbExample2.db`\uff0c\u751f\u6210\u7684\u5b9e\u4f8b\u5316\u6587\u4ef6\u53ef\u80fd\u5982\u4e0b\uff1a   <pre><code>record(ai, \"root:temperature1\") {\n    field(DESC, \"Temperature Sensor 1\")\n    field(SCAN, \"1 second\")\n}\nrecord(ai, \"root:temperature2\") {\n    field(DESC, \"Temperature Sensor 2\")\n    field(SCAN, \"2 second\")\n}\nrecord(ai, \"root:temperature3\") {\n    field(DESC, \"Temperature Sensor 3\")\n    field(SCAN, \"5 second\")\n}\n</code></pre>  ---  ### 5. **\u603b\u7ed3** \u8fd9\u6bb5\u66ff\u6362\u6587\u4ef6\u7684\u4f5c\u7528\u662f\uff1a 1. \u4e3a `db/circle.db` \u548c `db/dbExample1.db` \u63d0\u4f9b\u5355\u4e00\u7684\u66ff\u6362\u503c\u3002 2. \u4e3a `db/dbExample2.db` \u63d0\u4f9b\u591a\u7ec4\u66ff\u6362\u503c\uff0c\u751f\u6210\u591a\u4e2a\u5b9e\u4f8b\u5316\u7684\u6570\u636e\u5e93\u6587\u4ef6\u3002 3. \u901a\u8fc7\u66ff\u6362\u6587\u4ef6\uff0c\u53ef\u4ee5\u7075\u6d3b\u5730\u4e3a\u6570\u636e\u5e93\u6587\u4ef6\u4e2d\u7684\u53d8\u91cf\u63d0\u4f9b\u5177\u4f53\u7684\u503c\uff0c\u4ece\u800c\u751f\u6210\u591a\u4e2a\u5b9e\u4f8b\u5316\u7684\u8bb0\u5f55\u3002  \u8fd9\u79cd\u673a\u5236\u5728 EPICS \u4e2d\u975e\u5e38\u6709\u7528\uff0c\u7279\u522b\u662f\u5728\u9700\u8981\u521b\u5efa\u591a\u4e2a\u76f8\u4f3c\u8bb0\u5f55\u65f6\uff08\u5982\u591a\u4e2a\u4f20\u611f\u5668\u3001\u8bbe\u5907\u7b49\uff09\u3002\u901a\u8fc7\u66ff\u6362\u6587\u4ef6\uff0c\u53ef\u4ee5\u907f\u514d\u91cd\u590d\u7f16\u5199\u76f8\u4f3c\u7684\u6570\u636e\u5e93\u6587\u4ef6\uff0c\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u3002"},{"location":"notes/posts/158%23%5Bepics%5D%20epics%20ioc%20example%20notes/#konosubakonoakua-2025-03-03t083249z","title":"konosubakonoakua \u00b7 2025-03-03T08:32:49Z","text":"<ul> <li>https://docs.epics-controls.org/en/latest/getting-started/creating-ioc.html</li> <li>https://github.com/ISISComputingGroup/ibex_developers_manual/wiki/IOC-Start-Example</li> <li>https://epics.anl.gov/base/R3-15/5-docs/AppDevGuide/GettingStarted.html#x3-40002</li> </ul>"},{"location":"notes/posts/158%23%5Bepics%5D%20epics%20ioc%20example%20notes/#konosubakonoakua-2025-03-10t034241z","title":"konosubakonoakua \u00b7 2025-03-10T03:42:41Z","text":"<p>iocCore envs <pre><code>  EPICS_CA_ADDR_LIST\n  EPICS_CA_AUTO_ADDR_LIST\n  EPICS_CA_CONN_TMO\n  EPICS_CAS_BEACON_PERIOD\n  EPICS_CA_REPEATER_PORT\n  EPICS_CA_SERVER_PORT\n  EPICS_CA_MAX_ARRAY_BYTES\n  EPICS_TS_NTP_INET\n  EPICS_IOC_LOG_PORT\n  EPICS_IOC_LOG_INET\n</code></pre></p>"},{"location":"notes/posts/159%23%5Bepics%5D%20EPICS%20Application%20Developer_s%20Guide/","title":"159 [epics] EPICS Application Developer\u2019s Guide","text":"<ul> <li>https://epics.anl.gov/base/R3-15/5-docs/AppDevGuide/AppDevGuide.html</li> </ul>"},{"location":"notes/posts/160%23%5Bepics%5D%20epics%20logging%20system/","title":"160 [epics] epics logging system","text":""},{"location":"notes/posts/160%23%5Bepics%5D%20epics%20logging%20system/#epics-ioc-logging","title":"EPICS IOC LOGGING","text":"<ul> <li>ioclogserver</li> <li>CONFIG_SITE_ENV#L78 <pre><code># Log Server:\n# EPICS_IOC_LOG_INET \n# Log server ip addr.\n# EPICS_IOC_LOG_FILE_NAME \n# pathname to the log file.\n# EPICS_IOC_LOG_FILE_LIMIT \n# maximum log file size.\n# EPICS_IOC_LOG_FILE_COMMAND \n# A shell command string used to obtain a new \n#       path name in response to SIGHUP - the new path name will\n#       replace any path name supplied in EPICS_IOC_LOG_FILE_NAME\n</code></pre> <pre><code>export EPICS_IOC_LOG_FILE_NAME=loooooog.log\nexport EPICS_IOC_LOG_FILE_LIMIT=1000000\nexport EPICS_IOC_LOG_PORT=12345\n</code></pre></li> <li>initialize-logging <pre><code># st.cmd\nepicsEnvSet(\"EPICS_IOC_LOG_PORT\", \"&lt;port&gt;\")\nepicsEnvSet(\"EPICS_IOC_LOG_INET\", \"&lt;inet addr&gt;\") # use localhost if only local\niocLogInit\n</code></pre></li> </ul>"},{"location":"notes/posts/161%23%5Bcircuit%5D%20analog%20circuit%20design%20readings/","title":"161 [circuit] analog circuit design readings","text":""},{"location":"notes/posts/161%23%5Bcircuit%5D%20analog%20circuit%20design%20readings/#wiki","title":"wiki","text":"<ul> <li>https://analogcircuitdesign.com/</li> </ul>"},{"location":"notes/posts/162%23%5Bfpga%5D%20vivado%20tcl%20workflow/","title":"162 [fpga] vivado tcl workflow","text":"<ul> <li>https://github.com/rajivbishwokarma/rsig</li> <li>https://github.com/juliancaba/xilinx-tcl/</li> <li>https://projectf.io/posts/vivado-tcl-build-script/</li> <li>https://aidan-mcnay.github.io/vivado-tutorial/overview/</li> <li>example</li> </ul> <pre><code># Vivado\u6d41\u7a0b\u811a\u672c\uff08Block Design\u4f5c\u4e3a\u9876\u5c42\uff09\nset project_name \"bd_project\"\nset project_dir \"./vivado_prj\"\nset part \"xc7z020clg400-1\"  # \u66ff\u6362\u5b9e\u9645\u5668\u4ef6\u578b\u53f7\n\n# \u521b\u5efa\u5de5\u7a0b\ncreate_project $project_name $project_dir -part $part -force\n\n# \u6dfb\u52a0\u8bbe\u8ba1\u6587\u4ef6\uff08\u975eBD\u6587\u4ef6\uff09\nadd_files [glob -nocomplain ./src/*.v ./src/*.vhd]\nupdate_compile_order -fileset sources_1\n\n# \u52a0\u8f7d\u5e76\u91cd\u5efaBlock Design\nset bd_loaded 0\nforeach bd_script [glob -nocomplain ./bd/*.tcl] {\n    source $bd_script\n    regenerate_bd_layout\n    validate_bd_design\n    save_bd_design\n    set bd_loaded 1\n}\n\n# \u5f3a\u5236\u8bbe\u7f6eBD\u4e3a\u9876\u5c42\uff08\u5173\u952e\u4fee\u6539\uff09\nif {$bd_loaded} {\n    # \u751f\u6210\u5e76\u6dfb\u52a0BD wrapper\n    make_wrapper -files [get_files *.bd] -top\n    add_files -norecurse [get_files */hdl/*_wrapper.v]  # \u81ea\u52a8\u67e5\u627e\u751f\u6210\u7684wrapper\n\n    # \u663e\u5f0f\u8bbe\u7f6eBD wrapper\u4e3a\u9876\u5c42\n    set bd_wrapper [file rootname [file tail [get_files -norecurse *.bd]]]_wrapper\n    set_property TOP $bd_wrapper [current_fileset]\n    update_compile_order -fileset sources_1\n} else {\n    error \"No Block Design loaded! Please check bd/ directory\"\n}\n\n# \u6dfb\u52a0\u7ea6\u675f\u6587\u4ef6\nadd_files -fileset constrs_1 [glob -nocomplain ./constraints/*.xdc]\n\n# \u6807\u51c6\u6d41\u7a0b\u6267\u884c\nlaunch_runs synth_1\nwait_on_run synth_1\nlaunch_runs impl_1 -to_step write_bitstream\nwait_on_run impl_1\n\n# \u8f93\u51fa\u6587\u4ef6\u751f\u6210\nwrite_bitstream -force \"${project_dir}/${project_name}.bit\"\nclose_project\n</code></pre>"},{"location":"notes/posts/163%23%5Bfpga%5D%5Bxilinx%5D%5Bjtag%5D%20jtag%20debugbridge%20%26%20xvc%20server/","title":"163 [fpga][xilinx][jtag] jtag debugbridge &amp; xvc server","text":"<ul> <li>xilinx-wiki/Xilinx+Virtual+Cable</li> <li>https://github.com/Xilinx/XilinxVirtualCable</li> <li>https://github.com/konosubakonoakua/fpga-zynqmp-xvc-demo</li> </ul>"},{"location":"notes/posts/164%23%5Bfpga%5D%5Bhw%5D%20digilent%20PMODS/","title":"164 [fpga][hw] digilent PMODS","text":""},{"location":"notes/posts/164%23%5Bfpga%5D%5Bhw%5D%20digilent%20PMODS/#-httpsdigilentcomreferencepmodstart","title":"- https://digilent.com/reference/pmod/start","text":""},{"location":"notes/posts/165%23%5Bfpga%5D%5Bxilinx%5D%20vivado_petalinux%202021.x%20setup%20notes/","title":"165 [fpga][xilinx] vivado/petalinux 2021.x setup notes","text":""},{"location":"notes/posts/165%23%5Bfpga%5D%5Bxilinx%5D%20vivado_petalinux%202021.x%20setup%20notes/#prepare","title":"prepare","text":"[OS Requirement](https://docs.amd.com/r/2021.1-English/ug973-vivado-release-notes-install-license/Supported-Operating-Systems) - Microsoft Windows Professional/Enterprise 10.0 1809 Update; 10.0 1903 Update; 10.0 1909 Update; 10.0 2004 Update - Red Hat Enterprise Workstation/Server 7.4, 7.5, 7.6, 7.7, 7.8, 7,9, 8.1, 8.2, and 8.3 (64-bit), English/Japanese - CentOS 7.4, 7.5, 7.6, 7.7, 7.8, 8.1, 8.2, and 8.3 (64-bit), English/Japanese - SUSE Linux Enterprise 12.4 and 15.2 (64-bit), English/Japanese - Amazon Linux 2 AL2 LTS (64-bit) - Ubuntu Linux 16.04.5 LTS;16.04.6 LTS; 18.04.1 LTS; 18.04.2 LTS, 18.04.3 LTS; 18.04.4 LTS; and 20.04 LTS, 20.04.1 LTS (64-bit), English/Japanese  <pre><code>sudo adduser $USER dialout\nsudo dpkg --add-architecture i386\nsudo dpkg-reconfigure dash # use tab to select no\n</code></pre> <pre><code>sudo apt-get update\n</code></pre> <pre><code>sudo apt install \\\n    lib32stdc++6 \\\n    libgtk2.0-0:i386 \\\n    libfontconfig1:i386 \\\n    libx11-6:i386 \\\n    libxext6:i386 \\\n    libxrender1:i386 \\\n    libsm6:i386 \\\n    libqtgui4:i386 \\\n    xinetd \\\n    iproute2 \\\n    gawk \\\n    gcc \\\n    net-tools \\\n    ncurses-dev \\\n    openssl \\\n    libssl-dev \\\n    flex \\\n    bison \\\n    xterm \\\n    autoconf \\\n    libtool \\\n    texinfo \\\n    zlib1g-dev \\\n    gcc-multilib \\\n    build-essential \\\n    automake \\\n    screen \\\n    putty \\\n    pax \\\n    g++ \\\n    python3-pip \\\n    xz-utils \\\n    python3-git \\\n    python3-jinja2 \\\n    python3-pexpect \\\n    debianutils \\\n    iputils-ping \\\n    libegl1-mesa \\\n    libsdl1.2-dev \\\n    pylint3 \\\n    python3 \\\n    cpio \\\n    tftpd-hpa \\\n    gnupg \\\n    zlib1g:i386 \\\n    haveged \\\n    perl \\\n    liberror-perl \\\n    mtd-utils \\\n    xtrans-dev \\\n    libxcb-randr0-dev \\\n    libxcb-xtest0-dev \\\n    libxcb-xinerama0-dev \\\n    libxcb-shape0-dev \\\n    libxcb-xkb-dev \\\n    openssh-server \\\n    util-linux \\\n    sysvinit-utils \\\n    cython \\\n    google-perftools\n</code></pre> taken from pynq repo: <pre><code>## petalinux &amp; vivado deps\n# Install a bunch of packages we need\n\nif [ $(lsb_release -rs) == \"18.04\" ]; then\n    rel_deps=\"libncurses5-dev lib32ncurses5\"\nelse\n    rel_deps=\"libncurses6 lib32ncurses6\"\nfi\n\nread -d '' PACKAGES &lt;&lt;EOT\nbc\nlibtool-bin\ngperf\nbison\nflex\ntexi2html\ntexinfo\nhelp2man\ngawk\nlibtool\nbuild-essential\nautomake\nlibglib2.0-dev\nlibfdt-dev\ndevice-tree-compiler\nqemu-user-static\nbinfmt-support\nmultistrap\ngit\nlib32z1\nlib32stdc++6\nlibssl-dev\nkpartx\ndosfstools\nnfs-common\nzerofree\nu-boot-tools\nrpm2cpio\ncurl\nlibsdl1.2-dev\nlibpixman-1-dev\nlibc6-dev\nchrpath\nsocat\nzlib1g-dev\nzlib1g:i386\nunzip\nrsync\npython3-pip\ngcc-multilib\nxterm\nnet-tools\nlibidn11\nninja-build\npython3-testresources\n${rel_deps}\nEOT\nset -e\n\nsudo apt-get update\n\nsudo add-apt-repository -y ppa:ubuntu-toolchain-r/ppa\nsudo apt-get update\nsudo apt-get install -y $PACKAGES\n</code></pre> <pre><code>```bash\nsudo mkdir /tftpboot\nsudo chmod -R 777 /tftpboot\nsudo chown -R nobody /tftpboot\n\nsudo tee /etc/xinetd.d/tftp1 &lt;&lt; EOF\nservice tftp \n    {\n    protocol = udp \n    port = 69 \n    socket_type = dgram \n    wait = yes \n    user = nobody \n    server = /usr/sbin/in.tftpd \n    server_args = /tftpboot \n    disable = no\n    }\nEOF\n\nsudo /etc/init.d/xinetd stop\nsudo /etc/init.d/xinetd start\n</code></pre>"},{"location":"notes/posts/165%23%5Bfpga%5D%5Bxilinx%5D%20vivado_petalinux%202021.x%20setup%20notes/#comments","title":"Comments","text":""},{"location":"notes/posts/165%23%5Bfpga%5D%5Bxilinx%5D%20vivado_petalinux%202021.x%20setup%20notes/#konosubakonoakua-2025-03-25t053613z","title":"konosubakonoakua \u00b7 2025-03-25T05:36:13Z","text":""},{"location":"notes/posts/165%23%5Bfpga%5D%5Bxilinx%5D%20vivado_petalinux%202021.x%20setup%20notes/#install","title":"install","text":"### vivado 2021 <pre><code>sudo mkdir /tools/\nsudo chmod 755 /tools/\nsudo chown rf:rf /tools/\nmkdir /tools/Xilinx\n/mnt/winshared/linux/Xilinx_Unified_2021.1_0610_2318/xsetup\n</code></pre>  After vivado installtion, in tcl console: <pre><code>config_webtalk -user off\nconfig_webtalk -info\n</code></pre> In bash console: <pre><code>cd /tools/Xilinx/Vivado/2021.1/data/xicom/cable_drivers/lin64/install_script/install_drivers\nsudo ./install_drivers\n</code></pre> In License manager: `Help`/`Manage License`/`Get License`/`Load License`/`Copy License`/`Select License File`/`Open Your Lic File`  [2018.1_license.zip](https://github.com/user-attachments/files/19499809/vivado_2018.1_license.zip)  ### petalinux 2021 <pre><code>sudo mkdir -p /tools/Xilinx/PetaLinux/2021.1/\nsudo chmod -R 755 /tools/Xilinx/PetaLinux/2021.1/\nsudo chown -R rf:rf /tools/Xilinx/PetaLinux/2021.1/ # user:user\nsudo vmhgfs-fuse .host:/ /mnt/winshared -o allow_other\n/mnt/winshared/linux/petalinux-v2021.1-final-installer.run -d /tools/Xilinx/PetaLinux/2021.1/\n</code></pre>"},{"location":"notes/posts/165%23%5Bfpga%5D%5Bxilinx%5D%20vivado_petalinux%202021.x%20setup%20notes/#konosubakonoakua-2025-03-27t072511z","title":"konosubakonoakua \u00b7 2025-03-27T07:25:11Z","text":""},{"location":"notes/posts/165%23%5Bfpga%5D%5Bxilinx%5D%20vivado_petalinux%202021.x%20setup%20notes/#sstate","title":"sstate","text":"### cifs <pre><code>mount | grep /mnt\nsudo umount /mnt\nsudo mkdir -p /mnt/petalinux/sstate\nsudo apt install -y cifs-utils\n</code></pre> <pre><code>sudo mount -t cifs //rf-pc-shiro.local/D/tools/petalinux/sstate /mnt/petalinux/sstate -o username=RF-PC-SHIRO\n</code></pre> ### petalinux/project-spec/configs/config <pre><code>#\n# Add pre-mirror url \n#\nCONFIG_PRE_MIRROR_URL=\"file:///mnt/petalinux/sstate/2021.1/downloads/\"\n\n#\n# Local sstate feeds settings\n#\nCONFIG_YOCTO_LOCAL_SSTATE_FEEDS_URL=\"/mnt/petalinux/sstate/2021.1/aarch64\"\n# CONFIG_YOCTO_NETWORK_SSTATE_FEEDS is not set\nCONFIG_YOCTO_BB_NO_NETWORK=y\n# CONFIG_YOCTO_BUILDTOOLS_EXTENDED is not set\n</code></pre>  ### meta-user/conf/petalinuxbsp.conf <pre><code>DL_DIR = \"/impcas/cache/petalinux/sstate/2021.1/downloads\"\nSSTATE_DIR = \"/impcas/cache/petalinux/sstate/2021.1//aarch64\"\n</code></pre>  petalinux sstate issues: https://github.com/konosubakonoakua/blog/issues/152#issuecomment-2800268052"},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/","title":"166 [linux] ubuntu 18 setup","text":""},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#system-settings","title":"system settings","text":""},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#disable-animations-sluggish-if-disabled-i-choose-to-disable-3d-accel","title":"disable animations (sluggish if disabled, I choose to disable 3d accel)","text":"<pre><code>gsettings set org.gnome.desktop.interface enable-animations false\n</code></pre>"},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#fix-system-program-problem-detected","title":"fix <code>System Program Problem Detected</code>","text":"<pre><code>sudo rm /var/crash/*\nsudo systemctl disable apport\nsudo apt purge apport\n</code></pre>"},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#konosubakonoakua-2025-03-25t085014z","title":"konosubakonoakua \u00b7 2025-03-25T08:50:14Z","text":""},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#bashrc","title":"bashrc","text":"<pre><code>## history\nHISTSIZE=-1\nHISTFILESIZE=-1\nHISTCONTROL=ignoreboth\nPROMPT_COMMAND=\"history -a; $PROMPT_COMMAND\"\n\n## proxy\nexport RF_PROXY_IP=\"192.168.2.3\"\nexport RF_PROXY_PORT=\"7899\"\nproxy_set() {\n    local proxy_address=\"http://$RF_PROXY_IP:$RF_PROXY_PORT\"\n    local current_http_proxy=\"$http_proxy\"\n    local current_https_proxy=\"$https_proxy\"\n    export http_proxy=\"$proxy_address\"\n    export https_proxy=\"$proxy_address\"\n    echo \"Proxy environment variables set.\"\n}\nproxy_clear() {\n    unset http_proxy\n    unset https_proxy\n    echo \"Proxy environment variables cleared.\"\n}\nproxy_toggle() {\n    local proxy_address=\"http://$RF_PROXY_IP:$RF_PROXY_PORT\"\n    local current_http_proxy=\"$http_proxy\"\n    local current_https_proxy=\"$https_proxy\"\n\n    if [[ \"$current_http_proxy\" == \"$proxy_address\" &amp;&amp; \"$current_https_proxy\" == \"$proxy_address\" ]]; then\n        unset http_proxy\n        unset https_proxy\n        echo \"Proxy environment variables cleared.\"\n    else\n        export http_proxy=\"$proxy_address\"\n        export https_proxy=\"$proxy_address\"\n        echo \"Proxy environment variables set.\"\n    fi\n}\n\nproxy_set\n\n## tools\nalias fvim='NVIM_APPNAME=\"fei.nvim\" nvim' # will save plugins at ~/.local/share/fei.nvim\nexport PATH=\"$HOME/.local/bin:$PATH\"\nsource \"$HOME/.cargo/env\"\n[ -f ~/.fzf.bash ] &amp;&amp; source ~/.fzf.bash\n\nFNM_PATH=\"$HOME/.local/share/fnm\"\nif [ -d \"$FNM_PATH\" ]; then\n  export PATH=\"$FNM_PATH:$PATH\"\n  eval \"`fnm env`\"\nfi\n\neval \"$(zoxide init bash)\"\neval \"$(uv --generate-shell-completion bash)\"\neval \"$(uvx --generate-shell-completion bash)\"\n\n## vivado &amp; petalinux\nexport VIVADO_PATH=\"/tools/Xilinx/Vivado/2021.1\"\nexport VIVADO_SETTINGS=\"$VIVADO_PATH/settings64.sh\"\nexport PETALINUX_PATH=\"/tools/Xilinx/PetaLinux/2021.1/\"\nexport PETALINUX_SETTINGS=\"$PETALINUX_PATH/settings.sh\"\nalias vivado2021='source $VIVADO_SETTINGS'\nalias petalinux2021='source $PETALINUX_SETTINGS'\n</code></pre>"},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#konosubakonoakua-2025-03-25t090459z","title":"konosubakonoakua \u00b7 2025-03-25T09:04:59Z","text":""},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#input-method-sogou-pinyin","title":"input method (sogou pinyin)","text":"<p>[!CAUTION] If cannot display chinese characters, then try to move down or up sogou pinyin in input method list.</p>   - Add language support for chinese   ![Image](../assets/166/1.png)  - Install deps   <pre><code>sudo apt-get purge sogoupinyin\nsudo apt -y --purge remove fcitx\nsudo apt clean fcitx\n</code></pre> <pre><code>sudo apt -y install fcitx fcitx-bin fcitx-table fcitx-table-all fcitx-config-gtk fcitx-libs libfcitx-qt0 libopencc2 libopencc2-data libqt4-opengl libqtwebkit4\n</code></pre> - [Install sogou pinyin](https://shurufa.sogou.com/linux)   <pre><code>wget http://cdn2.ime.sogou.com/dl/index/1571302197/sogoupinyin_2.3.1.0112_amd64.deb\nsudo dpkg -i sogoupinyin_2.3.1.0112_amd64.deb\n</code></pre> - Config input method   ![Image](../assets/166/2.png)"},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#konosubakonoakua-2025-03-28t043943z","title":"konosubakonoakua \u00b7 2025-03-28T04:39:43Z","text":""},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#tools","title":"tools","text":"<pre><code>sudo add-apt-repository ppa:git-core/ppa\nsudo apt update\nsudo apt install git git-lfs\ngit config --global init.defaultBranch main\ngit config --global user.email \"ailike_meow@qq.com\"\ngit config --global user.name konosubakonoakua\nssh-keygen\n# git-lfs install\n</code></pre> <pre><code>git clone https://github.com/konosubakonoakua/.dotfiles.git\ncd ~/.dotfiles/scripts/install\nmkdir -p ~/.local/bin\n./install_ripgrep.sh\n./install_zoixde.sh\n./install_zig.sh\n./install_fzf.sh\n./install_zellij.sh\n./install_tree-sitter.sh\n./install_nerdfonts.sh\n./install_lazygit.sh\n./install_githubcli.sh\n./install_btop.sh\n./install_jq_stuffs.sh\n</code></pre> <pre><code>sudo apt install -y vim xsel python3-pip python3-venv\n</code></pre> <pre><code>sudo snap refresh\nsudo snap install nvim --classic\nsudo snap install glow\n</code></pre> <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\ncargo install fd-find\n</code></pre>"},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#konosubakonoakua-2025-03-28t045021z","title":"konosubakonoakua \u00b7 2025-03-28T04:50:21Z","text":""},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#neovim","title":"neovim","text":"<pre><code>git clone git@github.com:konosubakonoakua/fei.nvim.git ~/.config/fei.nvim\ntee -a ~/.bashrc &lt;&lt; EOF\nalias fvim='NVIM_APPNAME=\"fei.nvim\" nvim' # will save plugins at ~/.local/share/fei.nvim\nEOF\n</code></pre>"},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#konosubakonoakua-2025-03-28t060532z","title":"konosubakonoakua \u00b7 2025-03-28T06:05:32Z","text":""},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#python","title":"python","text":""},{"location":"notes/posts/166%23%5Blinux%5D%20ubuntu%2018%20setup/#uv","title":"uv","text":"<pre><code>curl -LsSf https://astral.sh/uv/install.sh | sh\n</code></pre>"},{"location":"notes/posts/167%23%5Bgithub%5D%20markdown%20format/","title":"167 [github] markdown format","text":"<p>[!NOTE] Highlights information that users should take into account, even when skimming.</p> <p>[!TIP] Optional information to help a user be more successful.</p> <p>[!IMPORTANT] Crucial information necessary for users to succeed.</p> <p>[!WARNING] Critical content demanding immediate user attention due to potential risks.</p> <p>[!CAUTION] Negative potential consequences of an action.</p>"},{"location":"notes/posts/168%23%5Bzynq%5D%5Blinux%5D%20linux%20kernel%20modules%20for%20zynq/","title":"168 [zynq][linux] linux kernel modules for zynq","text":"<ul> <li>https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18841873/Linux+Drivers</li> <li>https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/96960682/Linux+Loadable+Kernel+Modules</li> <li>https://www.fpgadeveloper.com/petalinux-build-artifacts/</li> </ul>"},{"location":"notes/posts/168%23%5Bzynq%5D%5Blinux%5D%20linux%20kernel%20modules%20for%20zynq/#comments","title":"Comments","text":""},{"location":"notes/posts/168%23%5Bzynq%5D%5Blinux%5D%20linux%20kernel%20modules%20for%20zynq/#konosubakonoakua-2025-05-06t022056z","title":"konosubakonoakua \u00b7 2025-05-06T02:20:56Z","text":""},{"location":"notes/posts/168%23%5Bzynq%5D%5Blinux%5D%20linux%20kernel%20modules%20for%20zynq/#-httpswwwyoutubecomplaylistlistplcgpd0do5-i3b5ttyqef1udyd4c-s-dma","title":"- https://www.youtube.com/playlist?list=PLCGpd0Do5-I3b5TtyqeF1UdyD4C-S-dMa","text":""},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/","title":"169 [epics] epics issues","text":""},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#first-thing-first","title":"first thing first","text":"<p>read manuals!!!!! - https://docs.epics-controls.org/en/latest/getting-started/EPICS_Intro.html - https://epics.anl.gov/base/R7-0/9.php   - https://docs.epics-controls.org/en/latest/internal/ca_protocol.html   - https://epics.anl.gov/base/R7-0/9-docs/CAref.html - https://epics.anl.gov/base/R3-15/9.php   - https://epics.anl.gov/base/R3-15/6-docs/AppDevGuide/AppDevGuide.html   - https://epics.anl.gov/base/R3-15/9-docs/CAref.html   - https://epics.anl.gov/base/R3-15/6-docs/CAproto/index.html</p>"},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#comments","title":"Comments","text":""},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#konosubakonoakua-2025-04-09t063338z","title":"konosubakonoakua \u00b7 2025-04-09T06:33:38Z","text":""},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#recgblrecorderror-ai-init_record-error-5145-pv-blmzynqmppstemp","title":"<code>recGblRecordError: ai: init_record Error (514,5) PV: BLM:ZynqMP:PS:Temp</code>","text":"<ul> <li><code>#include &lt;epicsExport.h&gt;</code></li> <li>wrong ai dset   <pre><code>aidset devAiSoft = {\n    { 6, NULL, NULL, init_record, NULL },\n    read_ai, NULL\n};\nepicsExportAddress(dset, devAiSoft);\n</code></pre></li> </ul>"},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#recgblrecorderror-wf-init_record-error-5145-pv-wfch0","title":"<code>recGblRecordError: wf: init_record Error (514,5) PV: WF:CH0</code>","text":"<ul> <li><code>read_wf</code> must be implemented.</li> </ul>"},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#konosubakonoakua-2025-04-09t093012z","title":"konosubakonoakua \u00b7 2025-04-09T09:30:12Z","text":""},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#iocinit-in-stcmd-but-not-working","title":"<code>iocInit</code> in <code>st.cmd</code>, but not working","text":"<ul> <li>try to add a blank line below iocInit</li> </ul>"},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#konosubakonoakua-2025-04-09t111205z","title":"konosubakonoakua \u00b7 2025-04-09T11:12:05Z","text":""},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#record-driver-working-but-caget-pv-0","title":"record driver working, but caget pv = 0","text":"<ul> <li>use <code>prec-&gt;rval=val</code> instead of <code>prec-&gt;val=val</code>, later is EGU value\uff0cthen implement linear_conv</li> <li><code>read_ai()</code> return <code>2</code>, if already obtained EGU value</li> </ul>"},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#konosubakonoakua-2025-04-10t104422z","title":"konosubakonoakua \u00b7 2025-04-10T10:44:22Z","text":""},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#ioc-build-or-instatllation-error","title":"IOC build or instatllation error","text":"<p><pre><code>IOC build or installation error:\n    The xxxRecord defined in the DBD file has 68 fields,\n    but the record support code was built with 454.\n</code></pre> - <code>make clean install &amp;&amp; make</code></p>"},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#konosubakonoakua-2025-04-21t021740z","title":"konosubakonoakua \u00b7 2025-04-21T02:17:40Z","text":""},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#wired-intersected-zeros-values-of-waveform-record","title":"wired intersected zeros &amp; values of waveform record","text":"<p><pre><code>BLM:WAV_AXIS_2000 2025-04-21 10:06:04.064604 2000 0 0 1 0 2 0 3 0 4 0 5 0 6 0 7 0 8 0 9 0\n</code></pre> You should check whether the type of your C array really matched with EPICS TYPES (ULONG something). On an aarch64 system, <code>ULONG</code> responds to <code>uint32_t</code>, not <code>unsigned long</code> which is 64bit</p>"},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#konosubakonoakua-2025-04-22t013913z","title":"konosubakonoakua \u00b7 2025-04-22T01:39:13Z","text":""},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#epics-multiple-waveform-pv-not-aligned-on-opi-but-aligned-if-dumped-to-file","title":"epics multiple waveform pv not aligned on opi but aligned if dumped to file","text":"<ul> <li>maybe the update frequency is too fast</li> </ul>"},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#konosubakonoakua-2025-04-25t091931z","title":"konosubakonoakua \u00b7 2025-04-25T09:19:31Z","text":""},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#logic-error-process-target-x","title":"Logic Error: process Target x ...","text":"<ul> <li>error   <pre><code>epics&gt; Logic Error: processTarget 1 from 0xaaaad34b8d10, BLM(0xaaaad32db430) -&gt; BLM:WAV_CH2_INTEGRAL_REALTIME_10US(0xaaaad32fe8b0)\nLogic Error: processTarget 2 from 0xaaaad34b8d10, BLM(0xaaaad32db430) -&gt; BLM:WAV_CH2_INTEGRAL_REALTIME_10US(0xaaaad32fe8b0)\nLogic Error: processTarget 1 from 0xaaaad34b8d10, BLM(0xaaaad32db430) -&gt; BLM:WAV_CH4_INTEGRAL_REALTIME_10US(0xaaaad32ff1f0)\n</code></pre></li> <li>root cause   dbputfiled outlinks must protected with dbscanlock</li> <li>use <code>dbscanlock</code> &amp; <code>dbscanunlock</code></li> </ul>"},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#konosubakonoakua-2025-06-19t155619z","title":"konosubakonoakua \u00b7 2025-06-19T15:56:19Z","text":""},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#debug-mode","title":"debug mode","text":"<ul> <li>add to <code>CONFIG_SITE</code> <pre><code># Debug\nUSR_CFLAGS += -g -O0\nUSR_CXXFLAGS += -g -O0\n</code></pre></li> </ul>"},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#konosubakonoakua-2025-06-25t030630z","title":"konosubakonoakua \u00b7 2025-06-25T03:06:30Z","text":""},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#autosave-not-working","title":"autosave not working","text":"<ul> <li>check <code>auto_settings.req</code></li> <li>call <code>create_moniter_set</code> before <code>iocInit</code> <pre><code>#- Autosave config\n#- https://epics-modules.github.io/autosave/autoSaveRestore.html\nset_requestfile_path(\"${TOP}/iocBoot/${IOC}\", \"\")\nset_requestfile_path(\"${TOP}/iocBoot/${IOC}\", \"autosave\")\nset_savefile_path(\"${AUTOSAVES}\")\nset_pass0_restoreFile(\"auto_settings.sav\", \"P=${P}\")\nset_pass1_restoreFile(\"auto_settings.sav\", \"P=${P}\")\n#- set_restoreSet_numSeqFiles(3)\n#- set_restoreSet_SeqPeriodInSeconds(600)\n#- set_restoreSet_RetrySeconds(60)\n#- set_restoreSet_CAReconnect(1)\n#- set_restoreSet_CallbackTimeout(-1)\n#- create_monitor_set(&lt;name&gt;.req, &lt;time in secs&gt;, &lt;macro&gt;)\ncreate_monitor_set(\"auto_settings.req\", 1, \"P=${P}\")\n\ncd \"${TOP}/iocBoot/${IOC}\"\niocInit\n</code></pre></li> </ul>"},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#autosave-not-restoring","title":"autosave not restoring","text":"<ul> <li>call <code>set_pass0_restoreFile</code></li> </ul>"},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#konosubakonoakua-2025-07-11t080607z","title":"konosubakonoakua \u00b7 2025-07-11T08:06:07Z","text":""},{"location":"notes/posts/169%23%5Bepics%5D%20epics%20issues/#caget-timed-out-but-dbldbgf-works","title":"<code>caget</code> timed out, but <code>dbl/dbgf</code> works","text":"<p>try: <pre><code>export EPICS_CA_ADDR_LIST=\"localhost\"\nexport EPICS_CA_AUTO_ADDR_LIST=NO\nexport EPICS_CA_MAX_ARRAY_BYTES=40000000\n</code></pre></p>"},{"location":"notes/posts/17%23Image%20storage/","title":"17 Image storage","text":"<p>Decide where to store images.</p> <ul> <li> in repo (slow, causing large repo history)</li> <li> in issue (cannot upload when in company, forbidden)</li> <li> in release (hard to manage)</li> <li> outside of github (unstable)</li> </ul>"},{"location":"notes/posts/170%23%5Bgit%5D%20git%20tips/","title":"170 [git] git tips","text":""},{"location":"notes/posts/170%23%5Bgit%5D%20git%20tips/#introduction","title":"introduction","text":"<p>https://rogerdudler.github.io/git-guide/index.zh.html</p>"},{"location":"notes/posts/170%23%5Bgit%5D%20git%20tips/#comments","title":"Comments","text":""},{"location":"notes/posts/170%23%5Bgit%5D%20git%20tips/#konosubakonoakua-2025-04-13t200140z","title":"konosubakonoakua \u00b7 2025-04-13T20:01:40Z","text":""},{"location":"notes/posts/170%23%5Bgit%5D%20git%20tips/#handle-dos-whitespaces","title":"handle dos whitespaces","text":"<pre><code>git config --global core.autocrlf input\n</code></pre>"},{"location":"notes/posts/170%23%5Bgit%5D%20git%20tips/#konosubakonoakua-2025-04-18t060008z","title":"konosubakonoakua \u00b7 2025-04-18T06:00:08Z","text":""},{"location":"notes/posts/170%23%5Bgit%5D%20git%20tips/#file-new-modes-when-cloning-linux-repo-to-windows","title":"<code>file new modes</code> when cloning linux repo to windows","text":"<p>tell git to ignore permission change <pre><code>git config core.filemode false\n</code></pre></p>"},{"location":"notes/posts/170%23%5Bgit%5D%20git%20tips/#konosubakonoakua-2025-04-22t093917z","title":"konosubakonoakua \u00b7 2025-04-22T09:39:17Z","text":""},{"location":"notes/posts/170%23%5Bgit%5D%20git%20tips/#lfs","title":"lfs","text":"<pre><code>git lfs install\ngit lfs pull\n</code></pre>"},{"location":"notes/posts/170%23%5Bgit%5D%20git%20tips/#konosubakonoakua-2025-07-11t084632z","title":"konosubakonoakua \u00b7 2025-07-11T08:46:32Z","text":""},{"location":"notes/posts/170%23%5Bgit%5D%20git%20tips/#bad-object-refstagsxxx","title":"bad object refs/tags/xxx","text":"<pre><code>rm .git/refs/tags/xxx\n</code></pre>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/","title":"171 [fpga] synopsys 2018 setup","text":""},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#deps","title":"deps","text":"<pre><code> ## for lmli\nsudo apt-get install lsb\n\n## for verdi\nsudo wget http://se.archive.ubuntu.com/ubuntu/pool/main/libp/libpng/libpng12-0_1.2.54-1ubuntu1_amd64.deb\nsudo dpkg -i libpng12-0_1.2.54-1ubuntu1_amd64.deb\nsudo apt-get install libncurses5 -y\n</code></pre>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#mkdir","title":"mkdir","text":"<pre><code>sudo mkdir -p /tools\nsudo chown user:user /tools\n\n# for lmli\nsudo mkdir -p /usr/tmp\nsudo chmod 777 /usr/tmp/\n</code></pre>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#install","title":"install","text":"<pre><code>cd synopsysinstaller_v5.0/\nchmod +x ./SynopsysInstaller_v5.0.run\n./SynopsysInstaller_v5.0.run # install in current dir\n./setup.sh # select installers folders\n</code></pre>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#keygen","title":"keygen","text":"<ul> <li>https://blog.csdn.net/lum250/article/details/123755261</li> <li><code>EXPIRE</code> must be <code>12-dec-2030</code></li> <li><code>HOST ID Daemon/Feature</code> is MAC Adress without <code>:</code></li> <li>HOSTNAME is <code>$HOSTNAME</code></li> <li>modify license file: <code>DAEMON snpslmd /tools/Synopsis/2018/scl/2018.06/linux64/bin/snpslmd</code></li> </ul>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#env","title":"env","text":"<pre><code>export SYNOPSYS=/tools/Synopsys/2018\nexport DVE_HOME=$SYNOPSYS/vcs-mx/O-2018.09-SP2/gui/dve\nexport VCS_HOME=$SYNOPSYS/vcs-mx/O-2018.09-SP2\nexport VERDI_HOME=$SYNOPSYS/verdi/Verdi_O-2018.09-SP2\nexport NOVAS_HOME=$VERDI_HOME\nexport SCL_HOME=$SYNOPSYS/scl/2018.06\n#export LD_LIBRARY_PATH=\"$VERDI_HOME/share/VCS/lib/LINUX64\":$LD_LIBRARY_PATH\nexport LD_LIBRARY_PATH=\"$VERDI_HOME/share/PLI/lib/LINUX64\":$LD_LIBRARY_PATH\n#export LD_LIBRARY_PATH=\"$NOVAS_HOME/share/NPI/lib/LINUX64_GNU_520\":$LD_LIBRARY_PATH\nexport PATH=$PATH:$DVE_HOME/bin:$VCS_HOME/bin:$VERDI_HOME/bin:$SCL_HOME/linux64/bin\n\nexport VCS_TARGET_ARCH=\"amd64\"\nexport VCS_ARCH_OVERRIDE=linux\nexport NPI_PLATFORM=\"LINUX64_GNU_472\"\nexport LM_LICENSE_FILE=\"27000@$HOSTNAME\"\n\nalias dve='dve -full64'\nalias vcs='vcs'\nalias verdi='verdi'\nalias lmg_vcs='lmgrd -c $SCL_HOME/admin/license/Synopsys.dat'\n</code></pre>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#license-test","title":"license test","text":"<pre><code>kill -9 $(lsof -ti :27000)\nlmg_vcs\n</code></pre>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#autostart","title":"autostart","text":"<pre><code>sudo tee /etc/profile.d/synopsys-lmli.sh &lt;&lt; EOF\nexport SYNOPSYS=/tools/Synopsys/2018\n$SYNOPSYS/scl/2018.06/linux64/bin/lmgrd -c $SYNOPSYS/Liscen/Synopsys.dat -l $SYNOPSYS/scl/2018.06/linux64/bin/lmgrd.log\nEOF\n</code></pre>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#troubleshoot","title":"troubleshoot","text":""},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#uvm-simple-cannot-run-need-modification","title":"uvm simple cannot run, need modification","text":"<pre><code># /tools/Synopsys/2018/vcs-mx/O-2018.09-SP2/doc/examples/testbench/sv/uvm/simple/hello_world/Makefile\n\nall: clean comp run\n\nclean:\n    rm -rf simv* csrc *.log vc_hdrs.h ucli.key\n\ncomp:\n    vcs -full64 -cpp g++ -cc gcc -LDFLAGS -no-pie -LDFLAGS -Wl,--no-as-needed -CFLAGS -fPIE -sverilog -timescale=1ns/1ns -ntb_opts uvm-1.1 +incdir+. hello_world.sv -l comp.log\n\nrun:\n    ./simv  +UVM_NO_RELNOTES  -l run.log\n</code></pre>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#verdi-libtinfoso5-not-found","title":"verdi libtinfo.so.5 not found","text":"<pre><code>sudo mv $SYNOPSYS/verdi/Verdi_O-2018.09-SP2/etc/lib/libstdc++/LINUXAMD64/libtinfo.so.5 $SYNOPSYS/verdi/Verdi_O-2018.09-SP2/etc/lib/libstdc++/LINUXAMD64/libtinfo.so.5.bak\nsudo ln -s /lib/x86_64-linux-gnu/libtinfo.so.5 $SYNOPSYS/verdi/Verdi_O-2018.09-SP2/etc/lib/libstdc++/LINUXAMD64/libtinfo.so.5\n</code></pre>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#vcs-linux-kernel-xxx-not-supported","title":"vcs: linux kernel xxx not supported","text":"<p>need to add <code>-full64</code> &amp; set <code>export VCS_ARCH_OVERRIDE=linux</code>.</p>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#binsh-illegal-option-h","title":"/bin/sh: Illegal option -h\u200b","text":"<p>switch to bash <pre><code>sudo dpkg-reconfigure dash\n</code></pre></p>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#lmgrd-no-such-file-or-directory","title":"lmgrd: No such file or directory","text":"<pre><code>sudo apt install lsb-core\n</code></pre>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#license-daemon-system-error-code-no-such-file-or-directory","title":"\u200blicense daemon: system error code: No such file or directory\u200b","text":"<pre><code>kill -9 $(lsof -ti :27000)\n</code></pre>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#libvcsnewso-undefined-reference-to-xxx","title":"/libvcsnew.so: undefined reference to xxx\u200b","text":"<p>Caution, there's no space between -Wl, &amp; --no-as-needed <pre><code> -LDFLAGS -Wl,--no-as-needed\n</code></pre> Recommended: <code>-full64 -cpp g++-4.8 -cc gcc-4.8 -LDFLAGS -Wl,--no-as-needed</code></p>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#vcs-line-3312-dc-command-not-found","title":"vcs: line 3312: dc: command not found\u200b","text":"<p><code>sudo apt install dc</code></p>"},{"location":"notes/posts/171%23%5Bfpga%5D%20synopsys%202018%20setup/#error-while-loading-shared-libraries-libpng12so0","title":"error while loading shared libraries: libpng12.so.0","text":"<pre><code>wget http://security.ubuntu.com/ubuntu/pool/main/libp/libpng/libpng12-0_1.2.54-1ubuntu1.1_amd64.deb\nsudo dpkg -i ./libpng12-0_1.2.54-1ubuntu1.1_amd64.deb\n</code></pre>"},{"location":"notes/posts/172%23%5Bepics%5D%20MEDM%20setup/","title":"172 [epics] MEDM setup","text":""},{"location":"notes/posts/172%23%5Bepics%5D%20MEDM%20setup/#windows","title":"windows","text":"<p>https://epics.anl.gov/distributions/win32/index.php</p> <p>EPICSWindowsTools1.44-x64.msi.zip</p> <p>EPICS Windows Tools 1.44.zip</p>"},{"location":"notes/posts/172%23%5Bepics%5D%20MEDM%20setup/#linux","title":"linux","text":"<ul> <li>https://epics.anl.gov/extensions/medm/index.php <pre><code>sudo apt-get install build-essential libmotif-dev\nsudo apt-get install x11proto-print-dev xfonts-100dpi\nsudo apt-get install libxp-dev libxmu-dev libxpm-dev\n</code></pre></li> <li>https://github.com/epics-extensions/medm</li> </ul>"},{"location":"notes/posts/173%23%5Bwin%5D%20surface%20restore/","title":"173 [win] surface restore","text":""},{"location":"notes/posts/173%23%5Bwin%5D%20surface%20restore/#uefi-setting-power-volume-up","title":"UEFI setting (<code>Power</code> + <code>Volume Up</code>)","text":"<ul> <li>must set u-disk as the first boot option</li> </ul>"},{"location":"notes/posts/173%23%5Bwin%5D%20surface%20restore/#surface-recovery-image","title":"surface-recovery-image","text":"<ul> <li>https://support.microsoft.com/zh-cn/surface-recovery-image</li> <li>you need your surface id</li> </ul>"},{"location":"notes/posts/173%23%5Bwin%5D%20surface%20restore/#create-recovery-drive","title":"create recovery drive","text":"<ul> <li>use <code>Recovery Drive</code>, DONOT select <code>Back up system files to the recovery drive.</code></li> <li>wait for complete, the u-disk should have 32GB free space or more</li> </ul>"},{"location":"notes/posts/173%23%5Bwin%5D%20surface%20restore/#boot-to-udisk","title":"boot to udisk","text":"<ul> <li>plug in udisk, reboot</li> </ul>"},{"location":"notes/posts/173%23%5Bwin%5D%20surface%20restore/#restore-new-system","title":"restore new system","text":"<ul> <li>use <code>restore from udisk</code></li> </ul>"},{"location":"notes/posts/174%23%5Bqt%5D%20qt%20setup/","title":"174 [qt] qt setup","text":""},{"location":"notes/posts/174%23%5Bqt%5D%20qt%20setup/#download","title":"download","text":"<ul> <li>https://download.qt.io/archive/qt/5.14/5.14.2/</li> </ul>"},{"location":"notes/posts/174%23%5Bqt%5D%20qt%20setup/#tutorial","title":"tutorial","text":"<ul> <li>https://blog.csdn.net/jk_rou/article/details/124782688</li> </ul>"},{"location":"notes/posts/174%23%5Bqt%5D%20qt%20setup/#mantaince","title":"mantaince","text":"<ul> <li>https://mirrors.bfsu.edu.cn/qt/online/qtsdkrepository/ </li> </ul>"},{"location":"notes/posts/174%23%5Bqt%5D%20qt%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/174%23%5Bqt%5D%20qt%20setup/#konosubakonoakua-2025-05-29t051557z","title":"konosubakonoakua \u00b7 2025-05-29T05:15:57Z","text":""},{"location":"notes/posts/174%23%5Bqt%5D%20qt%20setup/#online-installer","title":"online installer","text":"<p>https://mirrors.bfsu.edu.cn/help/qt/ <pre><code>.\\qt-online-installer-windows-x64-4.9.0.exe --mirror https://mirrors.bfsu.edu.cn/qt/\n</code></pre></p>"},{"location":"notes/posts/175%23%5Bepics%5D%20epics%20opi/","title":"175 [epics] epics opi","text":""},{"location":"notes/posts/175%23%5Bepics%5D%20epics%20opi/#phoebus","title":"phoebus","text":"<p><pre><code>###########################\n# Package org.phoebus.pv.ca\n###########################\n\n# Channel Access address list\norg.phoebus.pv.ca/addr_list=192.168.137.3 192.168.137.50\norg.phoebus.pv.ca/auto_addr_list=false\norg.phoebus.pv.ca/max_array_bytes=100000000\n</code></pre> - pvi</p>"},{"location":"notes/posts/175%23%5Bepics%5D%20epics%20opi/#epicsqt","title":"epicsqt","text":"<ul> <li>https://qtepics.github.io/getting_started.html</li> </ul>"},{"location":"notes/posts/175%23%5Bepics%5D%20epics%20opi/#caqtdm","title":"caqtdm","text":"<ul> <li>caqtdm</li> </ul>"},{"location":"notes/posts/175%23%5Bepics%5D%20epics%20opi/#pydm","title":"pydm","text":""},{"location":"notes/posts/176%23%5Bzynq%5D%20interrupt%20on%20zynq/","title":"176 [zynq] interrupt on zynq","text":""},{"location":"notes/posts/176%23%5Bzynq%5D%20interrupt%20on%20zynq/#uio","title":"uio","text":"<ul> <li>https://yurovsky.github.io/2014/10/10/linux-uio-gpio-interrupt.html</li> <li>https://spacewire.co.uk/tutorial/leds_switches_add_buttons_int/</li> <li>https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18842490/Testing+UIO+with+Interrupt+on+Zynq+Ultrascale</li> </ul>"},{"location":"notes/posts/176%23%5Bzynq%5D%20interrupt%20on%20zynq/#fasync","title":"fasync","text":"<ul> <li>diagram   <pre><code>sequenceDiagram\n    participant \u7528\u6237\u8fdb\u7a0b\n    participant \u5185\u6838\n    participant \u9a71\u52a8\n\n    Note over \u7528\u6237\u8fdb\u7a0b,\u9a71\u52a8: \u521d\u59cb\u5316\u9636\u6bb5\n    \u7528\u6237\u8fdb\u7a0b-&gt;&gt;\u5185\u6838: 1. fcntl(F_SETOWN, pid)\n    \u7528\u6237\u8fdb\u7a0b-&gt;&gt;\u5185\u6838: 2. fcntl(F_SETFL, FASYNC)\n    \u5185\u6838-&gt;&gt;\u9a71\u52a8: 3. \u8c03\u7528.fasync()\n    \u9a71\u52a8-&gt;&gt;\u5185\u6838: 4. fasync_helper()\u6ce8\u518c\u56de\u8c03\n\n    Note over \u7528\u6237\u8fdb\u7a0b,\u9a71\u52a8: \u6570\u636e\u5c31\u7eea\u9636\u6bb5\n    \u9a71\u52a8-&gt;&gt;\u9a71\u52a8: 5. \u8bbe\u5907\u6570\u636e\u5230\u8fbe(\u4e2d\u65ad/\u8f6e\u8be2)\n    \u9a71\u52a8-&gt;&gt;\u5185\u6838: 6. kill_fasync(SIGIO, POLL_IN)\n    \u5185\u6838-&gt;&gt;\u7528\u6237\u8fdb\u7a0b: 7. \u53d1\u9001SIGIO\u4fe1\u53f7\n\n    Note over \u7528\u6237\u8fdb\u7a0b: \u54cd\u5e94\u9636\u6bb5\n    \u7528\u6237\u8fdb\u7a0b-&gt;&gt;\u9a71\u52a8: 8. read()\u8bfb\u53d6\u6570\u636e\n    \u9a71\u52a8-&gt;&gt;\u7528\u6237\u8fdb\u7a0b: 9. \u8fd4\u56de\u6570\u636e</code></pre></li> <li>https://blog.csdn.net/qq_42330920/article/details/119911517</li> <li>https://www.cnblogs.com/yuanqiangfei/p/16145657.html</li> <li>https://www.cnblogs.com/physworld/p/14839320.html</li> </ul>"},{"location":"notes/posts/176%23%5Bzynq%5D%20interrupt%20on%20zynq/#others","title":"others","text":"<ul> <li>https://jvns.ca/blog/2017/06/03/async-io-on-linux--select--poll--and-epoll/</li> <li>https://www.zynqnotes.com/linux-irq-mapping</li> <li>https://www.zynqnotes.com/pl-ps-interrupt-1</li> <li>https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18842020/Cascade+Interrupt+Controller+support+in+DTG</li> <li>https://ax7010-20231-v101.readthedocs.io/zh-cn/latest/7010_S6_RSTdocument_CN/8_%E4%B8%AD%E6%96%AD_CN.html</li> </ul>"},{"location":"notes/posts/176%23%5Bzynq%5D%20interrupt%20on%20zynq/#comments","title":"Comments","text":""},{"location":"notes/posts/176%23%5Bzynq%5D%20interrupt%20on%20zynq/#konosubakonoakua-2025-05-08t072047z","title":"konosubakonoakua \u00b7 2025-05-08T07:20:47Z","text":""},{"location":"notes/posts/176%23%5Bzynq%5D%20interrupt%20on%20zynq/#axi-gpio-regs-for-interrupt","title":"axi gpio regs for interrupt","text":"![Image](../assets/176/1.png)  ![Image](../assets/176/2.png)  ![Image](../assets/176/3.png)"},{"location":"notes/posts/176%23%5Bzynq%5D%20interrupt%20on%20zynq/#konosubakonoakua-2025-05-09t084600z","title":"konosubakonoakua \u00b7 2025-05-09T08:46:00Z","text":""},{"location":"notes/posts/176%23%5Bzynq%5D%20interrupt%20on%20zynq/#realdigital","title":"realdigital","text":"<ul> <li>Project 5 Using Interrupts</li> <li>Setup and use of Blackboard's GPIO devices</li> <li>Setting up and using ARM's Generic Interrupt Controller</li> </ul>"},{"location":"notes/posts/177%23%5Bdl%5D%20deepwiki%20collections/","title":"177 [dl] deepwiki collections","text":""},{"location":"notes/posts/177%23%5Bdl%5D%20deepwiki%20collections/#epics","title":"epics","text":"<ul> <li>https://deepwiki.com/epics-base/epics-base</li> <li>https://deepwiki.com/epics-modules/asyn</li> <li>https://deepwiki.com/epics-modules/autosave</li> <li>https://deepwiki.com/epics-modules/pcas</li> <li>https://deepwiki.com/epics-base/epicscorelibs</li> <li>https://deepwiki.com/DiamondLightSource/pythonSoftIOC</li> <li>https://deepwiki.com/paulscherrerinstitute/pcaspy</li> </ul>"},{"location":"notes/posts/177%23%5Bdl%5D%20deepwiki%20collections/#comments","title":"Comments","text":""},{"location":"notes/posts/177%23%5Bdl%5D%20deepwiki%20collections/#konosubakonoakua-2025-05-11t054731z","title":"konosubakonoakua \u00b7 2025-05-11T05:47:31Z","text":""},{"location":"notes/posts/177%23%5Bdl%5D%20deepwiki%20collections/#zynq","title":"zynq","text":"<ul> <li>https://deepwiki.com/torvalds/linux</li> <li>https://deepwiki.com/RedPitaya/RedPitaya</li> <li>https://deepwiki.com/RedPitaya/RedPitaya-FPGA</li> </ul>"},{"location":"notes/posts/177%23%5Bdl%5D%20deepwiki%20collections/#konosubakonoakua-2025-05-11t062235z","title":"konosubakonoakua \u00b7 2025-05-11T06:22:35Z","text":""},{"location":"notes/posts/177%23%5Bdl%5D%20deepwiki%20collections/#hdl","title":"hdl","text":""},{"location":"notes/posts/177%23%5Bdl%5D%20deepwiki%20collections/#-httpsdeepwikicomanalogdevicesinchdl","title":"- https://deepwiki.com/analogdevicesinc/hdl","text":""},{"location":"notes/posts/178%23%5Bjava%5D%20jdk%20archives/","title":"178 [java] jdk archives","text":"<ul> <li>https://jdk.java.net/archive/</li> </ul>"},{"location":"notes/posts/179%23%5Bref%5D%20code%20references/","title":"179 [ref] code references","text":"<ul> <li>https://gitlab.desy.de/fpgafw</li> <li>https://gitlab.cern.ch/explore</li> <li>https://baltig.infn.it/explore</li> <li>https://baltig.infn.it/biDAQ</li> </ul>"},{"location":"notes/posts/18%23How%20to%20better%20edit%20long%20text%20in%20issue%20comment%20or%20discussion/","title":"18 How to better edit long text in issue comment or discussion","text":"<p>When the comment become really long, it's hard to use the webpage markdown editor to edit.</p> <ul> <li> via github web markdown editor (may lost, also hard to use)</li> <li> copy to local vim buffer, then edit (may lost, less tedious)</li> <li>maybe we can use vim plugin <code>octo.nvim</code></li> <li> sync with repo (persistent, but tedious)</li> <li> anything else</li> </ul>"},{"location":"notes/posts/180%23%5Bref%5D%20hw%20refs/","title":"180 [ref] hw refs","text":""},{"location":"notes/posts/181%23%5Bzynq%5D%5Blinux%5D%20petalinux%20yacto/","title":"181 [zynq][linux] petalinux yacto","text":""},{"location":"notes/posts/181%23%5Bzynq%5D%5Blinux%5D%20petalinux%20yacto/#install-apps-to-another-location","title":"install apps to another location","text":"<p><pre><code>petalinux-create -t apps --template &lt;type&gt; --name &lt;app-name&gt; --enable\n</code></pre> <pre><code>do_install_append() {\n    install -d ${TOPDIR}/../images/linux/apps/\n    install -m 0755 ${D}${bindir}/&lt;appname&gt; ${TOPDIR}/../images/linux/apps/\n}\n</code></pre></p>"},{"location":"notes/posts/181%23%5Bzynq%5D%5Blinux%5D%20petalinux%20yacto/#install-modules-to-another-location","title":"install modules to another location","text":"<pre><code>MODULES_DIR=\"${TOPDIR}/../images/linux/modules\"\n\ndo_install_append() {\n    mkdir -p ${MODULES_DIR}\n    cp ${B}/zynq-irq.ko ${MODULES_DIR}\n}\n</code></pre>"},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/","title":"182 [win] windows issues","text":""},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#nvme-ssd-speed-drop","title":"nvme ssd speed drop","text":"<ul> <li>first check motherboard 3.3V voltage</li> <li>update firmware for ssd</li> <li>trim (use disk manager or diskgenius)</li> </ul>     ![Image](../assets/182/1.png)"},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#comments","title":"Comments","text":""},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#konosubakonoakua-2025-05-19t031043z","title":"konosubakonoakua \u00b7 2025-05-19T03:10:43Z","text":""},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#win11-setup","title":"win11 setup","text":""},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#skip-network","title":"skip network","text":"<ul> <li>shift + F10</li> <li><code>OOBE\\BYPASSNRO</code></li> </ul>"},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#konosubakonoakua-2025-05-19t074201z","title":"konosubakonoakua \u00b7 2025-05-19T07:42:01Z","text":""},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#disable-fast-startuphibernate","title":"disable fast-startup/hibernate","text":"<ul> <li>in power button settings, disable fast startup</li> <li><code>powercfg.exe /hibernate off</code></li> </ul>"},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#konosubakonoakua-2025-05-21t081513z","title":"konosubakonoakua \u00b7 2025-05-21T08:15:13Z","text":""},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#enable-windows-long-path-names","title":"enable windows long path names","text":"<ul> <li><code>gpedit.msc</code> &gt; <code>admin templates</code> &gt; <code>system</code> &gt; <code>file sys</code> &gt; <code>enable win32 long path</code></li> </ul>"},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#konosubakonoakua-2025-06-03t021832z","title":"konosubakonoakua \u00b7 2025-06-03T02:18:32Z","text":""},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#remove-ads-and-hotspots-in-searching-panel","title":"remove ADs and hotspots in searching panel","text":"<pre><code>reg add HKCU\\Software\\Policies\\Microsoft\\Windows\\explorer /v HideRecommendedSection /t reg_dword /d 1 /f\nreg add HKCU\\Software\\Policies\\Microsoft\\Windows\\explorer /v DisableSearchBoxSuggestions /t reg_dword /d 1 /f\n</code></pre>"},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#konosubakonoakua-2025-06-17t174840z","title":"konosubakonoakua \u00b7 2025-06-17T17:48:40Z","text":""},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#we-werent-able-to-setup-your-pin","title":"we weren't able to setup your PIN","text":""},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#remove-old-ngc","title":"remove old NGC","text":"<pre><code>takeown /f C:\\Windows\\ServiceProfiles\\LocalService\\AppData\\Local\\Microsoft\\NGC /r /d y\nicacls C:\\Windows\\ServiceProfiles\\LocalService\\AppData\\Local\\Microsoft\\NGC /grant administrators:F /t /q\nren C:\\Windows\\ServiceProfiles\\LocalService\\AppData\\Local\\Microsoft\\NGC NGC.old\n</code></pre>"},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#make-credential-manager-windows-biometric-autostart","title":"make <code>Credential Manager</code> &amp; <code>Windows Biometric</code> autostart","text":"<p><pre><code>sc config \"VaultSvc\" start= auto\nsc config \"WbioSrvc\" start= auto\n</code></pre> <pre><code>net start \"VaultSvc\"\nnet start \"WbioSrvc\"\n</code></pre> <pre><code>sc query \"VaultSvc\"\nsc query \"WbioSrvc\"\n</code></pre></p>"},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#konosubakonoakua-2025-07-09t021643z","title":"konosubakonoakua \u00b7 2025-07-09T02:16:43Z","text":""},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#device-guard-and-credential-guard-hardware-readiness-tool","title":"Device Guard and Credential Guard hardware readiness tool","text":"<ul> <li>https://www.microsoft.com/en-us/download/details.aspx?id=53337</li> <li>https://iknow.lenovo.com.cn/detail/423992</li> <li></li> </ul>"},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#konosubakonoakua-2025-07-11t004811z","title":"konosubakonoakua \u00b7 2025-07-11T00:48:11Z","text":""},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#powershell-setup","title":"powershell setup","text":""},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#winget","title":"winget","text":"<pre><code>winget install microsoft.powershell\n</code></pre>"},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#scoop","title":"scoop","text":"<pre><code>scoop install fzf zoxide ripgrep starship\n</code></pre>"},{"location":"notes/posts/182%23%5Bwin%5D%20windows%20issues/#profile","title":"$profile","text":"$profile  <pre><code>#f45873b3-b655-43a6-b217-97c00aa0db58 PowerToys CommandNotFound module\n#Import-Module -Name Microsoft.WinGet.CommandNotFound\n$MaximumHistoryCount = 32767\n#f45873b3-b655-43a6-b217-97c00aa0db58\n\n. \"$profile/../psreadline.ps1\"\n\n## starship\nInvoke-Expression (&amp;starship init powershell)\nInvoke-Expression (&amp; { (zoxide init powershell | Out-String) })\n\nfunction toggle_proxy {\n    $proxyAddress = \"http://127.0.0.1:7897\"\n    $httpProxy = $env:HTTP_PROXY\n    $httpsProxy = $env:HTTPS_PROXY\n\n    if ($httpProxy -eq $proxyAddress -and $httpsProxy -eq $proxyAddress) {\n        Remove-Item Env:HTTP_PROXY\n        Remove-Item Env:HTTPS_PROXY\n        Write-Host \"Proxy environment variables cleared.\"\n    } else {\n        $env:HTTP_PROXY = $proxyAddress\n        $env:HTTPS_PROXY = $proxyAddress\n        Write-Host \"Proxy environment variables set to $proxyAddress.\"\n    }\n}\n\n\nfunction nvimn {\n    param(\n        [string]$filePath,\n        [switch]$clean,\n        [switch]$help\n    )\n    if ($help) {\n        Write-Host \"Usage: nvimn [&lt;filePath&gt;] [-clean] [-help]\"\n        return\n    }\n    $args = @(\"-u\", \"NONE\")\n    if ($clean) { $args += \"-i\", \"NONE\" }\n    if ($filePath) { $args += $filePath }\n    nvim @args\n}\n</code></pre>  psreadline.ps1  <pre><code>using namespace System.Management.Automation\nusing namespace System.Management.Automation.Language\n\n# This is an example profile for PSReadLine.\n#\n# This is roughly what I use so there is some emphasis on emacs bindings,\n# but most of these bindings make sense in Windows mode as well.\n\nImport-Module PSReadLine\n\nSet-PSReadLineOption -EditMode Emacs\n\n# replace 'Ctrl+t' and 'Ctrl+r' with your preferred bindings:\nSet-PsFzfOption -PSReadlineChordProvider 'Ctrl+t' -PSReadlineChordReverseHistory 'Ctrl+r'\n\nSet-PSReadLineKeyHandler -Chord 'Ctrl+d' -ScriptBlock { [System.Environment]::Exit(0) }\n\n# Searching for commands with up/down arrow is really handy.  The\n# option \"moves to end\" is useful if you want the cursor at the end\n# of the line while cycling through history like it does w/o searching,\n# without that option, the cursor will remain at the position it was\n# when you used up arrow, which can be useful if you forget the exact\n# string you started the search on.\nSet-PSReadLineOption -HistorySearchCursorMovesToEnd\nSet-PSReadLineKeyHandler -Key UpArrow -Function HistorySearchBackward\nSet-PSReadLineKeyHandler -Key DownArrow -Function HistorySearchForward\n\n# # This key handler shows the entire or filtered history using Out-GridView. The\n# # typed text is used as the substring pattern for filtering. A selected command\n# # is inserted to the command line without invoking. Multiple command selection\n# # is supported, e.g. selected by Ctrl + Click.\n# # As another example, the module 'F7History' does something similar but uses the\n# # console GUI instead of Out-GridView. Details about this module can be found at\n# # PowerShell Gallery: https://www.powershellgallery.com/packages/F7History.\n# Set-PSReadLineKeyHandler -Key F7 `\n#                          -BriefDescription History `\n#                          -LongDescription 'Show command history' `\n#                          -ScriptBlock {\n#     $pattern = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$pattern, [ref]$null)\n#     if ($pattern)\n#     {\n#         $pattern = [regex]::Escape($pattern)\n#     }\n#\n#     $history = [System.Collections.ArrayList]@(\n#         $last = ''\n#         $lines = ''\n#         foreach ($line in [System.IO.File]::ReadLines((Get-PSReadLineOption).HistorySavePath))\n#         {\n#             if ($line.EndsWith('`'))\n#             {\n#                 $line = $line.Substring(0, $line.Length - 1)\n#                 $lines = if ($lines)\n#                 {\n#                     \"$lines`n$line\"\n#                 }\n#                 else\n#                 {\n#                     $line\n#                 }\n#                 continue\n#             }\n#\n#             if ($lines)\n#             {\n#                 $line = \"$lines`n$line\"\n#                 $lines = ''\n#             }\n#\n#             if (($line -cne $last) -and (!$pattern -or ($line -match $pattern)))\n#             {\n#                 $last = $line\n#                 $line\n#             }\n#         }\n#     )\n#     $history.Reverse()\n#\n#     $command = $history | Out-GridView -Title History -PassThru\n#     if ($command)\n#     {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::RevertLine()\n#         [Microsoft.PowerShell.PSConsoleReadLine]::Insert(($command -join \"`n\"))\n#     }\n# }\n\n# # This is an example of a macro that you might use to execute a command.\n# # This will add the command to history.\n# Set-PSReadLineKeyHandler -Key Ctrl+b `\n#                          -BriefDescription BuildCurrentDirectory `\n#                          -LongDescription \"Build the current directory\" `\n#                          -ScriptBlock {\n#     [Microsoft.PowerShell.PSConsoleReadLine]::RevertLine()\n#     [Microsoft.PowerShell.PSConsoleReadLine]::Insert(\"msbuild\")\n#     [Microsoft.PowerShell.PSConsoleReadLine]::AcceptLine()\n# }\n\n# # In Emacs mode - Tab acts like in bash, but the Windows style completion\n# # is still useful sometimes, so bind some keys so we can do both\n# Set-PSReadLineKeyHandler -Key Ctrl+q -Function TabCompleteNext\n# Set-PSReadLineKeyHandler -Key Ctrl+Q -Function TabCompletePrevious\n\n# # Clipboard interaction is bound by default in Windows mode, but not Emacs mode.\n# Set-PSReadLineKeyHandler -Key Ctrl+C -Function Copy\n# Set-PSReadLineKeyHandler -Key Ctrl+v -Function Paste\n\n# # CaptureScreen is good for blog posts or email showing a transaction\n# # of what you did when asking for help or demonstrating a technique.\n# Set-PSReadLineKeyHandler -Chord 'Ctrl+d,Ctrl+c' -Function CaptureScreen\n\n# # The built-in word movement uses character delimiters, but token based word\n# # movement is also very useful - these are the bindings you'd use if you\n# # prefer the token based movements bound to the normal emacs word movement\n# # key bindings.\n# Set-PSReadLineKeyHandler -Key Alt+d -Function ShellKillWord\n# Set-PSReadLineKeyHandler -Key Alt+Backspace -Function ShellBackwardKillWord\n# Set-PSReadLineKeyHandler -Key Alt+b -Function ShellBackwardWord\n# Set-PSReadLineKeyHandler -Key Alt+f -Function ShellForwardWord\n# Set-PSReadLineKeyHandler -Key Alt+B -Function SelectShellBackwardWord\n# Set-PSReadLineKeyHandler -Key Alt+F -Function SelectShellForwardWord\n\n# #region Smart Insert/Delete\n#\n# # The next four key handlers are designed to make entering matched quotes\n# # parens, and braces a nicer experience.  I'd like to include functions\n# # in the module that do this, but this implementation still isn't as smart\n# # as ReSharper, so I'm just providing it as a sample.\n#\n# Set-PSReadLineKeyHandler -Key '\"',\"'\" `\n#                          -BriefDescription SmartInsertQuote `\n#                          -LongDescription \"Insert paired quotes if not already on a quote\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $quote = $key.KeyChar\n#\n#     $selectionStart = $null\n#     $selectionLength = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetSelectionState([ref]$selectionStart, [ref]$selectionLength)\n#\n#     $line = $null\n#     $cursor = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$line, [ref]$cursor)\n#\n#     # If text is selected, just quote it without any smarts\n#     if ($selectionStart -ne -1)\n#     {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::Replace($selectionStart, $selectionLength, $quote + $line.SubString($selectionStart, $selectionLength) + $quote)\n#         [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($selectionStart + $selectionLength + 2)\n#         return\n#     }\n#\n#     $ast = $null\n#     $tokens = $null\n#     $parseErrors = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$ast, [ref]$tokens, [ref]$parseErrors, [ref]$null)\n#\n#     function FindToken\n#     {\n#         param($tokens, $cursor)\n#\n#         foreach ($token in $tokens)\n#         {\n#             if ($cursor -lt $token.Extent.StartOffset) { continue }\n#             if ($cursor -lt $token.Extent.EndOffset) {\n#                 $result = $token\n#                 $token = $token -as [StringExpandableToken]\n#                 if ($token) {\n#                     $nested = FindToken $token.NestedTokens $cursor\n#                     if ($nested) { $result = $nested }\n#                 }\n#\n#                 return $result\n#             }\n#         }\n#         return $null\n#     }\n#\n#     $token = FindToken $tokens $cursor\n#\n#     # If we're on or inside a **quoted** string token (so not generic), we need to be smarter\n#     if ($token -is [StringToken] -and $token.Kind -ne [TokenKind]::Generic) {\n#         # If we're at the start of the string, assume we're inserting a new string\n#         if ($token.Extent.StartOffset -eq $cursor) {\n#             [Microsoft.PowerShell.PSConsoleReadLine]::Insert(\"$quote$quote \")\n#             [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($cursor + 1)\n#             return\n#         }\n#\n#         # If we're at the end of the string, move over the closing quote if present.\n#         if ($token.Extent.EndOffset -eq ($cursor + 1) -and $line[$cursor] -eq $quote) {\n#             [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($cursor + 1)\n#             return\n#         }\n#     }\n#\n#     if ($null -eq $token -or\n#         $token.Kind -eq [TokenKind]::RParen -or $token.Kind -eq [TokenKind]::RCurly -or $token.Kind -eq [TokenKind]::RBracket) {\n#         if ($line[0..$cursor].Where{$_ -eq $quote}.Count % 2 -eq 1) {\n#             # Odd number of quotes before the cursor, insert a single quote\n#             [Microsoft.PowerShell.PSConsoleReadLine]::Insert($quote)\n#         }\n#         else {\n#             # Insert matching quotes, move cursor to be in between the quotes\n#             [Microsoft.PowerShell.PSConsoleReadLine]::Insert(\"$quote$quote\")\n#             [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($cursor + 1)\n#         }\n#         return\n#     }\n#\n#     # If cursor is at the start of a token, enclose it in quotes.\n#     if ($token.Extent.StartOffset -eq $cursor) {\n#         if ($token.Kind -eq [TokenKind]::Generic -or $token.Kind -eq [TokenKind]::Identifier -or \n#             $token.Kind -eq [TokenKind]::Variable -or $token.TokenFlags.hasFlag([TokenFlags]::Keyword)) {\n#             $end = $token.Extent.EndOffset\n#             $len = $end - $cursor\n#             [Microsoft.PowerShell.PSConsoleReadLine]::Replace($cursor, $len, $quote + $line.SubString($cursor, $len) + $quote)\n#             [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($end + 2)\n#             return\n#         }\n#     }\n#\n#     # We failed to be smart, so just insert a single quote\n#     [Microsoft.PowerShell.PSConsoleReadLine]::Insert($quote)\n# }\n#\n# Set-PSReadLineKeyHandler -Key '(','{','[' `\n#                          -BriefDescription InsertPairedBraces `\n#                          -LongDescription \"Insert matching braces\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $closeChar = switch ($key.KeyChar)\n#     {\n#         &lt;#case#&gt; '(' { [char]')'; break }\n#         &lt;#case#&gt; '{' { [char]'}'; break }\n#         &lt;#case#&gt; '[' { [char]']'; break }\n#     }\n#\n#     $selectionStart = $null\n#     $selectionLength = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetSelectionState([ref]$selectionStart, [ref]$selectionLength)\n#\n#     $line = $null\n#     $cursor = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$line, [ref]$cursor)\n#\n#     if ($selectionStart -ne -1)\n#     {\n#       # Text is selected, wrap it in brackets\n#       [Microsoft.PowerShell.PSConsoleReadLine]::Replace($selectionStart, $selectionLength, $key.KeyChar + $line.SubString($selectionStart, $selectionLength) + $closeChar)\n#       [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($selectionStart + $selectionLength + 2)\n#     } else {\n#       # No text is selected, insert a pair\n#       [Microsoft.PowerShell.PSConsoleReadLine]::Insert(\"$($key.KeyChar)$closeChar\")\n#       [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($cursor + 1)\n#     }\n# }\n#\n# Set-PSReadLineKeyHandler -Key ')',']','}' `\n#                          -BriefDescription SmartCloseBraces `\n#                          -LongDescription \"Insert closing brace or skip\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $line = $null\n#     $cursor = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$line, [ref]$cursor)\n#\n#     if ($line[$cursor] -eq $key.KeyChar)\n#     {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($cursor + 1)\n#     }\n#     else\n#     {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::Insert(\"$($key.KeyChar)\")\n#     }\n# }\n#\n# Set-PSReadLineKeyHandler -Key Backspace `\n#                          -BriefDescription SmartBackspace `\n#                          -LongDescription \"Delete previous character or matching quotes/parens/braces\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $line = $null\n#     $cursor = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$line, [ref]$cursor)\n#\n#     if ($cursor -gt 0)\n#     {\n#         $toMatch = $null\n#         if ($cursor -lt $line.Length)\n#         {\n#             switch ($line[$cursor])\n#             {\n#                 &lt;#case#&gt; '\"' { $toMatch = '\"'; break }\n#                 &lt;#case#&gt; \"'\" { $toMatch = \"'\"; break }\n#                 &lt;#case#&gt; ')' { $toMatch = '('; break }\n#                 &lt;#case#&gt; ']' { $toMatch = '['; break }\n#                 &lt;#case#&gt; '}' { $toMatch = '{'; break }\n#             }\n#         }\n#\n#         if ($toMatch -ne $null -and $line[$cursor-1] -eq $toMatch)\n#         {\n#             [Microsoft.PowerShell.PSConsoleReadLine]::Delete($cursor - 1, 2)\n#         }\n#         else\n#         {\n#             [Microsoft.PowerShell.PSConsoleReadLine]::BackwardDeleteChar($key, $arg)\n#         }\n#     }\n# }\n#\n# #endregion Smart Insert/Delete\n\n# Sometimes you enter a command but realize you forgot to do something else first.\n# This binding will let you save that command in the history so you can recall it,\n# but it doesn't actually execute.  It also clears the line with RevertLine so the\n# undo stack is reset - though redo will still reconstruct the command line.\nSet-PSReadLineKeyHandler -Key Alt+w `\n                         -BriefDescription SaveInHistory `\n                         -LongDescription \"Save current line in history but do not execute\" `\n                         -ScriptBlock {\n    param($key, $arg)\n\n    $line = $null\n    $cursor = $null\n    [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$line, [ref]$cursor)\n    [Microsoft.PowerShell.PSConsoleReadLine]::AddToHistory($line)\n    [Microsoft.PowerShell.PSConsoleReadLine]::RevertLine()\n}\n\n# # Insert text from the clipboard as a here string\n# Set-PSReadLineKeyHandler -Key Ctrl+V `\n#                          -BriefDescription PasteAsHereString `\n#                          -LongDescription \"Paste the clipboard text as a here string\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     Add-Type -Assembly PresentationCore\n#     if ([System.Windows.Clipboard]::ContainsText())\n#     {\n#         # Get clipboard text - remove trailing spaces, convert \\r\\n to \\n, and remove the final \\n.\n#         $text = ([System.Windows.Clipboard]::GetText() -replace \"\\p{Zs}*`r?`n\",\"`n\").TrimEnd()\n#         [Microsoft.PowerShell.PSConsoleReadLine]::Insert(\"@'`n$text`n'@\")\n#     }\n#     else\n#     {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::Ding()\n#     }\n# }\n\n# Sometimes you want to get a property of invoke a member on what you've entered so far\n# but you need parens to do that.  This binding will help by putting parens around the current selection,\n# or if nothing is selected, the whole line.\nSet-PSReadLineKeyHandler -Key 'Alt+(' `\n                         -BriefDescription ParenthesizeSelection `\n                         -LongDescription \"Put parenthesis around the selection or entire line and move the cursor to after the closing parenthesis\" `\n                         -ScriptBlock {\n    param($key, $arg)\n\n    $selectionStart = $null\n    $selectionLength = $null\n    [Microsoft.PowerShell.PSConsoleReadLine]::GetSelectionState([ref]$selectionStart, [ref]$selectionLength)\n\n    $line = $null\n    $cursor = $null\n    [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$line, [ref]$cursor)\n    if ($selectionStart -ne -1)\n    {\n        [Microsoft.PowerShell.PSConsoleReadLine]::Replace($selectionStart, $selectionLength, '(' + $line.SubString($selectionStart, $selectionLength) + ')')\n        [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($selectionStart + $selectionLength + 2)\n    }\n    else\n    {\n        [Microsoft.PowerShell.PSConsoleReadLine]::Replace(0, $line.Length, '(' + $line + ')')\n        [Microsoft.PowerShell.PSConsoleReadLine]::EndOfLine()\n    }\n}\n\n# Each time you press Alt+', this key handler will change the token\n# under or before the cursor.  It will cycle through single quotes, double quotes, or\n# no quotes each time it is invoked.\nSet-PSReadLineKeyHandler -Key \"Alt+'\" `\n                         -BriefDescription ToggleQuoteArgument `\n                         -LongDescription \"Toggle quotes on the argument under the cursor\" `\n                         -ScriptBlock {\n    param($key, $arg)\n\n    $ast = $null\n    $tokens = $null\n    $errors = $null\n    $cursor = $null\n    [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$ast, [ref]$tokens, [ref]$errors, [ref]$cursor)\n\n    $tokenToChange = $null\n    foreach ($token in $tokens)\n    {\n        $extent = $token.Extent\n        if ($extent.StartOffset -le $cursor -and $extent.EndOffset -ge $cursor)\n        {\n            $tokenToChange = $token\n\n            # If the cursor is at the end (it's really 1 past the end) of the previous token,\n            # we only want to change the previous token if there is no token under the cursor\n            if ($extent.EndOffset -eq $cursor -and $foreach.MoveNext())\n            {\n                $nextToken = $foreach.Current\n                if ($nextToken.Extent.StartOffset -eq $cursor)\n                {\n                    $tokenToChange = $nextToken\n                }\n            }\n            break\n        }\n    }\n\n    if ($tokenToChange -ne $null)\n    {\n        $extent = $tokenToChange.Extent\n        $tokenText = $extent.Text\n        if ($tokenText[0] -eq '\"' -and $tokenText[-1] -eq '\"')\n        {\n            # Switch to no quotes\n            $replacement = $tokenText.Substring(1, $tokenText.Length - 2)\n        }\n        elseif ($tokenText[0] -eq \"'\" -and $tokenText[-1] -eq \"'\")\n        {\n            # Switch to double quotes\n            $replacement = '\"' + $tokenText.Substring(1, $tokenText.Length - 2) + '\"'\n        }\n        else\n        {\n            # Add single quotes\n            $replacement = \"'\" + $tokenText + \"'\"\n        }\n\n        [Microsoft.PowerShell.PSConsoleReadLine]::Replace(\n            $extent.StartOffset,\n            $tokenText.Length,\n            $replacement)\n    }\n}\n\n# This example will replace any aliases on the command line with the resolved commands.\nSet-PSReadLineKeyHandler -Key \"Alt+%\" `\n                         -BriefDescription ExpandAliases `\n                         -LongDescription \"Replace all aliases with the full command\" `\n                         -ScriptBlock {\n    param($key, $arg)\n\n    $ast = $null\n    $tokens = $null\n    $errors = $null\n    $cursor = $null\n    [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$ast, [ref]$tokens, [ref]$errors, [ref]$cursor)\n\n    $startAdjustment = 0\n    foreach ($token in $tokens)\n    {\n        if ($token.TokenFlags -band [TokenFlags]::CommandName)\n        {\n            $alias = $ExecutionContext.InvokeCommand.GetCommand($token.Extent.Text, 'Alias')\n            if ($alias -ne $null)\n            {\n                $resolvedCommand = $alias.ResolvedCommandName\n                if ($resolvedCommand -ne $null)\n                {\n                    $extent = $token.Extent\n                    $length = $extent.EndOffset - $extent.StartOffset\n                    [Microsoft.PowerShell.PSConsoleReadLine]::Replace(\n                        $extent.StartOffset + $startAdjustment,\n                        $length,\n                        $resolvedCommand)\n\n                    # Our copy of the tokens won't have been updated, so we need to\n                    # adjust by the difference in length\n                    $startAdjustment += ($resolvedCommand.Length - $length)\n                }\n            }\n        }\n    }\n}\n\n# F1 for help on the command line - naturally\nSet-PSReadLineKeyHandler -Key F1 `\n                         -BriefDescription CommandHelp `\n                         -LongDescription \"Open the help window for the current command\" `\n                         -ScriptBlock {\n    param($key, $arg)\n\n    $ast = $null\n    $tokens = $null\n    $errors = $null\n    $cursor = $null\n    [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$ast, [ref]$tokens, [ref]$errors, [ref]$cursor)\n\n    $commandAst = $ast.FindAll( {\n        $node = $args[0]\n        $node -is [CommandAst] -and\n            $node.Extent.StartOffset -le $cursor -and\n            $node.Extent.EndOffset -ge $cursor\n        }, $true) | Select-Object -Last 1\n\n    if ($commandAst -ne $null)\n    {\n        $commandName = $commandAst.GetCommandName()\n        if ($commandName -ne $null)\n        {\n            $command = $ExecutionContext.InvokeCommand.GetCommand($commandName, 'All')\n            if ($command -is [AliasInfo])\n            {\n                $commandName = $command.ResolvedCommandName\n            }\n\n            if ($commandName -ne $null)\n            {\n                Get-Help $commandName -ShowWindow\n            }\n        }\n    }\n}\n\n\n# #\n# # Ctrl+Shift+j then type a key to mark the current directory.\n# # Ctrj+j then the same key will change back to that directory without\n# # needing to type cd and won't change the command line.\n#\n# #\n# $global:PSReadLineMarks = @{}\n#\n# Set-PSReadLineKeyHandler -Key Ctrl+J `\n#                          -BriefDescription MarkDirectory `\n#                          -LongDescription \"Mark the current directory\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $key = [Console]::ReadKey($true)\n#     $global:PSReadLineMarks[$key.KeyChar] = $pwd\n# }\n#\n# Set-PSReadLineKeyHandler -Key Ctrl+j `\n#                          -BriefDescription JumpDirectory `\n#                          -LongDescription \"Goto the marked directory\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $key = [Console]::ReadKey()\n#     $dir = $global:PSReadLineMarks[$key.KeyChar]\n#     if ($dir)\n#     {\n#         cd $dir\n#         [Microsoft.PowerShell.PSConsoleReadLine]::InvokePrompt()\n#     }\n# }\n#\n# Set-PSReadLineKeyHandler -Key Alt+j `\n#                          -BriefDescription ShowDirectoryMarks `\n#                          -LongDescription \"Show the currently marked directories\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $global:PSReadLineMarks.GetEnumerator() | % {\n#         [PSCustomObject]@{Key = $_.Key; Dir = $_.Value} } |\n#         Format-Table -AutoSize | Out-Host\n#\n#     [Microsoft.PowerShell.PSConsoleReadLine]::InvokePrompt()\n# }\n\n# # Auto correct 'git cmt' to 'git commit'\n# Set-PSReadLineOption -CommandValidationHandler {\n#     param([CommandAst]$CommandAst)\n#\n#     switch ($CommandAst.GetCommandName())\n#     {\n#         'git' {\n#             $gitCmd = $CommandAst.CommandElements[1].Extent\n#             switch ($gitCmd.Text)\n#             {\n#                 'cmt' {\n#                     [Microsoft.PowerShell.PSConsoleReadLine]::Replace(\n#                         $gitCmd.StartOffset, $gitCmd.EndOffset - $gitCmd.StartOffset, 'commit')\n#                 }\n#             }\n#         }\n#     }\n# }\n\n# # `ForwardChar` accepts the entire suggestion text when the cursor is at the end of the line.\n# # This custom binding makes `RightArrow` behave similarly - accepting the next word instead of the entire suggestion text.\n# Set-PSReadLineKeyHandler -Key RightArrow `\n#                          -BriefDescription ForwardCharAndAcceptNextSuggestionWord `\n#                          -LongDescription \"Move cursor one character to the right in the current editing line and accept the next word in suggestion when it's at the end of current editing line\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $line = $null\n#     $cursor = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$line, [ref]$cursor)\n#\n#     if ($cursor -lt $line.Length) {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::ForwardChar($key, $arg)\n#     } else {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::AcceptNextSuggestionWord($key, $arg)\n#     }\n# }\n\n# # Cycle through arguments on current line and select the text. This makes it easier to quickly change the argument if re-running a previously run command from the history\n# # or if using a psreadline predictor. You can also use a digit argument to specify which argument you want to select, i.e. Alt+1, Alt+a selects the first argument\n# # on the command line.\n# Set-PSReadLineKeyHandler -Key Alt+a `\n#                          -BriefDescription SelectCommandArguments `\n#                          -LongDescription \"Set current selection to next command argument in the command line. Use of digit argument selects argument by position\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $ast = $null\n#     $cursor = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$ast, [ref]$null, [ref]$null, [ref]$cursor)\n#\n#     $asts = $ast.FindAll( {\n#         $args[0] -is [System.Management.Automation.Language.ExpressionAst] -and\n#         $args[0].Parent -is [System.Management.Automation.Language.CommandAst] -and\n#         $args[0].Extent.StartOffset -ne $args[0].Parent.Extent.StartOffset\n#       }, $true)\n#\n#     if ($asts.Count -eq 0) {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::Ding()\n#         return\n#     }\n#\n#     $nextAst = $null\n#\n#     if ($null -ne $arg) {\n#         $nextAst = $asts[$arg - 1]\n#     }\n#     else {\n#         foreach ($ast in $asts) {\n#             if ($ast.Extent.StartOffset -ge $cursor) {\n#                 $nextAst = $ast\n#                 break\n#             }\n#         } \n#\n#         if ($null -eq $nextAst) {\n#             $nextAst = $asts[0]\n#         }\n#     }\n#\n#     $startOffsetAdjustment = 0\n#     $endOffsetAdjustment = 0\n#\n#     if ($nextAst -is [System.Management.Automation.Language.StringConstantExpressionAst] -and\n#         $nextAst.StringConstantType -ne [System.Management.Automation.Language.StringConstantType]::BareWord) {\n#             $startOffsetAdjustment = 1\n#             $endOffsetAdjustment = 2\n#     }\n#\n#     [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($nextAst.Extent.StartOffset + $startOffsetAdjustment)\n#     [Microsoft.PowerShell.PSConsoleReadLine]::SetMark($null, $null)\n#     [Microsoft.PowerShell.PSConsoleReadLine]::SelectForwardChar($null, ($nextAst.Extent.EndOffset - $nextAst.Extent.StartOffset) - $endOffsetAdjustment)\n# }\n#\n# # Allow you to type a Unicode code point, then pressing `Alt+x` to transform it into a Unicode char.\n# Set-PSReadLineKeyHandler -Chord 'Alt+x' `\n#                          -BriefDescription ToUnicodeChar `\n#                          -LongDescription \"Transform Unicode code point into a UTF-16 encoded string\" `\n#                          -ScriptBlock {\n#     $buffer = $null\n#     $cursor = 0\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref] $buffer, [ref] $cursor)\n#     if ($cursor -lt 4) {\n#         return\n#     }\n#\n#     $number = 0\n#     $isNumber = [int]::TryParse(\n#         $buffer.Substring($cursor - 4, 4),\n#         [System.Globalization.NumberStyles]::AllowHexSpecifier,\n#         $null,\n#         [ref] $number)\n#\n#     if (-not $isNumber) {\n#         return\n#     }\n#\n#     try {\n#         $unicode = [char]::ConvertFromUtf32($number)\n#     } catch {\n#         return\n#     }\n#\n#     [Microsoft.PowerShell.PSConsoleReadLine]::Delete($cursor - 4, 4)\n#     [Microsoft.PowerShell.PSConsoleReadLine]::Insert($unicode)\n# }\n</code></pre>     ### konosubakonoakua \u00b7 2025-07-16T00:57:04Z  ## windows ltsc iso - https://www.microsoft.com/zh-cn/evalcenter/download-windows-11-enterprise?msockid=2c9884225daf6413210c92235c7d656a - https://www.microsoft.com/zh-cn/evalcenter/download-windows-10-enterprise?msockid=2c9884225daf6413210c92235c7d656a"},{"location":"notes/posts/183%23%5Btutor%5D%20English%20learning/","title":"183 [tutor] English learning","text":"<ul> <li>https://github.com/byoungd/English-level-up-tips</li> <li>https://github.com/ZuodaoTech/everyone-can-use-english</li> <li>https://hefengxian.github.io/my-ielts/#/</li> <li>https://llwslc.github.io/grammar-club/content/Preface.html</li> </ul>"},{"location":"notes/posts/184%23%5Bpcie%5D%20tutorial/","title":"184 [pcie] tutorial","text":"<ul> <li>https://github.com/WangXuan95/Xilinx-FPGA-PCIe-XDMA-Tutorial/tree/main</li> </ul>"},{"location":"notes/posts/184%23%5Bpcie%5D%20tutorial/#comments","title":"Comments","text":""},{"location":"notes/posts/184%23%5Bpcie%5D%20tutorial/#konosubakonoakua-2025-05-27t032604z","title":"konosubakonoakua \u00b7 2025-05-27T03:26:04Z","text":"<p>https://github.com/geerlingguy/raspberry-pi-pcie-devices</p>"},{"location":"notes/posts/184%23%5Bpcie%5D%20tutorial/#konosubakonoakua-2025-05-27t032630z","title":"konosubakonoakua \u00b7 2025-05-27T03:26:30Z","text":"<p>https://github.com/enjoy-digital/litepcie</p>"},{"location":"notes/posts/184%23%5Bpcie%5D%20tutorial/#konosubakonoakua-2025-05-27t033023z","title":"konosubakonoakua \u00b7 2025-05-27T03:30:23Z","text":"<p>https://github.com/anthony-firn/CPU-FPGA-Tutorial</p>"},{"location":"notes/posts/185%23%5Btool%5D%20utility%20tools/","title":"185 [tool] utility tools","text":"<ul> <li>https://it-tools.tech/</li> </ul>"},{"location":"notes/posts/186%23%5Bhdl%5D%20python%20hdl%20migen%20amaranth/","title":"186 [hdl] python hdl migen amaranth","text":"<p>https://amaranth-lang.org/docs/amaranth/latest/tutorial.html</p>"},{"location":"notes/posts/187%23%5Bfpga%5D%20timming/","title":"187 [fpga] timming","text":"<ul> <li>umbc</li> <li>robucci cmpeRSD Lecture11__Metastability</li> <li>robucci cmpeRSD Lecture12__ManagingMetaStability</li> <li>robucci cmpeRSD Lecture13__TimingAnalysis</li> <li>robucci cmpeRSD applets/timing_violations</li> <li>semiconshorts</li> <li>setup-and-hold-time</li> <li>multicycle-path</li> <li>Intel</li> <li>https://www.intel.cn/content/www/cn/zh/docs/programmable/683068/18-1/the-timing-netlist.html</li> <li>AMD</li> <li>https://docs.amd.com/r/en-US/ug906-vivado-design-analysis/Timing-Analysis</li> <li>RealDigital</li> <li>Delays &amp; Glitches<ul> <li>Delay of Combinational Circuits</li> <li>Timing Issues of Digital Circuits</li> <li>Inertial Delay</li> </ul> </li> </ul>"},{"location":"notes/posts/187%23%5Bfpga%5D%20timming/#comments","title":"Comments","text":""},{"location":"notes/posts/187%23%5Bfpga%5D%20timming/#konosubakonoakua-2025-09-14t131151z","title":"konosubakonoakua \u00b7 2025-09-14T13:11:51Z","text":""},{"location":"notes/posts/187%23%5Bfpga%5D%20timming/#deepseek","title":"deepseek","text":"\u7528\u4e00\u4e2a\u975e\u5e38\u76f4\u89c2\u7684\u6bd4\u55bb\u6765\u89e3\u91ca FPGA \u65f6\u5e8f\u7ea6\u675f\u3002  **\u6838\u5fc3\u601d\u60f3\uff1a\u4e00\u573a\u7cbe\u5fc3\u7b56\u5212\u7684\u63a5\u529b\u8d5b**\uff1a  \u60f3\u8c61\u4e00\u4e0b\uff0c**FPGA \u5185\u90e8\u6570\u636e\u7684\u4f20\u8f93\u5c31\u50cf\u4e00\u573a\u5728\u591a\u4e2a\u7ad9\u70b9\u4e4b\u95f4\u8fdb\u884c\u7684\u63a5\u529b\u8d5b**\u3002  *   **\u5bc4\u5b58\u5668 (Register)** = **\u63a5\u529b\u7ad9**\u3002\u6570\u636e\u5c31\u50cf\u8fd0\u52a8\u5458\uff0c\u5fc5\u987b\u5728\u7279\u5b9a\u7684\u65f6\u95f4\u70b9\uff08\u65f6\u949f\u4fe1\u53f7\u7684\u4e0a\u5347\u6cbf\uff09\u5230\u8fbe\u63a5\u529b\u7ad9\uff0c\u5e76\u4ece\u90a3\u91cc\u51fa\u53d1\u524d\u5f80\u4e0b\u4e00\u7ad9\u3002 *   **\u65f6\u949f (Clock)** = **\u53d1\u4ee4\u67aa**\u3002\u6574\u4e2a\u6bd4\u8d5b\u7684\u8282\u594f\u7531\u53d1\u4ee4\u67aa\u63a7\u5236\u3002\u6bcf\u4e00\u58f0\u67aa\u54cd\uff08\u65f6\u949f\u6cbf\uff09\uff0c\u6240\u6709\u7ad9\u70b9\u7684\u8fd0\u52a8\u5458\u540c\u65f6\uff1a     1.  **\u4ea4\u63a5\u6570\u636e**\uff1a\u672c\u7ad9\u7684\u8fd0\u52a8\u5458\u5c06\u63a5\u529b\u68d2\uff08\u6570\u636e\uff09\u4ea4\u7ed9\u4e0b\u4e00\u7ad9\u7684\u8fd0\u52a8\u5458\u3002     2.  **\u51c6\u5907\u51fa\u53d1**\uff1a\u4e0b\u4e00\u7ad9\u7684\u8fd0\u52a8\u5458\u62ff\u5230\u68d2\u540e\uff0c\u7acb\u523b\u5f00\u59cb\u5954\u8dd1\uff08\u6570\u636e\u4f20\u8f93\uff09\uff0c\u76ee\u6807\u662f\u5728\u4e0b\u4e00\u58f0\u67aa\u54cd\u524d\u51c6\u65f6\u5230\u8fbe\u518d\u4e0b\u4e00\u4e2a\u7ad9\u70b9\u3002 *   **\u7ec4\u5408\u903b\u8f91 (Combinational Logic)** = **\u4e24\u7ad9\u4e4b\u95f4\u7684\u8dd1\u9053**\u3002\u8fd9\u662f\u8fd0\u52a8\u5458\u5b9e\u9645\u5954\u8dd1\u7684\u8def\u5f84\u3002\u8def\u5f84\u53ef\u80fd\u5f88\u957f\uff08\u903b\u8f91\u5c42\u7ea7\u591a\uff09\u3001\u5f88\u590d\u6742\uff08\u8def\u5f84\u4e0a\u6709\u8bb8\u591a\u969c\u788d\u548c\u5f2f\u9053\uff0c\u5373\u5404\u79cd\u903b\u8f91\u95e8\uff09\uff0c\u5bfc\u81f4\u5954\u8dd1\u65f6\u95f4\u53d8\u957f\u3002 *   **\u65f6\u5e8f\u7ea6\u675f (Timing Constraints)** = **\u6bd4\u8d5b\u89c4\u5219\u548c\u88c1\u5224**\u3002\u4f60\u4f5c\u4e3a\u6559\u7ec3\uff08\u8bbe\u8ba1\u8005\uff09\uff0c\u9700\u8981\u544a\u8bc9\u88c1\u5224\uff08\u5f00\u53d1\u5de5\u5177\uff09\u4f60\u5bf9\u8fd9\u573a\u6bd4\u8d5b\u7684\u8981\u6c42\uff0c\u4ee5\u786e\u4fdd\u5b83\u80fd\u987a\u5229\u8fdb\u884c\u3002  ---  ### \u6700\u91cd\u8981\u7684\u4e24\u6761\u65f6\u5e8f\u7ea6\u675f\uff08\u6bd4\u8d5b\u89c4\u5219\uff09  \u4e3a\u4e86\u8ba9\u6bd4\u8d5b\u4e0d\u51fa\u9519\uff0c\u6709\u4e24\u4e2a\u6700\u5173\u952e\u7684\u89c4\u5219\uff1a  #### 1. \u5efa\u7acb\u65f6\u95f4 (Setup Time) - `Tsu` **\u5b9a\u4e49**\uff1a\u5728\u53d1\u4ee4\u67aa\u54cd\uff08\u65f6\u949f\u6cbf\uff09\u4e4b\u524d\uff0c\u63a5\u529b\u68d2\uff08\u6570\u636e\uff09\u5fc5\u987b**\u63d0\u524d\u591a\u4e45**\u7a33\u7a33\u5730\u4ea4\u5230\u4e0b\u4e00\u7ad9\u8fd0\u52a8\u5458\u624b\u4e2d\u3002 **\u76f4\u89c2\u89e3\u91ca**\uff1a\u4e0b\u4e00\u7ad9\u7684\u8fd0\u52a8\u5458\u9700\u8981\u4e00\u70b9\u65f6\u95f4\u6765\u7a33\u4f4f\u8eab\u5b50\u3001\u770b\u6e05\u6765\u8005\u3001\u505a\u597d\u51c6\u5907\u63a5\u68d2\u3002\u8fd9\u4e2a\u51c6\u5907\u65f6\u95f4\u5c31\u662f\u5efa\u7acb\u65f6\u95f4\u3002\u5982\u679c\u68d2\u5b50\u6765\u5f97\u592a\u665a\uff0c\u5728\u4ed6\u8fd8\u6ca1\u51c6\u5907\u597d\u65f6\u5c31\u5230\u4e86\uff0c\u4ed6\u53ef\u80fd\u63a5\u4e0d\u4f4f\uff0c\u5bfc\u81f4\u6389\u68d2\uff08\u6570\u636e\u9519\u8bef\uff09\u3002  **\u7ea6\u675f\u540d\u79f0**\uff1a**`\u5468\u671f\u7ea6\u675f`** \u6216 **`\u65f6\u949f\u7ea6\u675f`**\u3002\u8fd9\u662f\u6700\u57fa\u7840\u7684\u7ea6\u675f\uff0c\u4f60\u544a\u8bc9\u88c1\u5224\uff1a\u201c\u6211\u7684\u53d1\u4ee4\u67aa\u6bcf\u9694 `X` \u7eb3\u79d2\u54cd\u4e00\u6b21\uff08\u65f6\u949f\u5468\u671f\uff09\uff0c\u8bf7\u786e\u4fdd\u6240\u6709\u8fd0\u52a8\u5458\u90fd\u80fd\u5728\u8fd9\u4e2a\u65f6\u95f4\u95f4\u9694\u5185\u8dd1\u5b8c\u4ed6\u4eec\u7684\u8def\u7a0b\uff01\u201d   *\u4e0a\u56fe\u7684\u5173\u952e\u70b9\uff1a\u6570\u636e\u5fc5\u987b\u5728\u65f6\u949f\u6cbf\u5230\u6765\u4e4b\u524d\u7684 `Tsu` \u65f6\u95f4\u7a97\u53e3\u5185\u4fdd\u6301\u7a33\u5b9a\u548c\u6709\u6548\u3002*  #### 2. \u4fdd\u6301\u65f6\u95f4 (Hold Time) - `Th` **\u5b9a\u4e49**\uff1a\u5728\u53d1\u4ee4\u67aa\u54cd\uff08\u65f6\u949f\u6cbf\uff09\u4e4b\u540e\uff0c\u63a5\u529b\u68d2\uff08\u6570\u636e\uff09\u5fc5\u987b**\u7ee7\u7eed\u7a33\u5b9a\u591a\u4e45**\uff0c\u4e0d\u80fd\u7acb\u523b\u64a4\u8d70\u3002 **\u76f4\u89c2\u89e3\u91ca**\uff1a\u4e0b\u4e00\u7ad9\u7684\u8fd0\u52a8\u5458\u63a5\u68d2\u540e\uff0c\u9700\u8981\u4e00\u70b9\u70b9\u65f6\u95f4\u6765\u6293\u7262\u68d2\u5b50\u3002\u5982\u679c\u4e0a\u4e00\u7ad9\u7684\u8fd0\u52a8\u5458\u5728\u67aa\u54cd\u540e\u7acb\u523b\u628a\u68d2\u5b50\u62bd\u8d70\uff08\u6570\u636e\u53d8\u5316\u592a\u5feb\uff09\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u63a5\u68d2\u7684\u8fd0\u52a8\u5458\u5931\u624b\uff08\u6570\u636e\u9519\u8bef\uff09\u3002  **\u7ea6\u675f\u540d\u79f0**\uff1a\u901a\u5e38\u7531\u5de5\u5177\u81ea\u52a8\u4fdd\u8bc1\uff0c\u4f46\u5728\u9ad8\u901f\u8bbe\u8ba1\u6216\u7279\u6b8a\u60c5\u51b5\u4e0b\u4e5f\u9700\u8981\u5173\u6ce8\u3002\u5468\u671f\u7ea6\u675f\u9690\u542b\u4e86\u5bf9\u4fdd\u6301\u65f6\u95f4\u7684\u8981\u6c42\u3002   *\u4e0a\u56fe\u7684\u5173\u952e\u70b9\uff1a\u6570\u636e\u5728\u65f6\u949f\u6cbf\u5230\u6765\u4e4b\u540e\uff0c\u8fd8\u5fc5\u987b\u7ee7\u7eed\u7a33\u5b9a\u81f3\u5c11 `Th` \u7684\u65f6\u95f4\uff0c\u4e0d\u80fd\u7acb\u523b\u53d8\u5316\u3002*  ---  ### \u5982\u679c\u8fdd\u53cd\u89c4\u5219\uff08\u65f6\u5e8f\u8fdd\u4f8b\uff09\u4f1a\u600e\u6837\uff1f  *   **\u5efa\u7acb\u65f6\u95f4\u8fdd\u4f8b (Setup Violation)**\uff1a\u6570\u636e\u8dd1\u5f97\u592a\u6162\u4e86\uff0c\u5728\u53d1\u4ee4\u67aa\u54cd\u65f6\u8fd8\u6ca1\u5230\u8fbe\u4e0b\u4e00\u7ad9\u3002     *   **\u540e\u679c**\uff1a\u4e0b\u4e00\u7ad9\u5bc4\u5b58\u5668\u6ca1\u6536\u5230\u6b63\u786e\u7684\u6570\u636e\uff0c\u529f\u80fd\u51fa\u9519\u3002     *   **\u89e3\u51b3\u529e\u6cd5**\uff1a         1.  **\u8ba9\u53d1\u4ee4\u67aa\u6162\u70b9\u54cd**\uff1a\u964d\u4f4e\u65f6\u949f\u9891\u7387\uff08\u589e\u5927\u5468\u671f\u7ea6\u675f\u7684\u6570\u503c\uff09\u3002         2.  **\u8ba9\u8fd0\u52a8\u5458\u8dd1\u5feb\u70b9**\uff1a\u4f18\u5316\u4ee3\u7801\u548c\u903b\u8f91\uff0c\u51cf\u5c11\u7ec4\u5408\u8def\u5f84\u7684\u5ef6\u8fdf\uff08\u4f8b\u5982\uff0c\u63d2\u5165\u6d41\u6c34\u7ebf\u3001\u4f18\u5316\u903b\u8f91\u7ed3\u6784\uff09\u3002         3.  **\u4fee\u4e00\u6761\u66f4\u77ed\u66f4\u76f4\u7684\u8def**\uff1a\u8ba9\u5e03\u5c40\u5e03\u7ebf\u5de5\u5177\u628a\u76f8\u8fde\u7684\u5bc4\u5b58\u5668\u653e\u5f97\u8fd1\u4e00\u4e9b\uff08\u964d\u4f4e\u7269\u7406\u8def\u5f84\u5ef6\u8fdf\uff09\u3002  *   **\u4fdd\u6301\u65f6\u95f4\u8fdd\u4f8b (Hold Violation)**\uff1a\u6570\u636e\u8dd1\u5f97\u592a\u5feb\u4e86\uff0c\u5728\u53d1\u4ee4\u67aa\u54cd\u540e\u8fc7\u65e9\u5730\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u5f71\u54cd\u4e86\u5f53\u524d\u7ad9\u70b9\u7684\u6355\u83b7\u3002     *   **\u540e\u679c**\uff1a\u5f53\u524d\u7ad9\u70b9\u7684\u5bc4\u5b58\u5668\u6355\u83b7\u7684\u6570\u636e\u4e0d\u7a33\u5b9a\uff0c\u529f\u80fd\u51fa\u9519\u3002     *   **\u89e3\u51b3\u529e\u6cd5**\uff1a         1.  **\u7a0d\u5fae\u62d6\u5ef6\u4e00\u4e0b\u8dd1\u5f97\u5feb\u7684\u8fd0\u52a8\u5458**\uff1a\u5728\u6570\u636e\u8def\u5f84\u4e0a\u589e\u52a0\u4e00\u70b9\u5ef6\u8fdf\uff08\u4f8b\u5982\uff0c\u63d2\u5165\u7f13\u51b2\u533a Buffer\uff09\u3002         2.  **\u8c03\u6574\u63a5\u529b\u7ad9\u7684\u4f4d\u7f6e**\uff1a\u901a\u8fc7\u5e03\u5c40\u5e03\u7ebf\u63a7\u5236\u3002  ### \u5176\u4ed6\u5e38\u89c1\u7ea6\u675f\uff08\u66f4\u591a\u6bd4\u8d5b\u89c4\u5219\uff09  *   **\u8f93\u5165\u5ef6\u8fdf (Input Delay)**\uff1a\u4f60\u544a\u8bc9\u88c1\u5224\uff1a\u201c\u5916\u9762\u7684\u8fd0\u52a8\u5458\uff08\u82af\u7247\u5916\u90e8\u8f93\u5165\u7684\u6570\u636e\uff09\u4f1a\u5728\u53d1\u4ee4\u67aa\u54cd\u524d `X` \u7eb3\u79d2\u5230\u8fbe\u6211\u4eec\u7b2c\u4e00\u4e2a\u63a5\u529b\u7ad9\u7684\u95e8\u53e3\u3002\u201d \u8fd9\u6837\u88c1\u5224\u5c31\u77e5\u9053\u8be5\u5982\u4f55\u534f\u8c03\u5185\u90e8\u8fd0\u52a8\u5458\u548c\u5916\u90e8\u8fd0\u52a8\u5458\u7684\u4ea4\u63a5\u3002 *   **\u8f93\u51fa\u5ef6\u8fdf (Output Delay)**\uff1a\u4f60\u544a\u8bc9\u88c1\u5224\uff1a\u201c\u6211\u4eec\u6700\u540e\u4e00\u4e2a\u63a5\u529b\u7ad9\u7684\u8fd0\u52a8\u5458\uff0c\u5fc5\u987b\u5728\u53d1\u4ee4\u67aa\u54cd\u540e `Y` \u7eb3\u79d2\u5185\u628a\u68d2\u5b50\u4ea4\u5230\u573a\u5916\u88c1\u5224\uff08\u5916\u90e8\u82af\u7247\uff09\u624b\u91cc\u3002\u201d \u8fd9\u6837\u5c31\u80fd\u786e\u4fdd\u5916\u90e8\u8bbe\u5907\u80fd\u53ef\u9760\u5730\u63a5\u6536\u5230FPGA\u8f93\u51fa\u7684\u6570\u636e\u3002  ### \u603b\u7ed3  **FPGA\u65f6\u5e8f\u7ea6\u675f\u7684\u672c\u8d28\uff0c\u5c31\u662f\u628a\u4f60\u5bf9\u6570\u5b57\u7535\u8def\u6b63\u5e38\u5de5\u4f5c\u7684\u201c\u7269\u7406\u8981\u6c42\u201d\uff08\u65f6\u95f4\u8981\u6c42\uff09\u660e\u786e\u5730\u544a\u8bc9\u5f00\u53d1\u8f6f\u4ef6\uff08Quartus, Vivado\u7b49\uff09\u3002**  \u8f6f\u4ef6\u867d\u7136\u80fd\u81ea\u52a8\u628a\u4f60\u7684\u4ee3\u7801\u53d8\u6210\u7535\u8def\uff0c\u4f46\u5b83\u4e0d\u77e5\u9053\u4f60\u5e0c\u671b\u8fd9\u4e2a\u7535\u8def\u8dd1\u591a\u5feb\u3002\u4f60\u5fc5\u987b\u901a\u8fc7\u65f6\u5e8f\u7ea6\u675f\u6765\u8bbe\u5b9a\u76ee\u6807\uff1a**\u201c\u6211\u7684\u65f6\u949f\u662f100MHz\uff0c\u8bf7\u4f60\u60f3\u5c3d\u4e00\u5207\u529e\u6cd5\uff0c\u786e\u4fdd\u6570\u636e\u5728\u6bcf\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5185\u90fd\u80fd\u7a33\u5b9a\u5730\u4f20\u9001\u5230\u4e0b\u4e00\u4e2a\u5bc4\u5b58\u5668\uff01\u201d**  \u7136\u540e\uff0c\u8f6f\u4ef6\u7684\u5e03\u5c40\u5e03\u7ebf\u5de5\u5177\u5c31\u4f1a\u50cf\u4e00\u4e2a\u4e25\u683c\u7684\u88c1\u5224\uff0c\u52aa\u529b\u5730\u8c03\u6574\u5404\u4e2a\u201c\u63a5\u529b\u7ad9\u201d\u7684\u4f4d\u7f6e\u3001\u4f18\u5316\u201c\u8dd1\u9053\u201d\u7684\u8def\u5f84\uff0c\u6765\u6ee1\u8db3\u4f60\u8bbe\u5b9a\u7684\u6240\u6709\u89c4\u5219\u3002\u6700\u540e\u5b83\u4f1a\u7ed9\u4f60\u4e00\u4efd\u8be6\u7ec6\u7684\u201c\u6bd4\u8d5b\u62a5\u544a\u201d\uff08\u65f6\u5e8f\u62a5\u544a\uff09\uff0c\u544a\u8bc9\u4f60\u89c4\u5219\u662f\u5426\u5168\u90e8\u6ee1\u8db3\u3002\u5982\u679c\u6ca1\u6709\uff08\u65f6\u5e8f\u8fdd\u4f8b\uff09\uff0c\u4f60\u5c31\u9700\u8981\u4fee\u6539\u8bbe\u8ba1\u6216\u7ea6\u675f\uff0c\u76f4\u5230\u6ee1\u8db3\u4e3a\u6b62\u3002  \u6240\u4ee5\uff0c**\u4e0d\u52a0\u65f6\u5e8f\u7ea6\u675f\u7684\u8bbe\u8ba1\u5c31\u50cf\u662f\u8ba9\u8fd0\u52a8\u5458\u5728\u65e0\u89c4\u5219\u7684\u6bd4\u8d5b\u4e2d\u4e71\u8dd1\uff0c\u5373\u4f7f\u5076\u5c14\u80fd\u8dd1\u5bf9\uff0c\u4e5f\u7edd\u5bf9\u4e0d\u53ef\u9760\u3002** \u800c**\u52a0\u4e86\u65f6\u5e8f\u7ea6\u675f**\uff0c\u5c31\u76f8\u5f53\u4e8e\u4e3a\u6bd4\u8d5b\u5236\u5b9a\u4e86\u6e05\u6670\u7684\u89c4\u5219\uff0c\u5de5\u5177\u4f1a\u5168\u529b\u4fdd\u969c\u4f60\u7684\u8bbe\u8ba1\u5728\u6307\u5b9a\u7684\u901f\u5ea6\u4e0b**\u7a33\u5b9a\u53ef\u9760**\u5730\u8fd0\u884c\u3002  ---   \u201c\u5efa\u7acb\u65f6\u95f4\u201d\u4e0d\u662f\u4e00\u4e2a\u5de5\u7a0b\u5e08\u51ed\u7a7a\u53d1\u660e\u7684\u6982\u5ff5\uff0c\u800c\u662f**\u7531\u6784\u6210\u6570\u5b57\u7535\u8def\u7684\u7269\u7406\u5668\u4ef6\uff08\u4e3b\u8981\u662fMOSFET\uff09\u7684\u56fa\u6709\u7279\u6027\u6240\u51b3\u5b9a\u7684**\u3002\u5b83\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a**\u7269\u7406\u9650\u5236**\u3002  \u6211\u4eec\u53ef\u4ee5\u4ece\u4e24\u4e2a\u5c42\u9762\u6765\u7406\u89e3\u5b83\u7684\u7269\u7406\u652f\u6491\uff1a**\u6676\u4f53\u7ba1\u5f00\u5173\u9700\u8981\u65f6\u95f4** \u548c **\u5b9e\u9645\u7535\u8def\u662f\u4e00\u4e2a\u6a21\u62df\u4e16\u754c**\u3002  ---  ### 1. \u6838\u5fc3\u7269\u7406\u539f\u7406\uff1a\u6676\u4f53\u7ba1\u5f00\u5173\u4e0d\u662f\u77ac\u95f4\u5b8c\u6210\u7684  \u5bc4\u5b58\u5668\uff08D\u89e6\u53d1\u5668\uff09\u7684\u6838\u5fc3\u662f\u4f20\u8f93\u95e8\uff08\u7531MOSFET\u6784\u6210\uff09\u548c\u53cd\u76f8\u5668\u3002MOS\u7ba1\u5bfc\u901a\u548c\u622a\u6b62\u90fd\u9700\u8981\u65f6\u95f4\u3002  \u5f53\u65f6\u949f\u6cbf\u5230\u6765\uff0c\u8981\u6c42\u4f20\u8f93\u95e8\u6253\u5f00\uff0c\u8ba9\u8f93\u5165\u6570\u636eD\u7aef\u7684\u7535\u538b\u503c\u88ab\u6355\u83b7\u5230\u89e6\u53d1\u5668\u5185\u90e8\u3002\u8fd9\u4e2a\u201c\u6355\u83b7\u201d\u8fc7\u7a0b\uff0c\u5b9e\u9645\u4e0a\u662f**\u5bf9\u4e00\u4e2a\u7535\u5bb9\u8fdb\u884c\u5145\u7535\u6216\u653e\u7535**\uff0c\u4f7f\u5176\u7535\u538b\u8fbe\u5230\u4ee3\u88680\u62161\u7684\u6b63\u786e\u7535\u5e73\u3002  *   **\u8fd9\u4e2a\u7535\u5bb9\u662f\u4ec0\u4e48\uff1f** \u662f\u89e6\u53d1\u5668\u5185\u90e8\u8282\u70b9\u56fa\u6709\u7684\u5bc4\u751f\u7535\u5bb9\uff08\u4ee5\u53ca\u8d1f\u8f7d\uff09\u3002 *   **\u5145\u7535/\u653e\u7535\u9700\u8981\u4ec0\u4e48\uff1f** \u9700\u8981\u7535\u6d41\u548c**\u65f6\u95f4**\u3002  **\u5efa\u7acb\u65f6\u95f4\u7684\u7269\u7406\u610f\u4e49\u5c31\u662f\uff1a\u4e3a\u4e86\u4fdd\u8bc1\u5728\u65f6\u949f\u6cbf\u5230\u6765\u65f6\uff0c\u8fd9\u4e2a\u5145\u7535/\u653e\u7535\u8fc7\u7a0b\u80fd\u591f\u6709\u8db3\u591f\u7684\u65f6\u95f4\u5b8c\u6210\u5230\u4e00\u4e2a\u7a33\u5b9a\u7684\u3001\u6b63\u786e\u7684\u7535\u5e73\u3002**  ---  ### 2. \u4e00\u4e2a\u66f4\u76f4\u89c2\u7684\u6bd4\u55bb\uff1a\u7528\u76f8\u673a\u62cd\u6444\u9ad8\u901f\u8fd0\u52a8\u7684\u7269\u4f53  \u4f60\u53ef\u4ee5\u628aD\u89e6\u53d1\u5668\u6355\u83b7\u6570\u636e\u7684\u8fc7\u7a0b\uff0c\u60f3\u8c61\u6210**\u7528\u4e00\u53f0\u8001\u5f0f\u7684\u65cb\u8f6c\u5feb\u95e8\u76f8\u673a\uff08\u65f6\u949f\u4fe1\u53f7\uff09\u62cd\u6444\u4e00\u8f86\u9ad8\u901f\u884c\u9a76\u7684\u8d5b\u8f66\uff08\u6570\u636e\u4fe1\u53f7\uff09**\u3002  *   **\u76ee\u6807**\uff1a\u62cd\u4e00\u5f20\u6e05\u6670\u4e0d\u6a21\u7cca\u7684\u7167\u7247\uff08\u6355\u83b7\u4e00\u4e2a\u7a33\u5b9a\u7684\u6570\u636e\u503c\u20180\u2019\u6216\u20181\u2019\uff09\u3002 *   **\u5feb\u95e8\u6309\u4e0b\u77ac\u95f4** = **\u65f6\u949f\u4e0a\u5347\u6cbf**\u3002 *   **\u8d5b\u8f66\u901f\u5ea6/\u4f4d\u7f6e** = **\u6570\u636e\u4fe1\u53f7\u7684\u7535\u538b\u503c**\u3002  **\u4e3a\u4ec0\u4e48\u9700\u8981\u5efa\u7acb\u65f6\u95f4\uff1f**  \u76f8\u673a\u7684\u5feb\u95e8\u4e0d\u662f\u77ac\u95f4\u5b8c\u5168\u6253\u5f00\u7684\uff0c\u5b83\u6709\u4e00\u4e2a\u5f00\u542f\u7684\u8fc7\u7a0b\u3002\u5982\u679c\u5728\u5feb\u95e8\u5373\u5c06\u5b8c\u5168\u6253\u5f00\u7684\u77ac\u95f4\uff0c\u8d5b\u8f66\u8fd8\u5728\u98de\u901f\u79fb\u52a8\uff0c\u90a3\u4e48\u6700\u7ec8\u62cd\u5230\u7684\u7167\u7247\u5c31\u4f1a\u662f**\u6a21\u7cca\u7684**\u2014\u2014\u4f60\u65e0\u6cd5\u5224\u65ad\u5b83\u5230\u5e95\u662f0\u8fd8\u662f1\uff0c\u8fd9\u5c31\u662f**\u4e9a\u7a33\u6001**\u3002    \u4e3a\u4e86\u62cd\u51fa\u6e05\u6670\u7684\u7167\u7247\uff0c\u4f60\u5fc5\u987b**\u5728\u5feb\u95e8\u5b8c\u5168\u6253\u5f00\u4e4b\u524d\uff0c\u5c31\u8ba9\u8d5b\u8f66\u5df2\u7ecf\u5230\u8fbe\u9884\u5b9a\u4f4d\u7f6e\u5e76\u4fdd\u6301\u9759\u6b62**\u3002  *   **`\u5efa\u7acb\u65f6\u95f4 (Tsu)`** \u5c31\u662f\u8981\u6c42\u201c\u8d5b\u8f66\u201d\u5fc5\u987b**\u5728\u5feb\u95e8\u5b8c\u5168\u6253\u5f00\u524d**\u7684\u4e00\u6bb5\u65f6\u95f4\u5c31\u5c31\u4f4d\u5e76\u4fdd\u6301\u7a33\u5b9a\u3002\u8fd9\u6837\uff0c\u5f53\u5feb\u95e8\u5b8c\u5168\u6253\u5f00\u65f6\uff0c\u5b83\u624d\u80fd\u88ab\u6e05\u6670\u5730\u8bb0\u5f55\u4e0b\u6765\u3002 *   **`\u4fdd\u6301\u65f6\u95f4 (Th)`** \u5c31\u662f\u8981\u6c42\u201c\u8d5b\u8f66\u201d\u5728**\u5feb\u95e8\u5b8c\u5168\u6253\u5f00\u540e**\u7684\u4e00\u5c0f\u6bb5\u65f6\u95f4\u5185\u4e5f\u4e0d\u80fd\u79fb\u52a8\u3002\u8fd9\u662f\u4e3a\u4e86\u9632\u6b62\u5b83\u8fc7\u65e9\u5f00\u8d70\uff0c\u5bfc\u81f4\u7167\u7247\u540e\u534a\u90e8\u5206\u62cd\u5230\u7684\u53c8\u662f\u6a21\u7cca\u7684\u79fb\u52a8\u5f71\u50cf\u3002  **\u5982\u679c\u4f60\u8fdd\u53cd\u4e86\u5efa\u7acb\u65f6\u95f4\uff08\u8d5b\u8f66\u6765\u5f97\u592a\u665a\uff09\uff0c\u76f8\u673a\u5c31\u4f1a\u5728\u201c\u534a\u5f00\u534a\u95ed\u201d\u7684\u72b6\u6001\u4e0b\u6355\u6349\u5230\u4e00\u4e2a\u6b63\u5728\u53d8\u5316\u3001\u6a21\u7cca\u4e0d\u6e05\u7684\u56fe\u50cf\uff08\u4e9a\u7a33\u6001\uff09\u3002**  ---  ### \u4ece\u6a21\u62df\u6ce2\u5f62\u89d2\u5ea6\u770b  \u8ba9\u6211\u4eec\u770b\u4e00\u4e2a\u771f\u5b9e\u7684\u4fe1\u53f7\u6ce2\u5f62\uff0c\u8fd9\u662f\u6700\u76f4\u63a5\u7684\u7269\u7406\u4f53\u73b0\uff1a    \u5047\u8bbeD\u89e6\u53d1\u5668\u7684\u903b\u8f91\u95e8\u9650\u662f\u4e2d\u95f4\u90a3\u6761\u865a\u7ebf\u7535\u538b\u3002  - **\u60c5\u51b5A\uff08\u6ee1\u8db3\u5efa\u7acb\u65f6\u95f4\uff09**\uff1a\u5728\u65f6\u949f\u6cbf\u5230\u6765\u524d\uff0c\u6570\u636e\u4fe1\u53f7\uff08\u84dd\u8272\uff09\u5df2\u7ecf\u7a33\u5b9a\u4e86**\u8db3\u591f\u957f\u7684\u65f6\u95f4\uff08Tsu\uff09** \u5728\u4e86\u4e00\u4e2a\u6709\u6548\u7684\u903b\u8f91\u7535\u5e73\uff08\u9ad8\u7535\u5e73\u20181\u2019\uff09\u3002\u5f53\u65f6\u949f\u6cbf\uff08\u7ea2\u8272\uff09\u5230\u6765\u65f6\uff0c\u5185\u90e8\u7535\u8def\u6709\u5145\u8db3\u7684\u65f6\u95f4\u5b8c\u6210\u5207\u6362\uff0c\u8f93\u51faQ\u4f1a\u7a33\u5b9a\u5730\u53d8\u4e3a\u20181\u2019\u3002 - **\u60c5\u51b5B\uff08\u8fdd\u53cd\u5efa\u7acb\u65f6\u95f4\uff09**\uff1a\u5728\u65f6\u949f\u6cbf\u5230\u6765\u65f6\uff0c\u6570\u636e\u4fe1\u53f7\u4ecd\u7136\u5728**\u4e0a\u5347\u8fc7\u7a0b\u4e2d**\uff0c\u5904\u4e8e\u4e00\u4e2a**\u975e\u9ad8\u975e\u4f4e\u7684\u4e2d\u95f4\u6a21\u62df\u7535\u538b**\u3002\u8fd9\u4e2a\u7535\u538b\u53ef\u80fd\u4e0d\u8db3\u4ee5\u8ba9\u5185\u90e8\u6676\u4f53\u7ba1\u5b8c\u5168\u5bfc\u901a\u6216\u622a\u6b62\u3002\u5bfc\u81f4\u7684\u7ed3\u679c\u662f\uff1a     1.  \u8f93\u51faQ\u9700\u8981**\u975e\u5e38\u957f\u7684\u65f6\u95f4**\u624d\u80fd\u7f13\u6162\u5730\u7a33\u5b9a\u5230\u4e00\u4e2a\u786e\u5b9a\u7684\u9ad8\u7535\u5e73\u6216\u4f4e\u7535\u5e73\uff08** metastability**\uff09\u3002     2.  \u751a\u81f3\u53ef\u80fd**\u632f\u8361**\u3002     3.  \u66f4\u7cdf\u7cd5\u7684\u662f\uff0c\u540e\u7eed\u7535\u8def\u628a\u8fd9\u4e2a\u4e0d\u7a33\u5b9a\u7684\u503c\u5f53\u4f5c\u6709\u6548\u6570\u636e\u8bfb\u53d6\uff0c\u5bfc\u81f4\u6574\u4e2a\u7cfb\u7edf\u529f\u80fd\u9519\u8bef\u3002  ### \u603b\u7ed3  \u6240\u4ee5\uff0c\u5efa\u7acb\u65f6\u95f4\u7684\u7269\u7406\u652f\u6491\u6765\u81ea\u4e8e\uff1a  1.  **finite switching speed**\uff1aMOS\u6676\u4f53\u7ba1\u548c\u903b\u8f91\u95e8\u7684\u5f00\u5173\u901f\u5ea6\u4e0d\u662f\u65e0\u9650\u7684\uff0c\u5b83\u4eec\u9700\u8981\u65f6\u95f4\u5bf9\u8d1f\u8f7d\u7535\u5bb9\u8fdb\u884c\u5145\u653e\u7535\u3002 2.  **analog nature of digital circuits**\uff1a\u5728\u5fae\u89c2\u5c42\u9762\uff0c\u6570\u5b57\u7535\u8def\u672c\u8d28\u4e0a\u662f\u6a21\u62df\u7684\u3002\u7535\u538b\u4e0d\u80fd\u77ac\u95f4\u8df3\u53d8\uff0c\u800c\u662f\u6709\u4e00\u4e2a\u4e0a\u5347/\u4e0b\u964d\u7684\u6a21\u62df\u8fc7\u7a0b\u3002\u5efa\u7acb\u65f6\u95f4\u5c31\u662f\u4e3a\u4e86\u907f\u5f00\u8fd9\u4e2a\u6a21\u62df\u53d8\u5316\u7684\u533a\u57df\uff0c\u786e\u4fdd\u91c7\u6837\u65f6\u4fe1\u53f7\u5904\u4e8e\u4e00\u4e2a\u5b89\u5168\u7684\u201c\u6570\u5b57\u201d\u533a\u57df\uff08\u9ad8\u7535\u5e73\u6216\u4f4e\u7535\u5e73\uff09\u3002 3.  **prevention of metastability**\uff1a\u6700\u7ec8\u6781\u7684\u76ee\u7684\uff0c\u5c31\u662f\u907f\u514d\u5bc4\u5b58\u5668\u8fdb\u5165\u4e00\u4e2a\u975e0\u975e1\u7684\u4e9a\u7a33\u6001\uff0c\u4ece\u800c\u5bfc\u81f4\u7cfb\u7edf\u5931\u8d25\u3002  \u56e0\u6b64\uff0c\u5efa\u7acb\u65f6\u95f4\u4e0d\u662f\u4e00\u79cd\u201c\u8bbe\u8ba1\u9009\u62e9\u201d\uff0c\u800c\u662f\u4e00\u4e2a\u5fc5\u987b\u9075\u5b88\u7684**\u7269\u7406\u89c4\u5f8b**\u3002\u65f6\u5e8f\u7ea6\u675f\u5c31\u662f\u6211\u4eec\u544a\u8bc9\u5f00\u53d1\u5de5\u5177\u8fd9\u4e2a\u7269\u7406\u89c4\u5f8b\u7684\u6570\u503c\u662f\u591a\u5c11\uff0c\u8ba9\u5de5\u5177\u6765\u786e\u4fdd\u6211\u4eec\u7684\u8bbe\u8ba1\u6ee1\u8db3\u5b83\u3002"},{"location":"notes/posts/188%23%5Bvpn%5D%20clash%20verge/","title":"188 [vpn] clash verge","text":""},{"location":"notes/posts/188%23%5Bvpn%5D%20clash%20verge/#lan-firewall","title":"lan firewall","text":"<pre><code>netsh advfirewall firewall add rule name=\"verge-mihomo\" dir=in action=allow protocol=UDP localport=7897\nnetsh advfirewall firewall add rule name=\"verge-mihomo\" dir=in action=allow protocol=TCP localport=7897\n</code></pre>"},{"location":"notes/posts/189%23%5Bmath%5D%20wolfram%20setup/","title":"189 [math] wolfram setup","text":""},{"location":"notes/posts/189%23%5Bmath%5D%20wolfram%20setup/#setup","title":"setup","text":"<ul> <li>https://tiebamma.github.io/InstallTutorial/</li> </ul>     ![Image](../assets/189/1.png)"},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/","title":"19 [EPICS] epics learning","text":""},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#epics-documention","title":"EPICS Documention","text":"<ul> <li>IOC Initialization</li> <li>Build Facility</li> <li>Channel Access Protocol Specification</li> <li>EPICS Channel Access 4.13.1 Reference Manual</li> <li>Hardware support list</li> <li>Hardware support: by Manufacturer</li> </ul>"},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#training-materials","title":"Training Materials","text":"<ul> <li>2022_EPICS</li> <li>2022_USPAS</li> <li>log in as user 'training' with password '$training'.</li> <li>EpicsUsersJP 2023</li> <li>NSLS-II EPICS Lecture Series</li> <li>AreaDetector by Mark Rivers</li> <li>EPICS modules by Tim Mooney</li> <li>Computer Vision and areaDetector</li> <li>2019: areaDetector Update by Mark Rivers</li> <li>Xpress3 by Matt Newville</li> <li>BlueSky Training</li> <li>Practical Beamline Controls Training (2023)</li> </ul>"},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#wikis","title":"Wikis","text":"<ul> <li>Argonne IOC_101</li> <li>Argonne Epics Networking</li> <li>Argonne Beamline Controls</li> <li>Argonne Practical_Beamline_Controls_Training</li> <li>IOC Basics (google doc)</li> <li>IOC Deployment &amp; Troubleshooting instructions (gitlab)</li> <li>EpicsUsersJP</li> </ul>"},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#blogs","title":"Blogs","text":"<ul> <li>EPICS Technical (ZH)</li> <li>\u4f18\u5229\u5fb7UDP6720 IOC</li> <li>Arduino IOC</li> <li>kira-96 (ZH)</li> <li>windows mingw epics</li> <li>build-epics-module-modbus</li> <li>cross-compiling-acai</li> <li>EPICS-for-Dummies</li> <li>prjemian epicspi</li> <li>rpi_epics</li> <li>RaspberryPIKunbus</li> <li>sdcswd.wang</li> </ul>"},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#cern-documents","title":"CERN Documents","text":"<ul> <li>https://cds.cern.ch/record/2763095/files/CERN-THESIS-2021-031.pdf</li> <li>https://cds.cern.ch/record/2631461/files/CERN-ACC-NOTE-2018-0050_V1.1_docx_cpdf.pdf</li> <li>https://cds.cern.ch/record/2865448/files/2307.08593.pdf</li> <li>searching with keyword \"epics\"</li> </ul>"},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#opensource-hardware","title":"Opensource Hardware","text":"<ul> <li>Opensource Hardware CERN</li> <li>Introduction</li> <li>Electronics Design</li> <li>Distributed IO Tier</li> <li>Sinara (quantum hw)</li> </ul>"},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#tools","title":"Tools","text":"<ul> <li>Epics Extensions Index</li> <li>controlssoftware.sns</li> <li>CS-Studio</li> <li>EDM</li> <li>MEDM</li> <li>PyDM</li> <li>edm2pyedm</li> <li>caqtdm</li> <li>ophyd: hw abstraction</li> <li>p4: pvaccess py binding</li> <li>pvxs: alternatives to pvdatacpp &amp; pvaccesscpp</li> <li>wireshark plugin for epics</li> <li>EPNix: nix for epics</li> <li>IDL Download</li> <li>IDLVM</li> <li>IDL company url</li> <li>whatrecord (IOC meta info viewer)(mkdocs)</li> <li>Fault Tree</li> </ul>"},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#modules","title":"Modules","text":"<ul> <li>Aeradetector (ADCore arch diagram)</li> <li>Pysmlib (Finite state machine)</li> </ul>"},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#qt-for-eipcs","title":"Qt for eipcs","text":"<ul> <li>https://qtepics.github.io/getting_started.html</li> </ul>"},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#misc","title":"Misc","text":"<ul> <li>NDArray</li> <li>hpsim: Ion Linac Sim with GPU</li> </ul>"},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#data-format","title":"Data Format","text":"<ul> <li>nexus</li> </ul>"},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#embedded","title":"Embedded","text":"<ul> <li>QP state-machine</li> <li>Embedded_Control_Systems_Design</li> </ul>"},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#web","title":"Web","text":"<ul> <li>jamstack: BE &amp; FE &amp; Web</li> <li>Nuxt: Vue FE</li> <li>prisma</li> </ul>"},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#comments","title":"Comments","text":""},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#konosubakonoakua-2025-04-26t094524z","title":"konosubakonoakua \u00b7 2025-04-26T09:45:24Z","text":""},{"location":"notes/posts/19%23%5BEPICS%5D%20epics%20learning/#code-refs","title":"code refs","text":"<ul> <li>https://github.com/epics-base</li> <li>https://github.com/epics-modules</li> <li>https://github.com/epics-extensions</li> <li>https://github.com/areaDetector</li> <li>https://github.com/DiamondLightSource</li> <li>https://github.com/ISISComputingGroup</li> <li>https://github.com/NSLS2</li> <li>https://github.com/NSLS-II-CSX</li> <li>https://github.com/lnls-dig</li> <li>https://github.com/lnls-sirius</li> <li>https://github.com/cnpem</li> <li>https://github.com/slaclab</li> <li>https://github.com/slac-lcls</li> <li>https://github.com/slac-epics</li> <li>https://github.com/pcdshub</li> <li>https://github.com/JeffersonLab</li> <li>https://github.com/BCDA-APS</li> <li>https://github.com/ornl-epics</li> <li>https://github.com/CAENels</li> <li>https://github.com/D-TACQ</li> <li>https://github.com/bluesky</li> <li>https://github.com/epics-containers</li> <li>https://github.com/als-epics</li> <li>https://github.com/PandABlocks</li> <li>https://github.com/Canadian-Light-Source</li> <li> <p>https://github.com/BerkeleyLab</p> </li> <li> <p>https://github.com/mdavidsaver</p> </li> <li>https://github.com/anshi</li> <li>https://github.com/prjemian</li> <li>https://github.com/shuei</li> <li>https://github.com/quartiq</li> <li>https://github.com/gtortone</li> <li>https://github.com/sfeister</li> <li>https://github.com/Insomnia1437</li> <li> <p>https://github.com/kasemir</p> </li> <li> <p>https://gitlab.com/kmc3-xpp</p> </li> <li>https://baltig.infn.it/infn-epics</li> </ul>"},{"location":"notes/posts/190%23%5Bi2c%5D%5Buart%5D%20uart%20to%20i2c%20bridge%20chip%20sc18im704%20setup/","title":"190 [i2c][uart] uart to i2c bridge chip sc18im704 setup","text":""},{"location":"notes/posts/190%23%5Bi2c%5D%5Buart%5D%20uart%20to%20i2c%20bridge%20chip%20sc18im704%20setup/#datasheet","title":"datasheet","text":"<ul> <li>SC18IM704</li> <li>ad5252</li> </ul>"},{"location":"notes/posts/190%23%5Bi2c%5D%5Buart%5D%20uart%20to%20i2c%20bridge%20chip%20sc18im704%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/190%23%5Bi2c%5D%5Buart%5D%20uart%20to%20i2c%20bridge%20chip%20sc18im704%20setup/#konosubakonoakua-2025-06-26t073845z","title":"konosubakonoakua \u00b7 2025-06-26T07:38:45Z","text":""},{"location":"notes/posts/190%23%5Bi2c%5D%5Buart%5D%20uart%20to%20i2c%20bridge%20chip%20sc18im704%20setup/#wiring","title":"wiring","text":"<ul> <li>USB2UART module connect to sc18im704 (<code>baudrate=9600</code>)</li> <li>sc18im704 module connect to i2c chip AD5252 (<code>addr=0x2c</code>)</li> </ul>"},{"location":"notes/posts/190%23%5Bi2c%5D%5Buart%5D%20uart%20to%20i2c%20bridge%20chip%20sc18im704%20setup/#konosubakonoakua-2025-06-26t073911z","title":"konosubakonoakua \u00b7 2025-06-26T07:39:11Z","text":""},{"location":"notes/posts/190%23%5Bi2c%5D%5Buart%5D%20uart%20to%20i2c%20bridge%20chip%20sc18im704%20setup/#driver","title":"driver","text":"<pre><code>\"\"\"\nSC18IM704 UART to I2C Bridge Controller\n- Controls AD5252 digital potentiometer via I2C\n- Implements full logging for all serial transactions\n\"\"\"\n\nimport serial\nimport time\nfrom datetime import datetime\n\n# ========== Configuration ==========\nUART_PORT = 'COM8'       # Serial port for SC18IM704\nBAUDRATE = 9600          # UART baud rate (default for SC18IM704 is 9600)\nI2C_ADDR_AD5252 = 0x2C   # AD5252 default I2C address (7-bit)\n\n# SC18IM704 command set (UART protocol) - UPDATED\nCMD_STOP         = 0x50  # STOP\nCMD_I2C_START    = 0x53  # I2C START\nCMD_READ_REG     = 0x52  # Read internal register\nCMD_WRITE_REG    = 0x57  # Write internal register\nCMD_READ_GPIO    = 0x49  # Read GPIO\nCMD_WRITE_GPIO   = 0x4F  # Write GPIO\nCMD_POWER_DOWN   = 0x5A  # Power down\n\n# SC18IM704 register addresses\nREG_BRG0         = 0x00\nREG_BRG1         = 0x01\nREG_GPIO_CONF1   = 0x02\nREG_GPIO_CONF2   = 0x03\nREG_GPIO_STATE   = 0x04\nREG_I2C_ADDR     = 0x06\nREG_I2C_CLK_L    = 0x07\nREG_I2C_CLK_H    = 0x08\nREG_I2C_TIMEOUT  = 0x09\nREG_I2C_STAT     = 0x0A\n\n# I2C status codes\nI2C_STAT_OK         = 0xF0\nI2C_STAT_NACK_ADDR  = 0xF1\nI2C_STAT_NACK_DATA  = 0xF2\nI2C_STAT_TIMEOUT    = 0xF8\n\n# ========== Helper Functions ==========\ndef log_transaction(direction, data):\n    \"\"\"Log serial transactions with timestamp\"\"\"\n    timestamp = datetime.now().strftime(\"%H:%M:%S.%f\")[:-3]\n    hex_data = ' '.join(f\"{b:02X}\" for b in data)\n    print(f\"[{timestamp}] {direction}: {hex_data}\")\n\ndef write_internal_reg(ser, reg_addr, value):\n    \"\"\"\n    Write to SC18IM704 internal register.\n    Protocol: [CMD_WRITE_REG, reg_addr, value, CMD_STOP]\n    \"\"\"\n    cmd = bytes([CMD_WRITE_REG, reg_addr, value, CMD_STOP])\n    log_transaction(\"TX\", cmd)\n    ser.write(cmd)\n    time.sleep(0.01)\n\ndef read_internal_reg(ser, reg_addr):\n    \"\"\"\n    Read from SC18IM704 internal register.\n    Protocol: [CMD_READ_REG, reg_addr, CMD_STOP]\n    Returns: value (int) or None\n    \"\"\"\n    cmd = bytes([CMD_READ_REG, reg_addr, CMD_STOP])\n    log_transaction(\"TX\", cmd)\n    ser.write(cmd)\n    value = ser.read(1)\n    if value:\n        log_transaction(\"RX\", value)\n        return value[0]\n    else:\n        print(f\"Failed to read register 0x{reg_addr:02X}\")\n        return None\n\ndef init_sc18im704(ser, i2c_freq=100_000, osc_freq=15_000_000):\n    \"\"\"\n    Initialize SC18IM704 bridge\n    - Sets I2C speed to desired frequency (Hz)\n    - osc_freq: oscillator frequency in Hz (default 15MHz)\n    - i2c_freq: desired I2C frequency in Hz (default 100kHz)\n    \"\"\"\n    clk_div = int(osc_freq / (5 * i2c_freq))\n    if clk_div &gt; 0xFFFF:\n        clk_div = 0xFFFF  # Clamp to 16-bit max\n    clk_div_l = clk_div &amp; 0xFF\n    clk_div_h = (clk_div &gt;&gt; 8) &amp; 0xFF\n    write_internal_reg(ser, REG_I2C_CLK_L, clk_div_l)\n    write_internal_reg(ser, REG_I2C_CLK_H, clk_div_h)\n    # No response expected for register write\n\ndef write_i2c(ser, addr, data):\n    \"\"\"\n    I2C write operation using SC18IM704 protocol:\n    [CMD_I2C_START, addr_w, num_bytes, data..., CMD_STOP]\n    \"\"\"\n    addr_w = (addr &lt;&lt; 1) &amp; 0xFE  # W=0\n    num_bytes = len(data)\n    cmd = bytes([CMD_I2C_START, addr_w, num_bytes] + list(data) + [CMD_STOP])\n    log_transaction(\"TX\", cmd)\n    ser.write(cmd)\n    time.sleep(0.05)\n    # Read status\n    status_str = read_i2c_status(ser)\n    if status_str != \"I2C OK\":\n        print(f\"I2C Write Error: {status_str}\")\n\ndef read_i2c(ser, addr, length):\n    \"\"\"\n    I2C read operation using SC18IM704 protocol:\n    [CMD_I2C_START, addr_r, num_bytes, CMD_STOP]\n    \"\"\"\n    addr_r = (addr &lt;&lt; 1) | 0x01  # R=1\n    cmd = bytes([CMD_I2C_START, addr_r, length, CMD_STOP])\n    log_transaction(\"TX\", cmd)\n    ser.write(cmd)\n    time.sleep(0.05)\n    response = ser.read(length)\n    status_str = read_i2c_status(ser)\n    if status_str != \"I2C OK\":\n        print(f\"I2C Read Error: {status_str}\")\n        return None\n    if response:\n        log_transaction(\"RX\", response)\n        return response\n    else:\n        print(\"I2C Read Error: No data received\")\n        return None\n\ndef read_after_write_i2c(ser, addr, write_data, read_length):\n    \"\"\"\n    I2C repeated start (read after write) using SC18IM704 protocol:\n    [CMD_I2C_START, addr_w, num_bytes, data..., CMD_I2C_START, addr_r, read_length, CMD_STOP]\n    \"\"\"\n    addr_w = (addr &lt;&lt; 1) &amp; 0xFE\n    addr_r = (addr &lt;&lt; 1) | 0x01\n    cmd = bytes(\n        [CMD_I2C_START, addr_w, len(write_data)] +\n        list(write_data) +\n        [CMD_I2C_START, addr_r, read_length, CMD_STOP]\n    )\n    log_transaction(\"TX\", cmd)\n    ser.write(cmd)\n    time.sleep(0.05)\n    response = ser.read(read_length)\n    status_str = read_i2c_status(ser)\n    if status_str != \"I2C OK\":\n        print(f\"I2C Read-after-Write Error: {status_str}\")\n        return None\n    if response:\n        log_transaction(\"RX\", response)\n        return response\n    else:\n        print(\"I2C Read-after-Write Error: No data received\")\n        return None\n\ndef read_sc18im704_version(ser):\n    \"\"\"\n    Reads the SC18IM704 firmware version string.\n    Sends ASCII 'V' (0x56) and 'P' (0x50), expects a 16-byte null-terminated string.\n    \"\"\"\n    cmd = bytes([0x56, 0x50])  # 'V', 'P'\n    log_transaction(\"TX\", cmd)\n    ser.write(cmd)\n    version = ser.read(16)\n    if version:\n        log_transaction(\"RX\", version)\n        # Remove null terminator and decode\n        version_str = version.rstrip(b'\\x00').decode(errors='replace')\n        print(f\"SC18IM704 Version: {version_str}\")\n        return version_str\n    else:\n        print(\"Failed to read SC18IM704 version.\")\n        return None\n\ndef read_i2c_status(ser):\n    \"\"\"\n    Reads the SC18IM704 I2C status register and returns a human-readable status.\n    \"\"\"\n    code = read_internal_reg(ser, REG_I2C_STAT)\n    if code is None:\n        print(\"Failed to read I2C status register.\")\n        return None\n    if code == I2C_STAT_OK:\n        return \"I2C OK\"\n    elif code == I2C_STAT_NACK_ADDR:\n        return \"I2C NACK on address\"\n    elif code == I2C_STAT_NACK_DATA:\n        return \"I2C NACK on data\"\n    elif code == I2C_STAT_TIMEOUT:\n        return \"I2C TIMEOUT\"\n    else:\n        return f\"Unknown status: 0x{code:02X}\"\n\n# ========== AD5252 Operations ==========\ndef write_rdac3(ser, value):\n    \"\"\"\n    Write to AD5252's RDAC3 register (address 0x03)\n    - Performs I2C write: [0x03, value]\n    \"\"\"\n    if not 0 &lt;= value &lt;= 255:\n        raise ValueError(\"RDAC value must be 0-255\")\n\n    print(f\"\\n[AD5252] Writing RDAC3: 0x{value:02X}\")\n    write_i2c(ser, I2C_ADDR_AD5252, [0x03, value])\n\ndef read_rdac3(ser):\n    \"\"\"\n    Read from AD5252's RDAC3 register using repeated start\n    \"\"\"\n    print(\"\\n[AD5252] Reading RDAC3...\")\n    data = read_after_write_i2c(ser, I2C_ADDR_AD5252, [0x03], 1)\n    return data[0] if data else None\n\ndef read_whoami(ser):\n    raise NotImplementedError\n\n# ========== Main Program ==========\ndef main():\n    print(\"===== SC18IM704 I2C Bridge Controller =====\")\n    print(f\"Config: Port={UART_PORT}, Baud={BAUDRATE}\")\n    print(f\"Target: AD5252 @ 0x{I2C_ADDR_AD5252:02X}\\n\")\n\n    try:\n        with serial.Serial(UART_PORT, BAUDRATE, timeout=1) as ser:\n            # Read SC18IM704 firmware version\n            read_sc18im704_version(ser)\n            print(\"\\n\")\n\n            # Initialize bridge\n            print(\"[SC18IM704] Initializing...\")\n            init_sc18im704(ser)\n\n            # 2. Write test value to RDAC3\n            test_value = 0x80\n            write_rdac3(ser, test_value)\n\n            # 3. Verify write operation\n            rdac_val = read_rdac3(ser)\n            if rdac_val is not None:\n                print(f\"RDAC3 Value: 0x{rdac_val:02X}\")\n                print(\"Verification:\", \"PASS\" if rdac_val == test_value else \"FAIL\")\n            else:\n                print(\"Error reading RDAC3!\")\n\n            # 4. Write test value to RDAC3\n            test_value = 0xde\n            write_rdac3(ser, test_value)\n\n            # 5. Verify write operation\n            rdac_val = read_rdac3(ser)\n            if rdac_val is not None:\n                print(f\"RDAC3 Value: 0x{rdac_val:02X}\")\n                print(\"Verification:\", \"PASS\" if rdac_val == test_value else \"FAIL\")\n            else:\n                print(\"Error reading RDAC3!\")\n\n    except serial.SerialException as e:\n        print(f\"\\nSerial port error: {e}\")\n    except Exception as e:\n        print(f\"\\nUnexpected error: {e}\")\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"notes/posts/190%23%5Bi2c%5D%5Buart%5D%20uart%20to%20i2c%20bridge%20chip%20sc18im704%20setup/#konosubakonoakua-2025-06-26t073939z","title":"konosubakonoakua \u00b7 2025-06-26T07:39:39Z","text":""},{"location":"notes/posts/190%23%5Bi2c%5D%5Buart%5D%20uart%20to%20i2c%20bridge%20chip%20sc18im704%20setup/#log","title":"log","text":"<pre><code>~\\Desktop\\sc18im704 via \ud83d\udc0d v3.12.10 (py312) \n\u276f python .\\sc18im704_ad5252.py\n===== SC18IM704 I2C Bridge Controller =====\nConfig: Port=COM8, Baud=9600\nTarget: AD5252 @ 0x2C\n\n[15:30:12.005] TX: 56 50\n[15:30:12.027] RX: 53 43 31 38 49 4D 37 30 34 20 31 2E 30 2E 32 00\nSC18IM704 Version: SC18IM704 1.0.2\n\n\n[SC18IM704] Initializing...\n[15:30:12.027] TX: 57 07 1E 50\n[15:30:12.039] TX: 57 08 00 50\n\n[AD5252] Writing RDAC3: 0x80\n[15:30:12.049] TX: 53 58 02 03 80 50\n[15:30:12.100] TX: 52 0A 50\n[15:30:12.106] RX: F0\n\n[AD5252] Reading RDAC3...\n[15:30:12.106] TX: 53 58 01 03 53 59 01 50\n[15:30:12.157] TX: 52 0A 50\n[15:30:12.163] RX: F0\n[15:30:12.163] RX: 80\nRDAC3 Value: 0x80\nVerification: PASS\n\n[AD5252] Writing RDAC3: 0xDE\n[15:30:12.164] TX: 53 58 02 03 DE 50\n[15:30:12.215] TX: 52 0A 50\n[15:30:12.221] RX: F0\n\n[AD5252] Reading RDAC3...\n[15:30:12.221] TX: 53 58 01 03 53 59 01 50\n[15:30:12.272] TX: 52 0A 50\n[15:30:12.279] RX: F0\n[15:30:12.279] RX: DE\nRDAC3 Value: 0xDE\nVerification: PASS\n</code></pre>"},{"location":"notes/posts/191%23%5Bvm%5D%20virtualbox%20setup/","title":"191 [vm] virtualbox setup","text":""},{"location":"notes/posts/191%23%5Bvm%5D%20virtualbox%20setup/#setup","title":"setup","text":"<pre><code>winget install Oracle.VirtualBox\n</code></pre>"},{"location":"notes/posts/191%23%5Bvm%5D%20virtualbox%20setup/#issues","title":"issues","text":""},{"location":"notes/posts/191%23%5Bvm%5D%20virtualbox%20setup/#can-not-import-vbox-file-e_invalidarg-0x80070057","title":"Can not import <code>.vbox</code> file: <code>E_INVALIDARG (0x80070057)</code>","text":"<ul> <li>restart vbox manager with admin rights</li> </ul>"},{"location":"notes/posts/191%23%5Bvm%5D%20virtualbox%20setup/#only-super-user-can-access-shared-folder","title":"only super user can access shared folder","text":"<ul> <li><code>sudo usermod -aG vboxsf $(whoami)</code></li> <li><code>reboot</code></li> </ul>"},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/","title":"192 [zynq] petalinux 2024.2 setup","text":""},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#dependencies","title":"Dependencies","text":"<pre><code>sudo apt install \\\n  gawk \\\n  gcc \\\n  net-tools \\\n  libncurses5-dev \\\n  zlib1g-dev \\\n  libssl-dev \\\n  libselinux1 \\\n  xterm \\\n  gcc-multilib \\\n  build-essential \\\n  automake \\\n  screen \\\n  g++ \\\n  python3-pip \\\n  xz-utils \\\n  cpp \\\n  patch \\\n  python3-git \\\n  python3-jinja2 \\\n  python3-pexpect \\\n  diffutils \\\n  debianutils \\\n  iputils-ping \\\n  libegl1-mesa \\\n  libsdl1.2-dev \\\n  pylint \\\n  cpio \\\n  gnupg \\\n  dnsutils \\\n  libtool \\\n  texinfo \\\n  libtinfo5 \\\n  cifs-utils\n</code></pre>"},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#konosubakonoakua-2025-12-17t082338z","title":"konosubakonoakua \u00b7 2025-12-17T08:23:38Z","text":""},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#sstate-cache","title":"sstate cache","text":"<ul> <li>/project-spec/meta-user/conf/petalinuxbsp.conf <p><pre><code>DL_DIR = \"/var/cache/petalinux-sstate/2024.2/downloads\"\nSSTATE_DIR = \"/var/cache/petalinux-sstate/2024.2/aarch64\"\n</code></pre> <pre><code>sudo mkdir -p /var/cache/petalinux-sstate/\nsudo chown impcas:impcas /var/cache/petalinux-sstate/\nmkdir -p /var/cache/petalinux-sstate/2024.2/downloads\nmkdir -p /var/cache/petalinux-sstate/2024.2/aarch64\nmkdir -p /var/cache/petalinux-sstate/2024.2/arm\n</code></pre> - yocto settings   <pre><code>$ petalinux-config ---&gt; Yocto Settings ---&gt; Add pre-mirror url ---&gt; file:///mnt/petalinux-sstate/2024.2/downloads\n$ petalinux-config ---&gt; Yocto Settings ---&gt; Local sstate feeds settings ---&gt; local sstate feeds url ---&gt; /mnt/petalinux-sstate/2024.2/aarch64\n</code></pre> - samba share   <pre><code>sudo mount -t cifs //rf-pc-kuro.local/share/petalinux/sstate /mnt/petalinux-sstate -o credentials=~/.rf-pc-kuro.samba.cred\nsudo mount -t cifs //rf-pc-kuro.local/share/petalinux/sstate /mnt/petalinux-sstate -o username=\"\",password=\"\"\n</code></pre> - logging   <pre><code>Parsing recipes: 100% |################################################################################################################################| Time: 0:05:05\nParsing of 5800 .bb files complete (0 cached, 5800 parsed). 8454 targets, 994 skipped, 27 masked, 0 errors.\nNOTE: Resolving any missing task queue dependencies\nNOTE: Fetching uninative binary shim file:///home/impcas/impcas/impcas_hw_fpga_zu9_viv24_plnx24/petalinux/components/yocto/downloads/uninative/6bf00154c5a7bc48adbf63f\nd17684bb87eb07f4814fbb482a3fbd817c1ccf4c5/x86_64-nativesdk-libc-4.6.tar.xz;sha256sum=6bf00154c5a7bc48adbf63fd17684bb87eb07f4814fbb482a3fbd817c1ccf4c5 (will check PREM\nIRRORS first)\nInitialising tasks:  57% |########################################################################                                                     | ETA:  0:00:24\n</code></pre></p>"},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#konosubakonoakua-2025-12-17t161216z","title":"konosubakonoakua \u00b7 2025-12-17T16:12:16Z","text":""},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#petalinux-build","title":"petalinux-build","text":""},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#memory-16gb-cpu-4-cores","title":"memory 16GB &amp; cpu 4 cores","text":"<ul> <li>not working</li> </ul> <p><pre><code>$ petalinux-config ---&gt; Yocto Settings ---&gt; Parallel thread execution ---&gt; (10) sets number of bb threads (BB_NUMBER_THREADS)\n$ petalinux-config ---&gt; Yocto Settings ---&gt; Parallel thread execution ---&gt; (10) sets number of parallel make -j threads (PARALLEL_MAKE)\n</code></pre> - os limit</p> <pre><code>taskset -c 0,1,2,3 petalinux-build\n</code></pre>"},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#konosubakonoakua-2025-12-18t012228z","title":"konosubakonoakua \u00b7 2025-12-18T01:22:28Z","text":""},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#issue","title":"Issue","text":""},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#mpmu-rom-native-10-r0-do_fetch-bitbake-fetcher-error","title":"mpmu-rom-native-1.0-r0 do_fetch: Bitbake Fetcher Error","text":"<pre><code>The bitbake file has a SRC_URI = \"https://www.xilinx.com/bin/public/openDownload?filename=PMU_ROM.tar.gz\", which when using a local cache gets converted into looking for the file \"[openDownload?filename=PMU_ROM.tar.gz](https://www.xilinx.com/bin/public/openDownload?filename=PMU_ROM.tar.gz)\" on the disk. This is fine in Linux, but in Windows a '?' character in the filename is forbidden. As I was using Windows tools to extract the files from the download archive, this particular file was being renamed.\n**My fix was to use Linux to create these files from the archive.**\n</code></pre> <pre><code># \"petalinux/components/yocto/layers/meta-xilinx/meta-xilinx-core/recipes-bsp/pmu-firmware/pmu-rom-native.bb\" line 10\nSRC_URI = \"https://www.xilinx.com/bin/public/openDownload_filename=PMU_ROM.tar.gz\"  \n</code></pre>"},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#armv-pmu-probe-of-pmu-failed-with-error-22","title":"armv-pmu: probe of pmu failed with error -22","text":"<p>If you forgot to include bitstream to BOOT.BIN, you will get this. <pre><code>[    1.630546] armv8-pmu pmu: hw perfevents: failed to parse interrupt-affinity[2]\n[    1.639463] armv8-pmu: probe of pmu failed with error -22\n[    1.645586] fpga_manager fpga0: Xilinx ZynqMP FPGA Manager registered\n[    1.651641] usbcore: registered new interface driver snd-usb-audio\n[    1.658101] pktgen: Packet Generator for packet performance testing. Version: 2.75\n[    1.666321] Initializing XFRM netlink socket\n[    1.669324] NET: Registered PF_INET6 protocol family\n[    1.674860] Segment Routing with IPv6\n[    1.677912] In-situ OAM (IOAM) with IPv6\n[    1.681884] sit: IPv6, IPv4 and MPLS over IPv4 tunneling driver\n[    1.688078] NET: Registered PF_PACKET protocol family\n[    1.692779] NET: Registered PF_KEY protocol family\n[    1.697567] can: controller area network core\n[    1.701932] NET: Registered PF_CAN protocol family\n[    1.706693] can: raw protocol\n[    1.709646] can: broadcast manager protocol\n[    1.713830] can: netlink gateway - max_hops=1\n[    1.718258] Bluetooth: RFCOMM TTY layer initialized\n[    1.723053] Bluetooth: RFCOMM socket layer initialized\n[    1.728191] Bluetooth: RFCOMM ver 1.11\n[    1.731925] Bluetooth: BNEP (Ethernet Emulation) ver 1.3\n[    1.737227] Bluetooth: BNEP filters: protocol multicast\n[    1.742449] Bluetooth: BNEP socket layer initialized\n[    1.747407] Bluetooth: HIDP (Human Interface Emulation) ver 1.2\n[    1.753325] Bluetooth: HIDP socket layer initialized\n[    1.758320] 8021q: 802.1Q VLAN Support v1.8\n[    1.762590] 9pnet: Installing 9P2000 support\n[    1.766751] Key type dns_resolver registered\n[    1.771087] NET: Registered PF_VSOCK protocol family\n[    1.783689] registered taskstats version 1\n[    1.783729] Loading compiled-in X.509 certificates\n[    1.794974] Btrfs loaded, zoned=no, fsverity=no\n[    1.795146] alg: No test for xilinx-zynqmp-rsa (zynqmp-rsa)\n[    2.437121] ff000000.serial: ttyPS0 at MMIO 0xff000000 (irq = 23, base_baud = 6249999) is a xuartps\n[    2.446202] printk: console [ttyPS0] enabled\n[    2.446202] printk: console [ttyPS0] enabled\n[    2.450500] printk: bootconsole [cdns0] disabled\n[    2.450500] printk: bootconsole [cdns0] disabled\n[   23.470487] rcu: INFO: rcu_sched detected stalls on CPUs/tasks:\n[   23.476398] rcu:     1-...0: (1 GPs behind) idle=171c/1/0x4000000000000000 softirq=83/83 fqs=2625\n[   23.484998] rcu:     (detected by 0, t=5252 jiffies, g=-1031, q=9 ncpus=2)\n[   23.491605] Task dump for CPU 1:\n[   23.494815] task:kworker/u6:1    state:R  running task     stack:0     pid:49    ppid:2      flags:0x0000000a\n[   23.504720] Workqueue: events_unbound deferred_probe_work_func\n[   23.510553] Call trace:\n[   23.512983]  __switch_to+0xdc/0x154\n[   23.516463]  0xffff8000816e9c90\n</code></pre></p>"},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#cpu-hangs-when-using-devmemuserspace-drivers-in-linux","title":"CPU hangs when using devmem/userspace drivers in Linux","text":"<ul> <li>https://adaptivesupport.amd.com/s/article/000036858?language=en_US</li> </ul>"},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#konosubakonoakua-2025-12-25t083647z","title":"konosubakonoakua \u00b7 2025-12-25T08:36:47Z","text":""},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#tips","title":"Tips","text":""},{"location":"notes/posts/192%23%5Bzynq%5D%20petalinux%202024.2%20setup/#pl-device-tree-node","title":"pl device tree node","text":"<pre><code>root@plnx:~# ls /proc/device-tree/pl-bus/\n'#address-cells'   compatible      led_blinker_axion_reg@80030000   phandle            ranges\n'#size-cells'      gpio@80020000   name                             pl_regs@80000000\n</code></pre>"},{"location":"notes/posts/193%23%5Bhw%5D%5Bfpga%5D%20STA/","title":"193 [hw][fpga] STA","text":"<ul> <li>https://www.myhardware.top/fpga%e6%97%b6%e5%ba%8f%e7%ba%a6%e6%9d%9f01-%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5/</li> <li>https://www.myhardware.top/fpga%e6%97%b6%e5%ba%8f%e7%ba%a6%e6%9d%9f02-%e4%b8%8d%e5%90%8c%e6%97%b6%e5%ba%8f%e8%b7%af%e5%be%84%e7%9a%84%e5%88%86%e6%9e%90%e6%96%b9%e6%b3%95/</li> </ul>"},{"location":"notes/posts/20%23%5Blinux%5D%5Binput%5D%20Fcitx5%20intro/","title":"20 [linux][input] Fcitx5 intro","text":""},{"location":"notes/posts/20%23%5Blinux%5D%5Binput%5D%20Fcitx5%20intro/#intro","title":"Intro","text":"<ul> <li>refer to archlinux wiki for fcitx5</li> </ul>"},{"location":"notes/posts/21%23%5Bhardware%5D%20opensource%20hardware%20list/","title":"21 [hardware] opensource hardware list","text":""},{"location":"notes/posts/21%23%5Bhardware%5D%20opensource%20hardware%20list/#opensource-hardware-list","title":"opensource hardware list","text":"<ul> <li>certificated project list</li> </ul>"},{"location":"notes/posts/21%23%5Bhardware%5D%20opensource%20hardware%20list/#comments","title":"Comments","text":""},{"location":"notes/posts/21%23%5Bhardware%5D%20opensource%20hardware%20list/#konosubakonoakua-2024-03-19t105325z","title":"konosubakonoakua \u00b7 2024-03-19T10:53:25Z","text":""},{"location":"notes/posts/21%23%5Bhardware%5D%20opensource%20hardware%20list/#bio","title":"Bio","text":"<ul> <li>open_qLAMP(detection of nucleic acid amplifications)</li> </ul>"},{"location":"notes/posts/22%23%5Bpy%5D%5Bpackage%5D%20how-to%20package%20python%20projects/","title":"22 [py][package] how-to package python projects","text":"<p>https://py-pkgs.org/</p>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/","title":"23 [hw] collections","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#blogs","title":"Blogs","text":"<ul> <li>https://github.com/Staok/thoughs-about-hardware-design</li> <li>https://www.emoe.xyz/all-about-electronics/</li> <li>https://www.analog.com/cn/resources/reference-designs.html</li> <li>https://www.envox.eu/</li> <li>https://bitbucket.org/christandlg/workspace/repositories/</li> <li>https://sequentmicrosystems.com/collections/industrial-automation</li> <li>https://riglol.gitlab.io/lapod/</li> <li>https://www.thingiverse.com/</li> <li>https://www.eevblog.com/forum/oshw/</li> <li>https://www.eevblog.com/forum/oshw/electronic-modules/</li> <li>https://open-boat-projects.org/en/</li> <li>https://landsat.gsfc.nasa.gov/stella/</li> <li>https://www.pcbway.com/blog/</li> <li>https://www.hackster.io/</li> <li>https://hackaday.io/</li> <li>https://www.oshwa.org/</li> <li>https://www.diyphysics.com/</li> <li>https://www.creativemachineslab.com/</li> <li>https://www.hackteria.org/wiki/Main_Page</li> <li>https://www.gaudi.ch/GaudiLabs/?page_id=19</li> <li>https://www.vienna-scientific.com/products/open-hardware/</li> <li>https://github.com/dylanrees/citizen-science</li> <li>https://reprap.org/wiki/RepRap</li> <li>https://www.appropedia.org/OpenLabTools</li> <li>https://github.com/OpenLabTools/OpenLabTools </li> <li>https://libre.space/</li> <li>https://gitlab.com/librespacefoundation</li> <li>https://curiousscientist.tech/</li> <li>https://curiousscientist.tech/tools</li> <li>https://curiousscientist.tech/projects</li> <li>https://www.kickstarter.com/discover/advanced?category_id=334&amp;sort=popularity&amp;seed=2856279&amp;next_page_cursor=&amp;page=1</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#comments","title":"Comments","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t075341z","title":"konosubakonoakua \u00b7 2024-04-09T07:53:41Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#radar","title":"radar","text":"<ul> <li>home made doppler radar</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t075830z","title":"konosubakonoakua \u00b7 2024-04-09T07:58:30Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#can-bus","title":"can bus","text":"<ul> <li>CANarchy (/Can\u2019archy/) is a plug\u2019n\u2019play CANbus exploration and exploitation tool.</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t075957z","title":"konosubakonoakua \u00b7 2024-04-09T07:59:57Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#sale","title":"sale","text":"<ul> <li>https://lectronz.com/</li> <li>https://www.tindie.com/</li> <li>https://www.crowdsupply.com/</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t080025z","title":"konosubakonoakua \u00b7 2024-04-09T08:00:25Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#motor-driver","title":"motor driver","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#all-in-one","title":"ALL in One","text":"<ul> <li>SOLO, A Motor Controller for All Motors</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#bdc","title":"BDC","text":"<ul> <li>A Standalone Full Bridge DC Motor Driver</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#bldc","title":"BLDC","text":"<ul> <li>High Power, High Performance 400V 300A 100+kW Motor Controller fully compatible with VESC\u00ae</li> <li>Compact brushless motor controller with FOC, integrated absolute encoder and CAN Bus.</li> <li>SimpleFOC</li> <li>amulet_controller (bldc)</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#stepper","title":"Stepper","text":"<ul> <li>CLN-ClosedLoopNemaDriver, NEMA17</li> <li>Open Source, easy to use Ethernet connected stepper motor controller. Built in FreeCAD, KiCAD and Arduino.</li> <li>A 4-axis stepper motor driver for creative coders</li> <li>3D Printed Stepper Motor</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#servo","title":"Servo","text":"<ul> <li>XMoto DC as Servomotor</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t080233z","title":"konosubakonoakua \u00b7 2024-04-09T08:02:33Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#farming","title":"farming","text":"<ul> <li>agricoltura-io, sensing and control of agriculture systems</li> <li>Agrofelis Robot</li> <li>roktrack-pylon-guided-mower</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#gardening","title":"Gardening","text":"<ul> <li>Solar lipo capacitive sensing</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t080327z","title":"konosubakonoakua \u00b7 2024-04-09T08:03:27Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#module","title":"module","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#-nextmodule","title":"- next.module","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t090140z","title":"konosubakonoakua \u00b7 2024-04-09T09:01:40Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#electronic-load","title":"Electronic Load","text":"<ul> <li>10kw electronic load</li> <li>\u4e00\u4e2a\u5c0f\u578b\u9ad8\u901f\u7535\u5b50\u8d1f\u8f7d</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t090316z","title":"konosubakonoakua \u00b7 2024-04-09T09:03:16Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#3d-printing","title":"3D Printing","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#machine","title":"machine","text":"<ul> <li>Gen5X open hardware self-generating 5 axis 3D printer</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#monitor","title":"monitor","text":"<ul> <li>SentryPro, ESP32 cam</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t090633z","title":"konosubakonoakua \u00b7 2024-04-09T09:06:33Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#solar-power","title":"Solar Power","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#tracker","title":"tracker","text":"<ul> <li>solar tracker, arduino, machanical</li> <li>solar power supercapacitor speaker</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#controller","title":"controller","text":"<ul> <li>overkill solar bms</li> <li>electrodacus</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t090816z","title":"konosubakonoakua \u00b7 2024-04-09T09:08:16Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#power-supply","title":"Power Supply","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#linear","title":"Linear","text":"<ul> <li>Low Noise Adjustable Power Supply (30V-4A, CC-CV)</li> <li>Low Noise 45V-4A Dual Rail Power Supply Using Enhanced Capacitance Multiplier</li> <li>0V~30V 0A~7A Adjustable Switching Power Supply</li> <li>lm317-based-cvcc-15v15v-1-5a</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#acdc","title":"AC/DC","text":"<ul> <li>220V AC to 8V DC 24W Flyback</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#dcdc","title":"DC/DC","text":"<ul> <li>15W 0V~15V portable PSU</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#ups","title":"UPS","text":"<ul> <li>ATtiny13-TinyUPS</li> <li>DIY Power for all - OwnTech A fully open-source digital power electronics technology framework for fast prototyping switch-mode power supplies</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#inrush-current-limiter","title":"Inrush Current Limiter","text":"<ul> <li>30A AC Soft Starter</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t091252z","title":"konosubakonoakua \u00b7 2024-04-09T09:12:52Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#debugging","title":"Debugging","text":"<ul> <li>felini daplink</li> <li>chipwhisperer</li> <li>Farpatch: A wireless, open source debugging board capable of programming and interacting with a wide range of microcontrollers</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t091516z","title":"konosubakonoakua \u00b7 2024-04-09T09:15:16Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#pcb","title":"PCB","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#-circuitscout-probe-system","title":"- CircuitScout, probe system","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t095754z","title":"konosubakonoakua \u00b7 2024-04-09T09:57:54Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#dsp","title":"DSP","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#-dsp-paw","title":"- dsp-paw","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t095819z","title":"konosubakonoakua \u00b7 2024-04-09T09:58:19Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#computer","title":"Computer","text":"<ul> <li>python handheld computer</li> <li>IVEE forth-based calculator</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t095849z","title":"konosubakonoakua \u00b7 2024-04-09T09:58:49Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#robot","title":"Robot","text":"<ul> <li>Open-Source,ROS Robot Dog Kit</li> <li>10-Dollar-Robot</li> <li>SelfBalancingRobot</li> <li>DESERT EYE: Military Surveillance Robot</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#aircraft","title":"Aircraft","text":"<ul> <li>Artwork for the MiniHawk VTOL, a 3D-Printed Tricopter/Fixed-wing hybrid aircraft.</li> <li>Ball Drone</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#underwater","title":"Underwater","text":"<ul> <li>Modular ROV for underwater exploration, discovery and monitoring</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#motion-simulator","title":"Motion Simulator","text":"<ul> <li>motionsim</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t100411z","title":"konosubakonoakua \u00b7 2024-04-09T10:04:11Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#mechanical","title":"mechanical","text":"<ul> <li>tensile testing</li> <li>air duct shutter</li> <li>homemade-arduino-jet-engine</li> <li>minimal cnc mill</li> <li>Pick and Place wheel</li> <li>vinyl recorder</li> <li>An open-source, manual pick-and-place machine for PCB artisans</li> <li>PnPAssist is a tool that helps you to assemble PCB boards manually.</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#vakuum","title":"Vakuum","text":"<ul> <li>DIY Vakuum Chamber</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t101030z","title":"konosubakonoakua \u00b7 2024-04-09T10:10:30Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#gps","title":"GPS","text":"<ul> <li>FindMyCat</li> <li>Tiny GPS tracker with LoraWAN</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t101255z","title":"konosubakonoakua \u00b7 2024-04-09T10:12:55Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#iot","title":"IoT","text":"<ul> <li>Versatile hub for all wired communication</li> <li>Linux SBC featuring two wifi radios, masquerading as a USB charger.</li> <li>Long Range Weather Station</li> <li>ai-audio-classifier-recycle-bin</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#esp32","title":"ESP32","text":"<ul> <li>esp32 audio media center</li> <li>esp32 RF control training board</li> <li>ESP32 PoE, A fully open source ESP32-based PoE+ board with a mikroBUS\u2122 socket and two handy add-on shields</li> <li>An ESP32 in the Raspberry Pi form factor</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#daq","title":"DAQ","text":"<ul> <li>A powerful, open-source, Wi-Fi-enabled IoT data-acquisition system</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t101309z","title":"konosubakonoakua \u00b7 2024-04-09T10:13:09Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#display","title":"Display","text":"<ul> <li>The Open Book</li> <li>Pocket sized ESP32 display board with 180\u00b5W Always On Display</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-09t101724z","title":"konosubakonoakua \u00b7 2024-04-09T10:17:24Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#breakout-board","title":"Breakout Board","text":"<ul> <li>jumperless breadboard</li> <li>Manhattan-Adapters-Prototyping-Ideas</li> <li>Op-amp building blocks</li> <li>PSU breakout board</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t020937z","title":"konosubakonoakua \u00b7 2024-04-10T02:09:37Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#analog","title":"Analog","text":"<ul> <li>LOCK-In Amplifier</li> <li>BCD rotary voltage source</li> <li>an ultra-low noise amplifier</li> <li>An Open Source DAQ module for Raspberry Pi Pico</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t021248z","title":"konosubakonoakua \u00b7 2024-04-10T02:12:48Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#adc","title":"ADC","text":"<ul> <li>Improved multislope ADC</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#eeg","title":"EEG","text":"<ul> <li>32-channel EEG ADC with Cortex-M7 ----FreeEEG32</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t021336z","title":"konosubakonoakua \u00b7 2024-04-10T02:13:36Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#dac","title":"DAC","text":"<ul> <li>AD5791 Linearity Calibrator</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t022307z","title":"konosubakonoakua \u00b7 2024-04-10T02:23:07Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#sensor","title":"Sensor","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#-generic-node-sensor","title":"- Generic Node Sensor","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t022415z","title":"konosubakonoakua \u00b7 2024-04-10T02:24:15Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#environment","title":"Environment","text":"<ul> <li>outdoor air quality sensor box</li> <li>Solar Powered Weather Station</li> <li>SolarSens - 3D printable solar weatherstation</li> <li>3D PRINTED PORTABLE WIND TURBINE</li> <li>Wireless, battery-operated Mini air quality and weather station.</li> <li>A handheld, battery powered, sensor array unit for environmental monitoring focused mostly on air quality using a global infrastructure.</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t022620z","title":"konosubakonoakua \u00b7 2024-04-10T02:26:20Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#wireless","title":"Wireless","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#lora","title":"LoRa","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#-3w-high-power-pa-lora-device","title":"- 3W high power PA lora device","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t024635z","title":"konosubakonoakua \u00b7 2024-04-10T02:46:35Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#industrial","title":"Industrial","text":"<ul> <li>FastLOGIC, fridge/pump/timer/waterlevel controller</li> <li>STM32 PLC</li> <li>Mega_PLC, Arduino PLC</li> <li>Arduino PLC C# GUI</li> <li>RS485/RJ45 stackable hardware module</li> <li>modbus-rtu-with-stm32f4</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t025817z","title":"konosubakonoakua \u00b7 2024-04-10T02:58:17Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#energy","title":"Energy","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#smart-grid","title":"Smart Grid","text":"<ul> <li>AC Energy Measurement</li> <li>PQduino, the safest home Powermeter for Arduino</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#bms","title":"BMS","text":"<ul> <li>Open source Bluetooth Smart Battery Management System</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t030015z","title":"konosubakonoakua \u00b7 2024-04-10T03:00:15Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#keyboard","title":"keyboard","text":"<ul> <li>Keyboard Builders' Digest</li> <li>Generative_kAiBoard, chatgpt</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t030451z","title":"konosubakonoakua \u00b7 2024-04-10T03:04:51Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#fpga","title":"FPGA","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#sdr","title":"SDR","text":"<ul> <li>iotSDR</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t031115z","title":"konosubakonoakua \u00b7 2024-04-10T03:11:15Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#audio","title":"Audio","text":"<ul> <li>Raspberry_Pi_ADAU1452</li> <li>Eurorack shield for teensy 4.1 with 14 in / 16 out analog channels</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t031501z","title":"konosubakonoakua \u00b7 2024-04-10T03:15:01Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#radiation","title":"Radiation","text":"<ul> <li>Custom firmware for Geiger counters/radiation meters (FS2011, Bosean FS-600, FS-1000, FNIRSI GC-01)</li> <li>Hardware for a hackable DIY gamma-ray spectrometer using a popular NaI(Tl) scintillator, SiPM and a Raspberry Pi Pico.</li> <li>photomultiplier-tube-usb-adapter-for-gamma-spectroscopy</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t031647z","title":"konosubakonoakua \u00b7 2024-04-10T03:16:47Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#led","title":"LED","text":"<ul> <li>A LED RGB dotmatrix controller for real and virtual pinball machines</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t032324z","title":"konosubakonoakua \u00b7 2024-04-10T03:23:24Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#instrument","title":"Instrument","text":"<ul> <li>Compact Scientific Multi Sensor Measurement Unit. 19Ch Spectrometer - Thermal Imaging - audio &amp; light Spectrum Analyzer - 2D LIDAR Imaging</li> <li>Raspberry Pi Spectrometer The PySpectrometer is a Python (OpenCV and Tkinter) implementation of an optical spectrometer for the Raspberry Pi.</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#oscilloscope","title":"Oscilloscope","text":"<ul> <li>ThunderScope</li> <li>RP2040 100MHz 100MSps Oscilloscope</li> <li>redpitaya</li> <li>openscope</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#curve-tracer","title":"Curve tracer","text":"<ul> <li>Microcontroller based curve tracer</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#spectrometer","title":"Spectrometer","text":"<ul> <li>Open Fiber Spectrometer</li> <li>open source 3D Printable Raman Spectrometer using a RaspberryPi</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#vacuum-tweezer","title":"Vacuum Tweezer","text":"<ul> <li>A DIY Vacuum Tweezer/Pickup Tool to help with manually picking up and placing tiny components</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#probe","title":"probe","text":"<ul> <li>Little Bee B1 - A high performance current &amp; magnetic field probe</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#air","title":"Air","text":"<ul> <li>A portable hardware kit for experimenting with pneumatics</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#temperature-humidity","title":"Temperature &amp; Humidity","text":"<ul> <li>Temperature &amp; Humidity Control Unit Using a Raspberry Pi Pico</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#scanner","title":"Scanner","text":"<ul> <li>Arduino controlled photogrammetry 3D-scanner</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#x-ray","title":"X-ray","text":"<ul> <li>Fully 3D printed x-ray machine using a dental tube and a custom transformer.</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#tensile-tester","title":"Tensile Tester","text":"<ul> <li>Collection of files related to 431 Systems Analysis + Design's tensile strength project</li> <li>Open Pull - DIY Universal Test Machine</li> <li>FDMProperties, Developing a simple, accurate model for the mechanical strength of 3D-printed material.</li> <li></li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#microscope","title":"Microscope","text":"<ul> <li>Scanning Tunneling Microscope A low-cost STM achieving atomic resolution with a piezo buzzer scanner</li> <li>OpenLabTools Microscope</li> <li>DVD Laser Scanner Microscope</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#single-photon-generatordetector","title":"Single Photon Generator/Detector","text":"<ul> <li>DIY Open Source Single Photon Generator and Detector</li> <li>Photomultiplier Tubes Basics and Applications, 4th Edition</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#3d-printer","title":"3D printer","text":"<ul> <li>Fab@Home</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t051945z","title":"konosubakonoakua \u00b7 2024-04-10T05:19:45Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#display_1","title":"Display","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#retro","title":"Retro","text":"<ul> <li>Nixie Clock Thermometer and Hygrometer Arduino Shield</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#pixel","title":"Pixel","text":"<ul> <li>PixelDisplay</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t055304z","title":"konosubakonoakua \u00b7 2024-04-10T05:53:04Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#usb","title":"USB","text":"<ul> <li>A USB hub with per-port power and data disconnects + dev board + I\u00b2C, GPIO, and SPI bridges</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t055846z","title":"konosubakonoakua \u00b7 2024-04-10T05:58:46Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#can-bus_1","title":"CAN Bus","text":"<ul> <li>CANFDuino is the best platform for open source CAN bus Arduino projects</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t060851z","title":"konosubakonoakua \u00b7 2024-04-10T06:08:51Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#camera","title":"Camera","text":"<ul> <li>An open-source Xilinx Kria SOM Carrier for high-speed camera design</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t062117z","title":"konosubakonoakua \u00b7 2024-04-10T06:21:17Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#game","title":"Game","text":"<ul> <li>GameBoy Console</li> <li>Multiplayer Bluetooth controllers adapter for retro video game consoles</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t063039z","title":"konosubakonoakua \u00b7 2024-04-10T06:30:39Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#single-board-computer","title":"Single Board Computer","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#carrier-board","title":"Carrier Board","text":"<ul> <li>Minimal-RPi-CM-4-Carrier</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#core-board","title":"Core Board","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#sbc","title":"SBC","text":"<ul> <li>Win10 Pro SBC -- HACKBOARD 2</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t063453z","title":"konosubakonoakua \u00b7 2024-04-10T06:34:53Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#medical","title":"Medical","text":"<ul> <li>COSV - Cam Open Source Ventilator: Roller cam based portable BVM ventilator.</li> <li>Open Source BVM based ventilator</li> <li>Electrical impedance tomography</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t063741z","title":"konosubakonoakua \u00b7 2024-04-10T06:37:41Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#mouse","title":"Mouse","text":"<ul> <li>Finally a mouse that can be freely changed, fixed and upgraded suit the user.</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t064229z","title":"konosubakonoakua \u00b7 2024-04-10T06:42:29Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#soldering","title":"Soldering","text":"<ul> <li>Open Source Smart Solder Fume Extractor</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-10t064737z","title":"konosubakonoakua \u00b7 2024-04-10T06:47:37Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#tools","title":"Tools","text":"<ul> <li>The DIYson, an open source Cyclone vacuum cleaner</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-04-24t052835z","title":"konosubakonoakua \u00b7 2024-04-24T05:28:35Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#radio","title":"Radio","text":"<ul> <li>http://www.hanssummers.com/spectrumanalyser.html</li> </ul>"},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#konosubakonoakua-2024-06-26t031256z","title":"konosubakonoakua \u00b7 2024-06-26T03:12:56Z","text":""},{"location":"notes/posts/23%23%5Bhw%5D%20collections/#paper","title":"Paper","text":"<ul> <li>hardwareX</li> </ul>"},{"location":"notes/posts/24%23%5Blinux%5D%5Bsbc%5D%5Braspi%5D%20materials/","title":"24 [linux][sbc][raspi] materials","text":""},{"location":"notes/posts/24%23%5Blinux%5D%5Bsbc%5D%5Braspi%5D%20materials/#datasheets","title":"datasheets","text":"<ul> <li>https://datasheets.raspberrypi.com/</li> </ul>"},{"location":"notes/posts/24%23%5Blinux%5D%5Bsbc%5D%5Braspi%5D%20materials/#comments","title":"Comments","text":""},{"location":"notes/posts/24%23%5Blinux%5D%5Bsbc%5D%5Braspi%5D%20materials/#konosubakonoakua-2024-04-18t081015z","title":"konosubakonoakua \u00b7 2024-04-18T08:10:15Z","text":""},{"location":"notes/posts/24%23%5Blinux%5D%5Bsbc%5D%5Braspi%5D%20materials/#cameras","title":"cameras","text":"<ul> <li>https://www.raspberrypi.com/documentation/computers/camera_software.html</li> </ul>"},{"location":"notes/posts/25%23%5Bprotocol%5D%5Busb%5D%20materials/","title":"25 [protocol][usb] materials","text":"<ul> <li>https://www.usbmadesimple.co.uk/</li> </ul>"},{"location":"notes/posts/26%23%5Bhw%5D%5Bsoc%5D%5Bfpga%5D%20zynq7000%20docs/","title":"26 [hw][soc][fpga] zynq7000 docs","text":""},{"location":"notes/posts/26%23%5Bhw%5D%5Bsoc%5D%5Bfpga%5D%20zynq7000%20docs/#discussed-in-httpsgithubcomkonosubakonoakuablogdiscussions7","title":"Discussed in https://github.com/konosubakonoakua/blog/discussions/7","text":"<sup>Originally posted by **konosubakonoakua** March 12, 2024</sup> # zynq  ## Manual - [Embedded-Design-Tutorials](https://xilinx.github.io/Embedded-Design-Tutorials/docs/2021.2/build/html/index.html)  ### zynq7000 - [Documentation Portal](https://docs.xilinx.com/search/all?filters=Document_Type_custom~%2522Application+Note%2522_%2522Data+Sheet%2522_%2522Design+Hub%2522_%2522Errata%2522_%2522Tutorial%2522_%2522User+Guide%2522*Product_custom~%2522Silicon+Devices%257CSoCs%257CZynq+7000+SoC%2522_%2522Silicon+Devices%257CSoCs%257CZynq+7000+XA%2522_%2522Silicon+Devices%257CSoCs%257CZynq+7000%2522&amp;sort=last_update&amp;content-lang=en-US) - [Zynq 7000 SoC Technical Reference Manual (UG585)](https://docs.xilinx.com/r/en-US/ug585-zynq-7000-SoC-TRM/Zynq-7000-SoC-Technical-Reference-Manual) - [Zynq 7000 SoC Software Developers Guide (UG821)](https://docs.xilinx.com/r/en-US/ug821-zynq-7000-swdev/Introduction-to-Programming-with-Zynq-7000-AP-SoC-Devices) - [Bootgen User Guide (UG1283)](https://docs.xilinx.com/r/en-US/ug1283-bootgen-user-guide/Introduction) - [Zynq 7000 SoC Debug Design Hub (DH245)](https://docs.xilinx.com/v/u/en-US/dh0055-zynq-7000-debug-hub)  #### secure - [Table: BootROM Requirements for Encryption Status Word](https://docs.xilinx.com/r/mxcNFn1EFZjLI1eShoEn5w/6UMhUlk4mVycxQ9dkSSfpw?section=XREF_12110_BootROM)  ### ultrascale  - https://docs.xilinx.com/r/en-US/ug1085-zynq-ultrascale-trm/Loading-Bitstreams  ### ultrascale plus  - https://docs.xilinx.com/v/u/en-US/ds891-zynq-ultrascale-plus-overview    ## support - [cannot reset secure boot mode](https://support.xilinx.com/s/question/0D52E00006hpe50SAA/reset-secure-boot-mode-on-zynq7002?language=en_US)  ## exploit - [zynq uart exploit](https://gist.github.com/four0four/76401de07a3a170affd3fef0894b624d) - [zynq sdcard exploit](https://eprint.iacr.org/2023/1913.pdf)  ## blog - https://www.zynqnotes.com/ - https://www.zynqnotes.com/vivado-2016.3-pitfalls  ## boards - zedboard   - [schematic](https://digilent.com/reference/_media/reference/programmable-logic/zedboard/zedboard_sch.pdf)"},{"location":"notes/posts/26%23%5Bhw%5D%5Bsoc%5D%5Bfpga%5D%20zynq7000%20docs/#comments","title":"Comments","text":""},{"location":"notes/posts/26%23%5Bhw%5D%5Bsoc%5D%5Bfpga%5D%20zynq7000%20docs/#konosubakonoakua-2024-04-18t101715z","title":"konosubakonoakua \u00b7 2024-04-18T10:17:15Z","text":""},{"location":"notes/posts/26%23%5Bhw%5D%5Bsoc%5D%5Bfpga%5D%20zynq7000%20docs/#jtag","title":"jtag","text":"<ul> <li>jtag-smt4</li> </ul>"},{"location":"notes/posts/26%23%5Bhw%5D%5Bsoc%5D%5Bfpga%5D%20zynq7000%20docs/#konosubakonoakua-2025-05-01t052550z","title":"konosubakonoakua \u00b7 2025-05-01T05:25:50Z","text":""},{"location":"notes/posts/26%23%5Bhw%5D%5Bsoc%5D%5Bfpga%5D%20zynq7000%20docs/#tutorials","title":"tutorials","text":"<ul> <li>https://ax7010-20231-v101.readthedocs.io/zh-cn/latest</li> </ul>"},{"location":"notes/posts/26%23%5Bhw%5D%5Bsoc%5D%5Bfpga%5D%20zynq7000%20docs/#konosubakonoakua-2025-05-16t084859z","title":"konosubakonoakua \u00b7 2025-05-16T08:48:59Z","text":"<p>Verilog.pdf</p>"},{"location":"notes/posts/26%23%5Bhw%5D%5Bsoc%5D%5Bfpga%5D%20zynq7000%20docs/#konosubakonoakua-2025-05-16t084946z","title":"konosubakonoakua \u00b7 2025-05-16T08:49:46Z","text":""},{"location":"notes/posts/26%23%5Bhw%5D%5Bsoc%5D%5Bfpga%5D%20zynq7000%20docs/#konosubakonoakua-2025-05-16t092028z","title":"konosubakonoakua \u00b7 2025-05-16T09:20:28Z","text":""},{"location":"notes/posts/26%23%5Bhw%5D%5Bsoc%5D%5Bfpga%5D%20zynq7000%20docs/#konosubakonoakua-2025-05-16t092248z","title":"konosubakonoakua \u00b7 2025-05-16T09:22:48Z","text":""},{"location":"notes/posts/27%23%5Bsw%5D%5Blinux%5D%5Bvideo%5D%20v4l2%20introduction/","title":"27 [sw][linux][video] v4l2 introduction","text":"<p>https://blog.csdn.net/weixin_42203498/article/details/126753239 https://blog.csdn.net/u013904227/article/details/80718831 https://blog.csdn.net/weixin_42462202/article/details/99680969 https://www.cnblogs.com/LoyenWang/p/15456230.html https://zhuanlan.zhihu.com/p/610873219 https://www.kernel.org/doc/html/v6.8/driver-api/media/v4l2-core.html https://wiki.luckfox.com/zh/Luckfox-Pico/Luckfox-Pico-V4L2/ https://wiki.st.com/stm32mpu/index.php?title=V4L2_camera_overview&amp;oldid=74402 https://wiki.st.com/stm32mpu/wiki/GStreamer_overview</p>"},{"location":"notes/posts/28%23%5Bhw%5D%5Busb%5D%5Btypec%5D%20usb%20typec%20power/","title":"28 [hw][usb][typec] usb typec power","text":"<ul> <li>https://www.analog.com/cn/resources/analog-dialogue/articles/simplify-your-usb-c-pd-design-using-a-standalone-pd-controller.html</li> <li>https://www.digikey.com/en/articles/designing-in-usb-type-c-and-using-power-delivery-for-rapid-charging</li> <li>https://www.analog.com/cn/resources/media-center/videos/6313214897112.html</li> <li>https://www.usb.org/document-library/usb-power-delivery</li> <li>https://usb.org/sites/default/files/D2T2-1%20-%20USB%20Power%20Delivery.pdf</li> </ul>"},{"location":"notes/posts/29%23%5Bhw%5D%5Bthermistor%5D%5Bptc%5D%20thermistor%20temperature%20sensing%20application%20notes/","title":"29 [hw][thermistor][ptc] thermistor temperature sensing application notes","text":"<ul> <li>adi: thermistor-temperature-sensing-system-part-1</li> </ul>"},{"location":"notes/posts/30%23%5Bhw%5D%5Bpll%5D%20pll%20fundamental/","title":"30 [hw][pll] pll fundamental","text":"<ul> <li>adi: phase-locked-loop-pll-fundamentals</li> </ul>"},{"location":"notes/posts/31%23%5Bsw%5D%5Blinux%5D%5Bdocker%5D%20podman%20intro/","title":"31 [sw][linux][docker] podman intro","text":""},{"location":"notes/posts/31%23%5Bsw%5D%5Blinux%5D%5Bdocker%5D%20podman%20intro/#installation","title":"installation","text":"<ul> <li>https://podman.io/docs/installation</li> <li>https://github.com/containers/podman/releases</li> </ul>"},{"location":"notes/posts/31%23%5Bsw%5D%5Blinux%5D%5Bdocker%5D%20podman%20intro/#issues","title":"issues","text":"<ul> <li>insufficient UIDs or GIDs in user namespace <pre><code>sudo usermod --add-subgids 10000-75535 USERNAME\nsudo usermod --add-subuids 10000-75535 USERNAME\npodman system migrate\npodman pull ...\n</code></pre></li> <li>placeholder</li> </ul>"},{"location":"notes/posts/32%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%20cross-compile%20linux%20kernel%20for%20raspberry%20pi/","title":"32 [sw][linux][raspi] cross-compile linux kernel for raspberry pi","text":"<p>https://www.raspberrypi.com/documentation/computers/linux_kernel.html#cross-compiling-the-kernel</p> <pre><code>sudo apt install git bc bison flex libssl-dev make libc6-dev libncurses5-dev\nsudo apt install crossbuild-essential-armhf\nsudo apt install crossbuild-essential-arm64\ngit clone --depth=1 https://github.com/raspberrypi/linux\n\n# 32-bit For Raspberry Pi 2, 3, 3+ and Zero 2 W, and Raspberry Pi Compute Modules 3 and 3+:\nKERNEL=kernel7 &amp;&amp; make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- bcm2709_defconfig\n\nmake ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- zImage modules dtbs -j8\n\n# 64-bit For Raspberry Pi 3, 3+, 4, 400 and Zero 2 W, and Raspberry Pi Compute Modules 3, 3+ and 4:\nKERNEL=kernel8 &amp;&amp; make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- bcm2711_defconfig\n# 64-bit For Raspberry Pi 5\nKERNEL=kernel_2712 &amp;&amp; make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- bcm2712_defconfig\n\nmake ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- Image modules dtbs -j8\n\n# menuconfig\nsudo apt install libncurses5-dev\nmake ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- menuconfig\nmake ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- menuconfig\n</code></pre>"},{"location":"notes/posts/33%23%5Bhw%5D%5Bnetwork%5D%5BTSN%5D%20TSN%20intro/","title":"33 [hw][network][TSN] TSN intro","text":"<ul> <li>https://www.analog.com/cn/resources/analog-dialogue/articles/looking-inside-real-time-ethernet.html</li> </ul>"},{"location":"notes/posts/34%23%5Bsw%5D%5Bnetwork%5D%5Bmqtt%5D%20introduction%20for%20mqtt/","title":"34 [sw][network][mqtt] introduction for mqtt","text":"<p>https://codepr.github.io/posts/sol-mqtt-broker/</p>"},{"location":"notes/posts/35%23%5Bsw%5D%5Blinux%5D%5Bpty%5D%5Bterminal%5D%20basics%20of%20linux%20terminal/","title":"35 [sw][linux][pty][terminal] basics of linux terminal","text":"<p>https://www.uninformativ.de/blog/postings/2018-02-24/0/POSTING-en.html</p>"},{"location":"notes/posts/36%23%5Bmath%5D%20interactive%20math%20tutorials/","title":"36 [math] interactive math tutorials","text":""},{"location":"notes/posts/36%23%5Bmath%5D%20interactive%20math%20tutorials/#interactive-tutorials","title":"interactive tutorials","text":"<ul> <li>circles-sines-signals</li> <li>complex-analysis</li> <li>d3 graph theory</li> <li>Linear-Algebra-With-Python</li> <li>mathigon: 12-18 math</li> </ul>"},{"location":"notes/posts/36%23%5Bmath%5D%20interactive%20math%20tutorials/#normal","title":"normal","text":"<ul> <li>A First Course in Linear Algebra (sega)</li> </ul>"},{"location":"notes/posts/36%23%5Bmath%5D%20interactive%20math%20tutorials/#comments","title":"Comments","text":""},{"location":"notes/posts/36%23%5Bmath%5D%20interactive%20math%20tutorials/#konosubakonoakua-2024-05-07t073927z","title":"konosubakonoakua \u00b7 2024-05-07T07:39:27Z","text":""},{"location":"notes/posts/36%23%5Bmath%5D%20interactive%20math%20tutorials/#open-source-tools","title":"open-source tools","text":"<ul> <li>sagemath: a free open-source mathematics software system</li> <li>CoCalc: Collaborative Calculation in the Cloud</li> <li>octave online</li> <li>geogebra</li> <li>scilab: free and open source software for numerical computation</li> <li>zzllrr mather(an offline tool for Math learning, education and research)</li> <li>Calcpad: Free and open source software for mathematical and engineering calculations.</li> </ul>"},{"location":"notes/posts/36%23%5Bmath%5D%20interactive%20math%20tutorials/#open-source-libs","title":"open-source libs","text":"<ul> <li>exprtk: C++ Mathematical Expression Parsing And Evaluation Library</li> <li>\ud83c\udf08 Plot complex functions</li> </ul>"},{"location":"notes/posts/36%23%5Bmath%5D%20interactive%20math%20tutorials/#konosubakonoakua-2024-05-07t073934z","title":"konosubakonoakua \u00b7 2024-05-07T07:39:34Z","text":""},{"location":"notes/posts/36%23%5Bmath%5D%20interactive%20math%20tutorials/#collections","title":"collections","text":"<ul> <li>awesome-scientific-computing</li> <li>awesome-theoretical-computer-science</li> <li>Awesome-Maths-Learning</li> <li>awesome-mathematical-notation-design</li> </ul>"},{"location":"notes/posts/36%23%5Bmath%5D%20interactive%20math%20tutorials/#konosubakonoakua-2024-05-07t080750z","title":"konosubakonoakua \u00b7 2024-05-07T08:07:50Z","text":""},{"location":"notes/posts/36%23%5Bmath%5D%20interactive%20math%20tutorials/#lecture-notes","title":"lecture notes","text":"<ul> <li>Linear-Algebra-and-Its-Applications-notes</li> <li>A-Complete-Digital-Communication-System: matlab demo</li> <li>Digital-Signal-Processing-Education-Kit: arm university</li> <li>signals-and-systems-lecture</li> </ul>"},{"location":"notes/posts/37%23%5Bphysics%5D%5Bhep%5D%5Bbeam%5D%20Zgoubi%20intro/","title":"37 [physics][hep][beam] Zgoubi intro","text":"<ul> <li>Zgoubi: A startup guide for the complete beginner</li> </ul>"},{"location":"notes/posts/38%23%5Bphysics%5D%5Bhep%5D%20scientific%20softwares/","title":"38 [physics][hep] scientific softwares","text":""},{"location":"notes/posts/38%23%5Bphysics%5D%5Bhep%5D%20scientific%20softwares/#scientific-software-from-aps","title":"Scientific Software from APS","text":"<ul> <li>https://www.aps.anl.gov/Science/Scientific-Software</li> <li>Data Exchange</li> <li>GSAS-II</li> <li>HYBRID</li> <li>Irena</li> <li>LaueGo</li> <li>matSAXS &amp; SAXSLee</li> <li>MIDAS</li> <li>Nika</li> <li>OASYS</li> <li>Real-time XPCS</li> <li>rsMap3D</li> <li>simSAXSLee</li> <li>TomoPy</li> <li>uProbeX</li> <li>WBXRD-GUI</li> <li>X-Ray Server</li> <li>XRAPM</li> </ul>"},{"location":"notes/posts/39%23%5Bphysics%5D%5Bhep%5D%5Bbeam%5D%5Bsimulation%5D%20beam%20line%20simulation%20collections/","title":"39 [physics][hep][beam][simulation] beam line simulation collections","text":""},{"location":"notes/posts/39%23%5Bphysics%5D%5Bhep%5D%5Bbeam%5D%5Bsimulation%5D%20beam%20line%20simulation%20collections/#national-synchrotron-light-source-ii-simulations-team","title":"National Synchrotron Light Source II (Simulations Team)","text":"<ul> <li>https://www.bnl.gov/nsls2/groups/rd/simulations/tools.php</li> </ul>"},{"location":"notes/posts/39%23%5Bphysics%5D%5Bhep%5D%5Bbeam%5D%5Bsimulation%5D%20beam%20line%20simulation%20collections/#comments","title":"Comments","text":""},{"location":"notes/posts/39%23%5Bphysics%5D%5Bhep%5D%5Bbeam%5D%5Bsimulation%5D%20beam%20line%20simulation%20collections/#konosubakonoakua-2024-05-07t091815z","title":"konosubakonoakua \u00b7 2024-05-07T09:18:15Z","text":""},{"location":"notes/posts/39%23%5Bphysics%5D%5Bhep%5D%5Bbeam%5D%5Bsimulation%5D%20beam%20line%20simulation%20collections/#beamline-simulations-dream-beam","title":"Beamline simulations (Dream beam)","text":"<ul> <li>https://dreambeam.lbl.gov/resources/beamline-simulations</li> </ul>"},{"location":"notes/posts/39%23%5Bphysics%5D%5Bhep%5D%5Bbeam%5D%5Bsimulation%5D%20beam%20line%20simulation%20collections/#konosubakonoakua-2024-05-07t091943z","title":"konosubakonoakua \u00b7 2024-05-07T09:19:43Z","text":""},{"location":"notes/posts/39%23%5Bphysics%5D%5Bhep%5D%5Bbeam%5D%5Bsimulation%5D%20beam%20line%20simulation%20collections/#paper","title":"Paper","text":"<ul> <li>Detector and Beamline Simulation for Next-Generation High Energy Physics Experiments</li> </ul>"},{"location":"notes/posts/39%23%5Bphysics%5D%5Bhep%5D%5Bbeam%5D%5Bsimulation%5D%20beam%20line%20simulation%20collections/#konosubakonoakua-2024-05-07t093207z","title":"konosubakonoakua \u00b7 2024-05-07T09:32:07Z","text":""},{"location":"notes/posts/39%23%5Bphysics%5D%5Bhep%5D%5Bbeam%5D%5Bsimulation%5D%20beam%20line%20simulation%20collections/#berkeley-lab","title":"Berkeley Lab","text":"<ul> <li>Warp is a flexible code with a Python interface with advanced methods for simulations of space-charge dominated particle beams and plasma physics.</li> </ul>"},{"location":"notes/posts/40%23%5Bphysics%5D%5Bhep%5D%5Baccelerator%5D%20particle%20accelerator%20reading%20materials/","title":"40 [physics][hep][accelerator] particle accelerator reading materials","text":"<ul> <li>U.S. Particle Accelerator School: books</li> <li>U.S. Particle Accelerator School: materials</li> </ul>"},{"location":"notes/posts/40%23%5Bphysics%5D%5Bhep%5D%5Baccelerator%5D%20particle%20accelerator%20reading%20materials/#comments","title":"Comments","text":""},{"location":"notes/posts/40%23%5Bphysics%5D%5Bhep%5D%5Baccelerator%5D%20particle%20accelerator%20reading%20materials/#konosubakonoakua-2024-05-07t093504z","title":"konosubakonoakua \u00b7 2024-05-07T09:35:04Z","text":""},{"location":"notes/posts/40%23%5Bphysics%5D%5Bhep%5D%5Baccelerator%5D%20particle%20accelerator%20reading%20materials/#online-tutorials","title":"online tutorials","text":"<ul> <li>accelerator-physics-fundamentals-online-course</li> <li>Design of superconducting magnets for particle accelerators</li> </ul>"},{"location":"notes/posts/41%23%5Bhw%5D%5Bfpga%5D%20learning%20materials/","title":"41 [hw][fpga] learning materials","text":"<ul> <li>https://zipcpu.com/tutorial/</li> </ul>"},{"location":"notes/posts/41%23%5Bhw%5D%5Bfpga%5D%20learning%20materials/#comments","title":"Comments","text":""},{"location":"notes/posts/41%23%5Bhw%5D%5Bfpga%5D%20learning%20materials/#konosubakonoakua-2025-05-27t093636z","title":"konosubakonoakua \u00b7 2025-05-27T09:36:36Z","text":"<ul> <li>https://github.com/ARC-Lab-UF/sv-tutorial</li> <li>https://github.com/ARC-Lab-UF/vhdl-tutorial</li> </ul>"},{"location":"notes/posts/41%23%5Bhw%5D%5Bfpga%5D%20learning%20materials/#konosubakonoakua-2025-05-27t093655z","title":"konosubakonoakua \u00b7 2025-05-27T09:36:55Z","text":"<p>https://github.com/mbits-mirafra/SystemVerilogCourse/wiki</p>"},{"location":"notes/posts/42%23%5Bhw%5D%5Barm%5D%5Bemulator%5D%20arm%20emulator%20collections/","title":"42 [hw][arm][emulator] arm emulator collections","text":"<ul> <li>https://cpulator.01xz.net/</li> </ul>"},{"location":"notes/posts/43%23%5Bsw%5D%5Blinux%5D%5Bdrvier%5D%20linux%20driver%20model/","title":"43 [sw][linux][drvier] linux driver model","text":"<ul> <li>\"\u9a71\u52a8\" \u63a7\u5236\u786c\u4ef6\u5fc5\u987b\u5b66\u4f1a\u7684\u5e95\u5c42\u77e5\u8bc6</li> <li>minimalistic-linux-system-on-qemu-arm</li> </ul>"},{"location":"notes/posts/43%23%5Bsw%5D%5Blinux%5D%5Bdrvier%5D%20linux%20driver%20model/#comments","title":"Comments","text":""},{"location":"notes/posts/43%23%5Bsw%5D%5Blinux%5D%5Bdrvier%5D%20linux%20driver%20model/#konosubakonoakua-2024-05-13t113938z","title":"konosubakonoakua \u00b7 2024-05-13T11:39:38Z","text":""},{"location":"notes/posts/43%23%5Bsw%5D%5Blinux%5D%5Bdrvier%5D%20linux%20driver%20model/#development-environment","title":"development environment","text":"<ul> <li>https://www.armbian.com/rpi4b/</li> <li>https://archlinuxarm.org/about/downloads</li> </ul>"},{"location":"notes/posts/43%23%5Bsw%5D%5Blinux%5D%5Bdrvier%5D%20linux%20driver%20model/#konosubakonoakua-2024-05-13t115354z","title":"konosubakonoakua \u00b7 2024-05-13T11:53:54Z","text":""},{"location":"notes/posts/43%23%5Bsw%5D%5Blinux%5D%5Bdrvier%5D%20linux%20driver%20model/#tutorials","title":"tutorials","text":"<ul> <li>https://linux-kernel-labs.github.io/refs/heads/master/so2/index.html</li> <li>https://bootlin.com/doc/training/embedded-linux-qemu/embedded-linux-qemu-labs.pdf</li> <li>https://www.ebaina.com/articles/140000016889</li> <li>https://blog.csdn.net/qq_44600038/article/details/130984640</li> <li>https://github.com/beacer/notes/blob/master/kernel/kernel-qemu-gdb.md</li> <li>https://wiki.hexchain.org/linux/generic/network-root/</li> <li>https://www.tauceti.blog/posts/qemu-kvm-share-host-directory-with-vm-with-virtio/</li> <li>https://gist.github.com/franzflasch/132139b8ba798066394e62b3f7532f7a</li> <li>https://virtio-fs.gitlab.io/</li> <li>https://virtio-fs.gitlab.io/howto-qemu.html</li> <li>https://virtio-fs.gitlab.io/howto-boot.html</li> </ul>"},{"location":"notes/posts/44%23%5Bebook%5D%20online%20publications/","title":"44 [ebook] online publications","text":"<ul> <li>indexing</li> <li>SIAM Publications Library (not free)</li> <li>zlib</li> <li>American Institue of Mathematics: Approved Textbooks</li> </ul>"},{"location":"notes/posts/45%23%5Bebook%5D%5Blinux%5D%20all%20about%20linux/","title":"45 [ebook][linux] all about linux","text":"<ul> <li>Linux Kernel Programming</li> <li>The Linux Kernel Module Programming Guide   </li> <li>https://bootlin.com/docs/</li> </ul>"},{"location":"notes/posts/46%23%5Bsw%5D%5Blinux%5D%20Online%20Source%20Code/","title":"46 [sw][linux] Online Source Code","text":"<ul> <li>exlixir.bootlin</li> <li>https://elixir.bootlin.com/linux/0.12/source</li> <li>https://elixir.bootlin.com/linux/v6.9/source</li> </ul>"},{"location":"notes/posts/47%23%5Bhw%5D%5Bdesign%5D%5Bwiki%5D%20hardware%20design%20wiki%20collections/","title":"47 [hw][design][wiki] hardware design wiki collections","text":"<ul> <li>https://reviseomatic.org/help/e-index/Index%20by%20Level.php</li> </ul>"},{"location":"notes/posts/48%23%5Bsw%5D%5Blinux%5D%5Bgnu%5D%5Blib%5D%20gnu%20libs/","title":"48 [sw][linux][gnu][lib] gnu libs","text":"<p>https://www.gnu.org/manual/blurbs.html</p>"},{"location":"notes/posts/49%23%5Btip%5D%5Blinux%5D%5Bshell%5D%20linux%20tips%20collections/","title":"49 [tip][linux][shell] linux tips collections","text":""},{"location":"notes/posts/49%23%5Btip%5D%5Blinux%5D%5Bshell%5D%20linux%20tips%20collections/#dynamic-variable-names-in-bash","title":"Dynamic variable names in Bash","text":"<pre><code>#!/bin/sh\n# In the container at runtime:\n# export PROD_TOKEN=\"123\"\nenv=\"PROD\"\nsecret=\"${env}_TOKEN\"\necho ${!secret}\n</code></pre>"},{"location":"notes/posts/49%23%5Btip%5D%5Blinux%5D%5Bshell%5D%20linux%20tips%20collections/#comments","title":"Comments","text":""},{"location":"notes/posts/49%23%5Btip%5D%5Blinux%5D%5Bshell%5D%20linux%20tips%20collections/#konosubakonoakua-2024-05-14t073229z","title":"konosubakonoakua \u00b7 2024-05-14T07:32:29Z","text":""},{"location":"notes/posts/49%23%5Btip%5D%5Blinux%5D%5Bshell%5D%20linux%20tips%20collections/#shell-parameter-expansion","title":"Shell-Parameter-Expansion","text":"<p>https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html</p>"},{"location":"notes/posts/49%23%5Btip%5D%5Blinux%5D%5Bshell%5D%20linux%20tips%20collections/#konosubakonoakua-2024-05-14t080425z","title":"konosubakonoakua \u00b7 2024-05-14T08:04:25Z","text":""},{"location":"notes/posts/49%23%5Btip%5D%5Blinux%5D%5Bshell%5D%20linux%20tips%20collections/#install-location","title":"install location","text":"<ul> <li>cmake         <pre><code>cmake -DCMAKE_INSTALL_PREFIX=$HOME/.local\n</code></pre></li> <li>configure         <pre><code>./configure --prefix=$HOME/.local\n</code></pre></li> </ul>"},{"location":"notes/posts/49%23%5Btip%5D%5Blinux%5D%5Bshell%5D%20linux%20tips%20collections/#konosubakonoakua-2024-05-14t082352z","title":"konosubakonoakua \u00b7 2024-05-14T08:23:52Z","text":""},{"location":"notes/posts/49%23%5Btip%5D%5Blinux%5D%5Bshell%5D%20linux%20tips%20collections/#ld_library_path","title":"LD_LIBRARY_PATH","text":"<pre><code>Libraries have been installed in:\n   /home/USER/.local/lib\n\nIf you ever happen to want to link against installed libraries\nin a given directory, LIBDIR, you must either use libtool, and\nspecify the full pathname of the library, or use the `-LLIBDIR'\nflag during linking and do at least one of the following:\n   - add LIBDIR to the `LD_LIBRARY_PATH' environment variable\n     during execution\n   - add LIBDIR to the `LD_RUN_PATH' environment variable\n     during linking\n   - use the `-Wl,-rpath -Wl,LIBDIR' linker flag\n   - have your system administrator add LIBDIR to `/etc/ld.so.conf'\n\nSee any operating system documentation about shared libraries for\nmore information, such as the ld(1) and ld.so(8) manual pages.\n</code></pre> <pre><code>\u276f cat /etc/ld.so.conf.d/x86_64-linux-gnu.conf \n# Multiarch support\n/usr/local/lib/x86_64-linux-gnu\n/lib/x86_64-linux-gnu\n/usr/lib/x86_64-linux-gnu\n</code></pre> <pre><code>echo\necho '== env =========================================================='\nif [ -z ${LD_LIBRARY_PATH+x} ]; then\n    echo \"LD_LIBRARY_PATH is unset\";\nelse\n    echo LD_LIBRARY_PATH ${LD_LIBRARY_PATH} ;\nfi\n\nif [ -z ${LD_RUN_PATH+x} ]; then\n    echo \"LD_RUN_PATH is unset\";\nelse\n    echo LD_RUN_PATH ${LD_RUN_PATH} ;\nfi\n\nif [ -z ${DYLD_LIBRARY_PATH+x} ]; then\n    echo \"DYLD_LIBRARY_PATH is unset\";\nelse\n    echo DYLD_LIBRARY_PATH ${DYLD_LIBRARY_PATH} ;\nfi\necho '================================================================='\necho\necho\n</code></pre>"},{"location":"notes/posts/49%23%5Btip%5D%5Blinux%5D%5Bshell%5D%20linux%20tips%20collections/#konosubakonoakua-2024-05-24t061421z","title":"konosubakonoakua \u00b7 2024-05-24T06:14:21Z","text":""},{"location":"notes/posts/49%23%5Btip%5D%5Blinux%5D%5Bshell%5D%20linux%20tips%20collections/#float-point-number-comparison","title":"float point number comparison","text":"<p>use <code>bc</code> like <code>echo \"$1 &lt; $2\" | bc</code></p>"},{"location":"notes/posts/49%23%5Btip%5D%5Blinux%5D%5Bshell%5D%20linux%20tips%20collections/#ripgrep-output-only-capture-group","title":"ripgrep output only capture group","text":"<pre><code># only output capture group 1\nrg '(group 1)...(group 2)' -or '$1'\n</code></pre>"},{"location":"notes/posts/49%23%5Btip%5D%5Blinux%5D%5Bshell%5D%20linux%20tips%20collections/#libc-version-check","title":"libc version check","text":"<pre><code>libc_ver_lt () {\n  bc_cmd=\"$(ldd --version | rg 'GLIBC (\\d\\.\\d{2})' -or '$1') &lt; $1\"\n  return $(echo \"$bc_cmd\" | bc)\n}\n</code></pre>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/","title":"50 [linux][kernel][qemu] qemu linux kernel development environment setup","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#file-share","title":"file share","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#loop-device","title":"loop device","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#9p","title":"9p","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#samba","title":"samba","text":"<ul> <li>https://www.cnblogs.com/harrypotterjackson/p/17469404.html</li> </ul>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#nfs","title":"nfs","text":"<ul> <li>https://ubuntu.com/server/docs/network-file-system-nfs</li> </ul>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#virtiofsd","title":"virtiofsd","text":"<ul> <li>https://github.com/ubports/ubports-pdk/blob/main/scripts/images.sh</li> <li>https://github.com/nathanchance/env/blob/main/python/scripts/cbl_vmm.py</li> <li>https://virtio-fs.gitlab.io/howto-qemu.html https://github.com/nathanchance/env/blob/d24019088f898a46d21bbe279e438e2f4bb7a50a/python/scripts/cbl_vmm.py#L122</li> <li>https://gitlab.com/virtio-fs/virtio-fs-ci/-/blob/master/build-linux.sh?ref_type=heads</li> </ul>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#konosubakonoakua-2024-05-15t052330z","title":"konosubakonoakua \u00b7 2024-05-15T05:23:30Z","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#raspberry-pi","title":"raspberry pi","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#kernel-compile","title":"kernel compile","text":"<ul> <li>https://www.raspberrypi.com/documentation/computers/linux_kernel.html</li> <li>https://embear.ch/blog/compiling-a-kernel-module</li> <li>https://nayab.xyz/book/embedded-linux-rpi3-000-intro#learning-path</li> </ul>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#pi4","title":"pi4","text":"<ul> <li>https://gist.github.com/cGandom/23764ad5517c8ec1d7cd904b923ad863</li> </ul>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#pi3","title":"pi3","text":"<ul> <li>https://interrupt.memfault.com/blog/emulating-raspberry-pi-in-qemu</li> <li>https://github.com/KhalilOuali/Raspbian-Bullseye-with-QEMU?tab=readme-ov-file</li> </ul>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#busybox-kernel","title":"busybox + kernel","text":"raspi aarch64 busybox kernel compiling, qemu booting <pre><code># # https://www.raspberrypi.com/documentation/computers/linux_kernel.html\n\nalias makej='make -j$(nproc)'\nexport ROOTFS=$HOME/prj/linux/busybox/busybox-1.36.1/_install\nexport KERNEL=kernel8\n\n####################################\n# 32-bit configs\nexport ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabihf- IMAGE=zImage\n# For Raspberry Pi 1, Zero and Zero W, and for Raspberry Pi Compute Module 1:\n#export KERNEL=kernel &amp;&amp; make -j$(nproc) bcmrpi_defconfig\n# For Raspberry Pi 2, 3, 3+ and Zero 2 W, and Raspberry Pi Compute Modules 3 and 3+:\nexport KERNEL=kernel7 &amp;&amp; make -j$(nproc) bcm2709_defconfig\n# For Raspberry Pi 4 and 400, and Raspberry Pi Compute Module 4:\n#export KERNEL=kernel7l &amp;&amp; make -j$(nproc) bcm2711_defconfig\nmake -j$(nproc) menuconfig\nmake -j$(nproc) zImage modules dtbs\n####################################\n\n\n####################################\n# 64-bit configs\nexport ARCH=arm64 CROSS_COMPILE=aarch64-none-linux-gnu- IMAGE=Image\n# For Raspberry Pi 3, 3+, 4, 400 and Zero 2 W, and Raspberry Pi Compute Modules 3, 3+ and 4:\nexport KERNEL=kernel8 &amp;&amp; make -j$(nproc) bcm2711_defconfig\n# For Raspberry Pi 5:\n#export KERNEL=kernel_2712 &amp;&amp; make -j$(nproc) bcm2712_defconfig\nmake -j$(nproc) menuconfig\nmake -j$(nproc) Image modules dtbs\n####################################\n\n\n####################################\n# kernel modules install\nmake INSTALL_MOD_PATH=$ROOTFS modules_install\n####################################\n\n####################################\n# busybox\nrm -rf $ROOTFS/boot\nmkdir -p $ROOTFS/boot/overlays\ncp -f arch/$ARCH/boot/$IMAGE $ROOTFS/boot/$KERNEL.img\ncp -f arch/$ARCH/boot/dts/overlays/*.dtb* arch/$ARCH/boot/dts/overlays/README $ROOTFS/boot/overlays/\nls $ROOTFS/boot/\n####################################\n\n\n####################################\n# virtiofsd\nexport VIRTIOFS_QUEUE_SIZE=1024 QEMU_VIRTIOFSD_SOCKET=/tmp/myfs.sock QEMU_VIRTIOFSD_CHARDEV_ID=virtiofs_chr0\nexport QEMU_VIRTIOFSD_TAG=myfs\nexport VIRTIOFS_QEMU_PARAM=(\n  -chardev socket,id=virtiofs_chr0,path=$QEMU_VIRTIOFSD_SOCKET\n  -device vhost-user-fs-pci,queue-size=$VIRTIOFS_QUEUE_SIZE,chardev=virtiofs_chr0,tag=myfs,ats=off\n)\nvirtiofsd --socket-path=$QEMU_VIRTIOFSD_SOCKET -o source=$ROOTFS -o cache=none &amp;\n####################################\n\n\n####################################\n# qemu\n#\n    # -drive format=raw,file=2023-05-03-raspios-bullseye-arm64.img,if=none,id=hd0,cache=writeback \\\n    # -device virtio-blk,drive=hd0,bootindex=0 \\\n    # -netdev user,id=mynet,hostfwd=tcp::2222-:22 \\\n    # -device virtio-net-pci,netdev=mynet \\\nqemu-system-aarch64 -machine virt -cpu cortex-a53 -smp 4 -m 1G \\\n  -monitor telnet:127.0.0.1:5555,server,nowait\\\n  -kernel \"$ROOTFS/boot/$KERNEL.img\" \\\n  -append \"rootfstype=virtiofs root=myfs rw panic=0 console=ttyAMA0\" \\\n  -chardev socket,id=virtiofs_chr0,path=$QEMU_VIRTIOFSD_SOCKET \\\n  -device vhost-user-fs-pci,queue-size=$VIRTIOFS_QUEUE_SIZE,chardev=virtiofs_chr0,tag=myfs\n  -object memory-backend-memfd,id=mem,size=4G,share=on \\\n  -numa node,memdev=mem\n####################################\n\nqemu-system-aarch64 -machine virt -cpu cortex-a53 -smp 4 -m 1G \\\n  -monitor telnet:127.0.0.1:5555,server,nowait\\\n  -kernel kernel.bin\\\n  -append \"rootfstype=virtiofs root=myfs rw panic=0 console=ttyAMA0\" \\\n  -chardev socket,id=virtiofs_chr0,path=/tmp/myfs.sock \\\n  -device vhost-user-fs-pci,queue-size=1024,chardev=virtiofs_chr0,tag=myfs\n\nqemu-system-aarch64 -machine raspi3b -cpu cortex-a53 -smp 4 -m 1G \\\n  -kernel arch/$ARCH/boot/$IMAGE \\\n  -dtb arch/arm64/boot/dts/broadcom/bcm2710-rpi-3-b.dtb \\\n  -initrd $ROOTFS/../rootfs.img.gz \\\n  -append 'root=/dev/ram rdinit=/sbin/init panic=0' \\\n  -serial stdio\n\n\n# -initrd $ROOTFS/../rootfs.img.gz \\\n# -append 'root=/dev/ram rdinit=/sbin/init panic=0 console=ttyAMA0' \\\n#\n# -monitor telnet:localhost:4322,server,nowait \\\n# -serial telnet:localhost:4321,server,nowait \\\n# &amp;\n# sleep 2\n# telnet localhost 4321\n\nexport ROOTFS=/home/rfe1wx/prj/linux/busybox/busybox-1.36.1/_install/\nexport ARCH=arm64 IMAGE=Image\nvirtiofsd --tag=myvfs --socket-path=/tmp/myvfs.sock --shared-dir=$(pwd) --cache=auto &amp;\nqemu-system-aarch64 -machine virt -cpu cortex-a53 -smp 4 -m 1G \\\n  -kernel arch/$ARCH/boot/$IMAGE \\\n  -append 'rootfstype=virtiofs root=myvfs rw panic=0 console=ttyAMA0' \\\n  -chardev socket,id=myvfs0,path=/tmp/myvfs.sock \\\n  -device vhost-user-fs-pci,queue-size=1024,chardev=myvfs0,tag=myvfs \\\n  -object memory-backend-memfd,id=mem,size=1G,share=on \\\n  -numa node,memdev=mem \\\n  -serial mon:stdio \\\n  -nographic\n# Ctrl+a, x to quit\n\n\n# cloud-hypervisor \\\n#   --cpus boot=4 \\\n#   --memory size=512M \\\n#   --serial tty \\\n#   --console off \\\n#   --kernel kernel.bin \\\n#   --disk path=rootfs.ext4 \\\n#   --cmdline \"keep_bootcon console=hvc0 reboot=k panic=1 pci=off root=/dev/vda rw\"\n\n````\n\n&lt;/details&gt;\n\n## Orange Pi\n- https://wp.dejvino.com/2020/07/orange-pi-zero-running-in-qemu/\n\n## x86_64\n&lt;details&gt;\n&lt;summary&gt;tutorials&lt;/summary&gt;\n\n- [build-a-kernel-initramfs-and-busybox-to-create-your-own-micro-linux](https://cylab.be/blog/320/build-a-kernel-initramfs-and-busybox-to-create-your-own-micro-linux?accept-cookies=1)\n&lt;/details&gt;\n\n&lt;details&gt;\n&lt;summary&gt;busybox + x86&lt;/summary&gt;\n\n### busybox\n#### command\n```shell\nfind . -print0 | cpio --null -ov --format=newc | gzip -9 &gt; ../rootfs\n</code></pre> #### _install/init <pre><code>#!/bin/sh\n\nmount -t devtmpfs devtmpfs /dev\nmount -t proc none /proc\nmount -t sysfs none /sys\n\ncat &lt;&lt;EOF\n\n##################################################\n#        Welcome to Micro Linux!\n#  Boot took $(cut -d' ' -f1 /proc/uptime) seconds\n##################################################\n\nEOF\n\nmodprobe virtiofs &amp;&amp; \\\n  mkdir /mnt &amp;&amp; \\\n  mount -t virtiofs myfs /mnt &amp;&amp; \\\n  echo &amp;&amp; \\\n  echo \"##################################################\" &amp;&amp; \\\n  echo \"virtiofs mounted at /mnt\" &amp;&amp; \\\n  echo \"##################################################\" &amp;&amp; \\\n  echo\n\nmdev -s\n\nexec /bin/sh\n</code></pre>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#konosubakonoakua-2024-05-15t062049z","title":"konosubakonoakua \u00b7 2024-05-15T06:20:49Z","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#building","title":"building","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#kernel","title":"kernel","text":"<ul> <li>https://docs.kernel.org/kbuild/modules.html</li> <li>https://mgalgs.io/2015/05/16/how-to-build-a-custom-linux-kernel-for-qemu-2015-edition.html</li> </ul>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#initramfs","title":"initramfs","text":"<ul> <li>https://wiki.gentoo.org/wiki/Custom_Initramfs</li> </ul>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#rootfs","title":"rootfs","text":"<ul> <li>https://cloud-images.ubuntu.com/minimal/releases/bionic/release/</li> </ul>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#busybox","title":"busybox","text":"<ul> <li>https://www.vinnie.work/blog/2020-12-27-a-simple-busybox-system</li> <li>https://cylab.be/blog/332/add-modules-to-your-micro-linux</li> <li>https://re-ws.pl/2020/11/busybox-based-linux-distro-from-scratch/</li> </ul>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#konosubakonoakua-2024-05-16t085226z","title":"konosubakonoakua \u00b7 2024-05-16T08:52:26Z","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#vm","title":"VM","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#kvm","title":"kvm","text":"virt-manager <pre><code># Install Necessary KVM-Related Packages on a Debian-Based System:\n# You can use a package manager like APT on Debian-based systems.\nsudo apt-get install qemu-kvm libvirt-bin virt-manager\n\n# Create a Virtual Disk Image:\n# Here, we create a 20GB QCOW2 image called \"myvm.img.\"\nqemu-img create -f qcow2 myvm.img 20G\n\n# Create a Virtual Machine:\n# Use virt-install to create a KVM virtual machine. Adjust the parameters as needed for your use case.\n# In this example, we create a VM named \"myvm\" with 2GB of RAM and 2 vCPUs, and we use an Ubuntu 18.04 ISO for installation.\nvirt-install \\\\\n  --name myvm \\\\\n  --ram 2048 \\\\\n  --vcpus 2 \\\\\n  --disk path=myvm.img,size=20 \\\\\n  --os-type linux \\\\\n  --os-variant ubuntu18.04 \\\\\n  --network bridge=br0 \\\\\n  --graphics vnc \\\\\n  --console pty,target_type=serial \\\\\n  --location '&lt;http://archive.ubuntu.com/ubuntu/dists/bionic/main/installer-amd64/&gt;'\n\n# Start the Virtual Machine:\n# Once the VM is created, you can start it using the following command:\nvirsh start myvm\n\n# Connect to the VM's Console:\n# To connect to the VM's console and interact with it, you can use:\nvirsh console myvm\n</code></pre>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#cloudhypervisor","title":"cloudhypervisor","text":"cloud-hypervisor <pre><code>$ ./cloud-hypervisor \\\n    --kernel ./linux-cloud-hypervisor/arch/arm64/boot/Image \\\n    --console off \\\n    --serial tty \\\n    --disk path=focal-server-cloudimg-arm64.raw \\\n    --cmdline \"console=ttyAMA0 root=/dev/vda1 rw\" \\\n    --cpus boot=4 \\\n    --memory size=1024M \\\n    --net \"tap=,mac=,ip=,mask=\"\n</code></pre>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#qemu","title":"qemu","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#qemu-tutorial","title":"qemu tutorial","text":"<ul> <li>https://blog.jitendrapatro.me/emulating-aarch64arm64-with-qemu-part-1/</li> <li>https://doc.opensuse.org/documentation/leap/virtualization/html/book-virtualization/cha-qemu-running.html</li> <li>https://www.qemu.org/2020/11/04/osv-virtio-fs/</li> </ul>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#konosubakonoakua-2024-05-16t105148z","title":"konosubakonoakua \u00b7 2024-05-16T10:51:48Z","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#others","title":"others","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#vscode","title":"vscode","text":"<ul> <li>https://zhuanlan.zhihu.com/p/510289859</li> <li>https://zhuanlan.zhihu.com/p/594235031</li> </ul>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#misc","title":"misc","text":"<ul> <li>https://0xax.gitbooks.io/linux-insides/content/</li> <li>https://krinkinmu.github.io/2020/12/26/position-independent-executable.html</li> <li>https://github.com/openeuler-mirror/stratovirt</li> <li>https://vmsplice.net/~stefan/virtio-fs_%20A%20Shared%20File%20System%20for%20Virtual%20Machines.pdf</li> <li>https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/kernel_administration_guide/chap-documentation-kernel_administration_guide-working_with_kernel_modules#doc-wrapper</li> </ul>"},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#konosubakonoakua-2024-05-16t175124z","title":"konosubakonoakua \u00b7 2024-05-16T17:51:24Z","text":""},{"location":"notes/posts/50%23%5Blinux%5D%5Bkernel%5D%5Bqemu%5D%20qemu%20linux%20kernel%20development%20environment%20setup/#bugissuepatch","title":"bug,issue,patch","text":"<p>currently, succeed to compile and run virtiofs for kernel, but virtio-fs cannot find tag given by the cmdline arg.</p> log <pre><code>[2024-05-16T16:58:54Z INFO  virtiofsd] Waiting for vhost-user socket connection...\n[2024-05-16T16:58:54Z INFO  virtiofsd] Client connected, servicing requests\nqemu-system-aarch64: -device vhost-user-fs-device,queue-size=1024,chardev=myvfs0,tag=myvfs: warning: vhost-user b\nackend supports VHOST_USER_PROTOCOL_F_CONFIG but QEMU does not.\n[    0.000000] Booting Linux on physical CPU 0x0000000000 [0x410fd034]\n[    0.000000] Linux version 6.1.77-v8+ (rfe1wx@WX8-V-0001N) (aarch64-none-linux-gnu-gcc (Arm GNU Toolchain 13.2.\nrel1 (Build arm-13.7)) 13.2.1 20231009, GNU ld (Arm GNU Toolchain 13.2.rel1 (Build arm-13.7)) 2.41.0.20231009) #6\n SMP PREEMPT Fri May 17 00:56:55 CST 2024\n[    0.000000] random: crng init done\n[    0.000000] Machine model: linux,dummy-virt\n[    0.000000] efi: UEFI not found.\n[    0.000000] Zone ranges:\n[    0.000000]   DMA      [mem 0x0000000040000000-0x000000007fffffff]\n[    0.000000]   DMA32    empty\n[    0.000000]   Normal   empty\n[    0.000000] Movable zone start for each node\n[    0.000000] Early memory node ranges\n[    0.000000]   node   0: [mem 0x0000000040000000-0x000000007fffffff]\n[    0.000000] Initmem setup node 0 [mem 0x0000000040000000-0x000000007fffffff]\n[    0.000000] cma: Reserved 8 MiB at 0x000000007e400000\n[    0.000000] psci: probing for conduit method from DT.\n[    0.000000] psci: PSCIv1.1 detected in firmware.\n[    0.000000] psci: Using standard PSCI v0.2 function IDs\n[    0.000000] psci: Trusted OS migration not required\n[    0.000000] psci: SMC Calling Convention v1.0\n[    0.000000] percpu: Embedded 29 pages/cpu s79144 r8192 d31448 u118784\n[    0.000000] Detected VIPT I-cache on CPU0\n[    0.000000] CPU features: kernel page table isolation forced ON by KASLR\n[    0.000000] CPU features: detected: Kernel page table isolation (KPTI)\n[    0.000000] CPU features: detected: ARM erratum 845719\n[    0.000000] alternatives: applying boot alternatives\n[    0.000000] Built 1 zonelists, mobility grouping on.  Total pages: 258048\n[    0.000000] Kernel command line: rootfstype=virtiofs root=myfs rw panic=0 console=ttyAMA0\n[    0.000000] Dentry cache hash table entries: 131072 (order: 8, 1048576 bytes, linear)\n[    0.000000] Inode-cache hash table entries: 65536 (order: 7, 524288 bytes, linear)\n[    0.000000] mem auto-init: stack:all(zero), heap alloc:off, heap free:off\n[    0.000000] Memory: 996844K/1048576K available (11520K kernel code, 1788K rwdata, 3684K rodata, 3712K init, 10\n77K bss, 43540K reserved, 8192K cma-reserved)\n[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=4, Nodes=1\n[    0.000000] ftrace: allocating 37325 entries in 146 pages\n[    0.000000] ftrace: allocated 146 pages with 3 groups\n[    0.000000] trace event string verifier disabled\n[    0.000000] rcu: Preemptible hierarchical RCU implementation.\n[    0.000000] rcu:     RCU event tracing is enabled.\n[    0.000000] rcu:     RCU restricting CPUs from NR_CPUS=256 to nr_cpu_ids=4.\n[    0.000000]  Trampoline variant of Tasks RCU enabled.\n[    0.000000]  Rude variant of Tasks RCU enabled.\n[    0.000000]  Tracing variant of Tasks RCU enabled.\n[    0.000000] rcu: RCU calculated value of scheduler-enlistment delay is 25 jiffies.\n[    0.000000] rcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=4\n[    0.000000] NR_IRQS: 64, nr_irqs: 64, preallocated irqs: 0\n[    0.000000] Root IRQ handler: gic_handle_irq\n[    0.000000] GICv2m: range[mem 0x08020000-0x08020fff], SPI[80:143]\n[    0.000000] rcu: srcu_init: Setting srcu_struct sizes based on contention.\n[    0.000000] arch_timer: cp15 timer(s) running at 62.50MHz (virt).\n[    0.000000] clocksource: arch_sys_counter: mask: 0x1ffffffffffffff max_cycles: 0x1cd42e208c, max_idle_ns: 8815\n90405314 ns\n[    0.000064] sched_clock: 57 bits at 63MHz, resolution 16ns, wraps every 4398046511096ns\n[    0.006445] Console: colour dummy device 80x25\n[    0.007285] Calibrating delay loop (skipped), value calculated using timer frequency.. 125.00 BogoMIPS (lpj=25\n0000)\n[    0.007432] pid_max: default: 32768 minimum: 301\n[    0.008020] LSM: Security Framework initializing\n[    0.010918] Mount-cache hash table entries: 2048 (order: 2, 16384 bytes, linear)\n[    0.010954] Mountpoint-cache hash table entries: 2048 (order: 2, 16384 bytes, linear)\n[    0.022082] cgroup: Disabling memory control group subsystem\n[    0.034556] cacheinfo: Unable to detect cache hierarchy for CPU 0\n[    0.039516] cblist_init_generic: Setting adjustable number of callback queues.\n[    0.039533] cblist_init_generic: Setting shift to 2 and lim to 1.\n[    0.039754] cblist_init_generic: Setting adjustable number of callback queues.\n[    0.039761] cblist_init_generic: Setting shift to 2 and lim to 1.\n[    0.040200] cblist_init_generic: Setting adjustable number of callback queues.\n[    0.040208] cblist_init_generic: Setting shift to 2 and lim to 1.\n[    0.041103] rcu: Hierarchical SRCU implementation.\n[    0.041132] rcu:     Max phase no-delay instances is 1000.\n[    0.044119] EFI services will not be available.\n[    0.045078] smp: Bringing up secondary CPUs ...\n[    0.047405] Detected VIPT I-cache on CPU1\n[    0.047947] cacheinfo: Unable to detect cache hierarchy for CPU 1\n[    0.048207] CPU1: Booted secondary processor 0x0000000001 [0x410fd034]\n[    0.051855] Detected VIPT I-cache on CPU2\n[    0.052000] cacheinfo: Unable to detect cache hierarchy for CPU 2\n[    0.052314] CPU2: Booted secondary processor 0x0000000002 [0x410fd034]\n[    0.053550] Detected VIPT I-cache on CPU3\n[    0.053705] cacheinfo: Unable to detect cache hierarchy for CPU 3\n[    0.053831] CPU3: Booted secondary processor 0x0000000003 [0x410fd034]\n[    0.054441] smp: Brought up 1 node, 4 CPUs\n[    0.054468] SMP: Total of 4 processors activated.\n[    0.054532] CPU features: detected: 32-bit EL0 Support\n[    0.054544] CPU features: detected: 32-bit EL1 Support\n[    0.054584] CPU features: detected: CRC32 instructions\n[    0.059047] CPU: All CPU(s) started at EL1\n[    0.059172] alternatives: applying system-wide alternatives\n[    0.077746] devtmpfs: initialized\n[    0.084331] Enabled cp15_barrier support\n[    0.084543] Enabled setend support\n[    0.085308] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 7645041785100000 ns\n[    0.085476] futex hash table entries: 1024 (order: 4, 65536 bytes, linear)\n[    0.088006] pinctrl core: initialized pinctrl subsystem\n[    0.095251] DMI not present or invalid.\n[    0.102137] NET: Registered PF_NETLINK/PF_ROUTE protocol family\n[    0.123139] DMA: preallocated 128 KiB GFP_KERNEL pool for atomic allocations\n[    0.131888] DMA: preallocated 128 KiB GFP_KERNEL|GFP_DMA pool for atomic allocations\n[    0.132158] DMA: preallocated 128 KiB GFP_KERNEL|GFP_DMA32 pool for atomic allocations\n[    0.132483] audit: initializing netlink subsys (disabled)\n[    0.135135] audit: type=2000 audit(0.104:1): state=initialized audit_enabled=0 res=1\n[    0.141066] thermal_sys: Registered thermal governor 'step_wise'\n[    0.141414] cpuidle: using governor menu\n[    0.142326] hw-breakpoint: found 6 breakpoint and 4 watchpoint registers.\n[    0.144656] ASID allocator initialised with 32768 entries\n[    0.147476] Serial: AMBA PL011 UART driver\n[    0.166773] 9000000.pl011: ttyAMA0 at MMIO 0x9000000 (irq = 13, base_baud = 0) is a PL011 rev1\n[    0.183421] printk: console [ttyAMA0] enabled\n[    0.191239] KASLR enabled\n[    0.235550] iommu: Default domain type: Translated \n[    0.235762] iommu: DMA domain TLB invalidation policy: strict mode \n[    0.237203] SCSI subsystem initialized\n[    0.238261] usbcore: registered new interface driver usbfs\n[    0.238612] usbcore: registered new interface driver hub\n[    0.238849] usbcore: registered new device driver usb\n[    0.239748] pps_core: LinuxPPS API ver. 1 registered\n[    0.239848] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt;\n[    0.240096] PTP clock support registered\n[    0.250926] vgaarb: loaded\n[    0.253956] clocksource: Switched to clocksource arch_sys_counter\n[    0.294826] VFS: Disk quotas dquot_6.6.0\n[    0.295380] VFS: Dquot-cache hash table entries: 512 (order 0, 4096 bytes)\n[    0.296482] FS-Cache: Loaded\n[    0.297654] CacheFiles: Loaded\n[    0.324139] NET: Registered PF_INET protocol family\n[    0.325872] IP idents hash table entries: 16384 (order: 5, 131072 bytes, linear)\n[    0.332629] tcp_listen_portaddr_hash hash table entries: 512 (order: 1, 8192 bytes, linear)\n[    0.332905] Table-perturb hash table entries: 65536 (order: 6, 262144 bytes, linear)\n[    0.333184] TCP established hash table entries: 8192 (order: 4, 65536 bytes, linear)\n[    0.333487] TCP bind hash table entries: 8192 (order: 6, 262144 bytes, linear)\n[    0.333848] TCP: Hash tables configured (established 8192 bind 8192)\n[    0.335793] MPTCP token hash table entries: 1024 (order: 2, 24576 bytes, linear)\n[    0.336351] UDP hash table entries: 512 (order: 2, 16384 bytes, linear)\n[    0.336807] UDP-Lite hash table entries: 512 (order: 2, 16384 bytes, linear)\n[    0.338590] NET: Registered PF_UNIX/PF_LOCAL protocol family\n[    0.339253] PCI: CLS 0 bytes, default 64\n[    0.345166] hw perfevents: enabled with armv8_pmuv3 PMU driver, 7 counters available\n[    0.346258] kvm [1]: HYP mode not available\n[    0.349519] Initialise system trusted keyrings\n[    0.355126] workingset: timestamp_bits=46 max_order=18 bucket_order=0\n[    0.362733] zbud: loaded\n[    0.366603] fuse: init (API version 7.37)\n[    0.371890] Key type asymmetric registered\n[    0.372099] Asymmetric key parser 'x509' registered\n[    0.374508] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 247)\n[    0.375955] io scheduler mq-deadline registered\n[    0.376200] io scheduler kyber registered\n[    0.392951] vc-mem: phys_addr:0x00000000 mem_base=0x00000000 mem_size:0x00000000(0 MiB)\n[    0.394612] cacheinfo: Unable to detect cache hierarchy for CPU 0\n[    0.433056] brd: module loaded\n[    0.458285] loop: module loaded\n[    0.461613] Loading iSCSI transport class v2.0-870.\n[    0.479555] usbcore: registered new device driver r8152-cfgselector\n[    0.480203] usbcore: registered new interface driver r8152\n[    0.480620] usbcore: registered new interface driver lan78xx\n[    0.480939] usbcore: registered new interface driver smsc95xx\n[    0.482189] dwc_otg: version 3.00a 10-AUG-2012 (platform bus)\n[    0.484459] usbcore: registered new interface driver uas\n[    0.484956] usbcore: registered new interface driver usb-storage\n[    0.486785] mousedev: PS/2 mouse device common for all mice\n[    0.489593] sdhci: Secure Digital Host Controller Interface driver\n[    0.492257] sdhci: Copyright(c) Pierre Ossman\n[    0.492837] sdhci-pltfm: SDHCI platform and OF driver helper\n[    0.495263] ledtrig-cpu: registered to indicate activity on CPUs\n[    0.497058] hid: raw HID events driver (C) Jiri Kosina\n[    0.497812] usbcore: registered new interface driver usbhid\n[    0.498205] usbhid: USB HID core driver\n[    0.499864] NET: Registered PF_PACKET protocol family\n[    0.500499] Key type dns_resolver registered\n[    0.506127] registered taskstats version 1\n[    0.506673] Loading compiled-in X.509 certificates\n[    0.511253] Key type .fscrypt registered\n[    0.511430] Key type fscrypt-provisioning registered\n[    0.527709] of_cfs_init\n[    0.529552] of_cfs_init: OK\n[    0.543193] uart-pl011 9000000.pl011: no DMA platform data\n[    0.547956] virtio-fs: tag &lt;myfs&gt; not found\n[    0.548910] virtio-fs: tag &lt;/dev/root&gt; not found\n[    0.549276] virtio-fs: tag &lt;/dev/root&gt; not found\n[    0.549511] List of all partitions:\n[    0.550202] 0100            4096 ram0 \n[    0.550288]  (driver?)\n[    0.550633] 0101            4096 ram1 \n[    0.550647]  (driver?)\n[    0.550953] 0102            4096 ram2 \n[    0.550964]  (driver?)\n[    0.551228] 0103            4096 ram3 \n[    0.551238]  (driver?)\n[    0.552880] 0104            4096 ram4 \n[    0.552894]  (driver?)\n[    0.555123] 0105            4096 ram5 \n[    0.555187]  (driver?)\n[    0.555736] 0106            4096 ram6 \n[    0.555781]  (driver?)\n[    0.555914] 0107            4096 ram7 \n[    0.555924]  (driver?)\n[    0.556232] 0108            4096 ram8 \n[    0.556241]  (driver?)\n[    0.556548] 0109            4096 ram9 \n[    0.556558]  (driver?)\n[    0.556850] 010a            4096 ram10 \n[    0.556861]  (driver?)\n[    0.557149] 010b            4096 ram11 \n[    0.557158]  (driver?)\n[    0.557435] 010c            4096 ram12 \n[    0.557445]  (driver?)\n[    0.557771] 010d            4096 ram13 \n[    0.557783]  (driver?)\n[    0.558090] 010e            4096 ram14 \n[    0.558100]  (driver?)\n[    0.558389] 010f            4096 ram15 \n[    0.558400]  (driver?)\n[    0.558807] No filesystem could mount root, tried: \n[    0.558831]  virtiofs\n[    0.559076] \n[    0.559463] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)\n[    0.561078] CPU: 2 PID: 1 Comm: swapper/0 Not tainted 6.1.77-v8+ #6\n[    0.561373] Hardware name: linux,dummy-virt (DT)\n[    0.561766] Call trace:\n[    0.562125]  dump_backtrace.part.0+0xe8/0xf4\n[    0.562534]  show_stack+0x20/0x30\n[    0.562770]  dump_stack_lvl+0x64/0x80\n[    0.562991]  dump_stack+0x18/0x34\n[    0.563152]  panic+0x190/0x354\n[    0.563318]  mount_block_root+0x228/0x248\n[    0.563470]  mount_root+0x188/0x1a8\n[    0.563893]  prepare_namespace+0x134/0x174\n[    0.564280]  kernel_init_freeable+0x278/0x2a4\n[    0.569294]  kernel_init+0x2c/0x140\n[    0.569523]  ret_from_fork+0x10/0x20\n[    0.570093] SMP: stopping secondary CPUs\n[    0.570716] Kernel Offset: 0x1f77c00000 from 0xffffffc008000000\n[    0.570996] PHYS_OFFSET: 0x40000000\n[    0.571181] CPU features: 0x00000,00900080,0000421b\n[    0.572134] Memory Limit: none\n[    0.572638] ---[ end Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0) ]---\n</code></pre> issues &amp; patchs  - https://github.com/cloud-hypervisor/cloud-hypervisor/discussions/2719 - https://lore.kernel.org/linux-fsdevel/20231005203030.223489-1-vgoyal@redhat.com/ - https://gitlab.com/virtio-fs/virtiofsd/-/issues/128 - https://github.com/systemd/systemd-stable/pull/366/files - https://github.com/systemd/mkosi/issues/2371"},{"location":"notes/posts/51%23%5Blinux%5D%5Bbuildroot%5D%20buildroot%20intro/","title":"51 [linux][buildroot] buildroot intro","text":"<p>https://buildroot.org/downloads/manual/manual.htm</p>"},{"location":"notes/posts/52%23%5Brtos%5D%5Bfreertos%5D%20freerots%20collection/","title":"52 [rtos][freertos] freerots collection","text":"<ul> <li>https://www.freertos.org/RTOS-ARM-Cortex-R5-Xilinx-UltraScale_MPSoC.html</li> <li>https://www.freertos.org/Documentation/RTOS_book.html</li> </ul>"},{"location":"notes/posts/53%23%5Bsw%5D%5Blinux%5D%5Bbuild%5D%5Bmakefile%5D%5Bmake%5D%20makefile%20tutorials/","title":"53 [sw][linux][build][makefile][make] makefile tutorials","text":""},{"location":"notes/posts/53%23%5Bsw%5D%5Blinux%5D%5Bbuild%5D%5Bmakefile%5D%5Bmake%5D%20makefile%20tutorials/#tip-1","title":"Tip 1","text":"<p>Makefiles absolutely do allow for indented if statements, or rather indented conditionals to be more precise. What they don't allow for - at least out of the box - are tabbed conditionals. This is because, by default, Make interprets tabs as especially meaningful characters. Almost any line beginning with a tab character is interpreted to be part of a recipe. Therefore, any line that is not intended to be part of a recipe - such as conditionals - should not begin with a tab.</p>"},{"location":"notes/posts/53%23%5Bsw%5D%5Blinux%5D%5Bbuild%5D%5Bmakefile%5D%5Bmake%5D%20makefile%20tutorials/#comments","title":"Comments","text":""},{"location":"notes/posts/53%23%5Bsw%5D%5Blinux%5D%5Bbuild%5D%5Bmakefile%5D%5Bmake%5D%20makefile%20tutorials/#konosubakonoakua-2025-07-22t085755z","title":"konosubakonoakua \u00b7 2025-07-22T08:57:55Z","text":"<ul> <li>https://clarkgrubb.com/makefile-style-guide</li> <li>https://makefiletutorial.com/</li> </ul>"},{"location":"notes/posts/53%23%5Bsw%5D%5Blinux%5D%5Bbuild%5D%5Bmakefile%5D%5Bmake%5D%20makefile%20tutorials/#konosubakonoakua-2025-07-22t094844z","title":"konosubakonoakua \u00b7 2025-07-22T09:48:44Z","text":"<pre><code># Thanks to Job Vranish (https://spin.atomicobject.com/2016/08/26/makefile-c-projects/)\nTARGET_EXEC := final_program\n\nBUILD_DIR := ./build\nSRC_DIRS := ./src\n\n# Find all the C and C++ files we want to compile\n# Note the single quotes around the * expressions. The shell will incorrectly expand these otherwise, but we want to send the * directly to the find command.\nSRCS := $(shell find $(SRC_DIRS) -name '*.cpp' -or -name '*.c' -or -name '*.s')\n\n# Prepends BUILD_DIR and appends .o to every src file\n# As an example, ./your_dir/hello.cpp turns into ./build/./your_dir/hello.cpp.o\nOBJS := $(SRCS:%=$(BUILD_DIR)/%.o)\n\n# String substitution (suffix version without %).\n# As an example, ./build/hello.cpp.o turns into ./build/hello.cpp.d\nDEPS := $(OBJS:.o=.d)\n\n# Every folder in ./src will need to be passed to GCC so that it can find header files\nINC_DIRS := $(shell find $(SRC_DIRS) -type d)\n# Add a prefix to INC_DIRS. So moduleA would become -ImoduleA. GCC understands this -I flag\nINC_FLAGS := $(addprefix -I,$(INC_DIRS))\n\n# The -MMD and -MP flags together generate Makefiles for us!\n# These files will have .d instead of .o as the output.\nCPPFLAGS := $(INC_FLAGS) -MMD -MP\n\n# The final build step.\n$(BUILD_DIR)/$(TARGET_EXEC): $(OBJS)\n    $(CXX) $(OBJS) -o $@ $(LDFLAGS)\n\n# Build step for C source\n$(BUILD_DIR)/%.c.o: %.c\n    mkdir -p $(dir $@)\n    $(CC) $(CPPFLAGS) $(CFLAGS) -c $&lt; -o $@\n\n# Build step for C++ source\n$(BUILD_DIR)/%.cpp.o: %.cpp\n    mkdir -p $(dir $@)\n    $(CXX) $(CPPFLAGS) $(CXXFLAGS) -c $&lt; -o $@\n\n\n.PHONY: clean\nclean:\n    rm -r $(BUILD_DIR)\n\n# Include the .d makefiles. The - at the front suppresses the errors of missing\n# Makefiles. Initially, all the .d files will be missing, and we don't want those\n# errors to show up.\n-include $(DEPS)\n</code></pre>"},{"location":"notes/posts/54%23%5Bhw%5D%5Bsw%5D%5Blinux%5D%20WhyCan%20Forum/","title":"54 [hw][sw][linux] WhyCan Forum","text":"<p>\u2605\u2605\u2605\u2606\u2606\u2606 \u672c\u7ad9\u7cbe\u534e\u5e16\u6c47\u603b, \u5404\u79cd\u624b\u518c\u5728\u7ebf\u4e0b\u8f7d\uff0c\u5404\u79cd\u5f00\u6e90pcb\u5de5\u7a0b\u4e0b\u8f7d \u2606\u2606\u2606\u2605\u2605\u2605</p>"},{"location":"notes/posts/55%23%5Bci%5D%5Bgithub%5D%5Baction%5D%5Bworkflow%5D%20github%20action%20intro/","title":"55 [ci][github][action][workflow] github action intro","text":""},{"location":"notes/posts/55%23%5Bci%5D%5Bgithub%5D%5Baction%5D%5Bworkflow%5D%20github%20action%20intro/#how-to-add-manual-trigger","title":"how to add manual trigger","text":"<p>need <code>workflow_dispatch</code>. <pre><code>name: update lockfile\non:\n  # Scheduled update (each day)\n  schedule: [{ cron: \"30 01 * * *\" }]\n  workflow_dispatch:\n</code></pre></p>"},{"location":"notes/posts/56%23%5Bcpp%5D%5Bbuild%5D%5Bcmake%5D%5Bvcpkg%5D%20vcpkg%20tutorial/","title":"56 [cpp][build][cmake][vcpkg] vcpkg tutorial","text":"<ul> <li>https://njakob.com/shorts/sdl2-setup-with-vcpkg</li> <li>https://github.com/microsoft/vcpkg</li> <li>https://github.com/microsoft/vcpkg?tab=readme-ov-file#vcpkg-as-a-submodule-with-cmake</li> </ul>"},{"location":"notes/posts/57%23%5Bsw%5D%5Bdesign%20pattern%5D%20introduction/","title":"57 [sw][design pattern] introduction","text":"<p>https://refactoringguru.cn/design-patterns/</p>"},{"location":"notes/posts/58%23%5Bsw%5D%5Bpy%5D%5Bdl%5D%5Bviz%5D%20visualization%20for%20deeplearning/","title":"58 [sw][py][dl][viz] visualization for deeplearning","text":"<p>https://explained.ai/</p>"},{"location":"notes/posts/59%23%5Bsw%5D%5Blinux%5D%5Bkernel%5D%5Bdriver%5D%20debugging%20tools/","title":"59 [sw][linux][kernel][driver] debugging tools","text":""},{"location":"notes/posts/59%23%5Bsw%5D%5Blinux%5D%5Bkernel%5D%5Bdriver%5D%20debugging%20tools/#kgdb","title":"kgdb","text":"<ul> <li>https://www.kernel.org/doc/html/latest/dev-tools/kgdb.html</li> <li>https://sergioprado.blog/debugging-the-linux-kernel-with-gdb/</li> </ul> <p>https://ktln2.org/2020/02/14/debugging-linux-kernel-drivers/</p>"},{"location":"notes/posts/60%23%5Bhw%5D%5Bpower%5D%5Bmosfet%5D%5Bbjt%5D%20use%20BJT%20to%20drive%20MOSFET/","title":"60 [hw][power][mosfet][bjt] use BJT to drive MOSFET","text":""},{"location":"notes/posts/60%23%5Bhw%5D%5Bpower%5D%5Bmosfet%5D%5Bbjt%5D%20use%20BJT%20to%20drive%20MOSFET/#low-side","title":"low side","text":"3 low side demos  - https://www.youtube.com/watch?v=wv4uAz8FV2w ![low side](../assets/60/1.png)"},{"location":"notes/posts/60%23%5Bhw%5D%5Bpower%5D%5Bmosfet%5D%5Bbjt%5D%20use%20BJT%20to%20drive%20MOSFET/#high-side","title":"high side","text":"3 high side demos  - https://www.youtube.com/watch?v=M5lETaqI9JM ![high side](../assets/60/2.png)"},{"location":"notes/posts/60%23%5Bhw%5D%5Bpower%5D%5Bmosfet%5D%5Bbjt%5D%20use%20BJT%20to%20drive%20MOSFET/#comments","title":"Comments","text":""},{"location":"notes/posts/60%23%5Bhw%5D%5Bpower%5D%5Bmosfet%5D%5Bbjt%5D%20use%20BJT%20to%20drive%20MOSFET/#konosubakonoakua-2024-06-17t171043z","title":"konosubakonoakua \u00b7 2024-06-17T17:10:43Z","text":""},{"location":"notes/posts/60%23%5Bhw%5D%5Bpower%5D%5Bmosfet%5D%5Bbjt%5D%20use%20BJT%20to%20drive%20MOSFET/#video-tutorial","title":"video tutorial","text":"<ul> <li>Power MOSFET drivers</li> <li>BJT push-pull gate drivers: when good intentions lead to a bad design</li> <li>They Mislead You About MOSFETs</li> </ul>"},{"location":"notes/posts/60%23%5Bhw%5D%5Bpower%5D%5Bmosfet%5D%5Bbjt%5D%20use%20BJT%20to%20drive%20MOSFET/#konosubakonoakua-2024-06-17t181330z","title":"konosubakonoakua \u00b7 2024-06-17T18:13:30Z","text":""},{"location":"notes/posts/60%23%5Bhw%5D%5Bpower%5D%5Bmosfet%5D%5Bbjt%5D%20use%20BJT%20to%20drive%20MOSFET/#miller-capacitor","title":"miller capacitor","text":"\u4e00\u4e2a\u516c\u5f0f\u90fd\u6ca1\u6709 MOS\u7c73\u52d2\u7535\u5bb9\u7684\u901a\u4fd7\u8bb2\u89e3  ### [\u4e00\u4e2a\u516c\u5f0f\u90fd\u6ca1\u6709 MOS\u7c73\u52d2\u7535\u5bb9\u7684\u901a\u4fd7\u8bb2\u89e3](https://www.bilibili.com/video/BV1QA4y1R7gJ)  ![ciss](../assets/60/3.png)  ![mosfet phase 1](../assets/60/4.png)  ![mosfet phase 2](../assets/60/5.png)  ![mosfet phase 3](../assets/60/6.png)  ![mosfet miller solution pushpull](../assets/60/7.png)"},{"location":"notes/posts/60%23%5Bhw%5D%5Bpower%5D%5Bmosfet%5D%5Bbjt%5D%20use%20BJT%20to%20drive%20MOSFET/#konosubakonoakua-2024-06-17t185827z","title":"konosubakonoakua \u00b7 2024-06-17T18:58:27Z","text":""},{"location":"notes/posts/60%23%5Bhw%5D%5Bpower%5D%5Bmosfet%5D%5Bbjt%5D%20use%20BJT%20to%20drive%20MOSFET/#push-pull","title":"push-pull","text":""},{"location":"notes/posts/60%23%5Bhw%5D%5Bpower%5D%5Bmosfet%5D%5Bbjt%5D%20use%20BJT%20to%20drive%20MOSFET/#electric-bicyle","title":"electric bicyle","text":"electric bicyle push-pull example  ![image](../assets/60/8.png)"},{"location":"notes/posts/61%23%5Bhw%5D%5Barm%5D%5Bfpga%5D%20axi%20bus/","title":"61 [hw][arm][fpga] axi bus","text":""},{"location":"notes/posts/61%23%5Bhw%5D%5Barm%5D%5Bfpga%5D%20axi%20bus/#tutorials","title":"tutorials","text":""},{"location":"notes/posts/61%23%5Bhw%5D%5Barm%5D%5Bfpga%5D%20axi%20bus/#zipcpu","title":"zipcpu","text":"<ul> <li>zipcpu learning-axi</li> </ul>"},{"location":"notes/posts/62%23%5Blife%5D%5Bmedical%5D%20collections/","title":"62 [life][medical] collections","text":"<ul> <li>\u9ed8\u6c99\u4e1c\u533b\u7597\u624b\u518c</li> </ul>"},{"location":"notes/posts/63%23%5Bhw%5D%5Banalog%5D%5Bsimulator%5D%20collection/","title":"63 [hw][analog][simulator] collection","text":""},{"location":"notes/posts/63%23%5Bhw%5D%5Banalog%5D%5Bsimulator%5D%20collection/#circuitlab","title":"circuitlab","text":"<ul> <li>https://www.circuitlab.com/editor</li> <li>examples</li> <li>textbook</li> </ul>"},{"location":"notes/posts/63%23%5Bhw%5D%5Banalog%5D%5Bsimulator%5D%20collection/#circuitjs","title":"circuitjs","text":"<ul> <li>falstad circuitjs</li> <li>examples</li> </ul>"},{"location":"notes/posts/63%23%5Bhw%5D%5Banalog%5D%5Bsimulator%5D%20collection/#kicad-ngspice","title":"kicad (ngspice)","text":"<ul> <li>eeschema simulator</li> <li>https://www.kicad.org/discover/spice/</li> <li>https://forum.kicad.info/t/simulation-examples-for-kicad-eeschema-ngspice/34443/</li> <li>https://forum.kicad.info/t/where-do-i-find-models-for-ngspice/</li> <li>https://ngspice.sourceforge.io/ngspice-eeschema.html</li> </ul>"},{"location":"notes/posts/63%23%5Bhw%5D%5Banalog%5D%5Bsimulator%5D%20collection/#ltspice","title":"ltspice","text":"<ul> <li>adi ltspice</li> </ul>"},{"location":"notes/posts/63%23%5Bhw%5D%5Banalog%5D%5Bsimulator%5D%20collection/#comments","title":"Comments","text":""},{"location":"notes/posts/63%23%5Bhw%5D%5Banalog%5D%5Bsimulator%5D%20collection/#konosubakonoakua-2024-06-18t115811z","title":"konosubakonoakua \u00b7 2024-06-18T11:58:11Z","text":""},{"location":"notes/posts/63%23%5Bhw%5D%5Banalog%5D%5Bsimulator%5D%20collection/#_1","title":"[hw][analog][simulator] collection","text":""},{"location":"notes/posts/64%23%5Bsw%5D%5Bprogramming%5D%5Bc%5D%5Btutorial%5D%20classes%20in%20c/","title":"64 [sw][programming][c][tutorial] classes in c","text":"<p>https://www.pvv.ntnu.no/~hakonhal/main.cgi/c/classes/</p>"},{"location":"notes/posts/66%23%5Bsw%5D%5Bprogramming%5D%5Bpy%5D%20python%20tutorial%20for%20scientists/","title":"66 [sw][programming][py] python tutorial for scientists","text":"<ul> <li>https://github.com/venkatesannaveen/python-science-tutorial</li> </ul>"},{"location":"notes/posts/67%23%5Bdev%5D%5Benv%5D%5Bsetup%5D%20windows%20developer%20environment%20setup/","title":"67 [dev][env][setup] windows developer environment setup","text":""},{"location":"notes/posts/67%23%5Bdev%5D%5Benv%5D%5Bsetup%5D%20windows%20developer%20environment%20setup/#winget","title":"winget","text":"<pre><code>winget install microsoft.powershell\nwinget install marticliment.unigetui\nwinget install microsoft.powertoys\nwinget install microsoft.bingwallpaper\nwinget install microsoft.dotnet.sdk.8\nwinget install microsoft.visualstudio.2022.buildtools\nwinget install microsoft.windowssdk.10.0.18362\nwinget install microsoft.dotnet.desktopruntime.9\n\nwinget install microsoft.vcredist.2005.x86\nwinget install microsoft.vcredist.2005.x64\nwinget install microsoft.vcredist.2008.x64\nwinget install microsoft.vcredist.2008.x86\nwinget install microsoft.vcredist.2010.x64\nwinget install microsoft.vcredist.2010.x86\nwinget install microsoft.vcredist.2013.x64\nwinget install microsoft.vcredist.2013.x86\nwinget install microsoft.vcredist.2015+.x64\nwinget install microsoft.vcredist.2015+.x86\n</code></pre>"},{"location":"notes/posts/67%23%5Bdev%5D%5Benv%5D%5Bsetup%5D%20windows%20developer%20environment%20setup/#scoop","title":"scoop","text":"<pre><code>7zip\nbulk-crap-uninstaller\ncmake\ngh\ngit\nlazygit\nlilex-nf\nneovide\nneovim\nrustup\nsioyek\nspeedcrunch\ntree-sitter\nwakatime-cli\nzig\n</code></pre>"},{"location":"notes/posts/67%23%5Bdev%5D%5Benv%5D%5Bsetup%5D%20windows%20developer%20environment%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/67%23%5Bdev%5D%5Benv%5D%5Bsetup%5D%20windows%20developer%20environment%20setup/#konosubakonoakua-2024-06-28t112806z","title":"konosubakonoakua \u00b7 2024-06-28T11:28:06Z","text":""},{"location":"notes/posts/67%23%5Bdev%5D%5Benv%5D%5Bsetup%5D%20windows%20developer%20environment%20setup/#go","title":"go\u6362\u6e90","text":"<pre><code># \u542f\u7528 Go Modules \u529f\u80fd\n$env:GO111MODULE=\"on\"\n\n# \u914d\u7f6e GOPROXY \u73af\u5883\u53d8\u91cf\uff0c\u4ee5\u4e0b\u4e09\u9009\u4e00\n\n# 1. \u4e03\u725b CDN\n$env:GOPROXY=\"https://goproxy.cn,direct\"\n\n# 2. \u963f\u91cc\u4e91\n$env:GOPROXY=\"https://mirrors.aliyun.com/goproxy/,direct\"\n\n# 3. \u5b98\u65b9\n$env:GOPROXY=\"https://goproxy.io,direct\"\n</code></pre>"},{"location":"notes/posts/67%23%5Bdev%5D%5Benv%5D%5Bsetup%5D%20windows%20developer%20environment%20setup/#konosubakonoakua-2024-12-06t030949z","title":"konosubakonoakua \u00b7 2024-12-06T03:09:49Z","text":""},{"location":"notes/posts/67%23%5Bdev%5D%5Benv%5D%5Bsetup%5D%20windows%20developer%20environment%20setup/#huorong","title":"huorong","text":"<pre><code>vscode.exe;nvim.exe;python.exe;ruff.exe;make.exe;ty.exe;lazygit.exe;fzf.exe;yazi.exe;zoxide.exe;starship.exe;git.exe;scp.exe;ssh.exe;fd.exe;grep.exe;rg.exe;WindowsTerminal.exe;vivado.exe;vivado_lab.exe;vitis_hls.exe;vitis-run.exe;vitis-ide.exe;vitis_analyzer.exe;rdi_vitis.exe;edit.exe;rdi_xsct.exe;rdi_xsdb.exe;rdi_xilmfs.exe;rdi_zynq_flash.exe;cs_server.exe;cs_server_pytcf.exe;cs_server.bat;rdi_program_ftdi.exe;\n</code></pre>"},{"location":"notes/posts/67%23%5Bdev%5D%5Benv%5D%5Bsetup%5D%20windows%20developer%20environment%20setup/#konosubakonoakua-2025-10-13t090917z","title":"konosubakonoakua \u00b7 2025-10-13T09:09:17Z","text":""},{"location":"notes/posts/67%23%5Bdev%5D%5Benv%5D%5Bsetup%5D%20windows%20developer%20environment%20setup/#powershell-profile","title":"powershell profile","text":"<ul> <li>profile</li> </ul> <pre><code>#$profile\n$MaximumHistoryCount = 32767\n\n. \"$profile/../psreadline.ps1\"\n\n## starship\nInvoke-Expression (&amp;starship init powershell)\nInvoke-Expression (&amp; { (zoxide init powershell | Out-String) })\n\nfunction nvimn {\n    param(\n        [string]$filePath,\n        [switch]$clean,\n        [switch]$help\n    )\n    if ($help) {\n        Write-Host \"Usage: nvimn [&lt;filePath&gt;] [-clean] [-help]\"\n        return\n    }\n    $args = @(\"-u\", \"NONE\")\n    if ($clean) { $args += \"-i\", \"NONE\" }\n    if ($filePath) { $args += $filePath }\n    nvim @args\n}\n\nfunction Toggle-Proxy {\n    $proxy = \"http://127.0.0.1:7897\"\n    try {\n        $testResult = Test-NetConnection -ComputerName 127.0.0.1 -Port 7897 -InformationLevel Quiet\n        if (-not $testResult) {\n            Write-Host \"\u274c Proxy port 7897 is not accessible - is Clash Verge running?\"\n            return\n        }\n    } catch {\n        Write-Host \"\u274c Cannot test proxy connection\"\n    }\n\n    if ($env:HTTP_PROXY -eq $proxy) {\n        Write-Host \"\ud83d\udd34 Proxy cleared\"\n        Remove-Item Env:HTTP_PROXY -ErrorAction SilentlyContinue\n        Remove-Item Env:HTTPS_PROXY -ErrorAction SilentlyContinue\n        Remove-Item Env:ALL_PROXY -ErrorAction SilentlyContinue\n        scoop config rm proxy\n    } else {\n        Write-Host \"\ud83d\udfe2 Proxy Running @ $proxy\"\n        $env:HTTP_PROXY  = $proxy\n        $env:HTTPS_PROXY = $proxy\n        $env:ALL_PROXY   = $proxy\n        scoop config proxy $proxy\n    }\n}\n</code></pre> <ul> <li>psreadline</li> </ul> <pre><code>using namespace System.Management.Automation\nusing namespace System.Management.Automation.Language\n\n# This is an example profile for PSReadLine.\n#\n# This is roughly what I use so there is some emphasis on emacs bindings,\n# but most of these bindings make sense in Windows mode as well.\n\nImport-Module PSReadLine\n\nSet-PSReadLineOption -EditMode Emacs\n\n# replace 'Ctrl+t' and 'Ctrl+r' with your preferred bindings:\nSet-PsFzfOption -PSReadlineChordProvider 'Ctrl+t' -PSReadlineChordReverseHistory 'Ctrl+r'\n\nSet-PSReadLineKeyHandler -Chord 'Ctrl+d' -ScriptBlock { [System.Environment]::Exit(0) }\n\n# Searching for commands with up/down arrow is really handy.  The\n# option \"moves to end\" is useful if you want the cursor at the end\n# of the line while cycling through history like it does w/o searching,\n# without that option, the cursor will remain at the position it was\n# when you used up arrow, which can be useful if you forget the exact\n# string you started the search on.\nSet-PSReadLineOption -HistorySearchCursorMovesToEnd\nSet-PSReadLineKeyHandler -Key UpArrow -Function HistorySearchBackward\nSet-PSReadLineKeyHandler -Key DownArrow -Function HistorySearchForward\n\n# # This key handler shows the entire or filtered history using Out-GridView. The\n# # typed text is used as the substring pattern for filtering. A selected command\n# # is inserted to the command line without invoking. Multiple command selection\n# # is supported, e.g. selected by Ctrl + Click.\n# # As another example, the module 'F7History' does something similar but uses the\n# # console GUI instead of Out-GridView. Details about this module can be found at\n# # PowerShell Gallery: https://www.powershellgallery.com/packages/F7History.\n# Set-PSReadLineKeyHandler -Key F7 `\n#                          -BriefDescription History `\n#                          -LongDescription 'Show command history' `\n#                          -ScriptBlock {\n#     $pattern = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$pattern, [ref]$null)\n#     if ($pattern)\n#     {\n#         $pattern = [regex]::Escape($pattern)\n#     }\n#\n#     $history = [System.Collections.ArrayList]@(\n#         $last = ''\n#         $lines = ''\n#         foreach ($line in [System.IO.File]::ReadLines((Get-PSReadLineOption).HistorySavePath))\n#         {\n#             if ($line.EndsWith('`'))\n#             {\n#                 $line = $line.Substring(0, $line.Length - 1)\n#                 $lines = if ($lines)\n#                 {\n#                     \"$lines`n$line\"\n#                 }\n#                 else\n#                 {\n#                     $line\n#                 }\n#                 continue\n#             }\n#\n#             if ($lines)\n#             {\n#                 $line = \"$lines`n$line\"\n#                 $lines = ''\n#             }\n#\n#             if (($line -cne $last) -and (!$pattern -or ($line -match $pattern)))\n#             {\n#                 $last = $line\n#                 $line\n#             }\n#         }\n#     )\n#     $history.Reverse()\n#\n#     $command = $history | Out-GridView -Title History -PassThru\n#     if ($command)\n#     {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::RevertLine()\n#         [Microsoft.PowerShell.PSConsoleReadLine]::Insert(($command -join \"`n\"))\n#     }\n# }\n\n# # This is an example of a macro that you might use to execute a command.\n# # This will add the command to history.\n# Set-PSReadLineKeyHandler -Key Ctrl+b `\n#                          -BriefDescription BuildCurrentDirectory `\n#                          -LongDescription \"Build the current directory\" `\n#                          -ScriptBlock {\n#     [Microsoft.PowerShell.PSConsoleReadLine]::RevertLine()\n#     [Microsoft.PowerShell.PSConsoleReadLine]::Insert(\"msbuild\")\n#     [Microsoft.PowerShell.PSConsoleReadLine]::AcceptLine()\n# }\n\n# # In Emacs mode - Tab acts like in bash, but the Windows style completion\n# # is still useful sometimes, so bind some keys so we can do both\n# Set-PSReadLineKeyHandler -Key Ctrl+q -Function TabCompleteNext\n# Set-PSReadLineKeyHandler -Key Ctrl+Q -Function TabCompletePrevious\n\n# # Clipboard interaction is bound by default in Windows mode, but not Emacs mode.\n# Set-PSReadLineKeyHandler -Key Ctrl+C -Function Copy\n# Set-PSReadLineKeyHandler -Key Ctrl+v -Function Paste\n\n# # CaptureScreen is good for blog posts or email showing a transaction\n# # of what you did when asking for help or demonstrating a technique.\n# Set-PSReadLineKeyHandler -Chord 'Ctrl+d,Ctrl+c' -Function CaptureScreen\n\n# # The built-in word movement uses character delimiters, but token based word\n# # movement is also very useful - these are the bindings you'd use if you\n# # prefer the token based movements bound to the normal emacs word movement\n# # key bindings.\n# Set-PSReadLineKeyHandler -Key Alt+d -Function ShellKillWord\n# Set-PSReadLineKeyHandler -Key Alt+Backspace -Function ShellBackwardKillWord\n# Set-PSReadLineKeyHandler -Key Alt+b -Function ShellBackwardWord\n# Set-PSReadLineKeyHandler -Key Alt+f -Function ShellForwardWord\n# Set-PSReadLineKeyHandler -Key Alt+B -Function SelectShellBackwardWord\n# Set-PSReadLineKeyHandler -Key Alt+F -Function SelectShellForwardWord\n\n# #region Smart Insert/Delete\n#\n# # The next four key handlers are designed to make entering matched quotes\n# # parens, and braces a nicer experience.  I'd like to include functions\n# # in the module that do this, but this implementation still isn't as smart\n# # as ReSharper, so I'm just providing it as a sample.\n#\n# Set-PSReadLineKeyHandler -Key '\"',\"'\" `\n#                          -BriefDescription SmartInsertQuote `\n#                          -LongDescription \"Insert paired quotes if not already on a quote\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $quote = $key.KeyChar\n#\n#     $selectionStart = $null\n#     $selectionLength = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetSelectionState([ref]$selectionStart, [ref]$selectionLength)\n#\n#     $line = $null\n#     $cursor = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$line, [ref]$cursor)\n#\n#     # If text is selected, just quote it without any smarts\n#     if ($selectionStart -ne -1)\n#     {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::Replace($selectionStart, $selectionLength, $quote + $line.SubString($selectionStart, $selectionLength) + $quote)\n#         [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($selectionStart + $selectionLength + 2)\n#         return\n#     }\n#\n#     $ast = $null\n#     $tokens = $null\n#     $parseErrors = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$ast, [ref]$tokens, [ref]$parseErrors, [ref]$null)\n#\n#     function FindToken\n#     {\n#         param($tokens, $cursor)\n#\n#         foreach ($token in $tokens)\n#         {\n#             if ($cursor -lt $token.Extent.StartOffset) { continue }\n#             if ($cursor -lt $token.Extent.EndOffset) {\n#                 $result = $token\n#                 $token = $token -as [StringExpandableToken]\n#                 if ($token) {\n#                     $nested = FindToken $token.NestedTokens $cursor\n#                     if ($nested) { $result = $nested }\n#                 }\n#\n#                 return $result\n#             }\n#         }\n#         return $null\n#     }\n#\n#     $token = FindToken $tokens $cursor\n#\n#     # If we're on or inside a **quoted** string token (so not generic), we need to be smarter\n#     if ($token -is [StringToken] -and $token.Kind -ne [TokenKind]::Generic) {\n#         # If we're at the start of the string, assume we're inserting a new string\n#         if ($token.Extent.StartOffset -eq $cursor) {\n#             [Microsoft.PowerShell.PSConsoleReadLine]::Insert(\"$quote$quote \")\n#             [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($cursor + 1)\n#             return\n#         }\n#\n#         # If we're at the end of the string, move over the closing quote if present.\n#         if ($token.Extent.EndOffset -eq ($cursor + 1) -and $line[$cursor] -eq $quote) {\n#             [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($cursor + 1)\n#             return\n#         }\n#     }\n#\n#     if ($null -eq $token -or\n#         $token.Kind -eq [TokenKind]::RParen -or $token.Kind -eq [TokenKind]::RCurly -or $token.Kind -eq [TokenKind]::RBracket) {\n#         if ($line[0..$cursor].Where{$_ -eq $quote}.Count % 2 -eq 1) {\n#             # Odd number of quotes before the cursor, insert a single quote\n#             [Microsoft.PowerShell.PSConsoleReadLine]::Insert($quote)\n#         }\n#         else {\n#             # Insert matching quotes, move cursor to be in between the quotes\n#             [Microsoft.PowerShell.PSConsoleReadLine]::Insert(\"$quote$quote\")\n#             [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($cursor + 1)\n#         }\n#         return\n#     }\n#\n#     # If cursor is at the start of a token, enclose it in quotes.\n#     if ($token.Extent.StartOffset -eq $cursor) {\n#         if ($token.Kind -eq [TokenKind]::Generic -or $token.Kind -eq [TokenKind]::Identifier -or \n#             $token.Kind -eq [TokenKind]::Variable -or $token.TokenFlags.hasFlag([TokenFlags]::Keyword)) {\n#             $end = $token.Extent.EndOffset\n#             $len = $end - $cursor\n#             [Microsoft.PowerShell.PSConsoleReadLine]::Replace($cursor, $len, $quote + $line.SubString($cursor, $len) + $quote)\n#             [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($end + 2)\n#             return\n#         }\n#     }\n#\n#     # We failed to be smart, so just insert a single quote\n#     [Microsoft.PowerShell.PSConsoleReadLine]::Insert($quote)\n# }\n#\n# Set-PSReadLineKeyHandler -Key '(','{','[' `\n#                          -BriefDescription InsertPairedBraces `\n#                          -LongDescription \"Insert matching braces\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $closeChar = switch ($key.KeyChar)\n#     {\n#         &lt;#case#&gt; '(' { [char]')'; break }\n#         &lt;#case#&gt; '{' { [char]'}'; break }\n#         &lt;#case#&gt; '[' { [char]']'; break }\n#     }\n#\n#     $selectionStart = $null\n#     $selectionLength = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetSelectionState([ref]$selectionStart, [ref]$selectionLength)\n#\n#     $line = $null\n#     $cursor = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$line, [ref]$cursor)\n#\n#     if ($selectionStart -ne -1)\n#     {\n#       # Text is selected, wrap it in brackets\n#       [Microsoft.PowerShell.PSConsoleReadLine]::Replace($selectionStart, $selectionLength, $key.KeyChar + $line.SubString($selectionStart, $selectionLength) + $closeChar)\n#       [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($selectionStart + $selectionLength + 2)\n#     } else {\n#       # No text is selected, insert a pair\n#       [Microsoft.PowerShell.PSConsoleReadLine]::Insert(\"$($key.KeyChar)$closeChar\")\n#       [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($cursor + 1)\n#     }\n# }\n#\n# Set-PSReadLineKeyHandler -Key ')',']','}' `\n#                          -BriefDescription SmartCloseBraces `\n#                          -LongDescription \"Insert closing brace or skip\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $line = $null\n#     $cursor = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$line, [ref]$cursor)\n#\n#     if ($line[$cursor] -eq $key.KeyChar)\n#     {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($cursor + 1)\n#     }\n#     else\n#     {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::Insert(\"$($key.KeyChar)\")\n#     }\n# }\n#\n# Set-PSReadLineKeyHandler -Key Backspace `\n#                          -BriefDescription SmartBackspace `\n#                          -LongDescription \"Delete previous character or matching quotes/parens/braces\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $line = $null\n#     $cursor = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$line, [ref]$cursor)\n#\n#     if ($cursor -gt 0)\n#     {\n#         $toMatch = $null\n#         if ($cursor -lt $line.Length)\n#         {\n#             switch ($line[$cursor])\n#             {\n#                 &lt;#case#&gt; '\"' { $toMatch = '\"'; break }\n#                 &lt;#case#&gt; \"'\" { $toMatch = \"'\"; break }\n#                 &lt;#case#&gt; ')' { $toMatch = '('; break }\n#                 &lt;#case#&gt; ']' { $toMatch = '['; break }\n#                 &lt;#case#&gt; '}' { $toMatch = '{'; break }\n#             }\n#         }\n#\n#         if ($toMatch -ne $null -and $line[$cursor-1] -eq $toMatch)\n#         {\n#             [Microsoft.PowerShell.PSConsoleReadLine]::Delete($cursor - 1, 2)\n#         }\n#         else\n#         {\n#             [Microsoft.PowerShell.PSConsoleReadLine]::BackwardDeleteChar($key, $arg)\n#         }\n#     }\n# }\n#\n# #endregion Smart Insert/Delete\n\n# Sometimes you enter a command but realize you forgot to do something else first.\n# This binding will let you save that command in the history so you can recall it,\n# but it doesn't actually execute.  It also clears the line with RevertLine so the\n# undo stack is reset - though redo will still reconstruct the command line.\nSet-PSReadLineKeyHandler -Key Alt+w `\n                         -BriefDescription SaveInHistory `\n                         -LongDescription \"Save current line in history but do not execute\" `\n                         -ScriptBlock {\n    param($key, $arg)\n\n    $line = $null\n    $cursor = $null\n    [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$line, [ref]$cursor)\n    [Microsoft.PowerShell.PSConsoleReadLine]::AddToHistory($line)\n    [Microsoft.PowerShell.PSConsoleReadLine]::RevertLine()\n}\n\n# # Insert text from the clipboard as a here string\n# Set-PSReadLineKeyHandler -Key Ctrl+V `\n#                          -BriefDescription PasteAsHereString `\n#                          -LongDescription \"Paste the clipboard text as a here string\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     Add-Type -Assembly PresentationCore\n#     if ([System.Windows.Clipboard]::ContainsText())\n#     {\n#         # Get clipboard text - remove trailing spaces, convert \\r\\n to \\n, and remove the final \\n.\n#         $text = ([System.Windows.Clipboard]::GetText() -replace \"\\p{Zs}*`r?`n\",\"`n\").TrimEnd()\n#         [Microsoft.PowerShell.PSConsoleReadLine]::Insert(\"@'`n$text`n'@\")\n#     }\n#     else\n#     {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::Ding()\n#     }\n# }\n\n# Sometimes you want to get a property of invoke a member on what you've entered so far\n# but you need parens to do that.  This binding will help by putting parens around the current selection,\n# or if nothing is selected, the whole line.\nSet-PSReadLineKeyHandler -Key 'Alt+(' `\n                         -BriefDescription ParenthesizeSelection `\n                         -LongDescription \"Put parenthesis around the selection or entire line and move the cursor to after the closing parenthesis\" `\n                         -ScriptBlock {\n    param($key, $arg)\n\n    $selectionStart = $null\n    $selectionLength = $null\n    [Microsoft.PowerShell.PSConsoleReadLine]::GetSelectionState([ref]$selectionStart, [ref]$selectionLength)\n\n    $line = $null\n    $cursor = $null\n    [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$line, [ref]$cursor)\n    if ($selectionStart -ne -1)\n    {\n        [Microsoft.PowerShell.PSConsoleReadLine]::Replace($selectionStart, $selectionLength, '(' + $line.SubString($selectionStart, $selectionLength) + ')')\n        [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($selectionStart + $selectionLength + 2)\n    }\n    else\n    {\n        [Microsoft.PowerShell.PSConsoleReadLine]::Replace(0, $line.Length, '(' + $line + ')')\n        [Microsoft.PowerShell.PSConsoleReadLine]::EndOfLine()\n    }\n}\n\n# Each time you press Alt+', this key handler will change the token\n# under or before the cursor.  It will cycle through single quotes, double quotes, or\n# no quotes each time it is invoked.\nSet-PSReadLineKeyHandler -Key \"Alt+'\" `\n                         -BriefDescription ToggleQuoteArgument `\n                         -LongDescription \"Toggle quotes on the argument under the cursor\" `\n                         -ScriptBlock {\n    param($key, $arg)\n\n    $ast = $null\n    $tokens = $null\n    $errors = $null\n    $cursor = $null\n    [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$ast, [ref]$tokens, [ref]$errors, [ref]$cursor)\n\n    $tokenToChange = $null\n    foreach ($token in $tokens)\n    {\n        $extent = $token.Extent\n        if ($extent.StartOffset -le $cursor -and $extent.EndOffset -ge $cursor)\n        {\n            $tokenToChange = $token\n\n            # If the cursor is at the end (it's really 1 past the end) of the previous token,\n            # we only want to change the previous token if there is no token under the cursor\n            if ($extent.EndOffset -eq $cursor -and $foreach.MoveNext())\n            {\n                $nextToken = $foreach.Current\n                if ($nextToken.Extent.StartOffset -eq $cursor)\n                {\n                    $tokenToChange = $nextToken\n                }\n            }\n            break\n        }\n    }\n\n    if ($tokenToChange -ne $null)\n    {\n        $extent = $tokenToChange.Extent\n        $tokenText = $extent.Text\n        if ($tokenText[0] -eq '\"' -and $tokenText[-1] -eq '\"')\n        {\n            # Switch to no quotes\n            $replacement = $tokenText.Substring(1, $tokenText.Length - 2)\n        }\n        elseif ($tokenText[0] -eq \"'\" -and $tokenText[-1] -eq \"'\")\n        {\n            # Switch to double quotes\n            $replacement = '\"' + $tokenText.Substring(1, $tokenText.Length - 2) + '\"'\n        }\n        else\n        {\n            # Add single quotes\n            $replacement = \"'\" + $tokenText + \"'\"\n        }\n\n        [Microsoft.PowerShell.PSConsoleReadLine]::Replace(\n            $extent.StartOffset,\n            $tokenText.Length,\n            $replacement)\n    }\n}\n\n# This example will replace any aliases on the command line with the resolved commands.\nSet-PSReadLineKeyHandler -Key \"Alt+%\" `\n                         -BriefDescription ExpandAliases `\n                         -LongDescription \"Replace all aliases with the full command\" `\n                         -ScriptBlock {\n    param($key, $arg)\n\n    $ast = $null\n    $tokens = $null\n    $errors = $null\n    $cursor = $null\n    [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$ast, [ref]$tokens, [ref]$errors, [ref]$cursor)\n\n    $startAdjustment = 0\n    foreach ($token in $tokens)\n    {\n        if ($token.TokenFlags -band [TokenFlags]::CommandName)\n        {\n            $alias = $ExecutionContext.InvokeCommand.GetCommand($token.Extent.Text, 'Alias')\n            if ($alias -ne $null)\n            {\n                $resolvedCommand = $alias.ResolvedCommandName\n                if ($resolvedCommand -ne $null)\n                {\n                    $extent = $token.Extent\n                    $length = $extent.EndOffset - $extent.StartOffset\n                    [Microsoft.PowerShell.PSConsoleReadLine]::Replace(\n                        $extent.StartOffset + $startAdjustment,\n                        $length,\n                        $resolvedCommand)\n\n                    # Our copy of the tokens won't have been updated, so we need to\n                    # adjust by the difference in length\n                    $startAdjustment += ($resolvedCommand.Length - $length)\n                }\n            }\n        }\n    }\n}\n\n# F1 for help on the command line - naturally\nSet-PSReadLineKeyHandler -Key F1 `\n                         -BriefDescription CommandHelp `\n                         -LongDescription \"Open the help window for the current command\" `\n                         -ScriptBlock {\n    param($key, $arg)\n\n    $ast = $null\n    $tokens = $null\n    $errors = $null\n    $cursor = $null\n    [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$ast, [ref]$tokens, [ref]$errors, [ref]$cursor)\n\n    $commandAst = $ast.FindAll( {\n        $node = $args[0]\n        $node -is [CommandAst] -and\n            $node.Extent.StartOffset -le $cursor -and\n            $node.Extent.EndOffset -ge $cursor\n        }, $true) | Select-Object -Last 1\n\n    if ($commandAst -ne $null)\n    {\n        $commandName = $commandAst.GetCommandName()\n        if ($commandName -ne $null)\n        {\n            $command = $ExecutionContext.InvokeCommand.GetCommand($commandName, 'All')\n            if ($command -is [AliasInfo])\n            {\n                $commandName = $command.ResolvedCommandName\n            }\n\n            if ($commandName -ne $null)\n            {\n                Get-Help $commandName -ShowWindow\n            }\n        }\n    }\n}\n\n\n# #\n# # Ctrl+Shift+j then type a key to mark the current directory.\n# # Ctrj+j then the same key will change back to that directory without\n# # needing to type cd and won't change the command line.\n#\n# #\n# $global:PSReadLineMarks = @{}\n#\n# Set-PSReadLineKeyHandler -Key Ctrl+J `\n#                          -BriefDescription MarkDirectory `\n#                          -LongDescription \"Mark the current directory\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $key = [Console]::ReadKey($true)\n#     $global:PSReadLineMarks[$key.KeyChar] = $pwd\n# }\n#\n# Set-PSReadLineKeyHandler -Key Ctrl+j `\n#                          -BriefDescription JumpDirectory `\n#                          -LongDescription \"Goto the marked directory\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $key = [Console]::ReadKey()\n#     $dir = $global:PSReadLineMarks[$key.KeyChar]\n#     if ($dir)\n#     {\n#         cd $dir\n#         [Microsoft.PowerShell.PSConsoleReadLine]::InvokePrompt()\n#     }\n# }\n#\n# Set-PSReadLineKeyHandler -Key Alt+j `\n#                          -BriefDescription ShowDirectoryMarks `\n#                          -LongDescription \"Show the currently marked directories\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $global:PSReadLineMarks.GetEnumerator() | % {\n#         [PSCustomObject]@{Key = $_.Key; Dir = $_.Value} } |\n#         Format-Table -AutoSize | Out-Host\n#\n#     [Microsoft.PowerShell.PSConsoleReadLine]::InvokePrompt()\n# }\n\n# # Auto correct 'git cmt' to 'git commit'\n# Set-PSReadLineOption -CommandValidationHandler {\n#     param([CommandAst]$CommandAst)\n#\n#     switch ($CommandAst.GetCommandName())\n#     {\n#         'git' {\n#             $gitCmd = $CommandAst.CommandElements[1].Extent\n#             switch ($gitCmd.Text)\n#             {\n#                 'cmt' {\n#                     [Microsoft.PowerShell.PSConsoleReadLine]::Replace(\n#                         $gitCmd.StartOffset, $gitCmd.EndOffset - $gitCmd.StartOffset, 'commit')\n#                 }\n#             }\n#         }\n#     }\n# }\n\n# # `ForwardChar` accepts the entire suggestion text when the cursor is at the end of the line.\n# # This custom binding makes `RightArrow` behave similarly - accepting the next word instead of the entire suggestion text.\n# Set-PSReadLineKeyHandler -Key RightArrow `\n#                          -BriefDescription ForwardCharAndAcceptNextSuggestionWord `\n#                          -LongDescription \"Move cursor one character to the right in the current editing line and accept the next word in suggestion when it's at the end of current editing line\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $line = $null\n#     $cursor = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$line, [ref]$cursor)\n#\n#     if ($cursor -lt $line.Length) {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::ForwardChar($key, $arg)\n#     } else {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::AcceptNextSuggestionWord($key, $arg)\n#     }\n# }\n\n# # Cycle through arguments on current line and select the text. This makes it easier to quickly change the argument if re-running a previously run command from the history\n# # or if using a psreadline predictor. You can also use a digit argument to specify which argument you want to select, i.e. Alt+1, Alt+a selects the first argument\n# # on the command line.\n# Set-PSReadLineKeyHandler -Key Alt+a `\n#                          -BriefDescription SelectCommandArguments `\n#                          -LongDescription \"Set current selection to next command argument in the command line. Use of digit argument selects argument by position\" `\n#                          -ScriptBlock {\n#     param($key, $arg)\n#\n#     $ast = $null\n#     $cursor = $null\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref]$ast, [ref]$null, [ref]$null, [ref]$cursor)\n#\n#     $asts = $ast.FindAll( {\n#         $args[0] -is [System.Management.Automation.Language.ExpressionAst] -and\n#         $args[0].Parent -is [System.Management.Automation.Language.CommandAst] -and\n#         $args[0].Extent.StartOffset -ne $args[0].Parent.Extent.StartOffset\n#       }, $true)\n#\n#     if ($asts.Count -eq 0) {\n#         [Microsoft.PowerShell.PSConsoleReadLine]::Ding()\n#         return\n#     }\n#\n#     $nextAst = $null\n#\n#     if ($null -ne $arg) {\n#         $nextAst = $asts[$arg - 1]\n#     }\n#     else {\n#         foreach ($ast in $asts) {\n#             if ($ast.Extent.StartOffset -ge $cursor) {\n#                 $nextAst = $ast\n#                 break\n#             }\n#         } \n#\n#         if ($null -eq $nextAst) {\n#             $nextAst = $asts[0]\n#         }\n#     }\n#\n#     $startOffsetAdjustment = 0\n#     $endOffsetAdjustment = 0\n#\n#     if ($nextAst -is [System.Management.Automation.Language.StringConstantExpressionAst] -and\n#         $nextAst.StringConstantType -ne [System.Management.Automation.Language.StringConstantType]::BareWord) {\n#             $startOffsetAdjustment = 1\n#             $endOffsetAdjustment = 2\n#     }\n#\n#     [Microsoft.PowerShell.PSConsoleReadLine]::SetCursorPosition($nextAst.Extent.StartOffset + $startOffsetAdjustment)\n#     [Microsoft.PowerShell.PSConsoleReadLine]::SetMark($null, $null)\n#     [Microsoft.PowerShell.PSConsoleReadLine]::SelectForwardChar($null, ($nextAst.Extent.EndOffset - $nextAst.Extent.StartOffset) - $endOffsetAdjustment)\n# }\n#\n# # Allow you to type a Unicode code point, then pressing `Alt+x` to transform it into a Unicode char.\n# Set-PSReadLineKeyHandler -Chord 'Alt+x' `\n#                          -BriefDescription ToUnicodeChar `\n#                          -LongDescription \"Transform Unicode code point into a UTF-16 encoded string\" `\n#                          -ScriptBlock {\n#     $buffer = $null\n#     $cursor = 0\n#     [Microsoft.PowerShell.PSConsoleReadLine]::GetBufferState([ref] $buffer, [ref] $cursor)\n#     if ($cursor -lt 4) {\n#         return\n#     }\n#\n#     $number = 0\n#     $isNumber = [int]::TryParse(\n#         $buffer.Substring($cursor - 4, 4),\n#         [System.Globalization.NumberStyles]::AllowHexSpecifier,\n#         $null,\n#         [ref] $number)\n#\n#     if (-not $isNumber) {\n#         return\n#     }\n#\n#     try {\n#         $unicode = [char]::ConvertFromUtf32($number)\n#     } catch {\n#         return\n#     }\n#\n#     [Microsoft.PowerShell.PSConsoleReadLine]::Delete($cursor - 4, 4)\n#     [Microsoft.PowerShell.PSConsoleReadLine]::Insert($unicode)\n# }\n</code></pre>"},{"location":"notes/posts/68%23%5Bdev%5D%5Benv%5D%5Blinux%5D%5Blinuxmint%5D%20linuxmint%20setup/","title":"68 [dev][env][linux][linuxmint] linuxmint setup","text":""},{"location":"notes/posts/68%23%5Bdev%5D%5Benv%5D%5Blinux%5D%5Blinuxmint%5D%20linuxmint%20setup/#iso-download","title":"iso download","text":"<ul> <li>https://mirrors.bfsu.edu.cn/linuxmint-cd/stable/21.3/</li> </ul>"},{"location":"notes/posts/68%23%5Bdev%5D%5Benv%5D%5Blinux%5D%5Blinuxmint%5D%20linuxmint%20setup/#sources-list","title":"sources list","text":"<ul> <li>\u73b0\u5728\u63a8\u8350\u76f4\u63a5\u4f7f\u7528\u81ea\u5e26\u7684\u5de5\u5177\uff0c\u8fd8\u80fd\u6d4b\u8bd5\u5404\u4e2a\u6e90\u7684\u901f\u5ea6</li> <li>https://mirrors.bfsu.edu.cn/help/linuxmint/</li> </ul>"},{"location":"notes/posts/68%23%5Bdev%5D%5Benv%5D%5Blinux%5D%5Blinuxmint%5D%20linuxmint%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/68%23%5Bdev%5D%5Benv%5D%5Blinux%5D%5Blinuxmint%5D%20linuxmint%20setup/#konosubakonoakua-2024-07-09t072533z","title":"konosubakonoakua \u00b7 2024-07-09T07:25:33Z","text":""},{"location":"notes/posts/68%23%5Bdev%5D%5Benv%5D%5Blinux%5D%5Blinuxmint%5D%20linuxmint%20setup/#firewall","title":"firewall","text":""},{"location":"notes/posts/68%23%5Bdev%5D%5Benv%5D%5Blinux%5D%5Blinuxmint%5D%20linuxmint%20setup/#opensnitch","title":"opensnitch","text":"<ul> <li>https://github.com/evilsocket/opensnitch/wiki/Installation</li> </ul>"},{"location":"notes/posts/68%23%5Bdev%5D%5Benv%5D%5Blinux%5D%5Blinuxmint%5D%20linuxmint%20setup/#cannot-show-gui","title":"cannot show GUI","text":"<p>```shell</p>"},{"location":"notes/posts/68%23%5Bdev%5D%5Benv%5D%5Blinux%5D%5Blinuxmint%5D%20linuxmint%20setup/#as-user-no-sudo","title":"as user (no sudo)","text":"<p>pip install --upgrade pip pip install grpcio-tools grpcio protobuf slugify qt-material pyasn pip install --user --ignore-installed grpcio==1.44.0 grpcio-tools==1.44.0     # downgrade grpc version https://github.com/evilsocket/opensnitch/issues/647</p>"},{"location":"notes/posts/69%23%5Bsw%5D%5Btool%5D%5Bwindows%5D%20mobaxterm%20font%20setup/","title":"69 [sw][tool][windows] mobaxterm font setup","text":"<p>\u5b89\u88c5\u7684\u5b57\u4f53\u5728\u8bbe\u7f6e\u754c\u9762\u67e5\u627e\u4e0d\u5230\uff0c\u76f4\u63a5\u6539 font2\uff0c\u4f4d\u7f6e\u5728 <code>C:\\Users\\...\\AppData\\Roaming\\MobaXterm\\MobaXterm.ini</code></p> <pre><code>[Font]\nFont2=lilex nerd font\nFontIsBold2=0\nFontHeight2=14\nFontCharset2=0\nFontQuality2=3\nLigatures=0\nCharset2=UTF-8\nLockRowsCols=0\nLockedCols=80\nLockedRows=24\n</code></pre>"},{"location":"notes/posts/70%23%5Bsw%5D%5Bpy%5D%20curve%20fitting/","title":"70 [sw][py] curve fitting","text":"<ul> <li>https://machinelearningmastery.com/curve-fitting-with-python/</li> <li>https://lmfit.github.io/lmfit-py/intro.html</li> <li>https://docs.cems.umn.edu/data-plot-tips/intro.html</li> <li>https://faculty1.coloradocollege.edu/~sburns/LinearFitting/SimpleDataFittingWithError.html</li> </ul>"},{"location":"notes/posts/71%23%5Bsw%5D%5Bpy%5D%5Bgithub%5D%20python%20scripts%20to%20check%20network%20to%20github%20good%20or%20bad/","title":"71 [sw][py][github] python scripts to check network to github good or bad","text":"<pre><code>import tkinter as tk\nimport tkinter.ttk as ttk\nimport threading\nimport time\nimport signal\nimport requests\nimport pystray\nfrom PIL import Image\n\n# \u5b9a\u4e49\u56fe\u6807\u8def\u5f84\nBLUE_ICON_PATH = \"github_96px_blue.ico\"\nBLACK_ICON_PATH = \"github_96px_black.ico\"\n\n# \u83b7\u53d6\u8d44\u6e90\u6587\u4ef6\u8def\u5f84\u7684\u51fd\u6570\n# https://blog.csdn.net/Yibans/article/details/111305438\ndef get_resource_path(relative_path):\n    try:\n        base_path = sys._MEIPASS\n    except Exception:\n        base_path = os.path.abspath(\".\")\n    return os.path.join(base_path, relative_path)\n\n# \u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\u7684\u51fd\u6570\ndef check_network_connection():\n    try:\n        response = requests.get(\"https://github.com\", timeout=5)\n        return response.status_code == 200\n    except requests.RequestException:\n        return False\n\n# \u66f4\u65b0\u6258\u76d8\u56fe\u6807\u7684\u51fd\u6570\ndef update_tray_icon():\n    while True:\n        if check_network_connection():\n            icon.icon = Image.open(get_resource_path(BLUE_ICON_PATH))\n        else:\n            icon.icon = Image.open(get_resource_path(BLACK_ICON_PATH))\n        time.sleep(10) # every 10 secs\n\n# \u9000\u51fa\u7a0b\u5e8f\u7684\u51fd\u6570\ndef on_exit(icon, item):\n    icon.stop()\n\n# \u521b\u5efa\u7cfb\u7edf\u6258\u76d8\u56fe\u6807\nicon = pystray.Icon(\"Github Network Checker\")\nicon.menu = pystray.Menu(\n    pystray.MenuItem(\"Exit\", on_exit)\n)\n\n# \u8bbe\u7f6e\u521d\u59cb\u56fe\u6807\nicon.icon = Image.open(get_resource_path(BLACK_ICON_PATH))\n\n# \u521b\u5efa\u4e00\u4e2a\u4e8b\u4ef6\u6765\u63a7\u5236\u7ebf\u7a0b\u7684\u505c\u6b62\nstop_event = threading.Event()\n\n# \u542f\u52a8\u66f4\u65b0\u56fe\u6807\u7684\u7ebf\u7a0b\nthreading.Thread(target=update_tray_icon, daemon=True).start()\n\nicon.run()\n\nsignal.signal(signal.SIGINT, on_exit)\n</code></pre>"},{"location":"notes/posts/72%23%5Bmath%5D%5Bdl%5D%5Bai%5D%5Bpython%5D%20deep-learning%20collections/","title":"72 [math][dl][ai][python] deep-learning collections","text":""},{"location":"notes/posts/72%23%5Bmath%5D%5Bdl%5D%5Bai%5D%5Bpython%5D%20deep-learning%20collections/#tutorial","title":"tutorial","text":"<ul> <li>\u52a8\u624b\u6df1\u5ea6\u5b66\u4e60</li> </ul>"},{"location":"notes/posts/73%23%5Bhw%5D%5Barm%5D%5Bdsp%5D%20arm%20dsp%20collections/","title":"73 [hw][arm][dsp] arm dsp collections","text":""},{"location":"notes/posts/73%23%5Bhw%5D%5Barm%5D%5Bdsp%5D%20arm%20dsp%20collections/#arm-university","title":"arm university","text":"<ul> <li>https://github.com/arm-university/Digital-Signal-Processing-using-Arm-Cortex-M-based-Microcontrollers</li> </ul>"},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/","title":"74 [hw][fpga] Xilinx ISE 14.7 setup","text":""},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#deps","title":"deps","text":"<pre><code>sudo apt-get install libncurses5 \n</code></pre>"},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#download","title":"download","text":"<p>https://www.xilinx.com/downloadNav/vivado-design-tools/archive-ise.html</p>"},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#install","title":"install","text":"<p><pre><code>tar -xvf Xilinx_ISE_DS_Lin_14.7_1015_1.tar\nsudo ./xsetup\n</code></pre> </p>"},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#konosubakonoakua-2024-09-23t035146z","title":"konosubakonoakua \u00b7 2024-09-23T03:51:46Z","text":""},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#create-desktop-file","title":"create desktop file","text":"<p>impact.desktop <pre><code>[Desktop Entry]\nVersion=1.0\nName=Xilinx ISE Impact\nComment=Xilinx ISE 14.7 Impact\nExec=bash -c \"source /tools/Xilinx/14.7/ISE_DS/settings64.sh &amp;&amp; impact\"\nIcon=/tools/Xilinx/14.7/ISE_DS/ISE/data/images/impact.png\nStartupNotify=true\nType=Application\nCategories=Application;\n</code></pre> ise.desktop <pre><code>[Desktop Entry]\nVersion=1.0\nName=Xilinx ISE\nComment=Xilinx ISE 14.7\nExec=bash -c \"source /tools/Xilinx/14.7/ISE_DS/settings64.sh &amp;&amp; ise\"\nIcon=/tools/Xilinx/14.7/ISE_DS/ISE/data/images/pn-ise.png\nStartupNotify=true\nType=Application\nCategories=Application;\n</code></pre></p> <p>Then, copy them to desktop or <code>~/.local/share/applications</code>. <pre><code>cp -f ise.desktop impcat.desktop ~/.local/share/appliations\n</code></pre></p> <p>Or just use commands below: <pre><code>mkdir -p ~/.local/share/applications\ncd ~/.local/share/applications/\n\ncat &lt;&lt;EOF &gt; impact.desktop\n[Desktop Entry]\nVersion=1.0\nName=Xilinx ISE Impact\nComment=Xilinx ISE 14.7 Impact\nExec=bash -c \"source /tools/Xilinx/14.7/ISE_DS/settings64.sh &amp;&amp; impact\"\nIcon=/tools/Xilinx/14.7/ISE_DS/ISE/data/images/impact.png\nStartupNotify=true\nType=Application\nCategories=Application;\nEOF\n\ncat &lt;&lt;EOF &gt; ise.desktop\n[Desktop Entry]\nVersion=1.0\nName=Xilinx ISE\nComment=Xilinx ISE 14.7\nExec=bash -c \"source /tools/Xilinx/14.7/ISE_DS/settings64.sh &amp;&amp; ise\"\nIcon=/tools/Xilinx/14.7/ISE_DS/ISE/data/images/pn-ise.png\nStartupNotify=true\nType=Application\nCategories=Application;\nEOF\n</code></pre></p>"},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#konosubakonoakua-2024-09-23t035216z","title":"konosubakonoakua \u00b7 2024-09-23T03:52:16Z","text":""},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#install-digilent-jtagsmt2-driver","title":"install Digilent JtagSMT2 driver","text":"<p>first, <pre><code>sudo mkdir -p /etc/hotplug/usb\ncd /tools/Xilinx/14.7/ISE_DS/common/bin/lin64/digilent\nsudo ./install_digilent.sh\n# selected libcsddigilent install to /home/rf/.cse\n# or try /tools/Xilinx/14.7/ISE_DS/ISE (do not)\n</code></pre></p> <p>if don't create <code>/etc/hotplug/usb</code> first, then <pre><code>Successfully installed Adept Runtime configuration \"/etc/digilent-adept.conf\".\nInstalling hotplug script.....\ncp: cannot create regular file '/etc/hotplug/usb/digilentusb': No such file or directory\nerror: failed to install hotplug script \"/etc/hotplug/usb/digilentusb\"\nerror: failed to install Adept Runtime, exitcode = 4\nSee \"/tools/Xilinx/14.7/ISE_DS/common/bin/lin64/digilent/digilent.adept.runtime_2.13.1-x86_64/README\" for information regarding installation.\n</code></pre></p> <p>maybe, this one is also needed. <pre><code>sudo cp -f /tools/Xilinx/14.7/ISE_DS/common/bin/lin64/digilent/digilent.adept.runtime_2.13.1-x86_64/52-digilent-usb.rules /etc/udev/rules.d/\nsudo chmod 644 /etc/udev/rules.d/52-digilent-usb.rules\n</code></pre></p> <p>finally, <pre><code>Installing component: libCseDigilent\nInstaller for Plugins for Xilinx Tools\nIn which directory should plugins be installed? [/root/.cse] /tools/Xilinx/14.7/ISE_DS/ISE\nPlugins will be installed in the following directory: \"/tools/Xilinx/14.7/ISE_DS/ISE\"\n    Note: The \"XIL_CSE_PLUGIN_DIR\" environment variable must be set to \"/tools/Xilinx/14.7/ISE_DS/ISE\" prior to using the Xilinx Tools.\nFound plugin \"libCseDigilent\" version \"14.1\" by \"Digilent\".\n    Successfully installed plugin in \"/tools/Xilinx/14.7/ISE_DS/ISE/lin64/14.1/plugins/Digilent/libCseDigilent\".\n</code></pre></p> <p>in impcat <pre><code>INFO:iMPACT - Digilent Plugin: Plugin Version: 2.4.4\nINFO:iMPACT - Digilent Plugin: found 1 device(s).\nINFO:iMPACT - Digilent Plugin: opening device: \"JtagSmt2\", SN:210251190311\nINFO:iMPACT - Digilent Plugin: User Name: JtagSmt2\nINFO:iMPACT - Digilent Plugin: Product Name: Digilent JTAG-SMT2\nINFO:iMPACT - Digilent Plugin: Serial Number: 210251190311\nINFO:iMPACT - Digilent Plugin: Product ID: 31000154\nINFO:iMPACT - Digilent Plugin: Firmware Version: 0108\nINFO:iMPACT - Digilent Plugin: JTAG Port Number: 0\nINFO:iMPACT - Digilent Plugin: JTAG Clock Frequency: 10000000 Hz\nAttempting to identify devices in the boundary-scan chain configuration...\nINFO:iMPACT - Current time: 24-9-23 PM2:02\n</code></pre></p>"},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#konosubakonoakua-2024-09-23t064215z","title":"konosubakonoakua \u00b7 2024-09-23T06:42:15Z","text":"<p>trouble shoot if busy, then <code>sudo rm -f /tmp/digilent-adept2-*</code></p>"},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#digilent-utilities-do-not-install-will-break-the-impact","title":"digilent utilities (do not install, will break the impact)","text":"<ul> <li>https://digilent.com/reference/software/adept/start</li> <li>install adept runtime &amp; utility <pre><code>rf@&lt;hidden&gt;:~$ sudo djtgcfg enum\nFound 1 device(s)\n\nDevice: JtagSmt2\n    Device Transport Type: 00020001 (USB)\n    Product Name:          Digilent JTAG-SMT2\n    User Name:             JtagSmt2\n    Serial Number:         210251190311\n\nrf@&lt;hidden&gt;:~$ sudo djtgcfg init -d JtagSmt2\nInitializing scan chain...\nFound Device ID: 13631093\n\nFound 1 device(s):\n    Device 0: XC7A100T\n</code></pre> uninstall it. <pre><code>sudo apt remove digilent.adept.runtime\n</code></pre></li> </ul>"},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#konosubakonoakua-2024-09-23t070012z","title":"konosubakonoakua \u00b7 2024-09-23T07:00:12Z","text":""},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#in-case-you-want-to-use-dlc9g-usb-driver","title":"in case you want to use DLC9G usb-driver","text":"<p>https://github.com/konosubakonoakua/blog/issues/76</p>"},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#docs","title":"docs","text":"<ul> <li>https://docs.amd.com/v/u/en-US/ug1655-ise-documentation</li> </ul>"},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#konosubakonoakua-2024-10-05t111545z","title":"konosubakonoakua \u00b7 2024-10-05T11:15:45Z","text":""},{"location":"notes/posts/74%23%5Bhw%5D%5Bfpga%5D%20Xilinx%20ISE%2014.7%20setup/#tutorial","title":"Tutorial","text":"<ul> <li>ISE14.7\u624b\u628a\u624b\u4f7f\u7528\u6559\u7a0b\uff1a\u5efa\u7acb\u5de5\u7a0b\u3001\u4eff\u771f\u3001\u4e0b\u8f7dbit\u6d41\u3001\u7a0b\u5e8f\u56fa\u5316\u3001\u4ee5\u53ca\u4e00\u4e9b\u5e38\u89c1\u7684\u5751</li> </ul>"},{"location":"notes/posts/75%23%5Bsw%5D%5Blinux%5D%5Bembedded%5D%20device-tree%20inside-out/","title":"75 [sw][linux][embedded] device-tree inside-out","text":""},{"location":"notes/posts/75%23%5Bsw%5D%5Blinux%5D%5Bembedded%5D%20device-tree%20inside-out/#links","title":"links","text":""},{"location":"notes/posts/75%23%5Bsw%5D%5Blinux%5D%5Bembedded%5D%20device-tree%20inside-out/#-overlay","title":"- \u8bbe\u5907\u6811 overlay \u673a\u5236\u6df1\u5165\u62c6\u89e3","text":""},{"location":"notes/posts/76%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20ise%2014.7%20DLC9G%20usb-driver%20setup/","title":"76 [hw][fpga][xilinx] ise 14.7 DLC9G usb-driver setup","text":""},{"location":"notes/posts/76%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20ise%2014.7%20DLC9G%20usb-driver%20setup/#troubleshooting","title":"troubleshooting","text":""},{"location":"notes/posts/76%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20ise%2014.7%20DLC9G%20usb-driver%20setup/#xilinx-jtag-programmer-usb-cable-not-found","title":"Xilinx JTAG Programmer (USB) cable not found","text":"<p>[!IMPORTANT] Only Platform Cable USB II  Platform Cable USB Model: DLC9G is supported!!!!!!!!!!!! do not use digilent ft232 jtag cables</p> <p>First of all, this guide assumes you have installed Xilinx ISE (version 14.7 is used here) into the default path of /opt/Xilinx/ISE/</p> <p>Next, you will need to have GIT installed to get the required libraries. This approach does not use the official Xilinx libraries but a replica of them. You will also need libusb-dev which is required in the compiling of the drivers. You will also need build-essential metapackage for the compiler. On a 64-bit host, you will need to get the 32-bit version of libc6-dev-i386.</p> <p>On 32-bit <pre><code>sudo apt-get install gitk git-gui libusb-dev build-essential libc6-dev fxload\n</code></pre> On 64-bit <pre><code>sudo apt-get install gitk git-gui libusb-dev build-essential libc6-dev-i386 fxload\n</code></pre></p> <p>Philipp H\u00c3rauf reports there is a need to install ia32-libs-dev on some 64-bit systems, though I didn\u2019t require this.</p> <p>Clone usb-driver: <pre><code>sudo git clone git://git.zerfleddert.de/usb-driver /opt/Xilinx/ISE/usb-driver\n</code></pre></p> <p>Compiling the Driver This step is once simple command, but the most important. It compiles the cable driver required. There are two versions depending on the version (32-/64-bit) of Xilinx ISE you have. Firstly change into the source directory created in the previous step. Then you need to issue the make command.</p> <p><pre><code>cd usb-driver/\nsudo make\nsudo cp libusb-driver.so libusb-driver-DEBUG.so /usr/local/lib\n### To solve windrvr6 not found\nsudo sh -c 'echo \"export LD_PRELOAD=/usr/local/lib/libusb-driver.so\" &gt;&gt; /etc/bash.bashrc'\n\nchmod +x ./setup_pcusb\n./setup_pcusb /opt/Xilinx/ISE/14.7/ISE_DS/ISE/\n\nsudo cp /opt/Xilinx/ISE/14.7/ISE_DS/ISE/bin/lin64/xusbdfwu.rules /etc/udev/rules.d/50-xusbdfwu.rules\nsudo sed -i -e 's/TEMPNODE/tempnode/' -e 's/SYSFS/ATTRS/g' -e 's/BUS/SUBSYSTEMS/' /etc/udev/rules.d/50-xusbdfwu.rules\nsed /opt/Xilinx/ISE/14.7/ISE_DS/ISE/bin/lin64/xusbdfwu.rules -e 's:TEMPNODE:tempnode:g' | sed 's:BUS==\"usb\", ::g' | sed 's:SYSFS:ATTR:g' | sudo tee /etc/udev/rules.d/50-xusbdfwu.rules 1&gt;/dev/null\n\nsudo cp -f /opt/Xilinx/ISE/14.7/ISE_DS/ISE/bin/lin64/xusb*.hex /usr/share/\nsudo chmod 644 /usr/share/xusb*.hex\nsudo sed -i -e 's/#!\\/bin\\/sh/#!\\/bin\\/bash/' /opt/Xilinx/ISE/14.7/ISE_DS/PlanAhead/bin/planAhead\nsudo sed -i -e 's/#!\\/bin\\/sh/#!\\/bin\\/bash/' /opt/Xilinx/ISE/14.7/ISE_DS/PlanAhead/bin/loader\nsudo sed -i -e 's/#!\\/bin\\/sh/#!\\/bin\\/bash/' /opt/Xilinx/ISE/14.7/ISE_DS/ISE/bin/lin64/unwrapped/analyzer\nsudo /bin/udevadm control --reload-rules\n</code></pre> then we can use <code>xmd</code> to verify the connections <pre><code>source /opt/Xilinx/ISE/14.7/ISE_DS/settings64.sh\nxmd\n\nXMD% connect mdm\n\nJTAG chain configuration\n--------------------------------------------------\nDevice   ID Code        IR Length    Part Name\n 1       13631093           6        XC7A100T\nERROR: Could not detect MDM peripheral on hardware. Please check:\n    1. If FPGA is configured correctly\n    2. MDM Core is instantiated in the design\n    3. If the correct FPGA is referred, in case of multiple FPGAs\n    4. If the correct MDM is referred, in case of a multiple MDM system\n</code></pre> with id code &amp; part name, we can say that the connection between jtag cable &amp; fpga chip is good.</p> <p>Then we open iMPACT--&gt;double click <code>Boundary Scan</code>--&gt;Right click on blank area: <code>initialize chain</code>---&gt;see the jtag daisy link.</p> <p>links - https://www.george-smart.co.uk/fpga/xilinx_jtag_linux/ - https://support.xilinx.com/s/article/64361?language=en_US</p>"},{"location":"notes/posts/76%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20ise%2014.7%20DLC9G%20usb-driver%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/76%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20ise%2014.7%20DLC9G%20usb-driver%20setup/#konosubakonoakua-2024-08-05t081006z","title":"konosubakonoakua \u00b7 2024-08-05T08:10:06Z","text":""},{"location":"notes/posts/76%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20ise%2014.7%20DLC9G%20usb-driver%20setup/#cannot-find-jtag-device-in-virtualbox","title":"cannot find jtag device (in virtualbox)","text":"<ul> <li>try to plug out then plug in jtag usb device first</li> <li>sometimes virtual box will not detect jtag connected.</li> <li>it's better enable option to automatically connect jtag to vbox     </li> </ul>"},{"location":"notes/posts/76%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20ise%2014.7%20DLC9G%20usb-driver%20setup/#you-should","title":"you should,","text":"<ul> <li>on host side:</li> <li>Check linux usb device by <code>sudo lsusb</code></li> <li>Check and replace host USB cable.</li> <li>Check and change the host USB port.</li> <li>Try on another working board</li> <li>Try another good tag device</li> <li>Reboot sometimes helps too</li> <li>on target side:</li> <li>Check the target fpga borad power status.</li> <li>Power off target board before remove/attach jtag cable</li> <li>Check the boot option (jtag mode) on the FPGA board.</li> </ul>"},{"location":"notes/posts/76%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20ise%2014.7%20DLC9G%20usb-driver%20setup/#konosubakonoakua-2024-08-29t144225z","title":"konosubakonoakua \u00b7 2024-08-29T14:42:25Z","text":"<ul> <li>https://chaosink.github.io/2016/05/20/2016-05-20-Module-windrvr6-is-not-loaded-Please-reinstall-the-cable-drivers-See-Answer-Record-22648/</li> <li>https://wiki.gentoo.org/wiki/Xilinx_USB_JTAG_Programmers#Digilent_Xilinx_USB_JTAG_cable</li> <li>https://rmdir.de/~michael/xilinx/</li> <li>https://digilent.com/reference/software/digilent-plugin-xilinx-tools/start?redirect=2</li> <li>https://lp.digilent.com/complete-adept-runtime-download</li> <li>https://digilent.com/reference/programmers/jtag-smt2-nc/reference-manual</li> </ul>"},{"location":"notes/posts/77%23%5Bsw%5D%5Blinux%5D%5Bchroot%5D%5Barm%5D%20chroot%20into%20arm%20target%20rootfs%20on%20x86_64%20host%20os/","title":"77 [sw][linux][chroot][arm] chroot into arm target rootfs on x86_64 host os","text":"<pre><code>sudo apt install qemu-user-static\n# plugin U disk\nsudo cp $(which qemu-user-static) /media/rf/rootfs/usr/bin\nsudo chroot /media/rf/rootfs qemu-arm-static /bin/bash\n\n# should enter target rootfs\nqemu-arm-static /bin/ls\nqemu-arm-static /bin/vi\n</code></pre>"},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/","title":"78 [sw][linux][raspi][ioc] Raspberry Pi setup","text":""},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#raspberry-pi-imager","title":"raspberry-pi-imager","text":"<pre><code>scoop install raspberry-pi-imager\n</code></pre> Select board type &amp; os, then flash sd card."},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#apt-mirrors","title":"apt mirrors","text":"<pre><code>sudo cp -f /etc/apt/sources.list /etc/apt/sources.list.bak\nsudo tee /etc/apt/sources.list &lt;&lt; 'EOF'\ndeb https://mirrors.bfsu.edu.cn/debian/ bookworm main contrib non-free non-free-firmware\ndeb https://mirrors.bfsu.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware\ndeb https://mirrors.bfsu.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmware\ndeb https://security.debian.org/debian-security bookworm-security main contrib non-free non-free-firmware\n\n# deb-src https://mirrors.bfsu.edu.cn/debian/ bookworm main contrib non-free non-free-firmware\n# deb-src https://mirrors.bfsu.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware\n# deb-src https://mirrors.bfsu.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmware\n# deb-src https://security.debian.org/debian-security bookworm-security main contrib non-free non-free-firmware\nEOF\nsudo apt update &amp;&amp; sudo apt upgrade\n</code></pre>"},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#samba-tftp","title":"samba &amp; tftp","text":"[raspi docs samba](https://www.raspberrypi.com/documentation/computers/remote-access.html#samba-smbcifs) <pre><code>sudo apt update\nsudo apt install samba samba-common-bin smbclient cifs-utils\n</code></pre> <pre><code>cd ~\nmkdir shared\nchmod 0740 shared\nsudo smbpasswd -a rpi\n</code></pre> <pre><code>sudo tee -a /etc/samba/smb.conf &lt;&lt; 'EOF'\n[shared]\n    path = /home/rpi/shared\n    writable = yes\n    browsable = yes\n    public = yes\n    create mask = 0777\n    max connections = 10\nEOF\nsudo sed -i '/map to guest = bad user/s/^/# /' /etc/samba/smb.conf\n</code></pre> <pre><code>sudo systemctl restart smbd\n</code></pre> <pre><code># trouble shoot\nrm -rf /var/log/samba/log.smbd\nsudo rm -rf /var/lib/samba/registry.tdb\n</code></pre>  [Test setup (TFTP)](https://www.raspberrypi.com/documentation/computers/remote-access.html#test-setup)"},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#install-fzfzellijzoxide","title":"Install fzf/zellij/zoxide","text":"Download them from windows side - [zellij-aarch64-unknown-linux-musl.tar.gz](https://github.com/zellij-org/zellij/releases) - [fzf](https://github.com/junegunn/fzf/releases) - [zoxide](https://github.com/ajeetdsouza/zoxide/releases) - [neovim]()  [share-files-with-scp](https://www.raspberrypi.com/documentation/computers/remote-access.html#share-files-with-scp) <pre><code>scp fzf zellij zoxide rpi@impcas-ioc-rpi4-001.local:shared/\n</code></pre> Or just use samba on windows side.  ### Install nvim <pre><code>sudo apt update\nsudo apt install snapd\nsudo reboot\n</code></pre> <pre><code>sudo snap install snapd\nsudo snap install --classic nvim\n</code></pre>"},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#rc-local","title":"rc-local","text":"<pre><code>#!/bin/sh -e\n#\n# rc.local\n#\n# This script is executed at the end of each multiuser runlevel.\n# Make sure that the script will \"exit 0\" on success or any other\n# value on error.\n#\n# In order to enable or disable this script just change the execution\n# bits.\n#\n# By default this script does nothing.\n\n# Print the IP address\n_IP=$(hostname -I) || true\nif [ \"$_IP\" ]; then\n  printf \"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;IP address is %s\\n\" \"$_IP\"\nfi\n\n### add your commands here ###\n\n# keep this line\nexit 0\n</code></pre>"},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#uv-python","title":"uv &amp; python","text":"<pre><code>sudo apt-get install libffi-dev libjpeg-dev zlib1g-dev\n</code></pre> <pre><code>curl -LsSf https://astral.sh/uv/install.sh | sh\nsource ~/.bashrc\nuv python list\n</code></pre> <pre><code>uv python install cpython-3.13.0+freethreaded-linux-aarch64-gnu\n</code></pre> <pre><code>uv python install cpython-3.12.7-linux-aarch64-gnu\n</code></pre> <pre><code>uv python install cpython-3.11.10-linux-aarch64-gnu\n</code></pre> <pre><code>cat &gt; ~/.config/uv/uv.toml &lt;&lt; 'EOF'\nindex-url = \"https://mirrors.bfsu.edu.cn/pypi/web/simple\"\nEOF\n</code></pre>"},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#rust","title":"rust","text":"<pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n</code></pre>"},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#konosubakonoakua-2024-11-21t021545z","title":"konosubakonoakua \u00b7 2024-11-21T02:15:45Z","text":""},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#ssh","title":"ssh","text":""},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#123","title":"123","text":""},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#konosubakonoakua-2024-11-25t074644z","title":"konosubakonoakua \u00b7 2024-11-25T07:46:44Z","text":""},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#nodejs","title":"nodejs","text":""},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#use-nvm","title":"use <code>nvm</code>","text":"<pre><code>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash\n</code></pre> Install nodejs 20 version <pre><code>nvm install 20\nnvm use 20\n</code></pre>"},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#konosubakonoakua-2024-11-26t023923z","title":"konosubakonoakua \u00b7 2024-11-26T02:39:23Z","text":""},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#docker","title":"docker","text":"- https://docs.docker.com/engine/install/debian/ - https://github.com/konosubakonoakua/blog/issues/84#issuecomment-2499518392  <pre><code>sudo apt-get update\nsudo apt-get install ca-certificates curl\n</code></pre> <pre><code>case $(uname -a) in\n  *ubuntu*) HOST_OS=ubuntu;;\n  *Debian*) HOST_OS=debian;;\n  *)\n    echo \"Unsupported system\"\n    exit 1\n    ;;\nesac\n</code></pre> <pre><code># Add Docker's official GPG key:\nsudo install -m 0755 -d /etc/apt/keyrings\nsudo curl -fsSL https://download.docker.com/linux/${HOST_OS}/gpg -o /etc/apt/keyrings/docker.asc\nsudo chmod a+r /etc/apt/keyrings/docker.asc\n</code></pre> <pre><code># Add the repository to Apt sources:\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/${HOST_OS} \\\n  $(. /etc/os-release &amp;&amp; echo \"$VERSION_CODENAME\") stable\" | \\\n  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n</code></pre> <pre><code>sudo apt-get update\nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n</code></pre> <pre><code>sudo docker run hello-world\n</code></pre>"},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#konosubakonoakua-2024-11-26t032511z","title":"konosubakonoakua \u00b7 2024-11-26T03:25:11Z","text":""},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#network","title":"Network","text":""},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#enable-ipv4-on-raspberrypi-3b-with-networkmanager-without-raspi-offical-os","title":"~enable ipv4 on raspberrypi 3b with networkmanager (without raspi offical os)~","text":"- [x] use `nmtui-edit` to modify `Wired Connection 1` located @ `system-connections/Wired\\ connection\\ 1.nmconnection `      <pre><code>rpi@&lt;hidden&gt;:/etc/NetworkManager $ sudo cat system-connections/Wired\\ connection\\ 1.nmconnection \n\n[connection]\nid=Wired connection 1\nuuid=&lt;hidden&gt;\ntype=ethernet\nautoconnect-priority=-999\ninterface-name=&lt;hidden&gt;\n\n[ethernet]\n\n[ipv4]\naddress1=100.100.100.100/8,100.100.100.254\nmay-fail=false\nmethod=manual\n\n[ipv6]\naddr-gen-mode=default\nmethod=disabled\n\n[proxy]\n</code></pre> - [ ] but how to automatically disable ipv6 when flashing os into sdcard?     <pre><code>rpi@&lt;hidden&gt;:/etc/NetworkManager/system-connections $ sudo cat preconfigured.nmconnection \n[connection]\nid=preconfigured\nuuid=&lt;hidden&gt;\ntype=wifi\n[wifi]\nmode=infrastructure\nssid=rfhjj\nhidden=false\n[ipv4]\nmethod=auto\n[ipv6]\naddr-gen-mode=default\nmethod=auto\n[proxy]\n[wifi-security]\nkey-mgmt=wpa-psk\npsk=&lt;hidden&gt;\n</code></pre> - [x] how to make mdns working   - We need setup ipv4 first, use `nmtui-edit` then disable then enable connection by `nmtui`   - https://wiki.archlinux.org/title/Avahi   - In case you want to change mdns domain &amp; host: `sudo vi /etc/avahi/avahi-daemon.conf`     <pre><code>[server]\nhost-name=&lt;your host name&gt;\ndomain-name=local\n#browse-domains=0pointer.de, zeroconf.org\nuse-ipv4=yes\nuse-ipv6=no\nallow-interfaces=eth0\n#deny-interfaces=eth1\n#check-response-ttl=no\n#use-iff-running=no\n#enable-dbus=yes\n#disallow-other-stacks=no\n#allow-point-to-point=no\n#cache-entries-max=4096\n#clients-max=4096\n#objects-per-client-max=1024\n#entries-per-entry-group-max=32\nratelimit-interval-usec=1000000\nratelimit-burst=1000\n</code></pre>"},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#konosubakonoakua-2024-11-27t123121z","title":"konosubakonoakua \u00b7 2024-11-27T12:31:21Z","text":""},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#epics-on-raspi","title":"epics on raspi","text":"- [epics 7 installation](https://sfeister.github.io/sidekick-epics-docs/model1/pi-epics-install/) - [rpi epics](https://cmd-response.readthedocs.io/en/latest/epics/rpi_epics.html) <pre><code>sudo apt -y install git net-tools build-essential re2c libnet-dev libpcap-dev libusb-1.0-0-dev\n</code></pre> <pre><code>mkdir $HOME/EPICS\ncd $HOME/EPICS\n##git clone --recursive https://github.com/epics-base/epics-base.git\nwget https://epics.anl.gov/download/base/base-7.0.8.1.tar.gz\ntar xf base-7.0.8.1.tar.gz &amp;&amp; ln -s base-7.0.8.1 epics-base\ncd epics-base\nmake -j2 # rpi4b\n~/EPICS/bin/linux-aarch64/caget\n</code></pre> &gt; [!IMPORTANT] &gt; You need to set `PYEPICS_LIBCA` to load the correct `libca.so` on rpi &gt; Refer to: [pyepics issue 238](https://github.com/pyepics/pyepics/issues/238) <pre><code>cat &gt;&gt; ~/.bashrc &lt;&lt; 'EOF'\n\nexport PYEPICS_LIBCA=$HOME/EPICS/epics-base/lib/linux-aarch64/libca.so\n\nEOF\n</code></pre> #### pythonsoftioc on raspi <pre><code># ~/.config/uv/uv.toml   (Linux/macOS)\n[extra-build-dependencies]\nsoftioc = [{ requirement = \"epicscorelibs\", match-runtime = true }]\n</code></pre> <pre><code>uv pip install pvxslibs epicsdbbuilder pyyaml cothread\nuv pip install softioc --no-deps\n</code></pre> Then try with [this test](https://diamondlightsource.github.io/pythonSoftIOC/master/tutorials/creating-an-ioc.html).  #### pcaspy on raspi <pre><code>sudo apt install -y swig\n</code></pre> <pre><code>mkdir ~/EPICS/support\ncd ~/EPICS/support\nwget https://github.com/epics-modules/pcas/archive/refs/tags/v4.13.3.tar.gz\nmv v4.13.3.tar.gz pcas-4.13.13.tar.gz\ntar xvzf pcas-4.13.3.tar.gz &amp;&amp; rm pcas-4.13.3.tar.gz\ncd ./pcas-4.13.3\n</code></pre> <pre><code>cat &gt; configure/RELEASE.local &lt;&lt; EOF\nEPICS_BASE = ${EPICS_BASE}\nEOF\n</code></pre> <pre><code>make -j4\n</code></pre> <pre><code>cat &gt;&gt; ~/.bashrc &lt;&lt; EOF\nexport PCAS=~/EPICS/support/pcas-4.13.3\nEOF\n</code></pre> <pre><code>source ~/.bashrc\n</code></pre> <pre><code>uv pip install pcaspy\npython -c \"import pcaspy\"\n</code></pre>  If encountered with: `ImportError: libca.so.4.14.3: cannot open shared object file: No such file or directory`, Check version first:  <pre><code>caget -V\n</code></pre> <pre><code>ldd ~/.virtualenvs/ioc/lib/python3.12/site-packages/pcaspy/_cas.cpython-312-aarch64-linux-gnu.so\n</code></pre> If epics version not matched with pcas build, then use `ln -s` to make softlinks for shared libs.  <pre><code>cd $EPICS_BASE/lib/linux-aarch64/\nln -s libca.so.4.14.4 libca.so.4.14.3\nln -s libCom.so.3.23.1 libCom.so.3.23.0\n</code></pre>  If encountered with: `ImportError: libdbCore.so.3.23.0: cannot open shared object file: No such file or directory`, need to reinstall pcaspy using pip:  <pre><code> uv pip install --reinstall pcaspy  --no-cache\n</code></pre>"},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#konosubakonoakua-2024-11-27t131933z","title":"konosubakonoakua \u00b7 2024-11-27T13:19:33Z","text":""},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#gpio-libs","title":"gpio libs","text":"pinout  ![https://pinout.xyz/](../assets/78/1.png)   <pre><code>uv pip install adafruit-blinka gpiozero smbus smbus2 smbus3 spidev pyserial lgpio\n</code></pre>"},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#konosubakonoakua-2024-11-28t140712z","title":"konosubakonoakua \u00b7 2024-11-28T14:07:12Z","text":""},{"location":"notes/posts/78%23%5Bsw%5D%5Blinux%5D%5Braspi%5D%5Bioc%5D%20Raspberry%20Pi%20setup/#serial-port-monitoring","title":"serial port monitoring","text":"<pre><code>sudo apt install tio\ntio -a latest --exclude-drivers=!(cp210x)\n</code></pre>"},{"location":"notes/posts/79%23%5Bsw%5D%5Bpython%5D%5Bwindows%5D%20portable%20python%20on%20windows/","title":"79 [sw][python][windows] portable python on windows","text":""},{"location":"notes/posts/79%23%5Bsw%5D%5Bpython%5D%5Bwindows%5D%20portable%20python%20on%20windows/#portable","title":"portable","text":"<p>https://github.com/konosubakonoakua/python-embed/releases/tag/py311-with-pip</p> <p>\u5751\u5f97\u5f88\uff0c \u5173\u4e8e\u600e\u4e48\u5b89\u88c5 pip \u5148 python get-pip.py \u7136\u540e\u7528 pip_bodge install --force-reinstall pip \u8986\u76d6\u539f\u5148\u5b89\u88c5\u7684 pip \u7136\u540e\u4ee5\u540e\u5b89\u88c5\u90fd\u7528 pip_bodge install ... \u5426\u5219\u4e0d\u80fd\u5b9e\u73b0 portable\uff0c\u56e0\u4e3a \u667a\u969c pip \u4f1a\u628a\u8def\u5f84\u786c\u7f16\u7801\u8fdb\u4e8c\u8fdb\u5236exe</p> <pre><code># pip_bodge.cmd\n@echo off\npython -c \"from pip._internal.cli.main import main;import sys;sys.executable='python.exe';main()\" %*\n</code></pre>"},{"location":"notes/posts/79%23%5Bsw%5D%5Bpython%5D%5Bwindows%5D%20portable%20python%20on%20windows/#comments","title":"Comments","text":""},{"location":"notes/posts/79%23%5Bsw%5D%5Bpython%5D%5Bwindows%5D%20portable%20python%20on%20windows/#konosubakonoakua-2024-11-27t020021z","title":"konosubakonoakua \u00b7 2024-11-27T02:00:21Z","text":""},{"location":"notes/posts/79%23%5Bsw%5D%5Bpython%5D%5Bwindows%5D%20portable%20python%20on%20windows/#jupyter-lab","title":"jupyter-lab \u542f\u52a8","text":"<pre><code>@echo off\nset VENV_PATH=.\\venv\ncall %VENV_PATH%\\Scripts\\activate\nif %ERRORLEVEL% NEQ 0 (\n    echo Failed to activate %VENV_PATH%\n    exit /b 1\n)\njupyter-lab\ncall %VENV_PATH%\\Scripts\\deactivate\n</code></pre>"},{"location":"notes/posts/80%23%5Bhw%5D%5Bfpga%5D%20fpga%20flash%20download%20failed%2C%20M0_M1%20setting/","title":"80 [hw][fpga] fpga flash download failed, M0/M1 setting","text":""},{"location":"notes/posts/80%23%5Bhw%5D%5Bfpga%5D%20fpga%20flash%20download%20failed%2C%20M0_M1%20setting/#configuration-of-m0m1","title":"configuration of M0/M1","text":"<p>Using boundary scan mode with M0=1 &amp; M1=0.</p> <p>[!IMPORTANT] However, if the M0 pull-up &amp; M1 pull-down resistors are not fitted, you will fail when downloading to flash.</p>"},{"location":"notes/posts/81%23%5Bhw%5D%5Bfpga%5D%20ISE%20xilinx%20fpga%2C%20adjust%20configuration%20rate/","title":"81 [hw][fpga] ISE xilinx fpga, adjust configuration rate","text":""},{"location":"notes/posts/81%23%5Bhw%5D%5Bfpga%5D%20ISE%20xilinx%20fpga%2C%20adjust%20configuration%20rate/#comments","title":"Comments","text":""},{"location":"notes/posts/81%23%5Bhw%5D%5Bfpga%5D%20ISE%20xilinx%20fpga%2C%20adjust%20configuration%20rate/#konosubakonoakua-2024-09-11t134620z","title":"konosubakonoakua \u00b7 2024-09-11T13:46:20Z","text":""},{"location":"notes/posts/81%23%5Bhw%5D%5Bfpga%5D%20ISE%20xilinx%20fpga%2C%20adjust%20configuration%20rate/#enable-multi-threading","title":"enable multi-threading","text":""},{"location":"notes/posts/82%23%5Bsw%5D%5Blinux%5D%20linux_windows%20samba%20file%20share/","title":"82 [sw][linux] linux/windows samba file share","text":""},{"location":"notes/posts/82%23%5Bsw%5D%5Blinux%5D%20linux_windows%20samba%20file%20share/#step-1-linux-smb-server","title":"Step 1 - Linux smb server","text":"<p><pre><code># install samba deps\nsudo apt install samba smbclient\n</code></pre> <pre><code># enable &amp; start samba sersvice\nsudo systemctl start smbd.service\nsudo systemctl enable smbd.service\nsudo systemctl start nmbd.service\nsudo systemctl enable nmbd.service\n</code></pre> <pre><code># add user to group\nsudo usermod -a -G sambashare $USER\n</code></pre> <pre><code># set user password\nsudo smbpasswd -a $USER\n</code></pre> <pre><code># config share path\n# net usershare add &lt;sharename&gt; &lt;sharepath&gt; \"&lt;sharedesc&gt;\" Everyone:F guest_ok=n\nnet usershare add share $HOME \"home\" Everyone:F guest_ok=n\n</code></pre> <pre><code>## /etc/samba/smb.conf\n[share]\n    path = /root\n    writable = yes\n    browsable = yes\n    public = yes\n    create mask = 0777\n    directory mask = 0777\n    force user = root\n    max connections = 10\n\n[share]\n    path = /boot\n    writable = yes\n    browsable = yes\n    public = yes\n    create mask = 0777\n    directory mask = 0777\n    force user = root\n    max connections = 10\n</code></pre> <pre><code># if you want to access softlink, use `mount --bind` or `fstab` instead\ncd /root\nmkdir boot\nmount --bind /boot /root/boot\n</code></pre> <pre><code># fstab\n/some/real/path  /srv/samba/share/mybind  none  bind  0  0\n</code></pre> <pre><code># test\nsmbclient //127.0.0.1/&lt;sharename&gt; -U &lt;username&gt;%&lt;passwd&gt;\n</code></pre></p>"},{"location":"notes/posts/82%23%5Bsw%5D%5Blinux%5D%20linux_windows%20samba%20file%20share/#step-2-windows-client","title":"Step 2 - Windows Client","text":"<p><pre><code>Enable-WindowsOptionalFeature -Online -FeatureName \"SMB1Protocol\" -All\n</code></pre> <pre><code>ping &lt;your linux pc ip address&gt;\n</code></pre> - type <code>\\\\&lt;your linux ip&gt;\\&lt;sharename&gt;</code> in <code>windows explorer</code>. - map a network disk by <code>net use Z: \\\\&lt;server&gt;\\&lt;shared folder&gt; /user:&lt;name&gt; &lt;pswd&gt;</code> - use <code>net use</code> in cmd to list all connections</p>"},{"location":"notes/posts/82%23%5Bsw%5D%5Blinux%5D%20linux_windows%20samba%20file%20share/#comments","title":"Comments","text":""},{"location":"notes/posts/82%23%5Bsw%5D%5Blinux%5D%20linux_windows%20samba%20file%20share/#konosubakonoakua-2024-09-23t165809z","title":"konosubakonoakua \u00b7 2024-09-23T16:58:09Z","text":""},{"location":"notes/posts/82%23%5Bsw%5D%5Blinux%5D%20linux_windows%20samba%20file%20share/#linux-mount-windows-shared","title":"linux mount windows shared","text":""},{"location":"notes/posts/82%23%5Bsw%5D%5Blinux%5D%20linux_windows%20samba%20file%20share/#windows-side","title":"windows side","text":"<p>\u5728 Windows \u4e2d\u901a\u8fc7\u7f51\u7edc\u5171\u4eab\u6587\u4ef6</p>"},{"location":"notes/posts/82%23%5Bsw%5D%5Blinux%5D%20linux_windows%20samba%20file%20share/#linux-side","title":"linux side","text":"<p>You may encounter <code>mount read-only</code> issue if cifs-utils is not installed. <pre><code>sudo apt-get install cifs-utils\n</code></pre></p> <p><pre><code># create mount point\nsudo mkdir -p /mnt/winshare\n</code></pre> <pre><code># list all sharenames\nsmbclient -L //10.9.8.7 -U user%password\n</code></pre> <pre><code>sudo mount -t cifs //10.9.8.7/&lt;sharename?&gt; /mnt/winshare -o username=?,password=?\n</code></pre> e.g. <pre><code>sudo mount -t cifs //rf-pc-shiro.local/D/tools/petalinux /tools/petalinux/ -o username=RF-PC-SHIRO\n</code></pre></p>"},{"location":"notes/posts/83%23%5Bhw%5D%5Bfpga%5D%20openfpgaloader%20install/","title":"83 [hw][fpga] openfpgaloader install","text":""},{"location":"notes/posts/83%23%5Bhw%5D%5Bfpga%5D%20openfpgaloader%20install/#installation","title":"installation","text":"<ul> <li>https://trabucayre.github.io/openFPGALoader/guide/install.html</li> </ul> <pre><code>sudo apt install \\\n  git \\\n  gzip \\\n  libftdi1-2 \\\n  libftdi1-dev \\\n  libhidapi-hidraw0 \\\n  libhidapi-dev \\\n  libudev-dev \\\n  zlib1g-dev \\\n  cmake \\\n  pkg-config \\\n  make \\\n  g++\n</code></pre> <p><pre><code>git clone https://github.com/trabucayre/openFPGALoader\ncd openFPGALoader\nmkdir build\ncd build\ncmake .. # add -DBUILD_STATIC=ON to build a static version\n         # add -DENABLE_UDEV=OFF to disable udev support and -d /dev/xxx\n         # add -DENABLE_CMSISDAP=OFF to disable CMSIS DAP support\ncmake --build .\n# or\nmake -j$(nproc)\nsudo make install\ncd ..\n</code></pre> <pre><code>sudo cp 99-openfpgaloader.rules /etc/udev/rules.d/\nsudo udevadm control --reload-rules &amp;&amp; sudo udevadm trigger # force udev to take new rule\nsudo usermod -a $USER -G plugdev # add user to plugdev group\n</code></pre></p>"},{"location":"notes/posts/83%23%5Bhw%5D%5Bfpga%5D%20openfpgaloader%20install/#comments","title":"Comments","text":""},{"location":"notes/posts/83%23%5Bhw%5D%5Bfpga%5D%20openfpgaloader%20install/#konosubakonoakua-2024-09-20t013310z","title":"konosubakonoakua \u00b7 2024-09-20T01:33:10Z","text":""},{"location":"notes/posts/83%23%5Bhw%5D%5Bfpga%5D%20openfpgaloader%20install/#download-much-faster-than-vivado","title":"download (much faster than vivado)","text":""},{"location":"notes/posts/83%23%5Bhw%5D%5Bfpga%5D%20openfpgaloader%20install/#to-flash","title":"to flash","text":"<pre><code>openFPGALoader -c digilent_hs2 --fpga-part xc6slx25csg324 -f ./sp67015dog.mcs --verbose-level 2\n</code></pre>"},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/","title":"84 [sw][linux] docker engine (CE) install","text":""},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#guides","title":"guides","text":"<p>official guide</p>"},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#remove-unofficial-packages","title":"remove unofficial packages","text":"<pre><code>for pkg in docker.io docker-doc docker-compose docker-compose-v2 podman-docker containerd runc; do sudo apt-get remove $pkg; done\n</code></pre>"},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#setup-apt","title":"setup apt","text":"<p><pre><code># Add Docker's official GPG key:\nsudo apt-get update\nsudo apt-get install -y ca-certificates curl gnupg\n</code></pre> <pre><code>case $(uname -a) in\n  *buntu*) HOST_OS=ubuntu;;\n  *ebian*) HOST_OS=debian;;\n  *)\n    echo \"Unsupported system\"\n    ;;\nesac\n</code></pre></p> <p><pre><code># ubuntu18\n# Add Docker's official GPG key:\ncurl -fsSL https://download.docker.com/linux/$HOST_OS/gpg | sudo apt-key add -\n</code></pre> Or <pre><code># ubuntu 22\nsudo install -m 0755 -d /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/$HOST_OS/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\nsudo chmod a+r /etc/apt/keyrings/docker.gpg\n</code></pre></p> <pre><code># Add the repository to Apt sources:\necho \\\n  \"deb [arch=$(dpkg --print-architecture)] https://download.docker.com/linux/${HOST_OS} \\\n  $(. /etc/os-release &amp;&amp; echo \"$VERSION_CODENAME\") stable\" | \\\n  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n</code></pre>"},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#install","title":"Install","text":"<pre><code>sudo apt-get update\n</code></pre>"},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#install-docker-packages","title":"install docker packages","text":"<pre><code>sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n</code></pre>"},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#comments","title":"Comments","text":""},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#konosubakonoakua-2024-09-21t201611z","title":"konosubakonoakua \u00b7 2024-09-21T20:16:11Z","text":""},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#docker-mirrors","title":"docker mirrors","text":"<p>https://github.com/konosubakonoakua/blog/issues/86#issuecomment-2365307898 - https://jockerhub.com/ - https://docker.1panel.dev/ <pre><code>sudo tee /etc/docker/daemon.json &lt;&lt;EOF\n{\n    \"registry-mirrors\": [\"https://hub.1panel.dev\"]\n}\nEOF\nsudo systemctl daemon-reload &amp;&amp; sudo systemctl restart docker\n</code></pre></p>"},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#konosubakonoakua-2024-11-26t022916z","title":"konosubakonoakua \u00b7 2024-11-26T02:29:16Z","text":""},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#verify","title":"Verify","text":"<p><pre><code>sudo docker run hello-world\n</code></pre> If failed to pull image, follow #86.</p>"},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#postinstall","title":"postinstall","text":""},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#manage-docker-as-a-non-root-user","title":"Manage Docker as a non-root user","text":"<ul> <li>Check if you already have a Docker group:     <pre><code>groups\n</code></pre></li> <li>If not     <pre><code># sudo groupadd docker\nsudo usermod -aG docker $USER\nnewgrp docker\n</code></pre></li> <li>If you have `$HOME/.docker:     <pre><code>sudo chown \"$USER\":\"$USER\" /home/\"$USER\"/.docker -R\nsudo chmod g+rwx \"$HOME/.docker\" -R\n</code></pre></li> <li>Try     <pre><code>docker run hello-world\n</code></pre></li> </ul>"},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#trouble-shooting","title":"trouble shooting","text":"<ul> <li>rootless</li> <li>firewall</li> </ul>"},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#konosubakonoakua-2025-03-31t015735z","title":"konosubakonoakua \u00b7 2025-03-31T01:57:35Z","text":""},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#proxy","title":"proxy","text":"<p><pre><code>sudo mkdir -p /etc/systemd/system/docker.service.d\nsudo tee /etc/systemd/system/docker.service.d/http-proxy.conf &lt;&lt; EOF\n[Service]                                                                                                                                                              \nEnvironment=\"HTTP_PROXY=$http_proxy\"                                                                                                                       \nEnvironment=\"HTTPS_PROXY=$https_proxy\"                                                                                                                      \nEnvironment=\"NO_PROXY=localhost,127.0.0.1,\"\nEOF\n</code></pre> <pre><code>sudo mv /etc/systemd/system/docker.service.d/http-proxy.conf /etc/systemd/system/docker.service.d/http-proxy.conf.disabled\n</code></pre> <pre><code>sudo mv /etc/systemd/system/docker.service.d/http-proxy.conf.disabled /etc/systemd/system/docker.service.d/http-proxy.conf\n</code></pre> <pre><code>sudo systemctl daemon-reload &amp;&amp; sudo systemctl restart docker &amp;&amp; systemctl show --property=Environment docker\n</code></pre></p>"},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#konosubakonoakua-2025-03-31t024257z","title":"konosubakonoakua \u00b7 2025-03-31T02:42:57Z","text":""},{"location":"notes/posts/84%23%5Bsw%5D%5Blinux%5D%20docker%20engine%20%28CE%29%20install/#references","title":"References","text":"<ul> <li>https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-18-04</li> </ul>"},{"location":"notes/posts/85%23%5Bsw%5D%5Blinux%5D%20fcitx5%20%26%20rime%20pinyin%20input%20method%20install/","title":"85 [sw][linux] fcitx5 &amp; rime pinyin input method install","text":""},{"location":"notes/posts/85%23%5Bsw%5D%5Blinux%5D%20fcitx5%20%26%20rime%20pinyin%20input%20method%20install/#fcitx5","title":"fcitx5","text":"<p><pre><code>sudo apt install fcitx5\n#im-config\n</code></pre> config <code>~/.xprofile</code> <pre><code>tee -a ~/.xprofile &lt;&lt; EOF\nexport GTK_IM_MODULE=fcitx5\nexport QT_IM_MODULE=fcitx5\nexport XMODIFIERS=\\\"@im=fcitx5\\\"\nexport LANG=\\\"zh_CN.UTF-8\\\"\nexport LC_CTYPE=\\\"zh_CN.UTF-8\\\"\nEOF\n</code></pre></p>"},{"location":"notes/posts/85%23%5Bsw%5D%5Blinux%5D%20fcitx5%20%26%20rime%20pinyin%20input%20method%20install/#rime","title":"rime","text":"<ul> <li>install     <pre><code>sudo apt install fcitx5-rime\n</code></pre></li> <li> <p>clone config from github     <pre><code>mkdir -p ~/.local/share/fcitx5/\ncd ~/.local/share/fcitx5 \\\n  &amp;&amp; git clone --depth=1 https://github.com/iDvel/rime-ice \\\n  &amp;&amp; ln -s \"$(pwd)/rime-ice\" \"$(pwd)/rime\"\n</code></pre></p> </li> <li> <p>custom</p> <ul> <li>explain     </li> <li>diff     <pre><code>git apply &lt;&lt; EOF\ndiff --git a/default.yaml b/default.yaml\nindex f3d6f73..4ac4cc9 100644\n--- a/default.yaml\n+++ b/default.yaml\n@@ -10,19 +10,19 @@ config_version: '2024-02-05'\n schema_list:\n   # \u53ef\u4ee5\u76f4\u63a5\u5220\u9664\u6216\u6ce8\u91ca\u4e0d\u9700\u8981\u7684\u65b9\u6848\uff0c\u5bf9\u5e94\u7684 *.schema.yaml \u65b9\u6848\u6587\u4ef6\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5220\u9664\n   # \u9664\u4e86 t9\uff0c\u5b83\u4f9d\u8d56\u4e8e rime_ice\uff0c\u7528\u4e5d\u5bab\u683c\u522b\u5220 rime_ice.schema.yaml\n-  - schema: rime_ice               # \u96fe\u51c7\u62fc\u97f3\uff08\u5168\u62fc\uff09\n-  - schema: t9                     # \u4e5d\u5bab\u683c\uff08\u4ed3\u8f93\u5165\u6cd5\uff09\n+  # - schema: rime_ice               # \u96fe\u51c7\u62fc\u97f3\uff08\u5168\u62fc\uff09\n+  # - schema: t9                     # \u4e5d\u5bab\u683c\uff08\u4ed3\u8f93\u5165\u6cd5\uff09\n   - schema: double_pinyin          # \u81ea\u7136\u7801\u53cc\u62fc\n-  - schema: double_pinyin_abc      # \u667a\u80fd ABC \u53cc\u62fc\n-  - schema: double_pinyin_mspy     # \u5fae\u8f6f\u53cc\u62fc\n-  - schema: double_pinyin_sogou    # \u641c\u72d7\u53cc\u62fc\n-  - schema: double_pinyin_flypy    # \u5c0f\u9e64\u53cc\u62fc\n-  - schema: double_pinyin_ziguang  # \u7d2b\u5149\u53cc\u62fc\n+  # - schema: double_pinyin_abc      # \u667a\u80fd ABC \u53cc\u62fc\n+  # - schema: double_pinyin_mspy     # \u5fae\u8f6f\u53cc\u62fc\n+  # - schema: double_pinyin_sogou    # \u641c\u72d7\u53cc\u62fc\n+  # - schema: double_pinyin_flypy    # \u5c0f\u9e64\u53cc\u62fc\n+  # - schema: double_pinyin_ziguang  # \u7d2b\u5149\u53cc\u62fc\n\n\n # \u83dc\u5355\n menu:\n-  page_size: 5  # \u5019\u9009\u8bcd\u4e2a\u6570\n+  page_size: 9  # \u5019\u9009\u8bcd\u4e2a\u6570\n   # alternative_select_labels: [ \u2460, \u2461, \u2462, \u2463, \u2464, \u2465, \u2466, \u2467, \u2468, \u2469 ]  # \u4fee\u6539\u5019\u9009\u9879\u6807\u7b7e\n   # alternative_select_keys: ASDFGHJKL  # \u5982\u7f16\u7801\u5b57\u7b26\u5360\u7528\u6570\u5b57\u952e\uff0c\u5219\u9700\u53e6\u8bbe\u9009\u5b57\u952e\n\n@@ -188,12 +188,12 @@ key_binder:\n     - { when: has_menu, accept: equal, send: Page_Down }\n\n     # \u7ffb\u9875 , .\n-    # - { when: paging, accept: comma, send: Page_Up }\n-    # - { when: has_menu, accept: period, send: Page_Down }\n+    - { when: paging, accept: comma, send: Page_Up }\n+    - { when: has_menu, accept: period, send: Page_Down }\n\n     # \u7ffb\u9875 [ ]\n-    # - { when: paging, accept: bracketleft, send: Page_Up }\n-    # - { when: has_menu, accept: bracketright, send: Page_Down }\n+    - { when: paging, accept: bracketleft, send: Page_Up }\n+    - { when: has_menu, accept: bracketright, send: Page_Down }\n\n     # \u4e24\u79cd\u6309\u952e\u914d\u7f6e\uff0c\u9f20\u987b\u7ba1 Control+Shift+4 \u751f\u6548\uff0c\u5c0f\u72fc\u6beb Control+Shift+dollar \u751f\u6548\uff0c\u90fd\u5199\u4e0a\u4e86\u3002\n     # numbered_mode_switch:\ndiff --git a/double_pinyin.schema.yaml b/double_pinyin.schema.yaml\nindex 154adbd..77e65e4 100644\n--- a/double_pinyin.schema.yaml\n+++ b/double_pinyin.schema.yaml\n@@ -35,6 +35,7 @@ schema:\n switches:\n   - name: ascii_mode\n     states: [ \u4e2d, \uff21 ]\n+    reset: 1\n   - name: ascii_punct  # \u4e2d\u82f1\u6807\u70b9\n     states: [ \u00a5, $ ]\n   - name: traditionalization\nEOF\n</code></pre></li> </ul> </li> <li>references</li> <li>fcitx5-rime\u4e2a\u4eba\u914d\u7f6e\u4ee5\u53ca\u8e29\u5751\u70b9\u89e3\u51b3\u7b80\u8981</li> </ul>"},{"location":"notes/posts/85%23%5Bsw%5D%5Blinux%5D%20fcitx5%20%26%20rime%20pinyin%20input%20method%20install/#comments","title":"Comments","text":""},{"location":"notes/posts/85%23%5Bsw%5D%5Blinux%5D%20fcitx5%20%26%20rime%20pinyin%20input%20method%20install/#konosubakonoakua-2024-09-21t192744z","title":"konosubakonoakua \u00b7 2024-09-21T19:27:44Z","text":""},{"location":"notes/posts/85%23%5Bsw%5D%5Blinux%5D%20fcitx5%20%26%20rime%20pinyin%20input%20method%20install/#references","title":"references","text":"<ul> <li>official CustomizationGuide</li> <li>iDvel/rime-ice</li> </ul>"},{"location":"notes/posts/86%23%5Bsw%5D%5Blinux%5D%20change%20source%20mirror%20registry%20__/","title":"86 [sw][linux] change source mirror registry \u6362\u6e90","text":""},{"location":"notes/posts/86%23%5Bsw%5D%5Blinux%5D%20change%20source%20mirror%20registry%20__/#mirrors","title":"mirrors","text":"<ul> <li>https://mirrors.bfsu.edu.cn/help/</li> </ul>"},{"location":"notes/posts/86%23%5Bsw%5D%5Blinux%5D%20change%20source%20mirror%20registry%20__/#python","title":"python","text":"<pre><code>pip config set global.index-url https://mirrors.bfsu.edu.cn/pypi/web/simple\n</code></pre>"},{"location":"notes/posts/86%23%5Bsw%5D%5Blinux%5D%20change%20source%20mirror%20registry%20__/#rust","title":"rust","text":"<pre><code>export CARGO_REGISTRIES_CRATES_IO_PROTOCOL=git\nexport CARGO_REGISTRIES_CRATES_IO_INDEX=https://mirrors.tuna.tsinghua.edu.cn/git/crates.io-index.git\n</code></pre>"},{"location":"notes/posts/86%23%5Bsw%5D%5Blinux%5D%20change%20source%20mirror%20registry%20__/#comments","title":"Comments","text":""},{"location":"notes/posts/86%23%5Bsw%5D%5Blinux%5D%20change%20source%20mirror%20registry%20__/#konosubakonoakua-2024-09-21t201530z","title":"konosubakonoakua \u00b7 2024-09-21T20:15:30Z","text":""},{"location":"notes/posts/86%23%5Bsw%5D%5Blinux%5D%20change%20source%20mirror%20registry%20__/#docker","title":"docker","text":"<ul> <li>https://jockerhub.com/</li> <li>https://docker.1panel.dev/ <pre><code>sudo tee /etc/docker/daemon.json &lt;&lt;EOF\n{\n    \"registry-mirrors\": [\"https://docker.1panel.dev\"]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n</code></pre></li> </ul>"},{"location":"notes/posts/86%23%5Bsw%5D%5Blinux%5D%20change%20source%20mirror%20registry%20__/#konosubakonoakua-2024-09-21t201539z","title":"konosubakonoakua \u00b7 2024-09-21T20:15:39Z","text":""},{"location":"notes/posts/86%23%5Bsw%5D%5Blinux%5D%20change%20source%20mirror%20registry%20__/#npm","title":"npm","text":"<pre><code>npm config set registry https://registry.npmmirror.com\n# https://npmmirror.com/\n</code></pre>"},{"location":"notes/posts/87%23%5Bsw%5D%5Blinux%5D%20panel/","title":"87 [sw][linux] panel","text":""},{"location":"notes/posts/87%23%5Bsw%5D%5Blinux%5D%20panel/#1panel","title":"1panel","text":""},{"location":"notes/posts/88%23%5Bsw%5D%5Blinux%5D%20utils%20tools/","title":"88 [sw][linux] utils tools","text":""},{"location":"notes/posts/88%23%5Bsw%5D%5Blinux%5D%20utils%20tools/#just","title":"just","text":"<pre><code>mkdir -p ~/.local/bin\ncurl --proto '=https' --tlsv1.2 -sSf https://just.systems/install.sh | bash -s -- --to ~/.local/bin\nexport PATH=\"$PATH:$HOME/.local/bin\"\njust --help\n</code></pre>"},{"location":"notes/posts/89%23%5Bsw%5D%5Blinux%5D%5Bxilinx%5D%5Bfpga%5D%20petalinux%20use%20sstate-cache/","title":"89 [sw][linux][xilinx][fpga] petalinux use sstate-cache","text":""},{"location":"notes/posts/89%23%5Bsw%5D%5Blinux%5D%5Bxilinx%5D%5Bfpga%5D%20petalinux%20use%20sstate-cache/#use-sstate-cache","title":"use [sstate-cache]","text":"<p>(https://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/embedded-design-tools/) <pre><code>$ petalinux-config ---&gt; Yocto Settings ---&gt; Add pre-mirror url ---&gt; file:///tools/petalinux/sstate/2024.1/downloads\n$ petalinux-config ---&gt; Yocto Settings ---&gt; Local sstate feeds settings ---&gt; local sstate feeds url ---&gt; /tools/petalinux/sstate/2024.1/arm\n</code></pre></p>"},{"location":"notes/posts/89%23%5Bsw%5D%5Blinux%5D%5Bxilinx%5D%5Bfpga%5D%20petalinux%20use%20sstate-cache/#20241","title":"2024.1","text":"<pre><code>By default petalinux uses sstate-cache and download mirrors from petalinux.xilinx.com\nThis README is for the users who uses tool completely offline.\n\nSetting sstate cache\n\n1) Extract the downloaded tar contents of sstate-cache at any location\n2) run petalinux-config\n         -&gt; Yocto Settings\n             -&gt;Local sstate feeds settings\n                  -&gt;local sstate feeds url\n                          (press Enter)\n3) Provide the path of sstate-cache from above\n           Ex: /&lt;path&gt;/aarch64  for Versal projects\n\n4) Save the configurations to use the sstate-cache\n\nSetting download mirror\n\n1) Extract the downloaded tar contents of downloads at any location\n2) run petalinux-config\n        -&gt; Yocto Settings\n                -&gt; Add pre-mirror url\n                                  -&gt;  (press Enter)\n                                        Clear default value\n\n3) Provide the path of downloads from above\n        file://&lt;path&gt;/downloads for all projects\n\n4) Save the configurations to use the download mirrors\n\n5) Verify the changes in build/conf/plnxtool.conf\n6) petalinux-build\n</code></pre>"},{"location":"notes/posts/89%23%5Bsw%5D%5Blinux%5D%5Bxilinx%5D%5Bfpga%5D%20petalinux%20use%20sstate-cache/#20191","title":"2019.1","text":"<pre><code>By default petalinux uses sstate-cache and download mirrors from petalinux.xilinx.com\nThis README is for the users who uses tool completely offline.\n\nSetting sstate cache\n\n1) Extract the downloaded tar contents of sstate-cache at any location\n2) run petalinux-config\n         -&gt; Yocto Settings\n             -&gt;Local sstate feeds settings\n                  -&gt;local sstate feeds url\n                          (press Enter)\n3) Provide the path of sstate-cache from above\n           Ex: /&lt;path&gt;/aarch64  for ZynqMP projects\n               /&lt;path&gt;/arm      for Zynq projects\n               /&lt;path&gt;/mb-full  for MB AXI full projects\n\n4) Save the configurations to use the sstate-cache\n\nSetting download mirror\n\n1) Extract the downloaded tar contents of sstate-cache at any location\n2) run petalinux-config\n        -&gt; Yocto Settings\n                -&gt; Add pre-mirror url\n                                  -&gt;  (press Enter)\n                                        Clear default value\n\n3) Provide the path of sstate-cache from above\n        file://&lt;path&gt;/downloads for all projects\n\n4) Save the configurations to use the download mirrors\n\n5) Verify the changes in build/conf/plnxtool.conf\n6) petalinux-build\n</code></pre>"},{"location":"notes/posts/89%23%5Bsw%5D%5Blinux%5D%5Bxilinx%5D%5Bfpga%5D%20petalinux%20use%20sstate-cache/#comments","title":"Comments","text":""},{"location":"notes/posts/89%23%5Bsw%5D%5Blinux%5D%5Bxilinx%5D%5Bfpga%5D%20petalinux%20use%20sstate-cache/#konosubakonoakua-2024-09-25t170213z","title":"konosubakonoakua \u00b7 2024-09-25T17:02:13Z","text":""},{"location":"notes/posts/89%23%5Bsw%5D%5Blinux%5D%5Bxilinx%5D%5Bfpga%5D%20petalinux%20use%20sstate-cache/#nfs-for-sstate-cache","title":"nfs for sstate-cache","text":"<p>You should have <code>/tools/petalinux/sstate-cache</code> at this time. <pre><code>sudo cp -f /etc/exports /etc/exports.bak\nsudo tee -a /etc/exports &lt;&lt; EOF\n/tools/petalinux/sstate-cache *(rw,sync,no_root_squash)\nEOF\n</code></pre> restart and show <pre><code>sudo service nfs-kernel-server restart\nshowmount -e\n</code></pre> find your ip address <pre><code>hostname -I\n</code></pre></p>"},{"location":"notes/posts/89%23%5Bsw%5D%5Blinux%5D%5Bxilinx%5D%5Bfpga%5D%20petalinux%20use%20sstate-cache/#konosubakonoakua-2024-09-25t182625z","title":"konosubakonoakua \u00b7 2024-09-25T18:26:25Z","text":""},{"location":"notes/posts/89%23%5Bsw%5D%5Blinux%5D%5Bxilinx%5D%5Bfpga%5D%20petalinux%20use%20sstate-cache/#sstate_dir-dl_dir","title":"SSTATE_DIR &amp; DL_DIR","text":"<p>can I map these two to sstate folder? (tbd)</p>"},{"location":"notes/posts/90%23%5Bsw%5D%5Blinux%5D%5Bcommand%5D%20tar%20multithread/","title":"90 [sw][linux][command] tar multithread","text":""},{"location":"notes/posts/90%23%5Bsw%5D%5Blinux%5D%5Bcommand%5D%20tar%20multithread/#tarxz","title":"tar.xz","text":"<p><pre><code>tar -cvf - my_folder/ | xz -T 0 -c &gt; my_folder.tar.xz\n</code></pre> -T \u540e\u9762\u8ddf\u4e0a\u7684\u53c2\u6570\u662f\u8981\u4f7f\u7528\u7684\u7ebf\u7a0b\u6570\u91cf\uff0c0 \u4ee3\u8868\u5c3d\u53ef\u80fd\u591a\u7684\u4f7f\u7528 CPU \u7ebf\u7a0b\u3002</p>"},{"location":"notes/posts/90%23%5Bsw%5D%5Blinux%5D%5Bcommand%5D%20tar%20multithread/#comments","title":"Comments","text":""},{"location":"notes/posts/90%23%5Bsw%5D%5Blinux%5D%5Bcommand%5D%20tar%20multithread/#konosubakonoakua-2024-09-22t040211z","title":"konosubakonoakua \u00b7 2024-09-22T04:02:11Z","text":""},{"location":"notes/posts/90%23%5Bsw%5D%5Blinux%5D%5Bcommand%5D%20tar%20multithread/#pigz","title":"pigz","text":"<p>compress <pre><code>tar --use-compress-program=\"pigz -k -p8\" -cf output.tgz *\n</code></pre> decompress (a little bit faster) <pre><code>tar --use-compress-program=\"pigz -k -p8\" -xf output.tgz\n</code></pre></p>"},{"location":"notes/posts/90%23%5Bsw%5D%5Blinux%5D%5Bcommand%5D%20tar%20multithread/#konosubakonoakua-2024-09-22t041405z","title":"konosubakonoakua \u00b7 2024-09-22T04:14:05Z","text":""},{"location":"notes/posts/90%23%5Bsw%5D%5Blinux%5D%5Bcommand%5D%20tar%20multithread/#references","title":"references","text":"<ul> <li>https://unix.stackexchange.com/questions/608207/how-to-use-multi-threading-for-creating-and-extracting-tar-xz</li> </ul>"},{"location":"notes/posts/91%23%5Bsw%5D%5Blinux%5D%5Bsys%5D%5Bnetwork%5D%20linux%20network%20setting/","title":"91 [sw][linux][sys][network] linux network setting","text":"<pre><code>sudo apt install net-tools\nipconfig\n</code></pre> <pre><code>sudo ip link set dev eno1 down\nsudo ip link set dev eno1 address XX:XX:XX:XX:XX:XX\nsudo ip link set dev eno1 up\n</code></pre>"},{"location":"notes/posts/91%23%5Bsw%5D%5Blinux%5D%5Bsys%5D%5Bnetwork%5D%20linux%20network%20setting/#comments","title":"Comments","text":""},{"location":"notes/posts/91%23%5Bsw%5D%5Blinux%5D%5Bsys%5D%5Bnetwork%5D%20linux%20network%20setting/#konosubakonoakua-2024-09-26t034300z","title":"konosubakonoakua \u00b7 2024-09-26T03:43:00Z","text":""},{"location":"notes/posts/91%23%5Bsw%5D%5Blinux%5D%5Bsys%5D%5Bnetwork%5D%20linux%20network%20setting/#references","title":"references","text":"<ul> <li>https://www.baeldung.com/linux/set-static-ip-address</li> <li>https://www.debian.org/doc/manuals/debian-reference/ch05.en.html#_the_hostname_resolution</li> </ul>"},{"location":"notes/posts/91%23%5Bsw%5D%5Blinux%5D%5Bsys%5D%5Bnetwork%5D%20linux%20network%20setting/#konosubakonoakua-2024-09-27t095754z","title":"konosubakonoakua \u00b7 2024-09-27T09:57:54Z","text":""},{"location":"notes/posts/91%23%5Bsw%5D%5Blinux%5D%5Bsys%5D%5Bnetwork%5D%20linux%20network%20setting/#change-hostname","title":"change hostname","text":"<p>On Debian system, here's the doc. <pre><code>_HOSTNAME=RF-PC-TS-LINUX\nsudo hostname $_HOSTNAME\nsudo sed -i -E \"s#(127\\.0\\.1\\.1\\s+)(.*)#\\1$_HOSTNAME#\" /etc/hosts\n</code></pre></p>"},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/","title":"92 [sw][linux] ubuntu 22 settings","text":""},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#disableenable-wayland","title":"disable/enable wayland","text":"<pre><code># disable wayland\nsudo sed -i \"s/#WaylandEnable/WaylandEnable/\" /etc/gdm3/custom.conf\n# enable wayland\nsudo sed -i \"s/WaylandEnable/#WaylandEnable/\" /etc/gdm3/custom.conf\n# or just manually\nsudo vim /etc/gdm3/custom.conf\n</code></pre>"},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#comments","title":"Comments","text":""},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#konosubakonoakua-2024-09-23t061730z","title":"konosubakonoakua \u00b7 2024-09-23T06:17:30Z","text":""},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#install-a-better-file-explorer","title":"install a better file explorer","text":"<pre><code>sudo apt-get install ?\n</code></pre>"},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#konosubakonoakua-2024-11-12t171823z","title":"konosubakonoakua \u00b7 2024-11-12T17:18:23Z","text":""},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#mirrors-multi-arch","title":"mirrors (multi-arch)","text":"<ul> <li>https://wiki.debian.org/Multiarch/HOWTO <pre><code>sudo dpkg --add-architecture i386\nsudo dpkg --add-architecture armhf\nsudo dpkg --add-architecture arm64\nsudo dpkg --print-foreign-architectures\n</code></pre> <pre><code>sudo cp -f /etc/apt/sources.list /etc/apt/sources.list.bak\n</code></pre> <pre><code>sudo tee /etc/apt/sources.list &lt;&lt; 'EOF'\n\n# \u9ed8\u8ba4\u6ce8\u91ca\u4e86\u6e90\u7801\u955c\u50cf\u4ee5\u63d0\u9ad8 apt update \u901f\u5ea6\uff0c\u5982\u6709\u9700\u8981\u53ef\u81ea\u884c\u53d6\u6d88\u6ce8\u91ca\ndeb [arch=amd64,i386] https://mirrors.bfsu.edu.cn/ubuntu/ jammy main restricted universe multiverse\ndeb [arch=amd64,i386] https://mirrors.bfsu.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse\ndeb [arch=amd64,i386] https://mirrors.bfsu.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse\n# deb-src https://mirrors.bfsu.edu.cn/ubuntu/ jammy main restricted universe multiverse\n# deb-src https://mirrors.bfsu.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse\n# deb-src https://mirrors.bfsu.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse\n\n# \u4ee5\u4e0b\u5b89\u5168\u66f4\u65b0\u8f6f\u4ef6\u6e90\u5305\u542b\u4e86\u5b98\u65b9\u6e90\u4e0e\u955c\u50cf\u7ad9\u914d\u7f6e\uff0c\u5982\u6709\u9700\u8981\u53ef\u81ea\u884c\u4fee\u6539\u6ce8\u91ca\u5207\u6362\ndeb [arch=amd64,i386] http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse\n# deb-src http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse\n\n# \u9884\u53d1\u5e03\u8f6f\u4ef6\u6e90\uff0c\u4e0d\u5efa\u8bae\u542f\u7528\n# deb https://mirrors.bfsu.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse\n# # deb-src https://mirrors.bfsu.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse\n\n######################################################################################################\n\n# \u9ed8\u8ba4\u6ce8\u91ca\u4e86\u6e90\u7801\u955c\u50cf\u4ee5\u63d0\u9ad8 apt update \u901f\u5ea6\uff0c\u5982\u6709\u9700\u8981\u53ef\u81ea\u884c\u53d6\u6d88\u6ce8\u91ca\ndeb [arch=arm64,armhf] https://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy main restricted universe multiverse\ndeb [arch=arm64,armhf] https://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy-updates main restricted universe multiverse\ndeb [arch=arm64,armhf] https://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy-backports main restricted universe multiverse\n# deb-src https://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy main restricted universe multiverse\n# deb-src https://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy-updates main restricted universe multiverse\n# deb-src https://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy-backports main restricted universe multiverse\n\n# \u4ee5\u4e0b\u5b89\u5168\u66f4\u65b0\u8f6f\u4ef6\u6e90\u5305\u542b\u4e86\u5b98\u65b9\u6e90\u4e0e\u955c\u50cf\u7ad9\u914d\u7f6e\uff0c\u5982\u6709\u9700\u8981\u53ef\u81ea\u884c\u4fee\u6539\u6ce8\u91ca\u5207\u6362\ndeb [arch=arm64,armhf] http://ports.ubuntu.com/ubuntu-ports/ jammy-security main restricted universe multiverse\n# deb-src http://ports.ubuntu.com/ubuntu-ports/ jammy-security main restricted universe multiverse\n\n# \u9884\u53d1\u5e03\u8f6f\u4ef6\u6e90\uff0c\u4e0d\u5efa\u8bae\u542f\u7528\n# deb [arch=armel,armhf] https://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy-proposed main restricted universe multiverse\n# # deb-src https://mirrors.bfsu.edu.cn/ubuntu-ports/ jammy-proposed main restricted universe multiverse\n\nEOF\n</code></pre></li> </ul>"},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#konosubakonoakua-2024-12-13t034726z","title":"konosubakonoakua \u00b7 2024-12-13T03:47:26Z","text":""},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#root-passwd-reset-etcshadow","title":"root passwd reset (<code>/etc/shadow</code>)","text":"<p><pre><code>openssl passwd -1 \"your-password-here\"\n</code></pre> copy generated password to <code>/etc/shadow</code>: <pre><code># cat /etc/shadow\nroot:&lt;your password&gt;:10933:0:99999:7:::\n</code></pre></p>"},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#konosubakonoakua-2024-12-13t035215z","title":"konosubakonoakua \u00b7 2024-12-13T03:52:15Z","text":""},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#avahi-daemon-mdns","title":"avahi-daemon (mdns)","text":"<p><pre><code>hostname &lt;your hostname&gt;\nsudo vi /etc/hostname\n</code></pre> <pre><code>sudo apt install avahi-daemon\nsudo systemctl start avahi-daemon\nsudo systemctl enable avahi-daemon\n</code></pre></p>"},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#konosubakonoakua-2024-12-13t035356z","title":"konosubakonoakua \u00b7 2024-12-13T03:53:56Z","text":""},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#ntp","title":"ntp","text":""},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#systemd-timesyncd","title":"systemd-timesyncd","text":"<p><pre><code>timedatectl set-timezone Asia/Shanghai\nsudo date --set=\"2025-02-12 11:32:00\"\n</code></pre> <pre><code>sudo apt -y install systemd-timesyncd\nsudo systemctl enable systemd-timesyncd\nsudo systemctl start systemd-timesyncd\n</code></pre></p>"},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#konosubakonoakua-2025-07-11t071944z","title":"konosubakonoakua \u00b7 2025-07-11T07:19:44Z","text":""},{"location":"notes/posts/92%23%5Bsw%5D%5Blinux%5D%20ubuntu%2022%20settings/#animations","title":"animations","text":"<pre><code>gsettings set org.gnome.desktop.interface enable-animations false # or true\n</code></pre>"},{"location":"notes/posts/93%23%5Bhw%5D%5Bfpga%5D%20linux%20Vivado%202019.1%20setup/","title":"93 [hw][fpga] linux Vivado 2019.1 setup","text":""},{"location":"notes/posts/93%23%5Bhw%5D%5Bfpga%5D%20linux%20Vivado%202019.1%20setup/#download","title":"download","text":"<p>https://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/vivado-design-tools/archive.html</p>"},{"location":"notes/posts/93%23%5Bhw%5D%5Bfpga%5D%20linux%20Vivado%202019.1%20setup/#deps","title":"deps","text":"<pre><code>sudo apt install libtinfo5 libncurses5\nsudo apt-get install -y python gawk gcc git make net-tools libncurses5-dev tftpd zlib1g:i386 libssl-dev flex bison libselinux1 gnupg wget diffstat chrpath socat xterm autoconf libtool tar unzip texinfo zlib1g-dev gcc-multilib build-essential screen pax gzip\n</code></pre>"},{"location":"notes/posts/93%23%5Bhw%5D%5Bfpga%5D%20linux%20Vivado%202019.1%20setup/#install","title":"install","text":"<pre><code>cd ~/Downloads\ntar xvfz Xilinx_Vivado_SDK_2019.1_0524_1430.tar.gz\ncd Xilinx_Vivado_SDK_2019.1_0524_1430\nsudo ./xsetup\n</code></pre>"},{"location":"notes/posts/93%23%5Bhw%5D%5Bfpga%5D%20linux%20Vivado%202019.1%20setup/#create-desktop-files","title":"create desktop files","text":"<p>on ubuntu 22, the desktop file maybe will not work immediately, if not, try reboot or logout. <pre><code>mkdir -p ~/.local/share/applications\ncd ~/.local/share/applications/\n\ncat &lt;&lt;EOF &gt; vivado2019.1.desktop\n[Desktop Entry]\nType=Application\nName=Vivado 2019.1\nExec=bash -c \"source /tools/Xilinx/Vivado/2019.1/settings64.sh &amp;&amp; /tools/Xilinx/Vivado/2019.1/bin/vivado\"\nIcon=/tools/Xilinx/Vivado/2019.1/doc/images/vivado_logo.png\nStartupNotify=true\nCategories=Application;\nEOF\n</code></pre></p>"},{"location":"notes/posts/93%23%5Bhw%5D%5Bfpga%5D%20linux%20Vivado%202019.1%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/93%23%5Bhw%5D%5Bfpga%5D%20linux%20Vivado%202019.1%20setup/#konosubakonoakua-2024-09-23t070134z","title":"konosubakonoakua \u00b7 2024-09-23T07:01:34Z","text":""},{"location":"notes/posts/93%23%5Bhw%5D%5Bfpga%5D%20linux%20Vivado%202019.1%20setup/#jtag-troubleshoot","title":"jtag troubleshoot","text":"<p>can both use Platfrom cable usb (DLC9G) &amp; Digilent JtagSMT2. - But DLC9G may raise hw_server too old error if last time connection is failed or cancelled - locked by another hw_server:     <pre><code>ERROR: [Labtoolstcl 44-494] There is no active target available for server at localhost.\n Targets(s) \", jsn-JTAG-SMT2-210251190311\" may be locked by another hw_server.\n</code></pre></p> <pre><code>```bash\nsudo rm -rf /tmp/digilent*\nkill $(ps -A | grep hw_server | awk '{ print $1 }')\n```\n</code></pre>"},{"location":"notes/posts/93%23%5Bhw%5D%5Bfpga%5D%20linux%20Vivado%202019.1%20setup/#if-you-are-using-virtual-box","title":"if you are using virtual box","text":""},{"location":"notes/posts/93%23%5Bhw%5D%5Bfpga%5D%20linux%20Vivado%202019.1%20setup/#cannot-find-jtag-device-in-virtualbox","title":"cannot find jtag device (in virtualbox)","text":"<ul> <li>try to plug out then plug in jtag usb device first</li> <li>sometimes virtual box will not detect jtag connected.</li> <li>it's better enable option to automatically connect jtag to vbox     </li> </ul>"},{"location":"notes/posts/93%23%5Bhw%5D%5Bfpga%5D%20linux%20Vivado%202019.1%20setup/#you-should","title":"you should,","text":"<ul> <li>on host side:</li> <li>Check linux usb device by <code>sudo lsusb</code></li> <li>Check and replace host USB cable.</li> <li>Check and change the host USB port.</li> <li>Try on another working board</li> <li>Try another good tag device</li> <li>Reboot sometimes helps too</li> <li>on target side:</li> <li>Check the target fpga borad power status.</li> <li>Power off target board before remove/attach jtag cable</li> <li>Check the boot option (jtag mode) on the FPGA board.</li> </ul>"},{"location":"notes/posts/93%23%5Bhw%5D%5Bfpga%5D%20linux%20Vivado%202019.1%20setup/#vivado-2019-hw_server-error-in-virtualbox-linux-mint22","title":"vivado 2019 hw_server error (in virtualbox linux mint22)","text":"<pre><code>connect_hw_server\nINFO: [Labtools 27-2285] Connecting to hw_server url TCP:localhost:3121\nINFO: [Labtools 27-2222] Launching hw_server...\nINFO: [Labtools 27-2221] Launch Output:\n\n****** Xilinx hw_server v2019.1\n  **** Build date : May 24 2019 at 15:06:40\n    ** Copyright 1986-2019 Xilinx, Inc. All Rights Reserved.\n\n\nERROR: [Labtoolstcl 44-494] There is no active target available for server at localhost.\n Targets(s) \", jsn-JTAG-SMT2-210251190311\" may be locked by another hw_server.\ndisconnect_hw_server localhost:3121\n</code></pre> <p>Solution: - set usb3.0 in virtualbox      - try close Server then autoconnect      - close hardware manager first - try <code>sudo rm -rf /tmp/digilent* &amp;&amp; ps -A | grep -q 'hw_server' &amp;&amp; pkill -f hw_server</code> - try reopen hardware manager - try reboot</p> <p>Finally: </p>"},{"location":"notes/posts/93%23%5Bhw%5D%5Bfpga%5D%20linux%20Vivado%202019.1%20setup/#if-you-are-using-vmware","title":"if you are using vmware","text":"<p>sorry, I haven't tried it yet.</p>"},{"location":"notes/posts/94%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%20vivado%20%26%20petalinux%202024.1%20install%20on%20linux/","title":"94 [sw][fpga][xilinx] vivado &amp; petalinux 2024.1 install on linux","text":"<p>refer to petalinux 2019 - https://github.com/konosubakonoakua/blog/issues/97#issuecomment-2374149784</p>"},{"location":"notes/posts/94%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%20vivado%20%26%20petalinux%202024.1%20install%20on%20linux/#comments","title":"Comments","text":""},{"location":"notes/posts/94%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%20vivado%20%26%20petalinux%202024.1%20install%20on%20linux/#konosubakonoakua-2024-09-23t224231z","title":"konosubakonoakua \u00b7 2024-09-23T22:42:31Z","text":""},{"location":"notes/posts/94%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%20vivado%20%26%20petalinux%202024.1%20install%20on%20linux/#downloads","title":"downloads","text":"<p>https://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/vivado-design-tools/2024-1.html</p>"},{"location":"notes/posts/94%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%20vivado%20%26%20petalinux%202024.1%20install%20on%20linux/#deps","title":"deps","text":"<p>~refer to 2019.1~</p>"},{"location":"notes/posts/94%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%20vivado%20%26%20petalinux%202024.1%20install%20on%20linux/#install","title":"install","text":"<pre><code>cd ~/Downloads\ntar xvfz FPGAs_AdaptiveSoCs_Unified_2024.1_0522_2023.tar.gz\ncd FPGAs_AdaptiveSoCs_Unified_2024.1_0522_2023\nsudo ./xsetup\n</code></pre>"},{"location":"notes/posts/94%23%5Bsw%5D%5Bfpga%5D%5Bxilinx%5D%20vivado%20%26%20petalinux%202024.1%20install%20on%20linux/#create-desktop-files-if-not-have-them","title":"create desktop files (if not have them)","text":"<pre><code>mkdir -p ~/.local/share/applications\ncd ~/.local/share/applications/\n\ncat &lt;&lt;EOF &gt; vivado2024.1.desktop\n[Desktop Entry]\nType=Application\nName=Vivado 2024.1\nExec=bash -c \"source /tools/Xilinx/Model_Composer/2024.1/settings64.sh &amp;&amp; source /tools/Xilinx/Vitis/2024.1/settings64.sh &amp;&amp; source /tools/Xilinx/Vitis_HLS/2024.1/settings64.sh &amp;&amp; source /tools/Xilinx/Vivado/2024.1/settings64.sh &amp;&amp; /tools/Xilinx/Vivado/2024.1/bin/vivado\"\nIcon=/tools/Xilinx/Vivado/2024.1/doc/images/vivado_logo.png\nStartupNotify=true\nCategories=Application;\nEOF\n\ncat &lt;&lt;EOF &gt; vitis2024.1.desktop\n[Desktop Entry]\nType=Application\nName=Vitis 2024.1\nExec=bash -c \"source /tools/Xilinx/Model_Composer/2024.1/settings64.sh &amp;&amp; source /tools/Xilinx/Vitis/2024.1/settings64.sh &amp;&amp; source /tools/Xilinx/Vitis_HLS/2024.1/settings64.sh &amp;&amp; source /tools/Xilinx/Vivado/2024.1/settings64.sh &amp;&amp; /tools/Xilinx/Vitis/2024.1/bin/vitis\"\nIcon=/tools/Xilinx/Vitis/2024.1/doc/images/ide_icon.ico\nStartupNotify=true\nCat\negories=Application;\nEOF\n\ncat &lt;&lt;EOF &gt; DocNav2024.1.desktop\n[Desktop Entry]\nType=Application\nName=DocNav 2024.1\nExec=bash -c \"source /tools/Xilinx/Model_Composer/2024.1/settings64.sh &amp;&amp; source /tools/Xilinx/Vitis/2024.1/settings64.sh &amp;&amp; source /tools/Xilinx/Vitis_HLS/2024.1/settings64.sh &amp;&amp; source /tools/Xilinx/Vivado/2024.1/settings64.sh &amp;&amp; /tools/Xilinx/Vitis/2024.1/bin/vitis\"\nIcon=/tools/Xilinx/DocNav/resources/doc_nav_application_48.png\nStartupNotify=true\nCategories=Application;\nEOF\n\ncat &lt;&lt;EOF &gt; PDM2024.1.desktop\n[Desktop Entry]\nType=Application\nName=PDM 2024.1\nExec=bash -c \"source /tools/Xilinx/Model_Composer/2024.1/settings64.sh &amp;&amp; source /tools/Xilinx/Vitis/2024.1/settings64.sh &amp;&amp; source /tools/Xilinx/Vitis_HLS/2024.1/settings64.sh &amp;&amp; source /tools/Xilinx/Vivado/2024.1/settings64.sh &amp;&amp; /tools/Xilinx/Vitis/2024.1/bin/vitis\"\nIcon=/tools/Xilinx/PDM/2024.1/doc/images/pdm_logo64.png\nStartupNotify=true\nCategories=Application;\nEOF\n</code></pre>   ### konosubakonoakua \u00b7 2024-09-23T22:43:48Z  ## petalinux 2024.1 create /tools/petalinux if not exists <pre><code>sudo mkdir -p /tools/petalinux\nsudo chown rf:rf /tools/petalinux\n</code></pre> copy from windows smb <pre><code>cd /mnt/winshare\ncp petalinux-v2024.1-05202009-installer.run ~/Downloads/\ncd ~/Downloads\nmkdir -p /tools/petalinux/sstate/2024.1\n./petalinux-v2024.1-05202009-installer.run -y -d /tools/petalinux/2024.1\n</code></pre> fix tftpboot bug https://github.com/konosubakonoakua/blog/issues/94#issuecomment-2369992894  copy sstate files <pre><code>cd /mnt/winshare\ncp sstate_aarch64_2024.1_05201002.tar.gz sstate_arm_2024.1_05201002.tar.gz cp downloads_2024.1_05201002.tar.gz ~/Downloads\ncp downloads_2024.1_05201002.tar.gz ~/Downloads\n</code></pre> extract sstate files <pre><code>tar xvzf sstate_aarch64_2024.1_05201002.tar.gz -C /tools/petalinux/sstate/2024.1/ &amp;\ntar vxzf sstate_arm_2024.1_05201002.tar.gz -C /tools/petalinux/sstate/ &amp;\ntar xvzf downloads_2024.1_05201002.tar.gz -C /tools/petalinux/sstate/2024.1/ &amp;\n</code></pre> Config petalinux projects: https://github.com/konosubakonoakua/blog/issues/89  ### konosubakonoakua \u00b7 2024-09-24T14:23:43Z  ## trouble-shooting ### petalinux-build failed with tftpboot enabled <pre><code>[ERROR] module 'plnx_vars' has no attribute 'CopyDir'\n</code></pre> solution here: https://github.com/Xilinx/PetaLinux/pull/1/files shortly, <pre><code>cp -f /tools/petalinux/2024.1/scripts/petalinux-build /tools/petalinux/2024.1/scripts/petalinux-build.bak\nsed -i \"s/plnx_vars.CopyDir/plnx_utils.CopyDir/\" /tools/petalinux/2024.1/scripts/petalinux-build\n</code></pre>   ### konosubakonoakua \u00b7 2024-09-25T14:04:20Z  ## References - https://elinux.org/TFTP_Boot_and_NFS_Root_Filesystems"},{"location":"notes/posts/95%23%5Bsw%5D%5Blinux%5D%5Bwindows%5D%5Bics%5D%20share%20personal%20network%20to%20network%20switch/","title":"95 [sw][linux][windows][ics] share personal network to network switch","text":""},{"location":"notes/posts/95%23%5Bsw%5D%5Blinux%5D%5Bwindows%5D%5Bics%5D%20share%20personal%20network%20to%20network%20switch/#computer-a-with-working-network-windows","title":"computer A with working network (windows)","text":"<p>[!IMPORTANT] If you have windows (host) rebooted, you need to restart the share process, disable then enable. Or make it persistant. Follow tutorial here. <pre><code>New-ItemProperty -Path HKLM:\\Software\\Microsoft\\Windows\\CurrentVersion\\SharedAccess -Name EnableRebootPersistConnection -Value 1 -PropertyType dword\nSet-Service SharedAccess \u2013startuptype automatic \u2013passthru\nStart-Service SharedAccess\n</code></pre> - adapter 1 connect to outside network (to be shared)     </p> <ul> <li> <p>adapter 2 connect to switch (any port) (shared via it)     </p> </li> <li> <p>don't forget to set all dns servers to <code>114.114.114.114</code> or <code>192.168.137.1</code></p> </li> <li> <p>disable auto powersave   </p> </li> </ul>"},{"location":"notes/posts/95%23%5Bsw%5D%5Blinux%5D%5Bwindows%5D%5Bics%5D%20share%20personal%20network%20to%20network%20switch/#comments","title":"Comments","text":""},{"location":"notes/posts/95%23%5Bsw%5D%5Blinux%5D%5Bwindows%5D%5Bics%5D%20share%20personal%20network%20to%20network%20switch/#konosubakonoakua-2024-09-23t143748z","title":"konosubakonoakua \u00b7 2024-09-23T14:37:48Z","text":""},{"location":"notes/posts/95%23%5Bsw%5D%5Blinux%5D%5Bwindows%5D%5Bics%5D%20share%20personal%20network%20to%20network%20switch/#computer-b-connected-to-net-switch-ubuntu-22","title":"computer B connected to net switch (ubuntu 22)","text":"<p><pre><code>#!/bin/bash\n\nexport NIC=eno1\nexport GATEWAY=192.168.137.1\nexport IP0=192.168.137.2\nexport IP1=10.9.8.8\nexport IP2=10.10.9.235\n\nexport CONNECTION=$(nmcli -t -f DEVICE,CONNECTION device status | grep $NIC | awk -F: '{print $2}')\n\nsudo nmcli connection modify \"$CONNECTION\" ipv4.addresses $IP0/24\nsudo nmcli connection modify \"$CONNECTION\" ipv4.gateway $GATEWAY\nsudo nmcli connection modify \"$CONNECTION\" ipv4.dns $GATEWAY\nsudo nmcli connection modify \"$CONNECTION\" ipv4.method manual\nsudo nmcli connection modify \"$CONNECTION\" +ipv4.addresses $IP1/24\nsudo nmcli connection modify \"$CONNECTION\" +ipv4.addresses $IP2/24\n\nsudo nmcli connection up \"$CONNECTION\"\n\nip route show\n</code></pre> then we get </p>"},{"location":"notes/posts/95%23%5Bsw%5D%5Blinux%5D%5Bwindows%5D%5Bics%5D%20share%20personal%20network%20to%20network%20switch/#konosubakonoakua-2024-09-23t162715z","title":"konosubakonoakua \u00b7 2024-09-23T16:27:15Z","text":"<p>https://ubuntu.com/core/docs/networkmanager/edit-connections</p>"},{"location":"notes/posts/95%23%5Bsw%5D%5Blinux%5D%5Bwindows%5D%5Bics%5D%20share%20personal%20network%20to%20network%20switch/#konosubakonoakua-2024-09-27t092805z","title":"konosubakonoakua \u00b7 2024-09-27T09:28:05Z","text":""},{"location":"notes/posts/95%23%5Bsw%5D%5Blinux%5D%5Bwindows%5D%5Bics%5D%20share%20personal%20network%20to%20network%20switch/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>Cannot access network but can be reached by ping (DHCP working, but IP forwarding not)</li> <li>try re-enable the share</li> <li>disable usb powersave</li> <li>enable ics autostart</li> <li>enable sharedaccess reboot persist</li> <li>https://www.wqy.ac.cn/p/2410-ics-persist/   <pre><code># fix Windows 10 ICS not working after reboot\n# https://support.microsoft.com/en-us/help/4055559/ics-doesn-t-work-after-computer-or-service-restart-on-windows-10\n[microsoft.win32.registry]::SetValue(\"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\SharedAccess\", \"EnableRebootPersistConnection\", 0x01)\n\n# Enable IP Forwarding\n# https://serverfault.com/questions/929081/how-can-i-enable-packet-forwarding-on-windows/929089#929089\nSet-NetIPInterface -Forwarding Enabled\n# Check IP Forwarding Status\nGet-NetIPInterface | Select-Object ifIndex,InterfaceAlias,AddressFamily,ConnectionState,Forwarding | Sort-Object -Property IfIndex | Format-Table\n\n# Change the Internet Connection Sharing (ICS) service Startup type to Automatic.\nSet-Service SharedAccess -StartupType Automatic\n# Start ICS service for now\nStart-Service SharedAccess\n# Check ICS service Status\nGet-Service SharedAccess\n</code></pre></li> </ul>"},{"location":"notes/posts/96%23%5Bsw%5D%5Binstrument%5D%5Bvisa%5D%5Bni%5D%20when%20ni-visa%20interactive%20control%20can%20not%20found%20devices/","title":"96 [sw][instrument][visa][ni] when ni-visa interactive control can not found devices","text":""},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/","title":"97 [hw][fpga][xilinx] petalinux 2019.1 setup","text":""},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#dependencies","title":"Dependencies","text":"<p>Switch to bash <pre><code>sudo dpkg-reconfigure dash #####choose NO\n</code></pre> Install dependecies <pre><code>sudo apt update\nsudo apt -y install libtool-bin \\\n  python2 gcc make perl tofrodos iproute2 gawk git \\\n  xvfb net-tools tftp-hpa tftpd-hpa flex bison \\\n  screen pax gzip tar gnupg wget diffstat chrpath \\\n  socat xterm autoconf libtool tar unzip texinfo \\\n  gcc-multilib build-essential libselinux1 \\\n  zlib1g-dev zlib1g-dev:i386 \\\n  libsdl1.2-dev libglib2.0-dev \\\n  libssl-dev libncurses5-dev libncursesw5 \\\n  nfs-kernel-server openssh-server \\\n  expect\n</code></pre> Config tftp server (optional). <pre><code>sudo mkdir -p /tftpboot\nsudo chown rf:rf /tftpboot\nchmod 777 /tftpboot\n</code></pre> <pre><code>sudo cp -f /etc/default/tftpd-hpa /etc/default/tftpd-hpa.bak\n\nsudo tee /etc/default/tftpd-hpa &lt;&lt; EOF\n# /etc/default/tftpd-hpa\n\nTFTP_USERNAME=\"tftp\"\nTFTP_DIRECTORY=\"/tftpboot\"\nTFTP_ADDRESS=\":69\"\nTFTP_OPTIONS=\"-l -c -s\"\nEOF\n\nsudo service tftpd-hpa restart\n</code></pre></p> <p>Install ssh server <pre><code>sudo apt-get install openssh-server\n# vim /etc/ssh/sshd_config\n</code></pre></p>"},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#comments","title":"Comments","text":""},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#konosubakonoakua-2024-09-23t175048z","title":"konosubakonoakua \u00b7 2024-09-23T17:50:48Z","text":""},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#petalinux-installation-ubuntu-18-below","title":"petalinux installation (ubuntu 18 &amp; below)","text":""},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#create-a-fake-python2-pkg-status","title":"create a fake python2 pkg status","text":"<p><pre><code>sudo tee -a /var/lib/dpkg/status &lt;&lt; EOF\n\nPackage: python\nStatus: install ok installed\nMaintainer: Fake Entry &lt;fake@example.com&gt;\nArchitecture: all\nVersion: 2.7.17\nDescription: fake package for petalinux\n\nEOF\n\nsudo ln -s /usr/bin/python2.7 /usr/bin/python\n</code></pre> If not, petalinux 2019 won't find python, and will raise error. <pre><code>ERROR: You are missing the following system tools required by PetaLinux:\n - python\n</code></pre></p>"},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#run-the-installer","title":"run the installer","text":"<pre><code>export INSTALLER=~/Downloads/petalinux-v2019.1-final-installer.run\n$INSTALLER /tools/petalinux/2019.1/\n# need confirm with licenses\n</code></pre>"},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#konosubakonoakua-2024-09-24t132045z","title":"konosubakonoakua \u00b7 2024-09-24T13:20:45Z","text":""},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#sstate-cache","title":"sstate cache","text":"<p>create /tools/petalinux if not exists <pre><code>sudo mkdir -p /tools/petalinux\nsudo chown rf:rf /tools/petalinux\n</code></pre> <pre><code>mkdir -p /tools/petalinux/sstate/2019.1\ntar xvzf ~/Downloads/sstate-rel-v2019.1.tar.gz -C /tools/petalinux/sstate/2019.1\n</code></pre></p>"},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#konosubakonoakua-2024-09-24t143710z","title":"konosubakonoakua \u00b7 2024-09-24T14:37:10Z","text":""},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#trouble-shoot","title":"trouble shoot","text":""},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#build-failed-libc-version","title":"build failed (libc version)","text":"<p>I'm using ubuntu22, so I use docker instaled. (follow #84) <pre><code>git clone https://github.com/konosubakonoakua/petalinux-docker-2019.1\n</code></pre></p>"},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#petalinux-on-docker-ubuntu-22","title":"petalinux on docker (ubuntu 22)","text":"<p>build <pre><code>docker build \\\n  --build-arg UBUNTU_MIRROR=mirrors.bfsu.edu.cn \\\n  --build-arg PETA_VERSION=2019.1 \\\n  --build-arg PETA_RUN_FILE=petalinux-v2019.1-final-installer.run \\\n  -t petalinux:2019.1 \\\n  .\n</code></pre> launch <pre><code>docker run -ti --rm \\\n  -e DISPLAY=$DISPLAY --net=\"host\" \\\n  -v /tmp/.X11-unix:/tmp/.X11-unix \\\n  -v $HOME/.Xauthority:/home/vivado/.Xauthority \\\n  -v /tools/petalinux/sstate/2019.1:/tools/petalinux/sstate/2019.1 \\\n  -v /tftpboot:/tftpboot \\\n  -v $(pwd):/home/vivado/project \\\n  petalinux:2019.1 \\\n  /bin/bash\n</code></pre> oneliner <pre><code>tee -a ~/.bashrc &lt;&lt; EOF\nalias petadocker2019v1='docker run -it --rm -e DISPLAY=$DISPLAY --net=\"host\" -v /tmp/.X11-unix:/tmp/.X11-unix -v $HOME/.Xauthority:/home/vivado/.Xauthority -v /tools/petalinux/sstate/2019.1:/tools/petalinux/sstate/2019.1 -v /tftpboot:/tftpboot -v $(pwd):/home/vivado/project petalinux:2019.1 /bin/bash'\nEOF\nsource ~/.bashrc\n</code></pre></p> <p>If you are runing docker in virtual machine shared folders, then the <code>-v</code> mount will fail. If you do <code>ls</code> in docker, You will get: <pre><code>vivado@ubuntu22-vb:~/project$ ls\nls: cannot open directory '.': Permission denied\n</code></pre> Solution: - do not run docker in these folders.   - https://forums.docker.com/t/need-docker-containers-to-rwx-onto-virtualbox-shared-folders/73454 - use smb   - mount smb first, follow #82   - mount mounted smb folder by <code>-v</code> to docker   - You can use this way to host sstate-cache on only one machine to save you drive.</p> <p>Save docker images: - https://docs.docker.com/reference/cli/docker/image/save/</p> <pre><code>```bash\ndocker save petalinux:2019.1 | gzip &gt; petalinux-2019.1-docker.tar.gz\n```\nor\n```bash\ndocker save petalinux:2019.1 &gt; petalinux-2019.1-docker.tar\npigz -9 -p 16 -c petalinux-2019.1-docker.tar &gt; petalinux-2019.1-docker.tar.gz\n```\nor\n```bash\ndocker save petalinux:2019.1 | pigz -9 -p 16 &gt; petalinux-2019.1-docker.tar.gz\n```\n</code></pre>"},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#konosubakonoakua-2024-09-25t134953z","title":"konosubakonoakua \u00b7 2024-09-25T13:49:53Z","text":""},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#nfs-setup","title":"nfs setup","text":"<p>Config nfs (optional, used for Linux rootfs mount). <pre><code>sudo mkdir -p /nfsroot\nsudo chown -R rf:rf /nfsroot\n</code></pre></p> <p>[!CAUTION] <code>/nfsroot</code> is very similar with <code>/nfsboot</code>, never make a typo like this!!! \ud83d\udea8\ud83d\udea8\ud83d\udea8\ud83d\ude31\ud83d\ude31\ud83d\ude31 <pre><code>sudo cp -f /etc/exports /etc/exports.bak\nsudo tee -a /etc/exports &lt;&lt; EOF\n/nfsroot *(rw,sync,no_root_squash)\nEOF\n</code></pre> if encountered: <code>VFS:Unable to mount root fs via NFS, tring floppy</code>: <pre><code>sudo cp -f /etc/default/nfs-kernel-server /etc/default/nfs-kernel-server.bak\nsudo tee -a /etc/default/nfs-kernel-server &lt;&lt; EOF\nRPCNFSDOPTS=\"--nfs-version 2,3,4 --debug --syslog\"\nEOF\nsudo systemctl restart nfs-kernel-server\n</code></pre> restart after modifications. <pre><code>sudo service nfs-kernel-server restart\n</code></pre> show shared folders <pre><code>showmount -e\n</code></pre> refresh on the fly <pre><code>sudo exportfs -rv\n</code></pre> test nfs <pre><code>sudo mkdir -p /mnt/nfs\nsudo mount -t nfs 127.0.0.1:/nfsroot /mnt/nfs\n</code></pre></p>"},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#references","title":"references","text":"<ul> <li>https://zhuanlan.zhihu.com/p/421380346</li> </ul>"},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#konosubakonoakua-2024-09-25t215145z","title":"konosubakonoakua \u00b7 2024-09-25T21:51:45Z","text":""},{"location":"notes/posts/97%23%5Bhw%5D%5Bfpga%5D%5Bxilinx%5D%20petalinux%202019.1%20setup/#references_1","title":"references","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/","title":"98 [hw][sw][zynq][xilinx][fpga][linux] petalinux workflow","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#design-flow-overview","title":"design flow overview","text":"<ul> <li>https://github.com/gracepua/PetaLinux-Guide</li> <li>https://github.com/DmitryAndSoCs/Cora_Z7_RT_Linux_example/blob/main/docs/src/petalinux_project_guide.md </li> </ul>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#design-flow-overview-text-version","title":"design flow overview (text version)","text":"<pre><code>petalinux-create -t &lt;project name&gt;                                  //\u521b\u5efa petalinux \u5de5\u7a0b\npetalinux-config --get-hw-description &lt;path to hdf or xsa file&gt;     //\u5bfc\u5165 hdf/xsa \u786c\u4ef6\u914d\u7f6e\u6587\u4ef6\npetalinux-config                                                    //\u6253\u5f00 petalinux \u5de5\u7a0b\u7684\u56fe\u5f62\u5316\u914d\u7f6e\u9875\u9762\npetalinux-config -c kernel                                          //\u5b9a\u5236 linux \u5185\u6838\npetalinux-config -c rootfs                                          //\u5b9a\u5236\u6839\u6587\u4ef6\u7cfb\u7edf\npetalinux-build                                                     //\u7f16\u8bd1\u6574\u4e2a petalinux \u5de5\u7a0b\npetalinux-package --boot --fsbl --fpga --u-boot --force             //\u5c06--\u540e\u9762\u7684\u6587\u4ef6\u5168\u90e8\u6253\u5305\u751f\u6210 BOOT.BIN \u6587\u4ef6\npelinux-boot jtag --prebuilt 2                                      //\u4f7f\u7528 jtag \u4e0b\u8f7d\uff0c\u5e76\u542f\u52a8\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#comments","title":"Comments","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#konosubakonoakua-2024-09-24t190038z","title":"konosubakonoakua \u00b7 2024-09-24T19:00:38Z","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#create-project","title":"create project","text":"<pre><code>petalinux-create -h\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#config-petalinux","title":"config petalinux","text":"<pre><code>petalinux-config --get-hw-description=&lt;xsa folder&gt;\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#sstate","title":"sstate","text":"<p><pre><code>_PETA_ARCH=arm\n#_PETA_ARCH=aarch64\n_PETA_VERSION=2019.1\n#_PETA_VERSION=2024.1\n_CONFIG_FILE=project-spec/configs/config\ncp $_CONFIG_FILE $_CONFIG_FILE.bak\nsed -i -e \"s/^\\(CONFIG_YOCTO_NETWORK_SSTATE_FEEDS\\)=.*/\\1=n/\" \\\n       -e \"s#^\\(CONFIG_PRE_MIRROR_URL\\)=.*#\\1=\\\"file:///tools/petalinux/sstate/$_PETA_VERSION/downloads\\\"#\" \\\n       -e \"s#^\\(CONFIG_YOCTO_LOCAL_SSTATE_FEEDS_URL\\)=.*#\\1=\\\"/tools/petalinux/sstate/$_PETA_VERSION/$_PETA_ARCH\\\"#\" \\\n       -e \"s/^# CONFIG_YOCTO_BB_NO_NETWORK is not set/CONFIG_YOCTO_BB_NO_NETWORK=y/\" \\\n       $_CONFIG_FILE\n</code></pre> <pre><code>petalinux-config --silentconfig\n</code></pre></p>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#config-kernel","title":"config kernel","text":"<pre><code>petalinux-config -c kernel\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#config-rootfs","title":"config rootfs","text":"<pre><code>petalinux-config -c rootfs\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#build","title":"build","text":"<pre><code>petalinux-build\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#make-bootbin","title":"make BOOT.bin","text":"<pre><code>petalinux-package --boot --fsbl --fpga --u-boot --force\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#make-prebuilt","title":"make prebuilt","text":"<pre><code>petalinux-package --prebuilt\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#boot","title":"boot","text":"<pre><code>pelinux-boot --jtag --prebuilt 2\n</code></pre> <p>[!IMPORTANT] If you encoutered the following error, JUST Smaaaaaashhhhhhhhhhh the reset button on your board. \ud83d\ude44\ud83d\ude44\ud83d\ude44 or do some gentle but similar \ud83e\uddd0</p> [ERROR] Command 'xsdb /tmp/tmpsetc21xx' returned non-zero exit status 1. <pre><code>rf@myPC:~ $ petalinux-boot jtag --prebuilt 2\n[WARNING] Will not program bitstream on the target. If you want to program bitstream,\n[WARNING] Use --fpga &lt;BITSTREAM&gt; option to specify a bitstream.\n[INFO] Launching XSDB for file download and boot.\n[INFO] This may take a few minutes, depending on the size of your image.\nattempting to launch hw_server\n\n****** Xilinx hw_server v2024.1\n  **** Build date : May 16 2024 at 12:16:21\n    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.\n    ** Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.\n\nINFO: hw_server application started\nINFO: Use Ctrl-C to exit hw_server application\n\nINFO: To connect to this hw_server instance use url: TCP:127.0.0.1:3121\n\nMemory read error at 0xF8007080. MMU section translation fault\n    invoked from within\n\"::tcf::eval -progress {apply {{msg} {puts $msg}}} {tcf_send_command tcfchan#0 Memory get siiii {Bea{o{msg o{} A}}} {JTAG-jsn-JTAG-SMT2-210251190311-4ba00477-0.0 4160778368 4 4 7}}\"\n    (procedure \"::tcf::send_command\" line 4)\n    invoked from within\n\"::tcf::send_command $chan Memory get \"siiii\" \"Bea{o{msg o{} A}}\" [list $ctx $start_addr $size $nbytes $mode]\"\n    (procedure \"mrd\" line 87)\n    invoked from within\n\"mrd 0xF8007080\"\n    (procedure \"ps_version\" line 2)\n    invoked from within\n\"ps_version\"\n    (procedure \"ps7_post_config\" line 8)\n    invoked from within\n\"ps7_post_config\"\n    (file \"/tmp/tmpsetc21xx\" line 8)\n[ERROR] Command 'xsdb /tmp/tmpsetc21xx' returned non-zero exit status 1.\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#konosubakonoakua-2024-09-25t173115z","title":"konosubakonoakua \u00b7 2024-09-25T17:31:15Z","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#_1","title":"[hw][sw][zynq][xilinx][fpga][linux] petalinux workflow","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#konosubakonoakua-2024-09-25t175007z","title":"konosubakonoakua \u00b7 2024-09-25T17:50:07Z","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#nfs-boot","title":"nfs boot","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#config-nfs-server","title":"config nfs server","text":"<p>Refer to https://github.com/konosubakonoakua/blog/issues/97#issuecomment-2374149784</p>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#config-petalinux_1","title":"config petalinux","text":"<p><pre><code>petalinux-config\n</code></pre> </p> <p></p> <p></p>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#overwrite-bootargs-in-devicetree","title":"overwrite bootargs in devicetree","text":"<p>[!TIP] bootargs generated by <code>petalinux-cofing</code> doesn't have correct ip config (wrong gateway &amp; netmask) add node below to <code>project-spec/meta-user/recipes-bsp/device-tree/files/system-user.dtsi</code> OR, maybe I messed up something. <pre><code>    chosen {\n        //bootargs = \"console=ttyPS0,115200 earlycon root=/dev/nfs rootfstype=nfs nfsroot=10.9.8.8:/nfsroot,tcp,nfsvers=3 ip=dhcp rw\";\n        bootargs = \"console=ttyPS0,115200 earlycon root=/dev/nfs rootfstype=nfs nfsroot=10.9.8.8:/nfsroot,tcp,nfsvers=3 ip=10.9.8.9:10.9.8.8:10.9.8.254:255.255.255.0::eth0:off rw\";\n        stdout-path = \"serial0:115200n8\";\n    };\n</code></pre></p>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#build-petalinux","title":"build petalinux","text":"<pre><code>petalinux-build\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#package-prebuilt-petalinux","title":"package prebuilt petalinux","text":"<pre><code>petalinux-package prebuilt --force\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#remove-initrd-from-pxelinuxcfgdefault","title":"remove <code>INITRD</code> from <code>pxelinux.cfg/default</code>","text":"<pre><code>PXE_CFG_FILE=/tftpboot/pxelinux.cfg/default\ncp -f $PXE_CFG_FILE $PXE_CFG_FILE.bak\nsed -i '/^INITRD/d' $PXE_CFG_FILE\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#boot-by-jtag","title":"boot by jtag","text":"<pre><code>petalinux-boot jtag --prebuilt 2\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#or-boot-by-sdcard","title":"or boot by sdcard","text":"<pre><code>TFTPBOOT_PATH=/tftpboot\nSDBOOT_PATH=/media/$USER/BOOT\ncd $TFTPBOOT_PATH\ncp BOOT.BIN boot.scr image.ub system.dtb $SDBOOT_PATH\nll $SDBOOT_PATH\numount /media/$USER/BOOT /media/$USER/rootfs\n# or jsut umount /media/$USER/*\ncd -\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#observe-on-serial","title":"observe on serial","text":"<pre><code>tio -a latest --exclude-drivers=!(cp210x)\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#check-bootarg-or-cmdline-after-login","title":"check <code>bootarg</code> or <code>cmdline</code> after login","text":"<pre><code>cat /proc/cmdline\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#konosubakonoakua-2024-09-25t215414z","title":"konosubakonoakua \u00b7 2024-09-25T21:54:14Z","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#nfs-rootfs-boot-log","title":"nfs rootfs boot log","text":"nfs_rootfs_boot.log <pre><code>$ tio -a latest --exclude-drivers=!(cp210x)\n[06:36:15.541] tio v3.7\n[06:36:15.541] Press ctrl-t q to quit\n[06:36:15.605] Warning: Could not open (null) (Bad address)\n[06:36:15.605] Waiting for tty device..\n[06:36:32.642] Connected to /dev/ttyUSB0\n 0\nswitch to partitions #0, OK\nmmc0 is current device\nScanning mmc 0:1...\nFound U-Boot script /boot.scr\n3473 bytes read in 13 ms (260.7 KiB/s)\n## Executing script at 03000000\nTrying to load boot images from mmc0\n4516312 bytes read in 258 ms (16.7 MiB/s)\n## Loading kernel from FIT Image at 10000000 ...\n   Using 'conf-system-top.dtb' configuration\n   Verifying Hash Integrity ... OK\n   Trying 'kernel-1' kernel subimage\n     Description:  Linux kernel\n     Type:         Kernel Image\n     Compression:  uncompressed\n     Data Start:   0x10000110\n     Data Size:    4496024 Bytes = 4.3 MiB\n     Architecture: ARM\n     OS:           Linux\n     Load Address: 0x00200000\n     Entry Point:  0x00200000\n     Hash algo:    sha256\n     Hash value:   d2a41d8c8fd05474c0426587c386c134138d364722a1a3bdd079ea2911452c66\n   Verifying Hash Integrity ... sha256+ OK\n## Loading fdt from FIT Image at 10000000 ...\n   Using 'conf-system-top.dtb' configuration\n   Verifying Hash Integrity ... OK\n   Trying 'fdt-system-top.dtb' fdt subimage\n     Description:  Flattened Device Tree blob\n     Type:         Flat Device Tree\n     Compression:  uncompressed\n     Data Start:   0x10449cb4\n     Data Size:    18367 Bytes = 17.9 KiB\n     Architecture: ARM\n     Hash algo:    sha256\n     Hash value:   fb2e10d77acfb07471d3e3a77ae4f7d62bcd34ead5d6c8fed2a220ebd8c98abc\n   Verifying Hash Integrity ... sha256+ OK\n   Booting using the fdt blob at 0x10449cb4\nWorking FDT set to 10449cb4\n   Loading Kernel Image\n   Loading Device Tree to 2fff8000, end 2ffff7be ... OK\nWorking FDT set to 2fff8000\n\nStarting kernel ...\n\nBooting Linux on physical CPU 0x0\nLinux version 6.6.10-xilinx-v2024.1-g3af4295e00ef (oe-user@oe-host) (arm-xilinx-linux-gnueabi-gcc (GCC) 12.2.0, GNU ld (GNU Binutils) 2.39.0.20220819) #1 SMP PREEMPT Sat Apr 27 05:22:24 UTC 2024\nCPU: ARMv7 Processor [413fc090] revision 0 (ARMv7), cr=18c5387d\nCPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache\nOF: fdt: Machine model: xlnx,zynq-7000\nearlycon: cdns0 at MMIO 0xe0001000 (options '115200n8')\nprintk: bootconsole [cdns0] enabled\nMemory policy: Data cache writealloc\ncma: Reserved 16 MiB at 0x3f000000 on node -1\nZone ranges:\n  Normal   [mem 0x0000000000000000-0x000000002fffffff]\n  HighMem  [mem 0x0000000030000000-0x000000003fffffff]\nMovable zone start for each node\nEarly memory node ranges\n  node   0: [mem 0x0000000000000000-0x000000003fffffff]\nInitmem setup node 0 [mem 0x0000000000000000-0x000000003fffffff]\npercpu: Embedded 12 pages/cpu s17940 r8192 d23020 u49152\nKernel command line: console=ttyPS0,115200 earlycon root=/dev/nfs rootfstype=nfs nfsroot=10.9.8.8:/nfsroot,tcp,nfsvers=3 ip=10.9.8.9:10.9.8.8:10.9.8.254:255.255.255.0::eth0:off rw\nDentry cache hash table entries: 131072 (order: 7, 524288 bytes, linear)\nInode-cache hash table entries: 65536 (order: 6, 262144 bytes, linear)\nBuilt 1 zonelists, mobility grouping on.  Total pages: 260608\nmem auto-init: stack:all(zero), heap alloc:off, heap free:off\nMemory: 1011916K/1048576K available (6144K kernel code, 229K rwdata, 1920K rodata, 1024K init, 146K bss, 20276K reserved, 16384K cma-reserved, 245760K highmem)\nSLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1\nrcu: Preemptible hierarchical RCU implementation.\nrcu:    RCU event tracing is enabled.\nrcu:    RCU restricting CPUs from NR_CPUS=4 to nr_cpu_ids=2.\nrcu: RCU calculated value of scheduler-enlistment delay is 10 jiffies.\nrcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=2\nNR_IRQS: 16, nr_irqs: 16, preallocated irqs: 16\nefuse mapped to (ptrval)\nslcr mapped to (ptrval)\nGIC physical location is 0xf8f01000\nL2C: platform modifies aux control register: 0x72360000 -&gt; 0x72760000\nL2C: DT/platform modifies aux control register: 0x72360000 -&gt; 0x72760000\nL2C-310 erratum 769419 enabled\nL2C-310 enabling early BRESP for Cortex-A9\nL2C-310 full line of zeros enabled for Cortex-A9\nL2C-310 ID prefetch enabled, offset 1 lines\nL2C-310 dynamic clock gating enabled, standby mode enabled\nL2C-310 cache controller enabled, 8 ways, 512 kB\nL2C-310: CACHE_ID 0x410000c8, AUX_CTRL 0x76760001\nrcu: srcu_init: Setting srcu_struct sizes based on contention.\nzynq_clock_init: clkc starts at (ptrval)\nZynq clock init\nsched_clock: 64 bits at 167MHz, resolution 6ns, wraps every 4398046511103ns\nclocksource: arm_global_timer: mask: 0xffffffffffffffff max_cycles: 0x26703d7dd8, max_idle_ns: 440795208065 ns\nSwitching to timer-based delay loop, resolution 6ns\nConsole: colour dummy device 80x30\nCalibrating delay loop (skipped), value calculated using timer frequency.. 333.33 BogoMIPS (lpj=1666666)\nCPU: Testing write buffer coherency: ok\nCPU0: Spectre v2: using BPIALL workaround\npid_max: default: 32768 minimum: 301\nMount-cache hash table entries: 2048 (order: 1, 8192 bytes, linear)\nMountpoint-cache hash table entries: 2048 (order: 1, 8192 bytes, linear)\nCPU0: thread -1, cpu 0, socket 0, mpidr 80000000\nSetting up static identity map for 0x100000 - 0x100060\nrcu: Hierarchical SRCU implementation.\nrcu:    Max phase no-delay instances is 1000.\nsmp: Bringing up secondary CPUs ...\nCPU1: thread -1, cpu 1, socket 0, mpidr 80000001\nCPU1: Spectre v2: using BPIALL workaround\nsmp: Brought up 1 node, 2 CPUs\nSMP: Total of 2 processors activated (666.66 BogoMIPS).\nCPU: All CPU(s) started in SVC mode.\ndevtmpfs: initialized\nVFP support v0.3: implementor 41 architecture 3 part 30 variant 9 rev 4\nclocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns\nfutex hash table entries: 512 (order: 3, 32768 bytes, linear)\npinctrl core: initialized pinctrl subsystem\nNET: Registered PF_NETLINK/PF_ROUTE protocol family\nDMA: preallocated 256 KiB pool for atomic coherent allocations\nthermal_sys: Registered thermal governor 'step_wise'\ncpuidle: using governor menu\nplatform axi: Fixed dependency cycle(s) with /axi/interrupt-controller@f8f01000\namba f8801000.etb: Fixed dependency cycle(s) with /replicator/out-ports/port@1/endpoint\namba f8803000.tpiu: Fixed dependency cycle(s) with /replicator/out-ports/port@0/endpoint\namba f8804000.funnel: Fixed dependency cycle(s) with /replicator/in-ports/port/endpoint\namba f889c000.ptm: Fixed dependency cycle(s) with /axi/funnel@f8804000/in-ports/port@0/endpoint\namba f889d000.ptm: Fixed dependency cycle(s) with /axi/funnel@f8804000/in-ports/port@1/endpoint\nhw-breakpoint: found 5 (+1 reserved) breakpoint and 1 watchpoint registers.\nhw-breakpoint: maximum watchpoint size is 4 bytes.\ne0001000.serial: ttyPS0 at MMIO 0xe0001000 (irq = 26, base_baud = 6249999) is a xuartps\nprintk: console [ttyPS0] enabled\nprintk: console [ttyPS0] enabled\nprintk: bootconsole [cdns0] disabled\nprintk: bootconsole [cdns0] disabled\nSCSI subsystem initialized\nmc: Linux media interface: v0.10\nvideodev: Linux video capture interface: v2.00\npps_core: LinuxPPS API ver. 1 registered\npps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt;\nPTP clock support registered\nEDAC MC: Ver: 3.0.0\nFPGA manager framework\nclocksource: Switched to clocksource arm_global_timer\nNET: Registered PF_INET protocol family\nIP idents hash table entries: 16384 (order: 5, 131072 bytes, linear)\ntcp_listen_portaddr_hash hash table entries: 512 (order: 0, 4096 bytes, linear)\nTable-perturb hash table entries: 65536 (order: 6, 262144 bytes, linear)\nTCP established hash table entries: 8192 (order: 3, 32768 bytes, linear)\nTCP bind hash table entries: 8192 (order: 5, 131072 bytes, linear)\nTCP: Hash tables configured (established 8192 bind 8192)\nUDP hash table entries: 512 (order: 2, 16384 bytes, linear)\nUDP-Lite hash table entries: 512 (order: 2, 16384 bytes, linear)\nNET: Registered PF_UNIX/PF_LOCAL protocol family\nRPC: Registered named UNIX socket transport module.\nRPC: Registered udp transport module.\nRPC: Registered tcp transport module.\nRPC: Registered tcp-with-tls transport module.\nRPC: Registered tcp NFSv4.1 backchannel transport module.\narmv7-pmu f8891000.pmu: hw perfevents: no interrupt-affinity property, guessing.\nhw perfevents: enabled with armv7_cortex_a9 PMU driver, 7 counters available\nworkingset: timestamp_bits=30 max_order=18 bucket_order=0\njffs2: version 2.2. (NAND) (SUMMARY)  \u00a9 2001-2006 Red Hat, Inc.\nfuse: init (API version 7.39)\nbounce: pool size: 64 pages\nio scheduler mq-deadline registered\nio scheduler kyber registered\nio scheduler bfq registered\nzynq-pinctrl 700.pinctrl: zynq pinctrl initialized\ndma-pl330 f8003000.dma-controller: Loaded driver for PL330 DMAC-241330\ndma-pl330 f8003000.dma-controller:      DBUFF-128x8bytes Num_Chans-8 Num_Peri-4 Num_Events-16\nbrd: module loaded\nloop: module loaded\nmacb e000b000.ethernet eth0: Cadence GEM rev 0x00020118 at 0xe000b000 irq 39 (00:0a:35:00:1e:53)\ni2c_dev: i2c /dev entries driver\ncdns-wdt f8005000.watchdog: Xilinx Watchdog Timer with timeout 10s\nEDAC MC: ECC not enabled\nXilinx Zynq CpuIdle Driver started\nsdhci: Secure Digital Host Controller Interface driver\nsdhci: Copyright(c) Pierre Ossman\nsdhci-pltfm: SDHCI platform and OF driver helper\nledtrig-cpu: registered to indicate activity on CPUs\nclocksource: ttc_clocksource: mask: 0xffff max_cycles: 0xffff, max_idle_ns: 537538477 ns\ntimer #0 at (ptrval), irq=42\nfpga_manager fpga0: Xilinx Zynq FPGA Manager registered\nNET: Registered PF_INET6 protocol family\nmmc0: SDHCI controller on e0100000.mmc [e0100000.mmc] using ADMA\nSegment Routing with IPv6\nIn-situ OAM (IOAM) with IPv6\nsit: IPv6, IPv4 and MPLS over IPv4 tunneling driver\nNET: Registered PF_PACKET protocol family\nRegistering SWP/SWPB emulation handler\nmmc0: new high speed SDHC card at address 59b4\nmmcblk0: mmc0:59b4 SD32G 29.1 GiB\n mmcblk0: p1 p2\nof-fpga-region fpga-region: FPGA Region probed\nof_cfs_init\nof_cfs_init: OK\nmacb e000b000.ethernet eth0: PHY [e000b000.ethernet-ffffffff:0c] driver [Generic PHY] (irq=POLL)\nmacb e000b000.ethernet eth0: configuring for phy/rgmii-id link mode\nmacb e000b000.ethernet eth0: Link is Up - 1Gbps/Full - flow control off\nIP-Config: Complete:\n     device=eth0, hwaddr=00:0a:35:00:1e:53, ipaddr=10.9.8.9, mask=255.255.255.0, gw=10.9.8.254\n     host=10.9.8.9, domain=, nis-domain=(none)\n     bootserver=10.9.8.8, rootserver=10.9.8.8, rootpath=\nclk: Disabling unused clocks\nVFS: Mounted root (nfs filesystem) on device 0:14.\ndevtmpfs: mounted\nFreeing unused kernel image (initmem) memory: 1024K\npetalinux:~$\n</code></pre>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#konosubakonoakua-2024-09-25t224317z","title":"konosubakonoakua \u00b7 2024-09-25T22:43:17Z","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#appendix","title":"Appendix","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#connect-to-outside-network-reach-the-internet","title":"connect to outside network (reach the Internet \ud83d\ude0a)","text":"<p>First, follow this guide #95  Second, boot petalinux via nfs, login Third, Add new ip address to <code>eth0</code> check current settings <pre><code>ifconfig eth0\n</code></pre> <pre><code>sudo ip address add 192.168.137.253/24 brd + dev eth0\nsudo ip route del default\nsudo ip route add default via 192.168.137.1 dev eth0\n</code></pre> <pre><code>ping 8.8.8.8 # should succeed\n</code></pre> Fourth, add nameserver <pre><code>echo \"nameserver 192.168.137.1\" | sudo tee -a /etc/resolv.conf\n</code></pre> <pre><code>curl www.baidu.com # should succeed\n</code></pre> But, failed to download from github \ud83e\uddd0\ud83e\uddd0\ud83e\uddd0. <pre><code>petalinux:~/Downloads$ wget https://github.com/junegunn/fzf/releases/download/v0.55.0/fzf-0.55.0-linux_armv7.tar.gz\n--2018-03-09 13:12:57--  https://github.com/junegunn/fzf/releases/download/v0.55.0/fzf-0.55.0-linux_armv7.tar.gz\nResolving github.com... 20.205.243.166\nConnecting to github.com|20.205.243.166|:443... connected.\nERROR: The certificate of 'github.com' is not trusted.\nERROR: The certificate of 'github.com' is not yet activated.\nThe certificate has not yet been activated\nThe certificate has expired\n</code></pre></p>  fzf running on petalinux"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#konosubakonoakua-2024-09-26t041140z","title":"konosubakonoakua \u00b7 2024-09-26T04:11:40Z","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#references","title":"references","text":"<ul> <li>csdn petalinux tutorial</li> <li>petalinux-tutorial-from-CSDN.pdf</li> <li>\u5f9e\u4e00\u958b\u59cb\u7684 Xilinx SoC \u958b\u767c\uff0cPetaLinux \u4f7f\u7528\uff08\u4e00\uff09</li> <li>alinx 7015b \u4f7f\u7528 petalinux \u5b9a\u5236 linux \u7cfb\u7edf</li> <li>xilinx-wiki PetaLinux Yacto Tips</li> <li>PetaLinux Tools for Embedded Linux Development Design Hub (DH246) (need login)</li> <li>hellofpga</li> <li>hellofpga petalinux tf boot</li> <li>boot issues</li> <li>kernel/nfsroot</li> <li>pxelinux issue</li> <li>Setting a Static IP Address Using the Kernel Command Line   </li> <li>set-static-ip-address</li> </ul>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#konosubakonoakua-2024-12-12t012036z","title":"konosubakonoakua \u00b7 2024-12-12T01:20:36Z","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#trouble-shooting","title":"Trouble shooting","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#petalinux-ssh-login-always-fails-the-first-time","title":"Petalinux SSH login always fails the first time","text":"<ul> <li>petalinux-ssh-login-always-fails-the-first-time</li> <li>dropbear-root-login-petalinux-20191</li> </ul>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#konosubakonoakua-2024-12-12t072258z","title":"konosubakonoakua \u00b7 2024-12-12T07:22:58Z","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#qemu","title":"Qemu","text":"<ul> <li>https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/862912682/Networking+in+QEMU</li> </ul>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#konosubakonoakua-2025-02-12t023747z","title":"konosubakonoakua \u00b7 2025-02-12T02:37:47Z","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#sd-card-preparation","title":"SD Card Preparation","text":"<ul> <li>How+to+format+SD+card+for+SD+boot</li> <li>[sd_format_fat32-ext4.sh](https://github.com/konosubakonoakua/imp-fpga-download/blob/main/sd_format_fat32-ext4.sh)</li> </ul>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#konosubakonoakua-2025-02-19t025424z","title":"konosubakonoakua \u00b7 2025-02-19T02:54:24Z","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#tips","title":"Tips","text":"<ul> <li>https://www.fpgadeveloper.com/adding-a-script-to-the-root-file-system-in-petalinux/</li> <li>https://www.fpgadeveloper.com/how-to-modify-u-boot-environment-variables-in-petalinux/</li> </ul>"},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#konosubakonoakua-2025-02-26t152447z","title":"konosubakonoakua \u00b7 2025-02-26T15:24:47Z","text":""},{"location":"notes/posts/98%23%5Bhw%5D%5Bsw%5D%5Bzynq%5D%5Bxilinx%5D%5Bfpga%5D%5Blinux%5D%20petalinux%20workflow/#patch-petalinux","title":"patch petalinux","text":"<ul> <li>https://www.fpgadeveloper.com/how-to-patch-petalinux/</li> </ul>"},{"location":"notes/posts/99%23%5Bsw%5D%5Blinux%5D%20auto-reconnect%20to%20serial%20port%20at%20%60_dev_ttyUSB_%60/","title":"99 [sw][linux] auto-reconnect to serial port at <code>/dev/ttyUSB*</code>","text":"<p>Thanks to lundmar, I have a new solution. :D</p>"},{"location":"notes/posts/99%23%5Bsw%5D%5Blinux%5D%20auto-reconnect%20to%20serial%20port%20at%20%60_dev_ttyUSB_%60/#install-tio","title":"install tio","text":"<p><pre><code>snap install tio --classic\n</code></pre> or check it here</p>"},{"location":"notes/posts/99%23%5Bsw%5D%5Blinux%5D%20auto-reconnect%20to%20serial%20port%20at%20%60_dev_ttyUSB_%60/#connect-it","title":"connect it","text":"<pre><code>tio -a latest --exclude-drivers=!(cp210x)\n</code></pre>"},{"location":"notes/posts/setup/","title":"Setup blog","text":"<p>Example</p> <p>Added a demo to test features supported by <code>mkdocs-material</code>. If we want to add a link to another page, do not use the local <code>flepath</code>.</p> <ul> <li>demo</li> </ul>"},{"location":"notes/posts/setup/#markdown-elements-reference","title":"Markdown elements reference","text":"<p>Info</p> <p>Here's the official tutorial:</p> <ul> <li>reference</li> </ul>"},{"location":"notes/posts/setup/#comments-system","title":"Comments system","text":"<p>Create a new file in <code>overrides/partials/comments.html</code>. Replace the selected line with your own <code>js</code> code. overrides/partials/comments.html<pre><code>{% if page.meta.comments %}\n  &lt;h2 id=\"__comments\"&gt;{{ lang.t(\"meta.comments\") }}&lt;/h2&gt;\n  &lt;!-- Insert generated snippet here --&gt;\n\n  &lt;!-- Synchronize Giscus theme with palette --&gt;\n  &lt;script&gt;\n    var giscus = document.querySelector(\"script[src*=giscus]\")\n\n    // Set palette on initial load\n    var palette = __md_get(\"__palette\")\n    if (palette &amp;&amp; typeof palette.color === \"object\") {\n      var theme = palette.color.scheme === \"slate\"\n        ? \"transparent_dark\"\n        : \"light\"\n\n      // Instruct Giscus to set theme\n      giscus.setAttribute(\"data-theme\", theme) \n    }\n\n    // Register event handlers after documented loaded\n    document.addEventListener(\"DOMContentLoaded\", function() {\n      var ref = document.querySelector(\"[data-md-component=palette]\")\n      ref.addEventListener(\"change\", function() {\n        var palette = __md_get(\"__palette\")\n        if (palette &amp;&amp; typeof palette.color === \"object\") {\n          var theme = palette.color.scheme === \"slate\"\n            ? \"transparent_dark\"\n            : \"light\"\n\n          // Instruct Giscus to change theme\n          var frame = document.querySelector(\".giscus-frame\")\n          frame.contentWindow.postMessage(\n            { giscus: { setConfig: { theme } } },\n            \"https://giscus.app\"\n          )\n        }\n      })\n    })\n  &lt;/script&gt;\n{% endif %}\n</code></pre></p>"},{"location":"notes/posts/setup/#bugs","title":"Bugs","text":"<ul> <li> date time in blog preview page not showing.</li> </ul>"}]}